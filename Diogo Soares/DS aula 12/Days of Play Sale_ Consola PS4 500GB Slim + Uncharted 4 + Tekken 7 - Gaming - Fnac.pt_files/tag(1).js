!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r=n(6),i=n(14);i.retailerContext=r;var o=i.__sto,a=o.utils.deferred(),c=a.promise,u=window.jQuery;o.utils.retailerMethod=n(31),u(function(){try{a.resolve()}catch(t){}}),c.then(function(){return i.init()}).then(function(t){return t.load(),t}).then(function(t){var e=window.jQuery;return e(document).on("click",".js-ProductBuy-add,.js-ProductBuy-addInline",function(){var n=e(this).closest(".Carousel-item,.Article-mosaicItem,.Article-item,.ProductSummary").find(".js-minifa-title,.thumbnail-titleLink,.ProductSummary-title").text();n?t.sendHit({ta:"abp",tl:this.getAttribute("data-prid"),pl:o.utils.fn.cleanString(n)}):t.sendHit({ta:"abp",tl:this.getAttribute("data-prid")})}),t}).then(function(t){return window.setTimeout(function(){if(void 0===o.globals.servers_data){var t,e,n=window.document.getElementById("sto_fallback"),r={placements:{}};null!==n&&(t=n.getAttribute("data-format"),e=n.getAttribute("data-url"),r.placements[t]={script:e},o.deliv(r),o.deliv=function(){o.track({ta:"err",tl:"Fallback on"})})}},1e3),t}).then(function(t){if("orderpipe/pop/merci"===t.value("rp")){var e=window.tc_vars.order_products,n=window.__sto.utils.fn,r=n.map(e,function(t){var e="string"==typeof t[4]?parseInt(t[4],10):0,r="string"==typeof t[7]?parseFloat(t[7],10):0;return{name:n.cleanString(t[1]),id:t[0],qty:e,price:r,promo:!1}});t.basket(r,{trackAction:"buy"},window.tc_vars.order_id)}}).then(null,function(t){window.__sto.track({trackAction:"err",trackLabel:t})})},function(t,e,n){"use strict";var r=n(2),i=t.exports=function(){return new r.Deferred};i.all=n(7),i.race=n(9),i.Promise=n(8),i.Promise.all=i.all,i.Promise.race=i.race},function(t,e){"use strict";function n(t,e,n){return t.state!==s?t:(t.state=e,t._value=n,o(t))}function r(t){var e={first:!0};return[function(n){e.first&&(e.first=!1,i(t,n))},function(r){e.first&&(e.first=!1,n(t,f,r))},e]}function i(t,e){if(t===e&&n(t,f,new TypeError("Error : trying to resolve a deferred with itself")),t.state!==s)return t;var i,o,a=typeof e,c=!1;if(("object"===a||"function"===a)&&null!==e){o=r(t);try{if(i=e.then,"function"!=typeof i)return n(t,l,e);i.call(e,o[0],o[1]),c=!0}catch(e){o[2].first&&!c&&n(t,f,e)}}return!c&&(o&&o[2].first||!o)?n(t,l,e):t}function o(t){if(t.state===s)return t;if(t._next){var e,n;for(e=0,n=t._next.length;e<n;e+=1)a(t._next[e],t._value,t.state);n&&(t._next=[])}return t}function a(t,e,r){return setTimeout(function(){var o;try{o=t._handlers[r].call(void 0,e)}catch(e){return n(t,f,e)}return i(t,o)},0),t}function c(t,e){var n=r(this);t="function"==typeof t?t:n[0],e="function"==typeof e?e:n[1],this._handlers=[t,e],this._next=[],this.state=s,this._value=void 0}function u(){this.promise=new c}var s=-1,l=0,f=1;c.prototype.then=function(t,e){var n=new c(t,e);return this.state!==s?a(n,this._value,this.state):(this._next.push(n),n)},c.prototype.catch=function(t){return this.then(null,t)},u.prototype.resolve=function(t){return i(this.promise,t)},u.prototype.reject=function(t){return n(this.promise,f,t)},t.exports=e={Thenable:c,Deferred:u}},function(t,e){t.exports="//tk.storetail.io/"},function(t,e,n){"use strict";var r=n(26),i=n(27),o=r.reduce(r,function(t,e,n){return t[n]=e,t},{});t.exports=r.reduce(i,function(t,e,n){return t[n]=e,t},o)},function(t,e){"use strict";function n(){}function r(t,e){var n,r=t.cookie;return(n=r.indexOf(e))>-1?(e+="=",r.slice(n+e.length).split(";")[0]):null}function i(t,e,n,r,i){var o=null,a=[e,n].join("=");i=["domain",i].join("="),"number"!=typeof r||isNaN(r)||(o=(new Date).getTime()+r,o=new Date(o).toUTCString(),o=["expires",o].join("=")),null!==o?t.cookie=[a,o,"path=/",i].join(";"):t.cookie=[a,"path=/"].join(";")}function o(t){this.name=t}var a=function(t){return new o(t)};o.prototype.read=function(){return a.read(this.name)},o.prototype.write=function(t,e,n){return a.write(this.name,t,e,n),this},o.prototype.delete=function(){return a.delete(this.name),this};var c=!1;t.exports=e=function(t){if(c)return a;var e=t.location.hostname.split(".");e=e.length>2?e.slice(e.length-2).join("."):e.join("."),e="."+e;var o="cookie"in t&&(t.cookie.length>0||(t.cookie="test").indexOf.call(t.cookie,"test")>-1);return o?(a.read=function(e){return r(t,e)},a.write=function(n,r,o,a){return o="number"==typeof o?o:18e5,i(t,n,r,o,a||e),this},a.delete=function(t){return this.write(t,"",-100)},a.has=function(t){return null!==this.read(t)},a.enabled=o):(a.enabled=o,a.write=n,a.has=n,a.delete=n,a.read=n),c=!0,a}},function(t,e,n){"use strict";var r=function(t,e,n){var r={retailName:"fnac_portugal",retailPage:"",retailSearch:null},i=t(".home-title").first(),o=t(".Search-title").first(),a=t(".Breadcrumb-item").find("span[itemprop='title']"),c=[],u=window.tc_vars||{},s=u.product_id;return o.length>0&&(o=o.find("h1").clone(),o.find("span").remove(),r.retailSearch="_"+n.cleanString(o.text().toLowerCase())+"_"),"/"===e.pathname?r.retailPage="home":i.length>0?r.retailPage=n.cleanString(i.first().find("h1").text().toLowerCase()):a.length>0?(a.each(function(){c.push(n.cleanString(t(this).text()))}),r.retailPage=c.join("/")):r.retailPage=decodeURIComponent(e.href.split("://")[1].split("?")[0]).split("/").slice(1).map(n.cleanString).join("/"),""!==s&&void 0!==s&&(r.retailPage+="/product/"+s),r};t.exports=r},function(t,e,n){"use strict";var r=n(2).Deferred;t.exports=function(t){if(!("object"==typeof t&&"number"==typeof t.length&&t.length>0))throw new TypeError("Deferred.all: argument must be array-like");for(var e=new Array(t.length),n=new r,i=-1,o=t.length,a=o;++i<o;)!function(t,i){(new r).resolve(t).then(function(t){e[i]=t,a--,a||n.resolve(e)},function(t){n.reject(t)})}(t[i],i);return n.promise}},function(t,e,n){"use strict";function r(t){var e=new o;this._deferred=e;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(t){e.reject(t)}}var i=n(2),o=i.Deferred;r.prototype.then=function(t,e){return this._deferred.promise.then(t,e)},r.prototype.catch=function(t){return this._deferred.promise.then(t)},t.exports=r},function(t,e,n){"use strict";function r(t){return function(e){t.resolve(e)}}function i(t){return function(e){t.reject(e)}}var o=n(2);t.exports=function(t){var e,n,a=new o.Deferred,c=r(a),u=i(a);for(e=0,n=t.length;e<n;e+=1)t[e].then(c,u);return a.promise}},function(t,e){t.exports={load:"lod",display:"imp",click:"clk",action:"act",event:"evt",view:"view"}},function(t,e){t.exports={ut:["sessionTime"],up:["sessionPages"],uc:["userCookies"],ts:["techScreen"],tw:["techWindow"],rn:["retailName"],rs:["retailShop"],rp:["retailPage","fp"],rk:["retailSearch"],re:["retailPlacements"],tf:["trackFrom"],tb:["trackBrand","brand"],to:["trackOperation","operation"],ti:["trackInsertion","insertion"],tc:["trackCreative","creative"],tt:["trackTime"],tv:["trackVisibility"],tg:["trackGoal"],tp:["trackGoalStep"],tn:["trackValue"],tl:["trackLabel","label"],ta:["trackAction","action"],vf:["trackUid"],vs:["trackSessionid"],te:["trackEvent","event"],tz:["trackZone","zone"],fo:["forceOperation"],lt:["latitude","forceLatitude"],fc:["forceCity","city"],lg:["longitude","forceLongitude"],pl:["productLabel"]}},function(t,e){t.exports={id:["<id>","</id>"],name:["<name>","</name>"],promo:["<promo>","</promo>"],qty:["<qty>","</qty>"],price:["<price>","</price>"]}},function(t,e,n){!function(){"use strict";var e=function(t,e){var n=window.document.referrer,r=window.location.hash,i=null;if(r.length>0?i=r:n.length>0&&(i=n.split("://")[1].split("/")[0].split(".").join("_")),i="string"==typeof i?e.cleanString(i):null,!t.enabled)return{sessionTime:null,sessionPages:null,userCookies:0,trackFrom:i};var o=new Date,a={session:"sto__session",pageCount:"sto__count"},c={userCookies:1,sessionPages:null,sessionTime:null,trackFrom:i},u=18e5,s=t.read(a.session);s=parseInt(s,10);var l=(new Date).setTime(s);if(isNaN(l)||o.getTime()-l>1728e5)t.write(a.session,o.getTime(),u),t.write(a.pageCount,"0",u),c.sessionPages=0,c.sessionTime=0;else{var f=t.read(a.pageCount);f=parseInt(f,10),isNaN(f)?c.sessionPages=0:c.sessionPages=f+1,c.sessionTime=o.getTime()-s,t.write(a.pageCount,c.sessionPages,u),t.write(a.session,s,u)}return c};t.exports=e}()},function(t,e,n){(function(e){"use strict";var r,i,o=e.location,a=e.screen||{availWidth:0,availHeight:0,width:0,height:0},c=e.document,u=e.jQuery,s=n(5)(e.document),l=n(1),f=n(4),d=n(15),p=n(13),h=n(18),v=n(23).trackerFactory,m=n(25),y=n(24),g=2592e6,w=18e5;d.update({techWindow:[a.availWidth,a.availHeight].join("x"),techScreen:[a.width,a.height].join("x")});var b={},k={},x={},_={globals:{events:[]},tracker:function(){return v(d.copy())},getTrackers:function(t){if(void 0!==t){if(b.hasOwnProperty(t))return b[t];throw new Error("Key does not exist")}return b},verif:function(t,e){try{s.write("sto__vuid",t,g),e&&s.write("sto__sessionid",e,w)}catch(t){this.track({ta:"err",tl:"problem with verif"})}return this},deliv:function(t){var e=this;return l().resolve(t).then(function(t){return t.data&&(e.globals.server_data=t.data),t.unexposed&&f.map(t.unexposed,function(t,e){var n=v(d.copy()).update(t).update({tc:e});n.sendHit({ta:"noexp"})}),t.placements}).then(function(t){var e;for(e in b)t.hasOwnProperty(e)||m(k,b,e);f.map(t,function(t,e){var n,r=b[e];if(void 0!==r){if(r=v(d.copy()).update(t),b[e]=r,r.value("tc")===t.tc&&(n=x[e],"function"==typeof n))return void(n()?r.display():h(c,t.script));m(k,b,e,!0),h(c,t.script)}else b[e]=v(d.copy()).update(t),h(c,t.script)})}).then(null,function(t){_.track({action:"err",event:"onDeliv",label:t})}),this},regen:function(){var t,n=p(s,f),i=r.retailerContext(e.jQuery,o,f,_.utils);return d=d.dangerouslyUpdate(n).dangerouslyUpdate(i),t=v(d.copy()),t.load(),this},load:function(t,e,n){return l().resolve(b).then(function(r){var i,o;if(r[t])return o="object"==typeof e?e:{},i="function"==typeof e?e:n,o.tracking=r[t].value(),i(r[t].copy().update("re",t),_.utils,o);throw new TypeError("Unexpected format type : "+t)}).then(function(e){var n;if(_.globals.spa){if("object"!=typeof e||void 0===e[t])throw new Error("builder inside sto.load should return a clean up object");for(n in e)n.indexOf("__exists__")===-1&&(k[n]=e[n],x[n]=e[n+"__exists__"])}}).then(null,function(e){var n=b[t]?b[t]:null;n?n.sendHit({action:"err",event:"onBuild",label:e}):_.track({action:"err",event:"onLoad",label:e,insertion:t})}),this},utils:{loadScript:h,cookie:s,fn:f,ga:function(){var t=e.GoogleAnalyticsObject;if("function"==typeof e[t]){var n=f.slice(arguments,0);e[t].apply(e[t],n)}},$:u,deferred:l},track:function(t,e){var n="object"==typeof e&&"number"==typeof e.length;return n?this.tracker().basket(e,t):this.tracker().sendHit(t),this},forceContext:function(t){d=t}};r={settings:{},retailerContext:{},init:function(){return l().resolve(this).then(function(t){var e=c.getElementById("sto_tag"),n=y(e);return d.update(n),t}).then(function(t){var n,r=typeof t.retailerContext;if("object"===r)n=t.retailerContext;else if("function"===r)try{n=t.retailerContext(e.jQuery,o,f,_.utils)}catch(t){console.log(t)}if(d.update(n),!e.__sto){e.__sto=_;try{i=p(s,f),d.update(i)}catch(t){i={}}finally{d.update(i)}return v(d.copy())}try{d.update(e.__sto.tracker().value())}finally{throw new Error("TAG : already loaded")}})},__sto:_},t.exports=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(){return c.reduce(u,function(t,e,n){return t[n]=null,t},{})}function i(){this._value=r()}function o(t,e,n){var r=s[n];return r&&null===t[r]&&(t[r]=e),t}function a(t,e,n){return null!==e&&(t[n]=e),t}var c=n(4),u=n(11),s=c.reduce(u,function(t,e,n){if(t[n])throw new Error("Duplicate key in alias");return t[n]=n,c.reduce(e,function(t,e){return t[e]=n,t},t)},{});i.prototype={dangerouslyUpdate:function(t){var e;for(e in t)this._value[s[e]]=t[e];return this},update:function(t,e){return"object"==typeof t?c.reduce(t,o,this._value):"string"==typeof t&&o(this._value,e,t),this},copy:function(){var t=new i;return t.update(this._value)},value:function(t){return s[t]?this._value[s[t]]:c.reduce(this._value,a,{})},toString:function(){var t=this._value;return c.reduce(u,function(e,n,r){return null!==t[r]&&e.push(r+"="+t[r]),e},[]).join("&")},alias:function(t){var e=s[t];if(!t||!e)throw new Error("Bad key");return e}},t.exports=new i},function(t,e,n){var r=n(3),i=n(1);t.exports=function(t){var e=r+"x?debug=1&ta=lod&"+t,n=i(),o=new window.XMLHttpRequest;return o.open("GET",e),o.onload=function(){n.resolve(o.responseText)},o.onerror=function(){n.reject()},o.send(),n.promise}},function(t,e){"use strict";function n(t,e){var n,r,i=[],o=[];n="erms_"+(t.to||"NoCampaign"),i.push(t.ta),t.te&&i.push(t.te),t.tz&&o.push(t.tz),t.tl&&o.push(t.tl),t.tg&&o.push(t.tg),t.tp&&o.push(t.tp),e?(o.push(e[0].id),r=parseInt(100*e[0].price,10)):t.tn&&(r=parseInt(t.tn)),i=i.join("_"),o=o.join("_"),"function"==typeof window.ga&&window.ga("sto_tracker.send","event",n,i,o||i,r)}t.exports=n,t.exports=n},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e){var n=t.createElement("SCRIPT"),i=r();return n.src=e,n.type="text/javascript",n.charset="utf-8",n.crossOrigin="anonymous",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,i.resolve())}:(n.onload=function(){i.resolve()},n.onerror=function(){i.reject()}),t.getElementsByTagName("HEAD")[0].appendChild(n),i.promise}},function(t,e,n){"use strict";var r=window.document,i=n(3);t.exports=function(t){var e=r.createElement("iframe"),n=r.body;e.src=i+"/js?debug=1&ta=lod&"+t,e.setAttribute("style","width: 80%; height: 80%; position: fixed; background-color: white; z-index: 500000; top: 0; left: 0"),n.appendChild(e),n.addEventListener("click",function t(){n.removeChild(e),n.removeEventListener("click",t)})}},function(t,e,n){"use strict";var r="object"==typeof r&&r.document&&r.window?r:window,i=r.document,o=n(3),a=o+"fo?";t.exports=function(t,e){var n=(new Date).getTime(),r="<form target='"+n+"' action='"+a+(t||"")+"' method='post' style='display: none;'><input name='bk' value='"+e+"'></form>",o="<iframe id='"+n+"' name='"+n+"' style='display: none;'></iframe>",c=i.createElement("DIV");c.innerHTML=r+o,i.getElementsByTagName("body")[0].appendChild(c),c.firstChild.submit()}},function(t,e,n){"use strict";var r=window.document,i=n(3);t.exports=function(t){var e=r.createElement("SCRIPT");return e.src=i+"js?"+t,e.type="text/javascript",r.getElementsByTagName("head")[0].appendChild(e),e}},function(t,e,n){"use strict";function r(t){return i.reduce(t,function(t,e){var n="";return n+=o.id[0]+e.id+o.id[1],n+=o.name[0]+i.cleanString(e.name)+o.name[1],n+=o.promo[0]+(e.promo?"Y":"N")+o.promo[1],n+=o.qty[0]+("number"!=typeof e.qty||isNaN(e.qty)?0:e.qty)+o.qty[1],n+=o.price[0]+("number"!=typeof e.price||isNaN(e.price)?0:e.price).toFixed(2)+o.price[1],t+="<li>"+n+"</li>"},"")}var i=n(4),o=n(12);t.exports=function(t,e){var n="";return n+=t.items&&t.items.length>0?"<itms>"+r(t.items)+"</itms>":"<itms></itms>",n+="<tv>"+t.totalValue.toFixed(2)+"</tv>",void 0!==e&&(n+="<id>"+e+"</id>"),"<bsk>"+n+"</bsk>"}},function(t,e,n){"use strict";function r(t){this.context=t}function i(t){var e="object"==typeof t?t:{};return e.trackTime=(new Date).getTime()-p,e.trackUid=a.read("sto__vuid"),e.trackSessionid=a.read("sto__sessionid"),e}var o=n(4),a=n(5)(window.document),c=n(10),u=n(21),s=n(19),l=n(16),f=n(22),d=n(20),p=(new Date).getTime(),h=n(17),v={sendHit:function(t){var e=i(t),n=this.context.copy().update(e),r=n.toString();return window.__sto.globals.events.push({data:n.value()}),"imp"===n.value("ta")&&window.__sto.utils.retailerMethod&&window.__sto.utils.retailerMethod.customTracking&&window.__sto.utils.retailerMethod.customTracking(n),u(r),h(n.value()),this},basket:function(t,e,n){var r,a,c,u="object"==typeof t&&"number"==typeof t.length,s=i(e),l=this.context.copy().update(s);if(!u)throw new TypeError("tracker.basket : basketItems arg must be an Array like object");return r=o.reduce(t,function(t,e){return"number"!=typeof e.price||"number"!=typeof e.qty||isNaN(e.qty)||isNaN(e.price)||(t.totalValue+=e.price*e.qty),t.items.push(e),t},{totalValue:0,items:[]}),window.__sto.globals.events.push({data:l.value(),basket:r}),a=l.toString(),c=f(r,n),d(a,c),h(l.value(),t),this},value:function(t){return this.context.value(t)},update:function(t,e){return this.context.update(t,e),this},copy:function(){return new r(this.context.copy())},debug:function(){var t=this.context.copy().toString();s(t)},getDebug:function(){var t=this.context.copy().toString();return l(t)}};v=o.reduce(c,function(t,e,n){return t[n]=function(t){var n="object"==typeof t?t:{};return n.trackAction=e,this.sendHit(n)},t},v),o.map(v,function(t,e){r.prototype[e]=t}),t.exports={trackerFactory:function(t){return new r(t)},trackerConstructor:r}},function(t,e){"use strict";t.exports=function(t){var e,n,r,i={};return null!==t&&(e=t.src.split("?")[1],"undefined"!=typeof e&&(n=e.split("#"),n.forEach(function(t){r=t.split("="),i[r[0]]="undefined"==typeof r[1]?"":r[1]}))),i}},function(t,e){"use strict";t.exports=function(t,e,n,r){var i=t[n];try{if("function"!=typeof i)throw new Error("Removing func is not a function");i()}catch(t){e[n].sendHit({action:"err",event:"onRemove",label:t})}delete t[n],void 0===r&&delete e[n]}},function(t,e,n){!function(e,n){"use strict";t.exports=n}(this,function(){"use strict";function t(t){return t}function e(e,n){if("number"!=typeof e)throw new TypeError("function.loop : arguments must be a Number");for(var r="function"==typeof n?n:t,i=-1,o=[];++i<e;)o.push(r(i));return o}function n(n,r){if("object"!=typeof n)throw new TypeError("functions.map : first arg must be an object");var i="function"==typeof r?r:t,o=function(t,e,n){var r;return t?{length:n.length,iteratee:function(t){return e(n[t],t)}}:(r=l(n),{length:r.length,iteratee:function(t){return e(n[r[t]],r[t])}})}("number"==typeof n.length,i,n);return e(o.length,o.iteratee)}function r(e,r,i){var o=i,a="function"==typeof r?r:t;return n(e,function(t,e){o=a(o,t,e)}),o}function i(t,e,n){return u.call(t,e,n)}function o(t){var e=i(arguments,1);return s.apply(t,e)}function a(e,n){return n="function"==typeof cb?cb:t,r(e,function(t,e,r){return n(e,r)&&t.push(e),t},[])}var c=[],u=c.slice,s=c.concat,l=function(){if("function"==typeof Object.keys)return function(t){return Object.keys(t)};var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,c=[];for(o in i)t.call(i,o)&&c.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&c.push(n[a]);return c}}();return{loop:e,map:n,reduce:r,slice:i,concat:o,filter:a,keys:l,identity:t}}())},function(t,e,n){!function(e,n){"use strict";t.exports=n}(this,function(){function t(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function e(e){var n=[[/[éèëê]/g,"e"],[/[àáâãäå]/g,"a"],[/[ìíîï]/g,"i"],[/[òóôõö]/g,"o"],[/[ùúûü]/g,"u"],[/ñ/g,"n"],[/ç/g,"c"],[/æ/g,"ae"],[/œ/g,"oe"],[/[\.,]/g,""],[/[-_]/g," "],[/\n\r\t/g," "],[/\s+/g," "],[/[^a-z0-9\/]/g,"_"],[/_+/g,"_"],[/_$/,""],[/\/$/,""]],r=-1,i=n.length;for(e=e.toLowerCase(),e=t(e);++r<i;)e=e.replace(n[r][0],n[r][1]);return e}return{trim:t,cleanString:e}}())},function(t,e,n){var r=n(1);t.exports=function(t){var e=r(),n=window.jQuery,i={};return n.get(t,function(t){n(t).find(".Article-item,.Article-mosaicItem").each(function(){var t=n(this),e=t.find(".js-ProductBuy-add").attr("data-prid");i[e]={bloc:t}}),e.resolve(i)}),e}},function(t,e){"use strict";t.exports=function(t,e,n,r,i){function o(t,e){return(t%e+e)%e}function a(){var e,n;e=o(c-1,s),n=o(c+1,s),t.find(".sto-arrow-left").attr("data-id",u[e]),t.find(".sto-arrow-right").attr("data-id",u[n]),t.find(".sto-product-center").attr("data-id",u[c]),t.find(".Article-item,.Article-mosaicItem").hide().eq(c).show()}i=i||5;var c=0,u=n.filter(function(t){return r.hasOwnProperty(t)}).slice(0,i),s=u.length,l=window.jQuery,f=new window.Fnac.Views.ProductBuyView;if(0===s)throw new Error("no products");return 1===s&&t.find(".sto-arrow-left,.sto-arrow-right").hide(),t.attr("data-count",s),u.forEach(function(e){var n=r[e].bloc.clone();t.find(".sto-product-container").append(n)}),e.display(),t.on("click",".sto-arrow-left",function(){c=o(c-1,s),e.sendHit({ta:"act",te:"CarrousselLeft"}),a()}),t.on("click",".sto-arrow-right",function(){c=o(c+1,s),e.sendHit({ta:"act",te:"CarrousselRight"}),a()}),t.on("click",".liste",function(){e.sendHit({ta:"act",te:"AddToList",tl:u[c]})}),t.on("click",".js-ProductBuy-add",function(){var t=l(this).closest(".Article-item,.Article-mosaicItem"),n=t.find(".js-ProductBuy"),r=n.attr("data-product-id"),i=n.attr("data-catalog-id"),o=n.attr("data-offer-id"),a=t.find(".userPrice,.thumbnail-price").text(),c=t.find(".js-minifa-title,.thumbnail-titleLink").text(),u=a.match(/\d* ?\d+,\d+/);f.addBehavior({productId:r,offerId:o,catalogId:i}),e.basket([{id:r,qty:parseInt(1,10),promo:!1,name:c,price:parseFloat(u[0].replace(",","."))}],{ta:"abk"})}),t.on("click",".moins",function(){e.sendHit({ta:"qty",te:"QuantityLess",tl:u[c]})}),t.on("click",".plus",function(){e.sendHit({ta:"qty",te:"QuantityMore",tl:u[c]})}),t.on("blur","input.text",function(){var t=parseInt(this.value,10);e.sendHit({ta:"qty",te:"QuantityChange",tl:u[c],tn:t})}),t.on("click","p>a,.picture>a",function(t){var n=this.href;t.preventDefault(),t.stopPropagation(),e.sendHit({ta:"clk",tl:u[c]}),window.setTimeout(function(){document.location.href=n},100)}),a(),{container:t,products:u,changeState:function(t){var e=u.indexOf(t);if(e===-1)throw new Error(t+"is not in the products");c=o(e,s),a()}}}},function(t,e){t.exports=function(t){return"object"==typeof t&&t.length&&(t=t.join("+")),"/SearchResult/ResultList?aspx?Search="+t}},function(t,e,n){var r=n(28),i=n(29),o=n(30);t.exports={crawl:r,createFormat:i,genSearchUrl:o}}]);