!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),i=n(8),r=new o(window.APN_macros.ma,i.createPlaceholder());window.APN_macros=null,r.on("done",function(){r.logOutcome()}),r.start()},function(t,e,n){function o(t,e){var n;if(void 0===t||t instanceof Array==!1)throw new Error("Passback requires an array of handlers");this._container=e,this._handlers=l(t),n=this._handlers[this._handlers.length-1],this._endCall=l(n),n.isFinalCall=!0,u.validateChain(t),this._logger=new r}var i=n(2),r=n(3),s=n(5),a=n(10),c=n(8),l=n(11),d=n(4),u=n(12),h=n(13),f=n(14);n(7)(),n(15)(),o.prototype.start=function(){if(window.postMessage){var t=this._handlers;this.next(t[0],t.slice(1))}else this.startEndCall(this._endCall)},o.prototype.next=function(t,e){function n(n){var o,r;return n&&"object"==typeof n?(n.adFilled?(o="SUCCESS",i.clearChain(c)):o=n.timedOut?"TIMEOUT":"NOBID",r=n.latency,u.setSession(l),"SUCCESS"===o?(i._logger.log(t,{code:o,reason:h[o],latency:r,url:t.result_cb}),f.log(t.result_cb,{reason:h[o],latency:r}),i.trigger("done")):e.length?(i._logger.log(t,{code:o,reason:h[o],latency:r,url:t.result_cb}),f.log(t.result_cb,{reason:h[o],latency:r}),i.next(a,c)):(i._logger.log(t,{code:o,reason:h[o],latency:r}),i.startEndCall(i._endCall,{code:o,reason:h[o],latency:r})),void 0):(console.error("anx-mediation: INTERNALERROR"),i.trigger("done"),void 0)}var o,i=this,r="__adnxs_passback__"+d.id(),a=e[0],c=e.slice(1),l=d.getSessionId(t.result_cb);o=new s({passbackId:r,width:t.handler[0].params.width,height:t.handler[0].params.height,content:t.handler[0].content,timeout:t.timeout_ms,container:this._container}),this._logger.log(t,{code:"INIT",url:t.init_cb}),f.log(t.init_cb),o.once("complete",n),window.visibly.onHidden(function(){window.visibly.offHidden(r),o.offAll()},r),d.nextTick(function(){o.startRequest()})},o.prototype.clearChain=function(t){return t&&t.length?(d.each(t,function(t){var e=d.getSessionId(t.result_cb);u.setSession(e)}),void 0):!1},o.prototype.startEndCall=function(t,e){var n,o=this,i=t.result_cb;e&&(i=t.result_cb+"&reason="+encodeURI(h[e.reason])+"&latency="+encodeURI(e.latency),o._logger.log(t,{code:"CONTINUE",reason:e.reason,latency:e.latency,url:i}));var r='<script src="'+i+'" type="text/javascript"></script>';n=new a({width:t.handler[0].params.width,height:t.handler[0].params.height,content:r,container:this._container}),d.nextTick(function(){n.startRequest(),n.onUpdate(o.resizer),o.trigger("done")})},o.prototype.logOutcome=function(){this._logger.flush()},o.prototype.resizer=function(t){var e=c.getIframeDocument(t),n=c.getViewport(e),o=n[0],i=n[1];o>0&&i>0&&(t.width=o,t.height=i)},i.mixin(o.prototype),t.exports=o},function(t){t.exports={mixin:function(t){t.on=function(t,e,n){n=n||!1,this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push([e,n])},t.once=function(t,e){this.on(t,e,!0)},t.trigger=function(t){this.events=this.events||{};var e=(this.events[t]||[]).length,n=Array.prototype.slice.call(arguments,1);if(e)for(var o=e-1;o>=0;o--)this.events[t][o][0].apply(this,n),this.events[t][o][1]&&this.events[t].splice(o,1)},t.offAll=function(){this.events={}}}}},function(t,e,n){function o(){this._logs=[]}function i(t){return"creative ids "+t}function r(){console.group?console.group.apply(console,arguments):console.log.apply(console,arguments)}function s(){console.groupCollapsed?console.groupCollapsed.apply(console,arguments):r.apply(this,arguments)}function a(){console.groupEnd&&console.groupEnd()}function c(t){switch(t){case"SUCCESS":return"green";case"CONTINUE":return"orange";case"NOBID":return"orange";default:return"red"}}function l(t){var e=["anx-mediation: ",t.code,t.latency?t.latency+"ms":"--"];return e.join(" ")}var d=n(4);o.prototype.flush=function(){if(this._logs.length>0){var t,e=this._logs[this._logs.length-1]||{},n=d.reduce(this._logs,function(t,e){return t[e.creativeIds]||(t[e.creativeIds]=[]),t[e.creativeIds]=t[e.creativeIds].concat(e),t},{});r("anx-mediation %c"+e.code,"color: "+c(e.code)),d.each(this._logs,function(e){var o;t!==e.creativeIds&&(t&&a(),o=n[e.creativeIds][n[e.creativeIds].length-1],t=e.creativeIds,s("anx-mediation: %c"+o.code+" %c"+i(e.creativeIds),"color: "+c(o.code),"color: black"));var r=l(e);console.log(r)}),t&&a(),a()}},o.prototype.log=function(t,e){var n=d.map(t.handler,function(t){return t.params.creativeId}).join(",");this._logs=this._logs.concat({creativeIds:n,code:e.code,reason:e.reason,latency:e.latency,url:e.url,content:t.handler[0].content,handlers:t.handler.length})},t.exports=o},function(t){t.exports={noop:function(){},find:function(t,e){for(var n,o=t.length,i=0;o>i;){if(e(t[i])){n=t[i];break}i++}return n||null},reduce:function(t,e,n){return this.each(t,function(t,o){n=e(n,t,o)}),n},map:function(t,e){var n=[];return this.each(t,function(t){n.push(e(t))}),n},each:function(t,e){var n=t.length,o=0;if(!n)return!1;for(;n>o;)e(t[o],o,t),o++},getSessionId:function(t){var e=t.match(/[?&]session=([^&]+)/);return e&&e[1]?e[1]:""},doGet:function(t){var e=new Image;e.src=t},id:function(){return Math.random().toString(36).substr(2,9)+Date.now()},nextTick:function(t){setTimeout(t,0)}}},function(t,e,n){function o(t){if(void 0===t||"object"!=typeof t)throw new Error("MediationFrame invoked without a `params` object");var e=this,n=e._passbackId=t.passbackId,o=t.width,i=t.height;e._postMessage=new s,e._timeout=t.timeout,e._content=t.content,e._container=t.container,e._iframe=a.createFrame(o,i,n||""),n&&(window[n]=function(t){t?d[n]=window.setTimeout(function(){d[n]=null,e._onComplete(t,!1)},u):e._onComplete(t,!1)}),e._postMessage.on("message",function(t){t===e._passbackId&&e._onComplete(!1,!1)})}function i(t,e){var n=t;return e&&(n="<script>"+l.replace(/\${PASSBACK_ID}/g,e)+"</script>"+n),n}var r=n(2),s=n(6),a=n(8),c=n(4),l=n(9),d={},u=500;o.prototype.startRequest=function(){var t=this,e=this._iframe,n=i(this._content,this._passbackId);this._startTime=Date.now(),this._container.appendChild(e),a.iframeWrite(e,a.getHTMLWithContent(n)),this._timeout&&(this._timeoutId=window.setTimeout(function(){t._onComplete(!1,!0)},this._timeout))},o.prototype._onComplete=function(t,e){var n,o=this._iframe;if(d[this._passbackId]){if(e)return;t||clearTimeout(d[this._passbackId])}t||(window[this._passbackId]=c.noop),t&&a.showFrame(o),this._timeoutId&&window.clearTimeout(this._timeoutId),n=new Date-this._startTime,e&&o.remove?o.remove():e&&o.parentNode&&o.parentNode.removeChild(o),this.trigger("complete",{adFilled:t,timedOut:e||!1,latency:n})},o.prototype.onUpdate=function(t){var e=this._iframe,n=a.getIframeDocument(e),o=function(){t(e)};o(),a.observeDOM(n,o)},r.mixin(o.prototype),t.exports=o},function(t,e,n){function o(){function t(t){return-1===r.indexOf(t.origin)&&t.origin.replace("http://","")!==window.location.host&&t.origin.replace("https://","")!==window.location.host?!1:(n.trigger("message",t.data),void 0)}function e(){window.ADNXSOffEvent("message",t,!1)}var n=this;window.ADNXSOnEvent("message",t,!1),this.close=e,this.onMessage=t}n(7)();var i=n(2),r=["http://cdn.adnxs.com","https://cdn.adnxs.com","http://acdn.adnxs.com","https://acdn.adnxs.com"];i.mixin(o.prototype),t.exports=o},function(t){function e(t){t=t||window;var e=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}();t.console=t.console||{log:function(){}},t.ADNXSOnEvent=t.addEventListener?t.addEventListener:function(e,n){t.attachEvent("on"+e,n)},t.ADNXSOffEvent=t.removeEventListener?t.removeEventListener:function(e,n){t.detachEvent("on"+e,n)},Date.now=Date.now||function(){return(new Date).getTime()},t.__anx_local_storage__=e?t.localStorage:{getItem:function(e){return t.__anx_local_storage_store=t.__anx_local_storage_store||{},t.__anx_local_storage_store[e]||[]},setItem:function(e,n){t.__anx_local_storage_store=t.__anx_local_storage_store||{},t.__anx_local_storage_store[e]=n},removeItem:function(e){t.__anx_local_storage_store=t.__anx_local_storage_store||{},delete t.__anx_local_storage_store[e]}},"function"!==Object.keys&&(Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return-1;var r=+e||0;if(1/0===Math.abs(r)&&(r=0),r>=i)return-1;for(n=Math.max(r>=0?r:i-Math.abs(r),0);i>n;){if(n in o&&o[n]===t)return n;n++}return-1})}t.exports=e},function(t){var e=null;t.exports={getIframeDocument:function(t){var e=t.document;return t.contentDocument&&t.contentDocument.documentElement?e=t.contentDocument:t.contentWindow&&t.contentWindow.document&&(e=t.contentWindow.document),e},getIframeWindow:function(t){return t.contentWindow},iframeWrite:function(t,e){var n=this.getIframeWindow(t);n.contents=e,t.src='javascript:window["contents"]'},createFrame:function(t,e,n){var o=document.createElement("iframe");return o.id=n,o.width=t,o.height=e,o.frameBorder="0",o.marginWidth="0",o.marginHeight="0",o.scrolling="no",o.setAttribute("border","0"),o.setAttribute("allowtransparency","true"),o.style.visibility="hidden",o.style.display="none",o},showFrame:function(t){t.style.display="",t.style.visibility="visible"},getHTMLWithContent:function(t){return["<!DOCTYPE html>","<html>","<head>",'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">','<meta http-equiv="X-UA-Compatible" content="IE=edge">','<meta name="viewport" content="width=device-width, initial-scale=1">','<meta http-Equiv="Cache-Control" Content="no-cache">','<meta http-Equiv="Pragma" Content="no-cache">','<meta http-Equiv="Expires" Content="0">',"</head>","<body>",t,"</body>","</html>"].join("")},createPlaceholder:function(){if(e)return e;for(var t=document.createElement("div"),n=document.getElementsByTagName("script"),o=n[n.length-1],i=n.length-1;i>0;i--)if(/mediation\.js/.test(n[i].src)){o=n[i];break}return o.parentNode.insertBefore(t,o),e=t,t},getViewport:function(t){return[t.documentElement.scrollWidth,t.documentElement.scrollHeight]},observeDOM:function(t,e){var n=window.MutationObserver||window.WebKitMutationObserver,o=window.addEventListener;if(n){var i=new n(function(t){(t[0].addedNodes.length||t[0].removedNodes.length)&&e()});i.observe(t,{childList:!0,subtree:!0})}else o?(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1)):t.attachEvent&&t.attachEvent("onreadystatechange",e)}}},function(t){t.exports='!function(n){function t(n){function t(n,e){n.postMessage("${PASSBACK_ID}","*"),n.top!==n&&50>e&&setTimeout(t(n.parent,++e),0)}n&&"noad"===n.data&&t(this.parent,0)}function e(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e)}function o(t){var e=n.parent["${PASSBACK_ID}"];e&&"function"==typeof e?e(t):console.log("anx-mediation: WARN > Couldn\'t callback into mediation with filled: ",t)}function i(){ADNXSMediation.isAsync()||(c("load",i,!1),o(!0))}function a(t){n.addEventListener?n.addEventListener("load",function(){setTimeout(t,0)},!1):n.attachEvent("onload",function(){setTimeout(t,0)})}e(n,"message",t);var c=n.removeEventListener||function(t,e){n.detachEvent("on"+t,e)},d=function(){c("load",i,!1),o(!1)},s=function(){c("load",i,!1),o(!0)},u={noAd:d,noad:d,adFilled:s,adfilled:s,setAsync:function(){n.ADNXSAsync=!0},isAsync:function(){return!!n.ADNXSAsync}};n.ADNXSMediation=u,n.ADNXSAsync=!1,a(i)}(this);'},function(t,e,n){function o(t){if(void 0===t||"object"!=typeof t)throw new Error("LastFrame invoked without a `params` object");var e=this._passbackId=t.passbackId,n=t.width,o=t.height;this._content=t.content,this._container=t.container,this._iframe=r.createFrame(n,o,e||"")}var i=n(2),r=n(8),s=n(7);o.prototype.startRequest=function(){var t=this._iframe;this._container.appendChild(t),r.iframeWrite(t,r.getHTMLWithContent(this._content)),r.showFrame(t)},o.prototype.onUpdate=function(t){var e=this._iframe,n=r.getIframeDocument(e),o=function(){t(e)};s(e),e.ADNXSOnEvent("load",o,!1),o(),r.observeDOM(n,o)},i.mixin(o.prototype),t.exports=o},function(t){function e(t){return t instanceof Array||"object"==typeof t}function n(t){var o=null;if(t instanceof Array){var i=0,r=t.length;for(o=[],i;r>i;i++)o[i]=e(t[i])?n(t[i]):t[i];return o}if("object"==typeof t){o={};for(var s in t)t.hasOwnProperty(s)&&(o[s]=e(t[s])?n(t[s]):t[s]);return o}return t}t.exports=n},function(t,e,n){var o=n(4),i="adnxs_mediation",r=20;t.exports={getSessions:function(){var t;try{t=window.__anx_local_storage__.getItem(i).split(",")}catch(e){t=[]}return t},setSession:function(t){var e=this.getSessions();if(this.hasSessionBeenCalled(t))throw new Error("anx-mediation: SESSION-ERROR: Session already queried: ",t);return e.length>=r&&(e=e.slice(e.length-r+1,e.length)),e.push(t),window.__anx_local_storage__.setItem(i,e.join(",")),e},hasSessionBeenCalled:function(t){return!!o.find(this.getSessions(),function(e){return e===t})},getThreshold:function(){return r},validateChain:function(t){var e=this;o.each(t,function(t){var n=o.getSessionId(t.result_cb);if(e.hasSessionBeenCalled(n))throw new Error("anx-mediation: CHAIN-ERROR: Chain has already been called!")})}}},function(t){t.exports={SUCCESS:0,TIMEOUT:1,NOBID:2,INTERNALERROR:3,INVALIDREQUEST:5}},function(t,e,n){var o=n(4);t.exports={log:function(t,e){e?o.doGet(t+"&reason="+e.reason+"&latency="+e.latency):o.doGet(t)}}},function(t){function e(){window.visibly=window.visibly||{b:null,q:document,p:void 0,prefixes:["webkit","ms","moz"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:{},hiddenCallbacks:{},_callbacks:{},offVisible:function(t){this._removeCallback(1,t)},onVisible:function(t,e){this.visibleCallbacks[e]=t},offHidden:function(t){this._removeCallback(2,t)},onHidden:function(t,e){this.hiddenCallbacks[e]=t},isSupported:function(){for(var t=this.prefixes.length;t--;)if(this._supports(t))return this.b=this.prefixes[t],this.b},_supports:function(t){return this.prefixes[t]+this.props[2]in this.q},runCallbacks:function(t){var e,n;if(t){this._callbacks=1===t?this.visibleCallbacks:this.hiddenCallbacks,e=[];for(var o in this._callbacks)this._callbacks.hasOwnProperty(o)&&e.push(o);for(n=0;n<e.length;n++)this._callbacks[e[n]]()}},_removeCallback:function(t,e){t&&(this._removeCallbacks=1===t?this.visibleCallbacks:this.hiddenCallbacks,this._removeCallbacks[e]?delete this._removeCallbacks[e]:console.error("error removing callback "+e))},_visible:function(){window.visibly.runCallbacks(1)},_hidden:function(){window.visibly.runCallbacks(2)},_nativeSwitch:function(){(this.q[this.b+this.props[2]]===!0?this._hidden:this._visible)()},listen:function(){try{this.isSupported()?this.q.addEventListener(this.b+this.props[1],function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):document.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(t){console.log("ANXMedation: Can't measure visibily")}},init:function(){this.listen()}},this.visibly.init()}t.exports=e}]);