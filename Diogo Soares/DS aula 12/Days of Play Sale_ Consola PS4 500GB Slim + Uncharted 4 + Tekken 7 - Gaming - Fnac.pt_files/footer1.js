/**
 * Copyright (c) 2007-2014 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 1.4.14
 */
; (function (k) { 'use strict'; k(['jquery'], function ($) { var j = $.scrollTo = function (a, b, c) { return $(window).scrollTo(a, b, c) }; j.defaults = { axis: 'xy', duration: 0, limit: !0 }; j.window = function (a) { return $(window)._scrollable() }; $.fn._scrollable = function () { return this.map(function () { var a = this, isWin = !a.nodeName || $.inArray(a.nodeName.toLowerCase(), ['iframe', '#document', 'html', 'body']) != -1; if (!isWin) return a; var b = (a.contentWindow || a).document || a.ownerDocument || a; return /webkit/i.test(navigator.userAgent) || b.compatMode == 'BackCompat' ? b.body : b.documentElement }) }; $.fn.scrollTo = function (f, g, h) { if (typeof g == 'object') { h = g; g = 0 } if (typeof h == 'function') h = { onAfter: h }; if (f == 'max') f = 9e9; h = $.extend({}, j.defaults, h); g = g || h.duration; h.queue = h.queue && h.axis.length > 1; if (h.queue) g /= 2; h.offset = both(h.offset); h.over = both(h.over); return this._scrollable().each(function () { if (f == null) return; var d = this, $elem = $(d), targ = f, toff, attr = {}, win = $elem.is('html,body'); switch (typeof targ) { case 'number': case 'string': if (/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)) { targ = both(targ); break } targ = win ? $(targ) : $(targ, this); if (!targ.length) return; case 'object': if (targ.is || targ.style) toff = (targ = $(targ)).offset() } var e = $.isFunction(h.offset) && h.offset(d, targ) || h.offset; $.each(h.axis.split(''), function (i, a) { var b = a == 'x' ? 'Left' : 'Top', pos = b.toLowerCase(), key = 'scroll' + b, old = d[key], max = j.max(d, a); if (toff) { attr[key] = toff[pos] + (win ? 0 : old - $elem.offset()[pos]); if (h.margin) { attr[key] -= parseInt(targ.css('margin' + b)) || 0; attr[key] -= parseInt(targ.css('border' + b + 'Width')) || 0 } attr[key] += e[pos] || 0; if (h.over[pos]) attr[key] += targ[a == 'x' ? 'width' : 'height']() * h.over[pos] } else { var c = targ[pos]; attr[key] = c.slice && c.slice(-1) == '%' ? parseFloat(c) / 100 * max : c } if (h.limit && /^\d+$/.test(attr[key])) attr[key] = attr[key] <= 0 ? 0 : Math.min(attr[key], max); if (!i && h.queue) { if (old != attr[key]) animate(h.onAfterFirst); delete attr[key] } }); animate(h.onAfter); function animate(a) { $elem.animate(attr, g, h.easing, a && function () { a.call(this, targ, h) }) } }).end() }; j.max = function (a, b) { var c = b == 'x' ? 'Width' : 'Height', scroll = 'scroll' + c; if (!$(a).is('html,body')) return a[scroll] - $(a)[c.toLowerCase()](); var d = 'client' + c, html = a.ownerDocument.documentElement, body = a.ownerDocument.body; return Math.max(html[scroll], body[scroll]) - Math.min(html[d], body[d]) }; function both(a) { return $.isFunction(a) || $.isPlainObject(a) ? a : { top: a, left: a } } return j }) }(typeof define === 'function' && define.amd ? define : function (a, b) { if (typeof module !== 'undefined' && module.exports) { module.exports = b(require('jquery')) } else { b(jQuery) } }));;/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function () { "use strict"; var t = this, i = t.Chart, e = function (t) { this.canvas = t.canvas, this.ctx = t; var i = function (t, i) { return t["offset" + i] ? t["offset" + i] : document.defaultView.getComputedStyle(t).getPropertyValue(i) }, e = this.width = i(t.canvas, "Width"), n = this.height = i(t.canvas, "Height"); t.canvas.width = e, t.canvas.height = n; var e = this.width = t.canvas.width, n = this.height = t.canvas.height; return this.aspectRatio = this.width / this.height, s.retinaScale(this), this }; e.defaults = { global: { animation: !0, animationSteps: 60, animationEasing: "easeOutQuart", showScale: !0, scaleOverride: !1, scaleSteps: null, scaleStepWidth: null, scaleStartValue: null, scaleLineColor: "rgba(0,0,0,.1)", scaleLineWidth: 1, scaleShowLabels: !0, scaleLabel: "<%=value%>", scaleIntegersOnly: !0, scaleBeginAtZero: !1, scaleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif", scaleFontSize: 12, scaleFontStyle: "normal", scaleFontColor: "#666", responsive: !1, maintainAspectRatio: !0, showTooltips: !0, customTooltips: !1, tooltipEvents: ["mousemove", "touchstart", "touchmove", "mouseout"], tooltipFillColor: "rgba(0,0,0,0.8)", tooltipFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif", tooltipFontSize: 14, tooltipFontStyle: "normal", tooltipFontColor: "#fff", tooltipTitleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif", tooltipTitleFontSize: 14, tooltipTitleFontStyle: "bold", tooltipTitleFontColor: "#fff", tooltipYPadding: 6, tooltipXPadding: 6, tooltipCaretSize: 8, tooltipCornerRadius: 6, tooltipXOffset: 10, tooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>", multiTooltipTemplate: "<%= value %>", multiTooltipKeyBackground: "#fff", onAnimationProgress: function () { }, onAnimationComplete: function () { } } }, e.types = {}; var s = e.helpers = {}, n = s.each = function (t, i, e) { var s = Array.prototype.slice.call(arguments, 3); if (t) if (t.length === +t.length) { var n; for (n = 0; n < t.length; n++) i.apply(e, [t[n], n].concat(s)) } else for (var o in t) i.apply(e, [t[o], o].concat(s)) }, o = s.clone = function (t) { var i = {}; return n(t, function (e, s) { t.hasOwnProperty(s) && (i[s] = e) }), i }, a = s.extend = function (t) { return n(Array.prototype.slice.call(arguments, 1), function (i) { n(i, function (e, s) { i.hasOwnProperty(s) && (t[s] = e) }) }), t }, h = s.merge = function () { var t = Array.prototype.slice.call(arguments, 0); return t.unshift({}), a.apply(null, t) }, l = s.indexOf = function (t, i) { if (Array.prototype.indexOf) return t.indexOf(i); for (var e = 0; e < t.length; e++) if (t[e] === i) return e; return -1 }, r = (s.where = function (t, i) { var e = []; return s.each(t, function (t) { i(t) && e.push(t) }), e }, s.findNextWhere = function (t, i, e) { e || (e = -1); for (var s = e + 1; s < t.length; s++) { var n = t[s]; if (i(n)) return n } }, s.findPreviousWhere = function (t, i, e) { e || (e = t.length); for (var s = e - 1; s >= 0; s--) { var n = t[s]; if (i(n)) return n } }, s.inherits = function (t) { var i = this, e = t && t.hasOwnProperty("constructor") ? t.constructor : function () { return i.apply(this, arguments) }, s = function () { this.constructor = e }; return s.prototype = i.prototype, e.prototype = new s, e.extend = r, t && a(e.prototype, t), e.__super__ = i.prototype, e }), c = s.noop = function () { }, u = s.uid = function () { var t = 0; return function () { return "chart-" + t++ } }(), d = s.warn = function (t) { window.console && "function" == typeof window.console.warn && console.warn(t) }, p = s.amd = "function" == typeof define && define.amd, f = s.isNumber = function (t) { return !isNaN(parseFloat(t)) && isFinite(t) }, g = s.max = function (t) { return Math.max.apply(Math, t) }, m = s.min = function (t) { return Math.min.apply(Math, t) }, v = (s.cap = function (t, i, e) { if (f(i)) { if (t > i) return i } else if (f(e) && e > t) return e; return t }, s.getDecimalPlaces = function (t) { return t % 1 !== 0 && f(t) ? t.toString().split(".")[1].length : 0 }), S = s.radians = function (t) { return t * (Math.PI / 180) }, x = (s.getAngleFromPoint = function (t, i) { var e = i.x - t.x, s = i.y - t.y, n = Math.sqrt(e * e + s * s), o = 2 * Math.PI + Math.atan2(s, e); return 0 > e && 0 > s && (o += 2 * Math.PI), { angle: o, distance: n } }, s.aliasPixel = function (t) { return t % 2 === 0 ? 0 : .5 }), y = (s.splineCurve = function (t, i, e, s) { var n = Math.sqrt(Math.pow(i.x - t.x, 2) + Math.pow(i.y - t.y, 2)), o = Math.sqrt(Math.pow(e.x - i.x, 2) + Math.pow(e.y - i.y, 2)), a = s * n / (n + o), h = s * o / (n + o); return { inner: { x: i.x - a * (e.x - t.x), y: i.y - a * (e.y - t.y) }, outer: { x: i.x + h * (e.x - t.x), y: i.y + h * (e.y - t.y) } } }, s.calculateOrderOfMagnitude = function (t) { return Math.floor(Math.log(t) / Math.LN10) }), C = (s.calculateScaleRange = function (t, i, e, s, n) { var o = 2, a = Math.floor(i / (1.5 * e)), h = o >= a, l = g(t), r = m(t); l === r && (l += .5, r >= .5 && !s ? r -= .5 : l += .5); for (var c = Math.abs(l - r), u = y(c), d = Math.ceil(l / (1 * Math.pow(10, u))) * Math.pow(10, u), p = s ? 0 : Math.floor(r / (1 * Math.pow(10, u))) * Math.pow(10, u), f = d - p, v = Math.pow(10, u), S = Math.round(f / v) ; (S > a || a > 2 * S) && !h;) if (S > a) v *= 2, S = Math.round(f / v), S % 1 !== 0 && (h = !0); else if (n && u >= 0) { if (v / 2 % 1 !== 0) break; v /= 2, S = Math.round(f / v) } else v /= 2, S = Math.round(f / v); return h && (S = o, v = f / S), { steps: S, stepValue: v, min: p, max: p + S * v } }, s.template = function (t, i) { function e(t, i) { var e = /\W/.test(t) ? new Function("obj", "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('" + t.replace(/[\r\t\n]/g, " ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g, "$1\r").replace(/\t=(.*?)%>/g, "',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'") + "');}return p.join('');") : s[t] = s[t]; return i ? e(i) : e } if (t instanceof Function) return t(i); var s = {}; return e(t, i) }), w = (s.generateLabels = function (t, i, e, s) { var o = new Array(i); return labelTemplateString && n(o, function (i, n) { o[n] = C(t, { value: e + s * (n + 1) }) }), o }, s.easingEffects = { linear: function (t) { return t }, easeInQuad: function (t) { return t * t }, easeOutQuad: function (t) { return -1 * t * (t - 2) }, easeInOutQuad: function (t) { return (t /= .5) < 1 ? .5 * t * t : -0.5 * (--t * (t - 2) - 1) }, easeInCubic: function (t) { return t * t * t }, easeOutCubic: function (t) { return 1 * ((t = t / 1 - 1) * t * t + 1) }, easeInOutCubic: function (t) { return (t /= .5) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2) }, easeInQuart: function (t) { return t * t * t * t }, easeOutQuart: function (t) { return -1 * ((t = t / 1 - 1) * t * t * t - 1) }, easeInOutQuart: function (t) { return (t /= .5) < 1 ? .5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2) }, easeInQuint: function (t) { return 1 * (t /= 1) * t * t * t * t }, easeOutQuint: function (t) { return 1 * ((t = t / 1 - 1) * t * t * t * t + 1) }, easeInOutQuint: function (t) { return (t /= .5) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2) }, easeInSine: function (t) { return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1 }, easeOutSine: function (t) { return 1 * Math.sin(t / 1 * (Math.PI / 2)) }, easeInOutSine: function (t) { return -0.5 * (Math.cos(Math.PI * t / 1) - 1) }, easeInExpo: function (t) { return 0 === t ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1)) }, easeOutExpo: function (t) { return 1 === t ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1) }, easeInOutExpo: function (t) { return 0 === t ? 0 : 1 === t ? 1 : (t /= .5) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (-Math.pow(2, -10 * --t) + 2) }, easeInCirc: function (t) { return t >= 1 ? t : -1 * (Math.sqrt(1 - (t /= 1) * t) - 1) }, easeOutCirc: function (t) { return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t) }, easeInOutCirc: function (t) { return (t /= .5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) }, easeInElastic: function (t) { var i = 1.70158, e = 0, s = 1; return 0 === t ? 0 : 1 == (t /= 1) ? 1 : (e || (e = .3), s < Math.abs(1) ? (s = 1, i = e / 4) : i = e / (2 * Math.PI) * Math.asin(1 / s), -(s * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (1 * t - i) * Math.PI / e))) }, easeOutElastic: function (t) { var i = 1.70158, e = 0, s = 1; return 0 === t ? 0 : 1 == (t /= 1) ? 1 : (e || (e = .3), s < Math.abs(1) ? (s = 1, i = e / 4) : i = e / (2 * Math.PI) * Math.asin(1 / s), s * Math.pow(2, -10 * t) * Math.sin(2 * (1 * t - i) * Math.PI / e) + 1) }, easeInOutElastic: function (t) { var i = 1.70158, e = 0, s = 1; return 0 === t ? 0 : 2 == (t /= .5) ? 1 : (e || (e = .3 * 1.5), s < Math.abs(1) ? (s = 1, i = e / 4) : i = e / (2 * Math.PI) * Math.asin(1 / s), 1 > t ? -.5 * s * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (1 * t - i) * Math.PI / e) : s * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (1 * t - i) * Math.PI / e) * .5 + 1) }, easeInBack: function (t) { var i = 1.70158; return 1 * (t /= 1) * t * ((i + 1) * t - i) }, easeOutBack: function (t) { var i = 1.70158; return 1 * ((t = t / 1 - 1) * t * ((i + 1) * t + i) + 1) }, easeInOutBack: function (t) { var i = 1.70158; return (t /= .5) < 1 ? .5 * t * t * (((i *= 1.525) + 1) * t - i) : .5 * ((t -= 2) * t * (((i *= 1.525) + 1) * t + i) + 2) }, easeInBounce: function (t) { return 1 - w.easeOutBounce(1 - t) }, easeOutBounce: function (t) { return (t /= 1) < 1 / 2.75 ? 7.5625 * t * t : 2 / 2.75 > t ? 1 * (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) }, easeInOutBounce: function (t) { return .5 > t ? .5 * w.easeInBounce(2 * t) : .5 * w.easeOutBounce(2 * t - 1) + .5 } }), b = s.requestAnimFrame = function () { return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { return window.setTimeout(t, 1e3 / 60) } }(), P = s.cancelAnimFrame = function () { return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function (t) { return window.clearTimeout(t, 1e3 / 60) } }(), L = (s.animationLoop = function (t, i, e, s, n, o) { var a = 0, h = w[e] || w.linear, l = function () { a++; var e = a / i, r = h(e); t.call(o, r, e, a), s.call(o, r, e), i > a ? o.animationFrame = b(l) : n.apply(o) }; b(l) }, s.getRelativePosition = function (t) { var i, e, s = t.originalEvent || t, n = t.currentTarget || t.srcElement, o = n.getBoundingClientRect(); return s.touches ? (i = s.touches[0].clientX - o.left, e = s.touches[0].clientY - o.top) : (i = s.clientX - o.left, e = s.clientY - o.top), { x: i, y: e } }, s.addEvent = function (t, i, e) { t.addEventListener ? t.addEventListener(i, e) : t.attachEvent ? t.attachEvent("on" + i, e) : t["on" + i] = e }), k = s.removeEvent = function (t, i, e) { t.removeEventListener ? t.removeEventListener(i, e, !1) : t.detachEvent ? t.detachEvent("on" + i, e) : t["on" + i] = c }, F = (s.bindEvents = function (t, i, e) { t.events || (t.events = {}), n(i, function (i) { t.events[i] = function () { e.apply(t, arguments) }, L(t.chart.canvas, i, t.events[i]) }) }, s.unbindEvents = function (t, i) { n(i, function (i, e) { k(t.chart.canvas, e, i) }) }), R = s.getMaximumWidth = function (t) { var i = t.parentNode; return i.clientWidth }, T = s.getMaximumHeight = function (t) { var i = t.parentNode; return i.clientHeight }, A = (s.getMaximumSize = s.getMaximumWidth, s.retinaScale = function (t) { var i = t.ctx, e = t.canvas.width, s = t.canvas.height; window.devicePixelRatio && (i.canvas.style.width = e + "px", i.canvas.style.height = s + "px", i.canvas.height = s * window.devicePixelRatio, i.canvas.width = e * window.devicePixelRatio, i.scale(window.devicePixelRatio, window.devicePixelRatio)) }), M = s.clear = function (t) { t.ctx.clearRect(0, 0, t.width, t.height) }, W = s.fontString = function (t, i, e) { return i + " " + t + "px " + e }, z = s.longestText = function (t, i, e) { t.font = i; var s = 0; return n(e, function (i) { var e = t.measureText(i).width; s = e > s ? e : s }), s }, B = s.drawRoundedRectangle = function (t, i, e, s, n, o) { t.beginPath(), t.moveTo(i + o, e), t.lineTo(i + s - o, e), t.quadraticCurveTo(i + s, e, i + s, e + o), t.lineTo(i + s, e + n - o), t.quadraticCurveTo(i + s, e + n, i + s - o, e + n), t.lineTo(i + o, e + n), t.quadraticCurveTo(i, e + n, i, e + n - o), t.lineTo(i, e + o), t.quadraticCurveTo(i, e, i + o, e), t.closePath() }; e.instances = {}, e.Type = function (t, i, s) { this.options = i, this.chart = s, this.id = u(), e.instances[this.id] = this, i.responsive && this.resize(), this.initialize.call(this, t) }, a(e.Type.prototype, { initialize: function () { return this }, clear: function () { return M(this.chart), this }, stop: function () { return P(this.animationFrame), this }, resize: function (t) { this.stop(); var i = this.chart.canvas, e = R(this.chart.canvas), s = this.options.maintainAspectRatio ? e / this.chart.aspectRatio : T(this.chart.canvas); return i.width = this.chart.width = e, i.height = this.chart.height = s, A(this.chart), "function" == typeof t && t.apply(this, Array.prototype.slice.call(arguments, 1)), this }, reflow: c, render: function (t) { return t && this.reflow(), this.options.animation && !t ? s.animationLoop(this.draw, this.options.animationSteps, this.options.animationEasing, this.options.onAnimationProgress, this.options.onAnimationComplete, this) : (this.draw(), this.options.onAnimationComplete.call(this)), this }, generateLegend: function () { return C(this.options.legendTemplate, this) }, destroy: function () { this.clear(), F(this, this.events); var t = this.chart.canvas; t.width = this.chart.width, t.height = this.chart.height, t.style.removeProperty ? (t.style.removeProperty("width"), t.style.removeProperty("height")) : (t.style.removeAttribute("width"), t.style.removeAttribute("height")), delete e.instances[this.id] }, showTooltip: function (t, i) { "undefined" == typeof this.activeElements && (this.activeElements = []); var o = function (t) { var i = !1; return t.length !== this.activeElements.length ? i = !0 : (n(t, function (t, e) { t !== this.activeElements[e] && (i = !0) }, this), i) }.call(this, t); if (o || i) { if (this.activeElements = t, this.draw(), this.options.customTooltips && this.options.customTooltips(!1), t.length > 0) if (this.datasets && this.datasets.length > 1) { for (var a, h, r = this.datasets.length - 1; r >= 0 && (a = this.datasets[r].points || this.datasets[r].bars || this.datasets[r].segments, h = l(a, t[0]), -1 === h) ; r--); var c = [], u = [], d = function () { var t, i, e, n, o, a = [], l = [], r = []; return s.each(this.datasets, function (i) { t = i.points || i.bars || i.segments, t[h] && t[h].hasValue() && a.push(t[h]) }), s.each(a, function (t) { l.push(t.x), r.push(t.y), c.push(s.template(this.options.multiTooltipTemplate, t)), u.push({ fill: t._saved.fillColor || t.fillColor, stroke: t._saved.strokeColor || t.strokeColor }) }, this), o = m(r), e = g(r), n = m(l), i = g(l), { x: n > this.chart.width / 2 ? n : i, y: (o + e) / 2 } }.call(this, h); new e.MultiTooltip({ x: d.x, y: d.y, xPadding: this.options.tooltipXPadding, yPadding: this.options.tooltipYPadding, xOffset: this.options.tooltipXOffset, fillColor: this.options.tooltipFillColor, textColor: this.options.tooltipFontColor, fontFamily: this.options.tooltipFontFamily, fontStyle: this.options.tooltipFontStyle, fontSize: this.options.tooltipFontSize, titleTextColor: this.options.tooltipTitleFontColor, titleFontFamily: this.options.tooltipTitleFontFamily, titleFontStyle: this.options.tooltipTitleFontStyle, titleFontSize: this.options.tooltipTitleFontSize, cornerRadius: this.options.tooltipCornerRadius, labels: c, legendColors: u, legendColorBackground: this.options.multiTooltipKeyBackground, title: t[0].label, chart: this.chart, ctx: this.chart.ctx, custom: this.options.customTooltips }).draw() } else n(t, function (t) { var i = t.tooltipPosition(); new e.Tooltip({ x: Math.round(i.x), y: Math.round(i.y), xPadding: this.options.tooltipXPadding, yPadding: this.options.tooltipYPadding, fillColor: this.options.tooltipFillColor, textColor: this.options.tooltipFontColor, fontFamily: this.options.tooltipFontFamily, fontStyle: this.options.tooltipFontStyle, fontSize: this.options.tooltipFontSize, caretHeight: this.options.tooltipCaretSize, cornerRadius: this.options.tooltipCornerRadius, text: C(this.options.tooltipTemplate, t), chart: this.chart, custom: this.options.customTooltips }).draw() }, this); return this } }, toBase64Image: function () { return this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments) } }), e.Type.extend = function (t) { var i = this, s = function () { return i.apply(this, arguments) }; if (s.prototype = o(i.prototype), a(s.prototype, t), s.extend = e.Type.extend, t.name || i.prototype.name) { var n = t.name || i.prototype.name, l = e.defaults[i.prototype.name] ? o(e.defaults[i.prototype.name]) : {}; e.defaults[n] = a(l, t.defaults), e.types[n] = s, e.prototype[n] = function (t, i) { var o = h(e.defaults.global, e.defaults[n], i || {}); return new s(t, o, this) } } else d("Name not provided for this chart, so it hasn't been registered"); return i }, e.Element = function (t) { a(this, t), this.initialize.apply(this, arguments), this.save() }, a(e.Element.prototype, { initialize: function () { }, restore: function (t) { return t ? n(t, function (t) { this[t] = this._saved[t] }, this) : a(this, this._saved), this }, save: function () { return this._saved = o(this), delete this._saved._saved, this }, update: function (t) { return n(t, function (t, i) { this._saved[i] = this[i], this[i] = t }, this), this }, transition: function (t, i) { return n(t, function (t, e) { this[e] = (t - this._saved[e]) * i + this._saved[e] }, this), this }, tooltipPosition: function () { return { x: this.x, y: this.y } }, hasValue: function () { return f(this.value) } }), e.Element.extend = r, e.Point = e.Element.extend({ display: !0, inRange: function (t, i) { var e = this.hitDetectionRadius + this.radius; return Math.pow(t - this.x, 2) + Math.pow(i - this.y, 2) < Math.pow(e, 2) }, draw: function () { if (this.display) { var t = this.ctx; t.beginPath(), t.arc(this.x, this.y, this.radius, 0, 2 * Math.PI), t.closePath(), t.strokeStyle = this.strokeColor, t.lineWidth = this.strokeWidth, t.fillStyle = this.fillColor, t.fill(), t.stroke() } } }), e.Arc = e.Element.extend({ inRange: function (t, i) { var e = s.getAngleFromPoint(this, { x: t, y: i }), n = e.angle >= this.startAngle && e.angle <= this.endAngle, o = e.distance >= this.innerRadius && e.distance <= this.outerRadius; return n && o }, tooltipPosition: function () { var t = this.startAngle + (this.endAngle - this.startAngle) / 2, i = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius; return { x: this.x + Math.cos(t) * i, y: this.y + Math.sin(t) * i } }, draw: function (t) { var i = this.ctx; i.beginPath(), i.arc(this.x, this.y, this.outerRadius, this.startAngle, this.endAngle), i.arc(this.x, this.y, this.innerRadius, this.endAngle, this.startAngle, !0), i.closePath(), i.strokeStyle = this.strokeColor, i.lineWidth = this.strokeWidth, i.fillStyle = this.fillColor, i.fill(), i.lineJoin = "bevel", this.showStroke && i.stroke() } }), e.Rectangle = e.Element.extend({ draw: function () { var t = this.ctx, i = this.width / 2, e = this.x - i, s = this.x + i, n = this.base - (this.base - this.y), o = this.strokeWidth / 2; this.showStroke && (e += o, s -= o, n += o), t.beginPath(), t.fillStyle = this.fillColor, t.strokeStyle = this.strokeColor, t.lineWidth = this.strokeWidth, t.moveTo(e, this.base), t.lineTo(e, n), t.lineTo(s, n), t.lineTo(s, this.base), t.fill(), this.showStroke && t.stroke() }, height: function () { return this.base - this.y }, inRange: function (t, i) { return t >= this.x - this.width / 2 && t <= this.x + this.width / 2 && i >= this.y && i <= this.base } }), e.Tooltip = e.Element.extend({ draw: function () { var t = this.chart.ctx; t.font = W(this.fontSize, this.fontStyle, this.fontFamily), this.xAlign = "center", this.yAlign = "above"; var i = this.caretPadding = 2, e = t.measureText(this.text).width + 2 * this.xPadding, s = this.fontSize + 2 * this.yPadding, n = s + this.caretHeight + i; this.x + e / 2 > this.chart.width ? this.xAlign = "left" : this.x - e / 2 < 0 && (this.xAlign = "right"), this.y - n < 0 && (this.yAlign = "below"); var o = this.x - e / 2, a = this.y - n; if (t.fillStyle = this.fillColor, this.custom) this.custom(this); else { switch (this.yAlign) { case "above": t.beginPath(), t.moveTo(this.x, this.y - i), t.lineTo(this.x + this.caretHeight, this.y - (i + this.caretHeight)), t.lineTo(this.x - this.caretHeight, this.y - (i + this.caretHeight)), t.closePath(), t.fill(); break; case "below": a = this.y + i + this.caretHeight, t.beginPath(), t.moveTo(this.x, this.y + i), t.lineTo(this.x + this.caretHeight, this.y + i + this.caretHeight), t.lineTo(this.x - this.caretHeight, this.y + i + this.caretHeight), t.closePath(), t.fill() } switch (this.xAlign) { case "left": o = this.x - e + (this.cornerRadius + this.caretHeight); break; case "right": o = this.x - (this.cornerRadius + this.caretHeight) } B(t, o, a, e, s, this.cornerRadius), t.fill(), t.fillStyle = this.textColor, t.textAlign = "center", t.textBaseline = "middle", t.fillText(this.text, o + e / 2, a + s / 2) } } }), e.MultiTooltip = e.Element.extend({ initialize: function () { this.font = W(this.fontSize, this.fontStyle, this.fontFamily), this.titleFont = W(this.titleFontSize, this.titleFontStyle, this.titleFontFamily), this.height = this.labels.length * this.fontSize + (this.labels.length - 1) * (this.fontSize / 2) + 2 * this.yPadding + 1.5 * this.titleFontSize, this.ctx.font = this.titleFont; var t = this.ctx.measureText(this.title).width, i = z(this.ctx, this.font, this.labels) + this.fontSize + 3, e = g([i, t]); this.width = e + 2 * this.xPadding; var s = this.height / 2; this.y - s < 0 ? this.y = s : this.y + s > this.chart.height && (this.y = this.chart.height - s), this.x > this.chart.width / 2 ? this.x -= this.xOffset + this.width : this.x += this.xOffset }, getLineHeight: function (t) { var i = this.y - this.height / 2 + this.yPadding, e = t - 1; return 0 === t ? i + this.titleFontSize / 2 : i + (1.5 * this.fontSize * e + this.fontSize / 2) + 1.5 * this.titleFontSize }, draw: function () { if (this.custom) this.custom(this); else { B(this.ctx, this.x, this.y - this.height / 2, this.width, this.height, this.cornerRadius); var t = this.ctx; t.fillStyle = this.fillColor, t.fill(), t.closePath(), t.textAlign = "left", t.textBaseline = "middle", t.fillStyle = this.titleTextColor, t.font = this.titleFont, t.fillText(this.title, this.x + this.xPadding, this.getLineHeight(0)), t.font = this.font, s.each(this.labels, function (i, e) { t.fillStyle = this.textColor, t.fillText(i, this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(e + 1)), t.fillStyle = this.legendColorBackground, t.fillRect(this.x + this.xPadding, this.getLineHeight(e + 1) - this.fontSize / 2, this.fontSize, this.fontSize), t.fillStyle = this.legendColors[e].fill, t.fillRect(this.x + this.xPadding, this.getLineHeight(e + 1) - this.fontSize / 2, this.fontSize, this.fontSize) }, this) } } }), e.Scale = e.Element.extend({ initialize: function () { this.fit() }, buildYLabels: function () { this.yLabels = []; for (var t = v(this.stepValue), i = 0; i <= this.steps; i++) this.yLabels.push(C(this.templateString, { value: (this.min + i * this.stepValue).toFixed(t) })); this.yLabelWidth = this.display && this.showLabels ? z(this.ctx, this.font, this.yLabels) : 0 }, addXLabel: function (t) { this.xLabels.push(t), this.valuesCount++, this.fit() }, removeXLabel: function () { this.xLabels.shift(), this.valuesCount--, this.fit() }, fit: function () { this.startPoint = this.display ? this.fontSize : 0, this.endPoint = this.display ? this.height - 1.5 * this.fontSize - 5 : this.height, this.startPoint += this.padding, this.endPoint -= this.padding; var t, i = this.endPoint - this.startPoint; for (this.calculateYRange(i), this.buildYLabels(), this.calculateXLabelRotation() ; i > this.endPoint - this.startPoint;) i = this.endPoint - this.startPoint, t = this.yLabelWidth, this.calculateYRange(i), this.buildYLabels(), t < this.yLabelWidth && this.calculateXLabelRotation() }, calculateXLabelRotation: function () { this.ctx.font = this.font; var t, i, e = this.ctx.measureText(this.xLabels[0]).width, s = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width; if (this.xScalePaddingRight = s / 2 + 3, this.xScalePaddingLeft = e / 2 > this.yLabelWidth + 10 ? e / 2 : this.yLabelWidth + 10, this.xLabelRotation = 0, this.display) { var n, o = z(this.ctx, this.font, this.xLabels); this.xLabelWidth = o; for (var a = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6; this.xLabelWidth > a && 0 === this.xLabelRotation || this.xLabelWidth > a && this.xLabelRotation <= 90 && this.xLabelRotation > 0;) n = Math.cos(S(this.xLabelRotation)), t = n * e, i = n * s, t + this.fontSize / 2 > this.yLabelWidth + 8 && (this.xScalePaddingLeft = t + this.fontSize / 2), this.xScalePaddingRight = this.fontSize / 2, this.xLabelRotation++, this.xLabelWidth = n * o; this.xLabelRotation > 0 && (this.endPoint -= Math.sin(S(this.xLabelRotation)) * o + 3) } else this.xLabelWidth = 0, this.xScalePaddingRight = this.padding, this.xScalePaddingLeft = this.padding }, calculateYRange: c, drawingArea: function () { return this.startPoint - this.endPoint }, calculateY: function (t) { var i = this.drawingArea() / (this.min - this.max); return this.endPoint - i * (t - this.min) }, calculateX: function (t) { var i = (this.xLabelRotation > 0, this.width - (this.xScalePaddingLeft + this.xScalePaddingRight)), e = i / Math.max(this.valuesCount - (this.offsetGridLines ? 0 : 1), 1), s = e * t + this.xScalePaddingLeft; return this.offsetGridLines && (s += e / 2), Math.round(s) }, update: function (t) { s.extend(this, t), this.fit() }, draw: function () { var t = this.ctx, i = (this.endPoint - this.startPoint) / this.steps, e = Math.round(this.xScalePaddingLeft); this.display && (t.fillStyle = this.textColor, t.font = this.font, n(this.yLabels, function (n, o) { var a = this.endPoint - i * o, h = Math.round(a), l = this.showHorizontalLines; t.textAlign = "right", t.textBaseline = "middle", this.showLabels && t.fillText(n, e - 10, a), 0 !== o || l || (l = !0), l && t.beginPath(), o > 0 ? (t.lineWidth = this.gridLineWidth, t.strokeStyle = this.gridLineColor) : (t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor), h += s.aliasPixel(t.lineWidth), l && (t.moveTo(e, h), t.lineTo(this.width, h), t.stroke(), t.closePath()), t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor, t.beginPath(), t.moveTo(e - 5, h), t.lineTo(e, h), t.stroke(), t.closePath() }, this), n(this.xLabels, function (i, e) { var s = this.calculateX(e) + x(this.lineWidth), n = this.calculateX(e - (this.offsetGridLines ? .5 : 0)) + x(this.lineWidth), o = this.xLabelRotation > 0, a = this.showVerticalLines; 0 !== e || a || (a = !0), a && t.beginPath(), e > 0 ? (t.lineWidth = this.gridLineWidth, t.strokeStyle = this.gridLineColor) : (t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor), a && (t.moveTo(n, this.endPoint), t.lineTo(n, this.startPoint - 3), t.stroke(), t.closePath()), t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor, t.beginPath(), t.moveTo(n, this.endPoint), t.lineTo(n, this.endPoint + 5), t.stroke(), t.closePath(), t.save(), t.translate(s, o ? this.endPoint + 12 : this.endPoint + 8), t.rotate(-1 * S(this.xLabelRotation)), t.font = this.font, t.textAlign = o ? "right" : "center", t.textBaseline = o ? "middle" : "top", t.fillText(i, 0, 0), t.restore() }, this)) } }), e.RadialScale = e.Element.extend({ initialize: function () { this.size = m([this.height, this.width]), this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2 }, calculateCenterOffset: function (t) { var i = this.drawingArea / (this.max - this.min); return (t - this.min) * i }, update: function () { this.lineArc ? this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2 : this.setScaleSize(), this.buildYLabels() }, buildYLabels: function () { this.yLabels = []; for (var t = v(this.stepValue), i = 0; i <= this.steps; i++) this.yLabels.push(C(this.templateString, { value: (this.min + i * this.stepValue).toFixed(t) })) }, getCircumference: function () { return 2 * Math.PI / this.valuesCount }, setScaleSize: function () { var t, i, e, s, n, o, a, h, l, r, c, u, d = m([this.height / 2 - this.pointLabelFontSize - 5, this.width / 2]), p = this.width, g = 0; for (this.ctx.font = W(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), i = 0; i < this.valuesCount; i++) t = this.getPointPosition(i, d), e = this.ctx.measureText(C(this.templateString, { value: this.labels[i] })).width + 5, 0 === i || i === this.valuesCount / 2 ? (s = e / 2, t.x + s > p && (p = t.x + s, n = i), t.x - s < g && (g = t.x - s, a = i)) : i < this.valuesCount / 2 ? t.x + e > p && (p = t.x + e, n = i) : i > this.valuesCount / 2 && t.x - e < g && (g = t.x - e, a = i); l = g, r = Math.ceil(p - this.width), o = this.getIndexAngle(n), h = this.getIndexAngle(a), c = r / Math.sin(o + Math.PI / 2), u = l / Math.sin(h + Math.PI / 2), c = f(c) ? c : 0, u = f(u) ? u : 0, this.drawingArea = d - (u + c) / 2, this.setCenterPoint(u, c) }, setCenterPoint: function (t, i) { var e = this.width - i - this.drawingArea, s = t + this.drawingArea; this.xCenter = (s + e) / 2, this.yCenter = this.height / 2 }, getIndexAngle: function (t) { var i = 2 * Math.PI / this.valuesCount; return t * i - Math.PI / 2 }, getPointPosition: function (t, i) { var e = this.getIndexAngle(t); return { x: Math.cos(e) * i + this.xCenter, y: Math.sin(e) * i + this.yCenter } }, draw: function () { if (this.display) { var t = this.ctx; if (n(this.yLabels, function (i, e) { if (e > 0) { var s, n = e * (this.drawingArea / this.steps), o = this.yCenter - n; if (this.lineWidth > 0) if (t.strokeStyle = this.lineColor, t.lineWidth = this.lineWidth, this.lineArc) t.beginPath(), t.arc(this.xCenter, this.yCenter, n, 0, 2 * Math.PI), t.closePath(), t.stroke(); else { t.beginPath(); for (var a = 0; a < this.valuesCount; a++) s = this.getPointPosition(a, this.calculateCenterOffset(this.min + e * this.stepValue)), 0 === a ? t.moveTo(s.x, s.y) : t.lineTo(s.x, s.y); t.closePath(), t.stroke() } if (this.showLabels) { if (t.font = W(this.fontSize, this.fontStyle, this.fontFamily), this.showLabelBackdrop) { var h = t.measureText(i).width; t.fillStyle = this.backdropColor, t.fillRect(this.xCenter - h / 2 - this.backdropPaddingX, o - this.fontSize / 2 - this.backdropPaddingY, h + 2 * this.backdropPaddingX, this.fontSize + 2 * this.backdropPaddingY) } t.textAlign = "center", t.textBaseline = "middle", t.fillStyle = this.fontColor, t.fillText(i, this.xCenter, o) } } }, this), !this.lineArc) { t.lineWidth = this.angleLineWidth, t.strokeStyle = this.angleLineColor; for (var i = this.valuesCount - 1; i >= 0; i--) { if (this.angleLineWidth > 0) { var e = this.getPointPosition(i, this.calculateCenterOffset(this.max)); t.beginPath(), t.moveTo(this.xCenter, this.yCenter), t.lineTo(e.x, e.y), t.stroke(), t.closePath() } var s = this.getPointPosition(i, this.calculateCenterOffset(this.max) + 5); t.font = W(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), t.fillStyle = this.pointLabelFontColor; var o = this.labels.length, a = this.labels.length / 2, h = a / 2, l = h > i || i > o - h, r = i === h || i === o - h; t.textAlign = 0 === i ? "center" : i === a ? "center" : a > i ? "left" : "right", t.textBaseline = r ? "middle" : l ? "bottom" : "top", t.fillText(this.labels[i], s.x, s.y) } } } } }), s.addEvent(window, "resize", function () { var t; return function () { clearTimeout(t), t = setTimeout(function () { n(e.instances, function (t) { t.options.responsive && t.resize(t.render, !0) }) }, 50) } }()), p ? define(function () { return e }) : "object" == typeof module && module.exports && (module.exports = e), t.Chart = e, e.noConflict = function () { return t.Chart = i, e } }).call(this), function () {
    "use strict"; var t = this, i = t.Chart, e = i.helpers, s = { scaleBeginAtZero: !0, scaleShowGridLines: !0, scaleGridLineColor: "rgba(0,0,0,.05)", scaleGridLineWidth: 1, scaleShowHorizontalLines: !0, scaleShowVerticalLines: !0, barShowStroke: !0, barStrokeWidth: 2, barValueSpacing: 5, barDatasetSpacing: 1, legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>' }; i.Type.extend({
        name: "Bar", defaults: s, initialize: function (t) { var s = this.options; this.ScaleClass = i.Scale.extend({ offsetGridLines: !0, calculateBarX: function (t, i, e) { var n = this.calculateBaseWidth(), o = this.calculateX(e) - n / 2, a = this.calculateBarWidth(t); return o + a * i + i * s.barDatasetSpacing + a / 2 }, calculateBaseWidth: function () { return this.calculateX(1) - this.calculateX(0) - 2 * s.barValueSpacing }, calculateBarWidth: function (t) { var i = this.calculateBaseWidth() - (t - 1) * s.barDatasetSpacing; return i / t } }), this.datasets = [], this.options.showTooltips && e.bindEvents(this, this.options.tooltipEvents, function (t) { var i = "mouseout" !== t.type ? this.getBarsAtEvent(t) : []; this.eachBars(function (t) { t.restore(["fillColor", "strokeColor"]) }), e.each(i, function (t) { t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke }), this.showTooltip(i) }), this.BarClass = i.Rectangle.extend({ strokeWidth: this.options.barStrokeWidth, showStroke: this.options.barShowStroke, ctx: this.chart.ctx }), e.each(t.datasets, function (i) { var s = { label: i.label || null, fillColor: i.fillColor, strokeColor: i.strokeColor, bars: [] }; this.datasets.push(s), e.each(i.data, function (e, n) { s.bars.push(new this.BarClass({ value: e, label: t.labels[n], datasetLabel: i.label, strokeColor: i.strokeColor, fillColor: i.fillColor, highlightFill: i.highlightFill || i.fillColor, highlightStroke: i.highlightStroke || i.strokeColor })) }, this) }, this), this.buildScale(t.labels), this.BarClass.prototype.base = this.scale.endPoint, this.eachBars(function (t, i, s) { e.extend(t, { width: this.scale.calculateBarWidth(this.datasets.length), x: this.scale.calculateBarX(this.datasets.length, s, i), y: this.scale.endPoint }), t.save() }, this), this.render() }, update: function () { this.scale.update(), e.each(this.activeElements, function (t) { t.restore(["fillColor", "strokeColor"]) }), this.eachBars(function (t) { t.save() }), this.render() }, eachBars: function (t) { e.each(this.datasets, function (i, s) { e.each(i.bars, t, this, s) }, this) }, getBarsAtEvent: function (t) { for (var i, s = [], n = e.getRelativePosition(t), o = function (t) { s.push(t.bars[i]) }, a = 0; a < this.datasets.length; a++) for (i = 0; i < this.datasets[a].bars.length; i++) if (this.datasets[a].bars[i].inRange(n.x, n.y)) return e.each(this.datasets, o), s; return s }, buildScale: function (t) { var i = this, s = function () { var t = []; return i.eachBars(function (i) { t.push(i.value) }), t }, n = { templateString: this.options.scaleLabel, height: this.chart.height, width: this.chart.width, ctx: this.chart.ctx, textColor: this.options.scaleFontColor, fontSize: this.options.scaleFontSize, fontStyle: this.options.scaleFontStyle, fontFamily: this.options.scaleFontFamily, valuesCount: t.length, beginAtZero: this.options.scaleBeginAtZero, integersOnly: this.options.scaleIntegersOnly, calculateYRange: function (t) { var i = e.calculateScaleRange(s(), t, this.fontSize, this.beginAtZero, this.integersOnly); e.extend(this, i) }, xLabels: t, font: e.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily), lineWidth: this.options.scaleLineWidth, lineColor: this.options.scaleLineColor, showHorizontalLines: this.options.scaleShowHorizontalLines, showVerticalLines: this.options.scaleShowVerticalLines, gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0, gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)", padding: this.options.showScale ? 0 : this.options.barShowStroke ? this.options.barStrokeWidth : 0, showLabels: this.options.scaleShowLabels, display: this.options.showScale }; this.options.scaleOverride && e.extend(n, { calculateYRange: e.noop, steps: this.options.scaleSteps, stepValue: this.options.scaleStepWidth, min: this.options.scaleStartValue, max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth }), this.scale = new this.ScaleClass(n) }, addData: function (t, i) {
            e.each(t, function (t, e) {
                this.datasets[e].bars.push(new this.BarClass({ value: t, label: i, x: this.scale.calculateBarX(this.datasets.length, e, this.scale.valuesCount + 1), y: this.scale.endPoint, width: this.scale.calculateBarWidth(this.datasets.length), base: this.scale.endPoint, strokeColor: this.datasets[e].strokeColor, fillColor: this.datasets[e].fillColor }))
            }, this), this.scale.addXLabel(i), this.update()
        }, removeData: function () { this.scale.removeXLabel(), e.each(this.datasets, function (t) { t.bars.shift() }, this), this.update() }, reflow: function () { e.extend(this.BarClass.prototype, { y: this.scale.endPoint, base: this.scale.endPoint }); var t = e.extend({ height: this.chart.height, width: this.chart.width }); this.scale.update(t) }, draw: function (t) { var i = t || 1; this.clear(); this.chart.ctx; this.scale.draw(i), e.each(this.datasets, function (t, s) { e.each(t.bars, function (t, e) { t.hasValue() && (t.base = this.scale.endPoint, t.transition({ x: this.scale.calculateBarX(this.datasets.length, s, e), y: this.scale.calculateY(t.value), width: this.scale.calculateBarWidth(this.datasets.length) }, i).draw()) }, this) }, this) }
    })
}.call(this), function () { "use strict"; var t = this, i = t.Chart, e = i.helpers, s = { segmentShowStroke: !0, segmentStrokeColor: "#fff", segmentStrokeWidth: 2, percentageInnerCutout: 50, animationSteps: 100, animationEasing: "easeOutBounce", animateRotate: !0, animateScale: !1, legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>' }; i.Type.extend({ name: "Doughnut", defaults: s, initialize: function (t) { this.segments = [], this.outerRadius = (e.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, this.SegmentArc = i.Arc.extend({ ctx: this.chart.ctx, x: this.chart.width / 2, y: this.chart.height / 2 }), this.options.showTooltips && e.bindEvents(this, this.options.tooltipEvents, function (t) { var i = "mouseout" !== t.type ? this.getSegmentsAtEvent(t) : []; e.each(this.segments, function (t) { t.restore(["fillColor"]) }), e.each(i, function (t) { t.fillColor = t.highlightColor }), this.showTooltip(i) }), this.calculateTotal(t), e.each(t, function (t, i) { this.addData(t, i, !0) }, this), this.render() }, getSegmentsAtEvent: function (t) { var i = [], s = e.getRelativePosition(t); return e.each(this.segments, function (t) { t.inRange(s.x, s.y) && i.push(t) }, this), i }, addData: function (t, i, e) { var s = i || this.segments.length; this.segments.splice(s, 0, new this.SegmentArc({ value: t.value, outerRadius: this.options.animateScale ? 0 : this.outerRadius, innerRadius: this.options.animateScale ? 0 : this.outerRadius / 100 * this.options.percentageInnerCutout, fillColor: t.color, highlightColor: t.highlight || t.color, showStroke: this.options.segmentShowStroke, strokeWidth: this.options.segmentStrokeWidth, strokeColor: this.options.segmentStrokeColor, startAngle: 1.5 * Math.PI, circumference: this.options.animateRotate ? 0 : this.calculateCircumference(t.value), label: t.label })), e || (this.reflow(), this.update()) }, calculateCircumference: function (t) { return 2 * Math.PI * (Math.abs(t) / this.total) }, calculateTotal: function (t) { this.total = 0, e.each(t, function (t) { this.total += Math.abs(t.value) }, this) }, update: function () { this.calculateTotal(this.segments), e.each(this.activeElements, function (t) { t.restore(["fillColor"]) }), e.each(this.segments, function (t) { t.save() }), this.render() }, removeData: function (t) { var i = e.isNumber(t) ? t : this.segments.length - 1; this.segments.splice(i, 1), this.reflow(), this.update() }, reflow: function () { e.extend(this.SegmentArc.prototype, { x: this.chart.width / 2, y: this.chart.height / 2 }), this.outerRadius = (e.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, e.each(this.segments, function (t) { t.update({ outerRadius: this.outerRadius, innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout }) }, this) }, draw: function (t) { var i = t ? t : 1; this.clear(), e.each(this.segments, function (t, e) { t.transition({ circumference: this.calculateCircumference(t.value), outerRadius: this.outerRadius, innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout }, i), t.endAngle = t.startAngle + t.circumference, t.draw(), 0 === e && (t.startAngle = 1.5 * Math.PI), e < this.segments.length - 1 && (this.segments[e + 1].startAngle = t.endAngle) }, this) } }), i.types.Doughnut.extend({ name: "Pie", defaults: e.merge(s, { percentageInnerCutout: 0 }) }) }.call(this), function () { "use strict"; var t = this, i = t.Chart, e = i.helpers, s = { scaleShowGridLines: !0, scaleGridLineColor: "rgba(0,0,0,.05)", scaleGridLineWidth: 1, scaleShowHorizontalLines: !0, scaleShowVerticalLines: !0, bezierCurve: !0, bezierCurveTension: .4, pointDot: !0, pointDotRadius: 4, pointDotStrokeWidth: 1, pointHitDetectionRadius: 20, datasetStroke: !0, datasetStrokeWidth: 2, datasetFill: !0, legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>' }; i.Type.extend({ name: "Line", defaults: s, initialize: function (t) { this.PointClass = i.Point.extend({ strokeWidth: this.options.pointDotStrokeWidth, radius: this.options.pointDotRadius, display: this.options.pointDot, hitDetectionRadius: this.options.pointHitDetectionRadius, ctx: this.chart.ctx, inRange: function (t) { return Math.pow(t - this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius, 2) } }), this.datasets = [], this.options.showTooltips && e.bindEvents(this, this.options.tooltipEvents, function (t) { var i = "mouseout" !== t.type ? this.getPointsAtEvent(t) : []; this.eachPoints(function (t) { t.restore(["fillColor", "strokeColor"]) }), e.each(i, function (t) { t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke }), this.showTooltip(i) }), e.each(t.datasets, function (i) { var s = { label: i.label || null, fillColor: i.fillColor, strokeColor: i.strokeColor, pointColor: i.pointColor, pointStrokeColor: i.pointStrokeColor, points: [] }; this.datasets.push(s), e.each(i.data, function (e, n) { s.points.push(new this.PointClass({ value: e, label: t.labels[n], datasetLabel: i.label, strokeColor: i.pointStrokeColor, fillColor: i.pointColor, highlightFill: i.pointHighlightFill || i.pointColor, highlightStroke: i.pointHighlightStroke || i.pointStrokeColor })) }, this), this.buildScale(t.labels), this.eachPoints(function (t, i) { e.extend(t, { x: this.scale.calculateX(i), y: this.scale.endPoint }), t.save() }, this) }, this), this.render() }, update: function () { this.scale.update(), e.each(this.activeElements, function (t) { t.restore(["fillColor", "strokeColor"]) }), this.eachPoints(function (t) { t.save() }), this.render() }, eachPoints: function (t) { e.each(this.datasets, function (i) { e.each(i.points, t, this) }, this) }, getPointsAtEvent: function (t) { var i = [], s = e.getRelativePosition(t); return e.each(this.datasets, function (t) { e.each(t.points, function (t) { t.inRange(s.x, s.y) && i.push(t) }) }, this), i }, buildScale: function (t) { var s = this, n = function () { var t = []; return s.eachPoints(function (i) { t.push(i.value) }), t }, o = { templateString: this.options.scaleLabel, height: this.chart.height, width: this.chart.width, ctx: this.chart.ctx, textColor: this.options.scaleFontColor, fontSize: this.options.scaleFontSize, fontStyle: this.options.scaleFontStyle, fontFamily: this.options.scaleFontFamily, valuesCount: t.length, beginAtZero: this.options.scaleBeginAtZero, integersOnly: this.options.scaleIntegersOnly, calculateYRange: function (t) { var i = e.calculateScaleRange(n(), t, this.fontSize, this.beginAtZero, this.integersOnly); e.extend(this, i) }, xLabels: t, font: e.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily), lineWidth: this.options.scaleLineWidth, lineColor: this.options.scaleLineColor, showHorizontalLines: this.options.scaleShowHorizontalLines, showVerticalLines: this.options.scaleShowVerticalLines, gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0, gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)", padding: this.options.showScale ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth, showLabels: this.options.scaleShowLabels, display: this.options.showScale }; this.options.scaleOverride && e.extend(o, { calculateYRange: e.noop, steps: this.options.scaleSteps, stepValue: this.options.scaleStepWidth, min: this.options.scaleStartValue, max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth }), this.scale = new i.Scale(o) }, addData: function (t, i) { e.each(t, function (t, e) { this.datasets[e].points.push(new this.PointClass({ value: t, label: i, x: this.scale.calculateX(this.scale.valuesCount + 1), y: this.scale.endPoint, strokeColor: this.datasets[e].pointStrokeColor, fillColor: this.datasets[e].pointColor })) }, this), this.scale.addXLabel(i), this.update() }, removeData: function () { this.scale.removeXLabel(), e.each(this.datasets, function (t) { t.points.shift() }, this), this.update() }, reflow: function () { var t = e.extend({ height: this.chart.height, width: this.chart.width }); this.scale.update(t) }, draw: function (t) { var i = t || 1; this.clear(); var s = this.chart.ctx, n = function (t) { return null !== t.value }, o = function (t, i, s) { return e.findNextWhere(i, n, s) || t }, a = function (t, i, s) { return e.findPreviousWhere(i, n, s) || t }; this.scale.draw(i), e.each(this.datasets, function (t) { var h = e.where(t.points, n); e.each(t.points, function (t, e) { t.hasValue() && t.transition({ y: this.scale.calculateY(t.value), x: this.scale.calculateX(e) }, i) }, this), this.options.bezierCurve && e.each(h, function (t, i) { var s = i > 0 && i < h.length - 1 ? this.options.bezierCurveTension : 0; t.controlPoints = e.splineCurve(a(t, h, i), t, o(t, h, i), s), t.controlPoints.outer.y > this.scale.endPoint ? t.controlPoints.outer.y = this.scale.endPoint : t.controlPoints.outer.y < this.scale.startPoint && (t.controlPoints.outer.y = this.scale.startPoint), t.controlPoints.inner.y > this.scale.endPoint ? t.controlPoints.inner.y = this.scale.endPoint : t.controlPoints.inner.y < this.scale.startPoint && (t.controlPoints.inner.y = this.scale.startPoint) }, this), s.lineWidth = this.options.datasetStrokeWidth, s.strokeStyle = t.strokeColor, s.beginPath(), e.each(h, function (t, i) { if (0 === i) s.moveTo(t.x, t.y); else if (this.options.bezierCurve) { var e = a(t, h, i); s.bezierCurveTo(e.controlPoints.outer.x, e.controlPoints.outer.y, t.controlPoints.inner.x, t.controlPoints.inner.y, t.x, t.y) } else s.lineTo(t.x, t.y) }, this), s.stroke(), this.options.datasetFill && h.length > 0 && (s.lineTo(h[h.length - 1].x, this.scale.endPoint), s.lineTo(h[0].x, this.scale.endPoint), s.fillStyle = t.fillColor, s.closePath(), s.fill()), e.each(h, function (t) { t.draw() }) }, this) } }) }.call(this), function () { "use strict"; var t = this, i = t.Chart, e = i.helpers, s = { scaleShowLabelBackdrop: !0, scaleBackdropColor: "rgba(255,255,255,0.75)", scaleBeginAtZero: !0, scaleBackdropPaddingY: 2, scaleBackdropPaddingX: 2, scaleShowLine: !0, segmentShowStroke: !0, segmentStrokeColor: "#fff", segmentStrokeWidth: 2, animationSteps: 100, animationEasing: "easeOutBounce", animateRotate: !0, animateScale: !1, legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>' }; i.Type.extend({ name: "PolarArea", defaults: s, initialize: function (t) { this.segments = [], this.SegmentArc = i.Arc.extend({ showStroke: this.options.segmentShowStroke, strokeWidth: this.options.segmentStrokeWidth, strokeColor: this.options.segmentStrokeColor, ctx: this.chart.ctx, innerRadius: 0, x: this.chart.width / 2, y: this.chart.height / 2 }), this.scale = new i.RadialScale({ display: this.options.showScale, fontStyle: this.options.scaleFontStyle, fontSize: this.options.scaleFontSize, fontFamily: this.options.scaleFontFamily, fontColor: this.options.scaleFontColor, showLabels: this.options.scaleShowLabels, showLabelBackdrop: this.options.scaleShowLabelBackdrop, backdropColor: this.options.scaleBackdropColor, backdropPaddingY: this.options.scaleBackdropPaddingY, backdropPaddingX: this.options.scaleBackdropPaddingX, lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0, lineColor: this.options.scaleLineColor, lineArc: !0, width: this.chart.width, height: this.chart.height, xCenter: this.chart.width / 2, yCenter: this.chart.height / 2, ctx: this.chart.ctx, templateString: this.options.scaleLabel, valuesCount: t.length }), this.updateScaleRange(t), this.scale.update(), e.each(t, function (t, i) { this.addData(t, i, !0) }, this), this.options.showTooltips && e.bindEvents(this, this.options.tooltipEvents, function (t) { var i = "mouseout" !== t.type ? this.getSegmentsAtEvent(t) : []; e.each(this.segments, function (t) { t.restore(["fillColor"]) }), e.each(i, function (t) { t.fillColor = t.highlightColor }), this.showTooltip(i) }), this.render() }, getSegmentsAtEvent: function (t) { var i = [], s = e.getRelativePosition(t); return e.each(this.segments, function (t) { t.inRange(s.x, s.y) && i.push(t) }, this), i }, addData: function (t, i, e) { var s = i || this.segments.length; this.segments.splice(s, 0, new this.SegmentArc({ fillColor: t.color, highlightColor: t.highlight || t.color, label: t.label, value: t.value, outerRadius: this.options.animateScale ? 0 : this.scale.calculateCenterOffset(t.value), circumference: this.options.animateRotate ? 0 : this.scale.getCircumference(), startAngle: 1.5 * Math.PI })), e || (this.reflow(), this.update()) }, removeData: function (t) { var i = e.isNumber(t) ? t : this.segments.length - 1; this.segments.splice(i, 1), this.reflow(), this.update() }, calculateTotal: function (t) { this.total = 0, e.each(t, function (t) { this.total += t.value }, this), this.scale.valuesCount = this.segments.length }, updateScaleRange: function (t) { var i = []; e.each(t, function (t) { i.push(t.value) }); var s = this.options.scaleOverride ? { steps: this.options.scaleSteps, stepValue: this.options.scaleStepWidth, min: this.options.scaleStartValue, max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth } : e.calculateScaleRange(i, e.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly); e.extend(this.scale, s, { size: e.min([this.chart.width, this.chart.height]), xCenter: this.chart.width / 2, yCenter: this.chart.height / 2 }) }, update: function () { this.calculateTotal(this.segments), e.each(this.segments, function (t) { t.save() }), this.reflow(), this.render() }, reflow: function () { e.extend(this.SegmentArc.prototype, { x: this.chart.width / 2, y: this.chart.height / 2 }), this.updateScaleRange(this.segments), this.scale.update(), e.extend(this.scale, { xCenter: this.chart.width / 2, yCenter: this.chart.height / 2 }), e.each(this.segments, function (t) { t.update({ outerRadius: this.scale.calculateCenterOffset(t.value) }) }, this) }, draw: function (t) { var i = t || 1; this.clear(), e.each(this.segments, function (t, e) { t.transition({ circumference: this.scale.getCircumference(), outerRadius: this.scale.calculateCenterOffset(t.value) }, i), t.endAngle = t.startAngle + t.circumference, 0 === e && (t.startAngle = 1.5 * Math.PI), e < this.segments.length - 1 && (this.segments[e + 1].startAngle = t.endAngle), t.draw() }, this), this.scale.draw() } }) }.call(this), function () { "use strict"; var t = this, i = t.Chart, e = i.helpers; i.Type.extend({ name: "Radar", defaults: { scaleShowLine: !0, angleShowLineOut: !0, scaleShowLabels: !1, scaleBeginAtZero: !0, angleLineColor: "rgba(0,0,0,.1)", angleLineWidth: 1, pointLabelFontFamily: "'Arial'", pointLabelFontStyle: "normal", pointLabelFontSize: 10, pointLabelFontColor: "#666", pointDot: !0, pointDotRadius: 3, pointDotStrokeWidth: 1, pointHitDetectionRadius: 20, datasetStroke: !0, datasetStrokeWidth: 2, datasetFill: !0, legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>' }, initialize: function (t) { this.PointClass = i.Point.extend({ strokeWidth: this.options.pointDotStrokeWidth, radius: this.options.pointDotRadius, display: this.options.pointDot, hitDetectionRadius: this.options.pointHitDetectionRadius, ctx: this.chart.ctx }), this.datasets = [], this.buildScale(t), this.options.showTooltips && e.bindEvents(this, this.options.tooltipEvents, function (t) { var i = "mouseout" !== t.type ? this.getPointsAtEvent(t) : []; this.eachPoints(function (t) { t.restore(["fillColor", "strokeColor"]) }), e.each(i, function (t) { t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke }), this.showTooltip(i) }), e.each(t.datasets, function (i) { var s = { label: i.label || null, fillColor: i.fillColor, strokeColor: i.strokeColor, pointColor: i.pointColor, pointStrokeColor: i.pointStrokeColor, points: [] }; this.datasets.push(s), e.each(i.data, function (e, n) { var o; this.scale.animation || (o = this.scale.getPointPosition(n, this.scale.calculateCenterOffset(e))), s.points.push(new this.PointClass({ value: e, label: t.labels[n], datasetLabel: i.label, x: this.options.animation ? this.scale.xCenter : o.x, y: this.options.animation ? this.scale.yCenter : o.y, strokeColor: i.pointStrokeColor, fillColor: i.pointColor, highlightFill: i.pointHighlightFill || i.pointColor, highlightStroke: i.pointHighlightStroke || i.pointStrokeColor })) }, this) }, this), this.render() }, eachPoints: function (t) { e.each(this.datasets, function (i) { e.each(i.points, t, this) }, this) }, getPointsAtEvent: function (t) { var i = e.getRelativePosition(t), s = e.getAngleFromPoint({ x: this.scale.xCenter, y: this.scale.yCenter }, i), n = 2 * Math.PI / this.scale.valuesCount, o = Math.round((s.angle - 1.5 * Math.PI) / n), a = []; return (o >= this.scale.valuesCount || 0 > o) && (o = 0), s.distance <= this.scale.drawingArea && e.each(this.datasets, function (t) { a.push(t.points[o]) }), a }, buildScale: function (t) { this.scale = new i.RadialScale({ display: this.options.showScale, fontStyle: this.options.scaleFontStyle, fontSize: this.options.scaleFontSize, fontFamily: this.options.scaleFontFamily, fontColor: this.options.scaleFontColor, showLabels: this.options.scaleShowLabels, showLabelBackdrop: this.options.scaleShowLabelBackdrop, backdropColor: this.options.scaleBackdropColor, backdropPaddingY: this.options.scaleBackdropPaddingY, backdropPaddingX: this.options.scaleBackdropPaddingX, lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0, lineColor: this.options.scaleLineColor, angleLineColor: this.options.angleLineColor, angleLineWidth: this.options.angleShowLineOut ? this.options.angleLineWidth : 0, pointLabelFontColor: this.options.pointLabelFontColor, pointLabelFontSize: this.options.pointLabelFontSize, pointLabelFontFamily: this.options.pointLabelFontFamily, pointLabelFontStyle: this.options.pointLabelFontStyle, height: this.chart.height, width: this.chart.width, xCenter: this.chart.width / 2, yCenter: this.chart.height / 2, ctx: this.chart.ctx, templateString: this.options.scaleLabel, labels: t.labels, valuesCount: t.datasets[0].data.length }), this.scale.setScaleSize(), this.updateScaleRange(t.datasets), this.scale.buildYLabels() }, updateScaleRange: function (t) { var i = function () { var i = []; return e.each(t, function (t) { t.data ? i = i.concat(t.data) : e.each(t.points, function (t) { i.push(t.value) }) }), i }(), s = this.options.scaleOverride ? { steps: this.options.scaleSteps, stepValue: this.options.scaleStepWidth, min: this.options.scaleStartValue, max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth } : e.calculateScaleRange(i, e.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly); e.extend(this.scale, s) }, addData: function (t, i) { this.scale.valuesCount++, e.each(t, function (t, e) { var s = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(t)); this.datasets[e].points.push(new this.PointClass({ value: t, label: i, x: s.x, y: s.y, strokeColor: this.datasets[e].pointStrokeColor, fillColor: this.datasets[e].pointColor })) }, this), this.scale.labels.push(i), this.reflow(), this.update() }, removeData: function () { this.scale.valuesCount--, this.scale.labels.shift(), e.each(this.datasets, function (t) { t.points.shift() }, this), this.reflow(), this.update() }, update: function () { this.eachPoints(function (t) { t.save() }), this.reflow(), this.render() }, reflow: function () { e.extend(this.scale, { width: this.chart.width, height: this.chart.height, size: e.min([this.chart.width, this.chart.height]), xCenter: this.chart.width / 2, yCenter: this.chart.height / 2 }), this.updateScaleRange(this.datasets), this.scale.setScaleSize(), this.scale.buildYLabels() }, draw: function (t) { var i = t || 1, s = this.chart.ctx; this.clear(), this.scale.draw(), e.each(this.datasets, function (t) { e.each(t.points, function (t, e) { t.hasValue() && t.transition(this.scale.getPointPosition(e, this.scale.calculateCenterOffset(t.value)), i) }, this), s.lineWidth = this.options.datasetStrokeWidth, s.strokeStyle = t.strokeColor, s.beginPath(), e.each(t.points, function (t, i) { 0 === i ? s.moveTo(t.x, t.y) : s.lineTo(t.x, t.y) }, this), s.closePath(), s.stroke(), s.fillStyle = t.fillColor, s.fill(), e.each(t.points, function (t) { t.hasValue() && t.draw() }) }, this) } }) }.call(this);;/*! Magnific Popup - v1.0.0 - 2015-01-03
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2015 Dmitry Semenov; */
!function (a) { "function" == typeof define && define.amd ? define(["jquery"], a) : a("object" == typeof exports ? require("jquery") : window.jQuery || window.Zepto) }(function (a) { var b, c, d, e, f, g, h = "Close", i = "BeforeClose", j = "AfterClose", k = "BeforeAppend", l = "MarkupParse", m = "Open", n = "Change", o = "mfp", p = "." + o, q = "mfp-ready", r = "mfp-removing", s = "mfp-prevent-close", t = function () { }, u = !!window.jQuery, v = a(window), w = function (a, c) { b.ev.on(o + a + p, c) }, x = function (b, c, d, e) { var f = document.createElement("div"); return f.className = "mfp-" + b, d && (f.innerHTML = d), e ? c && c.appendChild(f) : (f = a(f), c && f.appendTo(c)), f }, y = function (c, d) { b.ev.triggerHandler(o + c, d), b.st.callbacks && (c = c.charAt(0).toLowerCase() + c.slice(1), b.st.callbacks[c] && b.st.callbacks[c].apply(b, a.isArray(d) ? d : [d])) }, z = function (c) { return c === g && b.currTemplate.closeBtn || (b.currTemplate.closeBtn = a(b.st.closeMarkup.replace("%title%", b.st.tClose)), g = c), b.currTemplate.closeBtn }, A = function () { a.magnificPopup.instance || (b = new t, b.init(), a.magnificPopup.instance = b) }, B = function () { var a = document.createElement("p").style, b = ["ms", "O", "Moz", "Webkit"]; if (void 0 !== a.transition) return !0; for (; b.length;) if (b.pop() + "Transition" in a) return !0; return !1 }; t.prototype = { constructor: t, init: function () { var c = navigator.appVersion; b.isIE7 = -1 !== c.indexOf("MSIE 7."), b.isIE8 = -1 !== c.indexOf("MSIE 8."), b.isLowIE = b.isIE7 || b.isIE8, b.isAndroid = /android/gi.test(c), b.isIOS = /iphone|ipad|ipod/gi.test(c), b.supportsTransition = B(), b.probablyMobile = b.isAndroid || b.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent), d = a(document), b.popupsCache = {} }, open: function (c) { var e; if (c.isObj === !1) { b.items = c.items.toArray(), b.index = 0; var g, h = c.items; for (e = 0; e < h.length; e++) if (g = h[e], g.parsed && (g = g.el[0]), g === c.el[0]) { b.index = e; break } } else b.items = a.isArray(c.items) ? c.items : [c.items], b.index = c.index || 0; if (b.isOpen) return void b.updateItemHTML(); b.types = [], f = "", b.ev = c.mainEl && c.mainEl.length ? c.mainEl.eq(0) : d, c.key ? (b.popupsCache[c.key] || (b.popupsCache[c.key] = {}), b.currTemplate = b.popupsCache[c.key]) : b.currTemplate = {}, b.st = a.extend(!0, {}, a.magnificPopup.defaults, c), b.fixedContentPos = "auto" === b.st.fixedContentPos ? !b.probablyMobile : b.st.fixedContentPos, b.st.modal && (b.st.closeOnContentClick = !1, b.st.closeOnBgClick = !1, b.st.showCloseBtn = !1, b.st.enableEscapeKey = !1), b.bgOverlay || (b.bgOverlay = x("bg").on("click" + p, function () { b.close() }), b.wrap = x("wrap").attr("tabindex", -1).on("click" + p, function (a) { b._checkIfClose(a.target) && b.close() }), b.container = x("container", b.wrap)), b.contentContainer = x("content"), b.st.preloader && (b.preloader = x("preloader", b.container, b.st.tLoading)); var i = a.magnificPopup.modules; for (e = 0; e < i.length; e++) { var j = i[e]; j = j.charAt(0).toUpperCase() + j.slice(1), b["init" + j].call(b) } y("BeforeOpen"), b.st.showCloseBtn && (b.st.closeBtnInside ? (w(l, function (a, b, c, d) { c.close_replaceWith = z(d.type) }), f += " mfp-close-btn-in") : b.wrap.append(z())), b.st.alignTop && (f += " mfp-align-top"), b.wrap.css(b.fixedContentPos ? { overflow: b.st.overflowY, overflowX: "hidden", overflowY: b.st.overflowY } : { top: v.scrollTop(), position: "absolute" }), (b.st.fixedBgPos === !1 || "auto" === b.st.fixedBgPos && !b.fixedContentPos) && b.bgOverlay.css({ height: d.height(), position: "absolute" }), b.st.enableEscapeKey && d.on("keyup" + p, function (a) { 27 === a.keyCode && b.close() }), v.on("resize" + p, function () { b.updateSize() }), b.st.closeOnContentClick || (f += " mfp-auto-cursor"), f && b.wrap.addClass(f); var k = b.wH = v.height(), n = {}; if (b.fixedContentPos && b._hasScrollBar(k)) { var o = b._getScrollbarSize(); o && (n.marginRight = o) } b.fixedContentPos && (b.isIE7 ? a("body, html").css("overflow", "hidden") : n.overflow = "hidden"); var r = b.st.mainClass; return b.isIE7 && (r += " mfp-ie7"), r && b._addClassToMFP(r), b.updateItemHTML(), y("BuildControls"), a("html").css(n), b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo || a(document.body)), b._lastFocusedEl = document.activeElement, setTimeout(function () { b.content ? (b._addClassToMFP(q), b._setFocus()) : b.bgOverlay.addClass(q), d.on("focusin" + p, b._onFocusIn) }, 16), b.isOpen = !0, b.updateSize(k), y(m), c }, close: function () { b.isOpen && (y(i), b.isOpen = !1, b.st.removalDelay && !b.isLowIE && b.supportsTransition ? (b._addClassToMFP(r), setTimeout(function () { b._close() }, b.st.removalDelay)) : b._close()) }, _close: function () { y(h); var c = r + " " + q + " "; if (b.bgOverlay.detach(), b.wrap.detach(), b.container.empty(), b.st.mainClass && (c += b.st.mainClass + " "), b._removeClassFromMFP(c), b.fixedContentPos) { var e = { marginRight: "" }; b.isIE7 ? a("body, html").css("overflow", "") : e.overflow = "", a("html").css(e) } d.off("keyup" + p + " focusin" + p), b.ev.off(p), b.wrap.attr("class", "mfp-wrap").removeAttr("style"), b.bgOverlay.attr("class", "mfp-bg"), b.container.attr("class", "mfp-container"), !b.st.showCloseBtn || b.st.closeBtnInside && b.currTemplate[b.currItem.type] !== !0 || b.currTemplate.closeBtn && b.currTemplate.closeBtn.detach(), b._lastFocusedEl && a(b._lastFocusedEl).focus(), b.currItem = null, b.content = null, b.currTemplate = null, b.prevHeight = 0, y(j) }, updateSize: function (a) { if (b.isIOS) { var c = document.documentElement.clientWidth / window.innerWidth, d = window.innerHeight * c; b.wrap.css("height", d), b.wH = d } else b.wH = a || v.height(); b.fixedContentPos || b.wrap.css("height", b.wH), y("Resize") }, updateItemHTML: function () { var c = b.items[b.index]; b.contentContainer.detach(), b.content && b.content.detach(), c.parsed || (c = b.parseEl(b.index)); var d = c.type; if (y("BeforeChange", [b.currItem ? b.currItem.type : "", d]), b.currItem = c, !b.currTemplate[d]) { var f = b.st[d] ? b.st[d].markup : !1; y("FirstMarkupParse", f), b.currTemplate[d] = f ? a(f) : !0 } e && e !== c.type && b.container.removeClass("mfp-" + e + "-holder"); var g = b["get" + d.charAt(0).toUpperCase() + d.slice(1)](c, b.currTemplate[d]); b.appendContent(g, d), c.preloaded = !0, y(n, c), e = c.type, b.container.prepend(b.contentContainer), y("AfterChange") }, appendContent: function (a, c) { b.content = a, a ? b.st.showCloseBtn && b.st.closeBtnInside && b.currTemplate[c] === !0 ? b.content.find(".mfp-close").length || b.content.append(z()) : b.content = a : b.content = "", y(k), b.container.addClass("mfp-" + c + "-holder"), b.contentContainer.append(b.content) }, parseEl: function (c) { var d, e = b.items[c]; if (e.tagName ? e = { el: a(e) } : (d = e.type, e = { data: e, src: e.src }), e.el) { for (var f = b.types, g = 0; g < f.length; g++) if (e.el.hasClass("mfp-" + f[g])) { d = f[g]; break } e.src = e.el.attr("data-mfp-src"), e.src || (e.src = e.el.attr("href")) } return e.type = d || b.st.type || "inline", e.index = c, e.parsed = !0, b.items[c] = e, y("ElementParse", e), b.items[c] }, addGroup: function (a, c) { var d = function (d) { d.mfpEl = this, b._openClick(d, a, c) }; c || (c = {}); var e = "click.magnificPopup"; c.mainEl = a, c.items ? (c.isObj = !0, a.off(e).on(e, d)) : (c.isObj = !1, c.delegate ? a.off(e).on(e, c.delegate, d) : (c.items = a, a.off(e).on(e, d))) }, _openClick: function (c, d, e) { var f = void 0 !== e.midClick ? e.midClick : a.magnificPopup.defaults.midClick; if (f || 2 !== c.which && !c.ctrlKey && !c.metaKey) { var g = void 0 !== e.disableOn ? e.disableOn : a.magnificPopup.defaults.disableOn; if (g) if (a.isFunction(g)) { if (!g.call(b)) return !0 } else if (v.width() < g) return !0; c.type && (c.preventDefault(), b.isOpen && c.stopPropagation()), e.el = a(c.mfpEl), e.delegate && (e.items = d.find(e.delegate)), b.open(e) } }, updateStatus: function (a, d) { if (b.preloader) { c !== a && b.container.removeClass("mfp-s-" + c), d || "loading" !== a || (d = b.st.tLoading); var e = { status: a, text: d }; y("UpdateStatus", e), a = e.status, d = e.text, b.preloader.html(d), b.preloader.find("a").on("click", function (a) { a.stopImmediatePropagation() }), b.container.addClass("mfp-s-" + a), c = a } }, _checkIfClose: function (c) { if (!a(c).hasClass(s)) { var d = b.st.closeOnContentClick, e = b.st.closeOnBgClick; if (d && e) return !0; if (!b.content || a(c).hasClass("mfp-close") || b.preloader && c === b.preloader[0]) return !0; if (c === b.content[0] || a.contains(b.content[0], c)) { if (d) return !0 } else if (e && a.contains(document, c)) return !0; return !1 } }, _addClassToMFP: function (a) { b.bgOverlay.addClass(a), b.wrap.addClass(a) }, _removeClassFromMFP: function (a) { this.bgOverlay.removeClass(a), b.wrap.removeClass(a) }, _hasScrollBar: function (a) { return (b.isIE7 ? d.height() : document.body.scrollHeight) > (a || v.height()) }, _setFocus: function () { (b.st.focus ? b.content.find(b.st.focus).eq(0) : b.wrap).focus() }, _onFocusIn: function (c) { return c.target === b.wrap[0] || a.contains(b.wrap[0], c.target) ? void 0 : (b._setFocus(), !1) }, _parseMarkup: function (b, c, d) { var e; d.data && (c = a.extend(d.data, c)), y(l, [b, c, d]), a.each(c, function (a, c) { if (void 0 === c || c === !1) return !0; if (e = a.split("_"), e.length > 1) { var d = b.find(p + "-" + e[0]); if (d.length > 0) { var f = e[1]; "replaceWith" === f ? d[0] !== c[0] && d.replaceWith(c) : "img" === f ? d.is("img") ? d.attr("src", c) : d.replaceWith('<img src="' + c + '" class="' + d.attr("class") + '" />') : d.attr(e[1], c) } } else b.find(p + "-" + a).html(c) }) }, _getScrollbarSize: function () { if (void 0 === b.scrollbarSize) { var a = document.createElement("div"); a.style.cssText = "width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;", document.body.appendChild(a), b.scrollbarSize = a.offsetWidth - a.clientWidth, document.body.removeChild(a) } return b.scrollbarSize } }, a.magnificPopup = { instance: null, proto: t.prototype, modules: [], open: function (b, c) { return A(), b = b ? a.extend(!0, {}, b) : {}, b.isObj = !0, b.index = c || 0, this.instance.open(b) }, close: function () { return a.magnificPopup.instance && a.magnificPopup.instance.close() }, registerModule: function (b, c) { c.options && (a.magnificPopup.defaults[b] = c.options), a.extend(this.proto, c.proto), this.modules.push(b) }, defaults: { disableOn: 0, key: null, midClick: !1, mainClass: "", preloader: !0, focus: "", closeOnContentClick: !1, closeOnBgClick: !0, closeBtnInside: !0, showCloseBtn: !0, enableEscapeKey: !0, modal: !1, alignTop: !1, removalDelay: 0, prependTo: null, fixedContentPos: "auto", fixedBgPos: "auto", overflowY: "auto", closeMarkup: '<button title="%title%" type="button" class="mfp-close">&times;</button>', tClose: "Close (Esc)", tLoading: "Loading..." } }, a.fn.magnificPopup = function (c) { A(); var d = a(this); if ("string" == typeof c) if ("open" === c) { var e, f = u ? d.data("magnificPopup") : d[0].magnificPopup, g = parseInt(arguments[1], 10) || 0; f.items ? e = f.items[g] : (e = d, f.delegate && (e = e.find(f.delegate)), e = e.eq(g)), b._openClick({ mfpEl: e }, d, f) } else b.isOpen && b[c].apply(b, Array.prototype.slice.call(arguments, 1)); else c = a.extend(!0, {}, c), u ? d.data("magnificPopup", c) : d[0].magnificPopup = c, b.addGroup(d, c); return d }; var C, D, E, F = "inline", G = function () { E && (D.after(E.addClass(C)).detach(), E = null) }; a.magnificPopup.registerModule(F, { options: { hiddenClass: "hide", markup: "", tNotFound: "Content not found" }, proto: { initInline: function () { b.types.push(F), w(h + "." + F, function () { G() }) }, getInline: function (c, d) { if (G(), c.src) { var e = b.st.inline, f = a(c.src); if (f.length) { var g = f[0].parentNode; g && g.tagName && (D || (C = e.hiddenClass, D = x(C), C = "mfp-" + C), E = f.after(D).detach().removeClass(C)), b.updateStatus("ready") } else b.updateStatus("error", e.tNotFound), f = a("<div>"); return c.inlineElement = f, f } return b.updateStatus("ready"), b._parseMarkup(d, {}, c), d } } }); var H, I = "ajax", J = function () { H && a(document.body).removeClass(H) }, K = function () { J(), b.req && b.req.abort() }; a.magnificPopup.registerModule(I, { options: { settings: null, cursor: "mfp-ajax-cur", tError: '<a href="%url%">The content</a> could not be loaded.' }, proto: { initAjax: function () { b.types.push(I), H = b.st.ajax.cursor, w(h + "." + I, K), w("BeforeChange." + I, K) }, getAjax: function (c) { H && a(document.body).addClass(H), b.updateStatus("loading"); var d = a.extend({ url: c.src, success: function (d, e, f) { var g = { data: d, xhr: f }; y("ParseAjax", g), b.appendContent(a(g.data), I), c.finished = !0, J(), b._setFocus(), setTimeout(function () { b.wrap.addClass(q) }, 16), b.updateStatus("ready"), y("AjaxContentAdded") }, error: function () { J(), c.finished = c.loadError = !0, b.updateStatus("error", b.st.ajax.tError.replace("%url%", c.src)) } }, b.st.ajax.settings); return b.req = a.ajax(d), "" } } }); var L, M = function (c) { if (c.data && void 0 !== c.data.title) return c.data.title; var d = b.st.image.titleSrc; if (d) { if (a.isFunction(d)) return d.call(b, c); if (c.el) return c.el.attr(d) || "" } return "" }; a.magnificPopup.registerModule("image", { options: { markup: '<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>', cursor: "mfp-zoom-out-cur", titleSrc: "title", verticalFit: !0, tError: '<a href="%url%">The image</a> could not be loaded.' }, proto: { initImage: function () { var c = b.st.image, d = ".image"; b.types.push("image"), w(m + d, function () { "image" === b.currItem.type && c.cursor && a(document.body).addClass(c.cursor) }), w(h + d, function () { c.cursor && a(document.body).removeClass(c.cursor), v.off("resize" + p) }), w("Resize" + d, b.resizeImage), b.isLowIE && w("AfterChange", b.resizeImage) }, resizeImage: function () { var a = b.currItem; if (a && a.img && b.st.image.verticalFit) { var c = 0; b.isLowIE && (c = parseInt(a.img.css("padding-top"), 10) + parseInt(a.img.css("padding-bottom"), 10)), a.img.css("max-height", b.wH - c) } }, _onImageHasSize: function (a) { a.img && (a.hasSize = !0, L && clearInterval(L), a.isCheckingImgSize = !1, y("ImageHasSize", a), a.imgHidden && (b.content && b.content.removeClass("mfp-loading"), a.imgHidden = !1)) }, findImageSize: function (a) { var c = 0, d = a.img[0], e = function (f) { L && clearInterval(L), L = setInterval(function () { return d.naturalWidth > 0 ? void b._onImageHasSize(a) : (c > 200 && clearInterval(L), c++, void (3 === c ? e(10) : 40 === c ? e(50) : 100 === c && e(500))) }, f) }; e(1) }, getImage: function (c, d) { var e = 0, f = function () { c && (c.img[0].complete ? (c.img.off(".mfploader"), c === b.currItem && (b._onImageHasSize(c), b.updateStatus("ready")), c.hasSize = !0, c.loaded = !0, y("ImageLoadComplete")) : (e++, 200 > e ? setTimeout(f, 100) : g())) }, g = function () { c && (c.img.off(".mfploader"), c === b.currItem && (b._onImageHasSize(c), b.updateStatus("error", h.tError.replace("%url%", c.src))), c.hasSize = !0, c.loaded = !0, c.loadError = !0) }, h = b.st.image, i = d.find(".mfp-img"); if (i.length) { var j = document.createElement("img"); j.className = "mfp-img", c.el && c.el.find("img").length && (j.alt = c.el.find("img").attr("alt")), c.img = a(j).on("load.mfploader", f).on("error.mfploader", g), j.src = c.src, i.is("img") && (c.img = c.img.clone()), j = c.img[0], j.naturalWidth > 0 ? c.hasSize = !0 : j.width || (c.hasSize = !1) } return b._parseMarkup(d, { title: M(c), img_replaceWith: c.img }, c), b.resizeImage(), c.hasSize ? (L && clearInterval(L), c.loadError ? (d.addClass("mfp-loading"), b.updateStatus("error", h.tError.replace("%url%", c.src))) : (d.removeClass("mfp-loading"), b.updateStatus("ready")), d) : (b.updateStatus("loading"), c.loading = !0, c.hasSize || (c.imgHidden = !0, d.addClass("mfp-loading"), b.findImageSize(c)), d) } } }); var N, O = function () { return void 0 === N && (N = void 0 !== document.createElement("p").style.MozTransform), N }; a.magnificPopup.registerModule("zoom", { options: { enabled: !1, easing: "ease-in-out", duration: 300, opener: function (a) { return a.is("img") ? a : a.find("img") } }, proto: { initZoom: function () { var a, c = b.st.zoom, d = ".zoom"; if (c.enabled && b.supportsTransition) { var e, f, g = c.duration, j = function (a) { var b = a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"), d = "all " + c.duration / 1e3 + "s " + c.easing, e = { position: "fixed", zIndex: 9999, left: 0, top: 0, "-webkit-backface-visibility": "hidden" }, f = "transition"; return e["-webkit-" + f] = e["-moz-" + f] = e["-o-" + f] = e[f] = d, b.css(e), b }, k = function () { b.content.css("visibility", "visible") }; w("BuildControls" + d, function () { if (b._allowZoom()) { if (clearTimeout(e), b.content.css("visibility", "hidden"), a = b._getItemToZoom(), !a) return void k(); f = j(a), f.css(b._getOffset()), b.wrap.append(f), e = setTimeout(function () { f.css(b._getOffset(!0)), e = setTimeout(function () { k(), setTimeout(function () { f.remove(), a = f = null, y("ZoomAnimationEnded") }, 16) }, g) }, 16) } }), w(i + d, function () { if (b._allowZoom()) { if (clearTimeout(e), b.st.removalDelay = g, !a) { if (a = b._getItemToZoom(), !a) return; f = j(a) } f.css(b._getOffset(!0)), b.wrap.append(f), b.content.css("visibility", "hidden"), setTimeout(function () { f.css(b._getOffset()) }, 16) } }), w(h + d, function () { b._allowZoom() && (k(), f && f.remove(), a = null) }) } }, _allowZoom: function () { return "image" === b.currItem.type }, _getItemToZoom: function () { return b.currItem.hasSize ? b.currItem.img : !1 }, _getOffset: function (c) { var d; d = c ? b.currItem.img : b.st.zoom.opener(b.currItem.el || b.currItem); var e = d.offset(), f = parseInt(d.css("padding-top"), 10), g = parseInt(d.css("padding-bottom"), 10); e.top -= a(window).scrollTop() - f; var h = { width: d.width(), height: (u ? d.innerHeight() : d[0].offsetHeight) - g - f }; return O() ? h["-moz-transform"] = h.transform = "translate(" + e.left + "px," + e.top + "px)" : (h.left = e.left, h.top = e.top), h } } }); var P = "iframe", Q = "//about:blank", R = function (a) { if (b.currTemplate[P]) { var c = b.currTemplate[P].find("iframe"); c.length && (a || (c[0].src = Q), b.isIE8 && c.css("display", a ? "block" : "none")) } }; a.magnificPopup.registerModule(P, { options: { markup: '<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>', srcAction: "iframe_src", patterns: { youtube: { index: "youtube.com", id: "v=", src: "//www.youtube.com/embed/%id%?autoplay=1" }, vimeo: { index: "vimeo.com/", id: "/", src: "//player.vimeo.com/video/%id%?autoplay=1" }, gmaps: { index: "//maps.google.", src: "%id%&output=embed" } } }, proto: { initIframe: function () { b.types.push(P), w("BeforeChange", function (a, b, c) { b !== c && (b === P ? R() : c === P && R(!0)) }), w(h + "." + P, function () { R() }) }, getIframe: function (c, d) { var e = c.src, f = b.st.iframe; a.each(f.patterns, function () { return e.indexOf(this.index) > -1 ? (this.id && (e = "string" == typeof this.id ? e.substr(e.lastIndexOf(this.id) + this.id.length, e.length) : this.id.call(this, e)), e = this.src.replace("%id%", e), !1) : void 0 }); var g = {}; return f.srcAction && (g[f.srcAction] = e), b._parseMarkup(d, g, c), b.updateStatus("ready"), d } } }); var S = function (a) { var c = b.items.length; return a > c - 1 ? a - c : 0 > a ? c + a : a }, T = function (a, b, c) { return a.replace(/%curr%/gi, b + 1).replace(/%total%/gi, c) }; a.magnificPopup.registerModule("gallery", { options: { enabled: !1, arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>', preload: [0, 2], navigateByImgClick: !0, arrows: !0, tPrev: "Previous (Left arrow key)", tNext: "Next (Right arrow key)", tCounter: "%curr% of %total%" }, proto: { initGallery: function () { var c = b.st.gallery, e = ".mfp-gallery", g = Boolean(a.fn.mfpFastClick); return b.direction = !0, c && c.enabled ? (f += " mfp-gallery", w(m + e, function () { c.navigateByImgClick && b.wrap.on("click" + e, ".mfp-img", function () { return b.items.length > 1 ? (b.next(), !1) : void 0 }), d.on("keydown" + e, function (a) { 37 === a.keyCode ? b.prev() : 39 === a.keyCode && b.next() }) }), w("UpdateStatus" + e, function (a, c) { c.text && (c.text = T(c.text, b.currItem.index, b.items.length)) }), w(l + e, function (a, d, e, f) { var g = b.items.length; e.counter = g > 1 ? T(c.tCounter, f.index, g) : "" }), w("BuildControls" + e, function () { if (b.items.length > 1 && c.arrows && !b.arrowLeft) { var d = c.arrowMarkup, e = b.arrowLeft = a(d.replace(/%title%/gi, c.tPrev).replace(/%dir%/gi, "left")).addClass(s), f = b.arrowRight = a(d.replace(/%title%/gi, c.tNext).replace(/%dir%/gi, "right")).addClass(s), h = g ? "mfpFastClick" : "click"; e[h](function () { b.prev() }), f[h](function () { b.next() }), b.isIE7 && (x("b", e[0], !1, !0), x("a", e[0], !1, !0), x("b", f[0], !1, !0), x("a", f[0], !1, !0)), b.container.append(e.add(f)) } }), w(n + e, function () { b._preloadTimeout && clearTimeout(b._preloadTimeout), b._preloadTimeout = setTimeout(function () { b.preloadNearbyImages(), b._preloadTimeout = null }, 16) }), void w(h + e, function () { d.off(e), b.wrap.off("click" + e), b.arrowLeft && g && b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(), b.arrowRight = b.arrowLeft = null })) : !1 }, next: function () { b.direction = !0, b.index = S(b.index + 1), b.updateItemHTML() }, prev: function () { b.direction = !1, b.index = S(b.index - 1), b.updateItemHTML() }, goTo: function (a) { b.direction = a >= b.index, b.index = a, b.updateItemHTML() }, preloadNearbyImages: function () { var a, c = b.st.gallery.preload, d = Math.min(c[0], b.items.length), e = Math.min(c[1], b.items.length); for (a = 1; a <= (b.direction ? e : d) ; a++) b._preloadItem(b.index + a); for (a = 1; a <= (b.direction ? d : e) ; a++) b._preloadItem(b.index - a) }, _preloadItem: function (c) { if (c = S(c), !b.items[c].preloaded) { var d = b.items[c]; d.parsed || (d = b.parseEl(c)), y("LazyLoad", d), "image" === d.type && (d.img = a('<img class="mfp-img" />').on("load.mfploader", function () { d.hasSize = !0 }).on("error.mfploader", function () { d.hasSize = !0, d.loadError = !0, y("LazyLoadError", d) }).attr("src", d.src)), d.preloaded = !0 } } } }); var U = "retina"; a.magnificPopup.registerModule(U, { options: { replaceSrc: function (a) { return a.src.replace(/\.\w+$/, function (a) { return "@2x" + a }) }, ratio: 1 }, proto: { initRetina: function () { if (window.devicePixelRatio > 1) { var a = b.st.retina, c = a.ratio; c = isNaN(c) ? c() : c, c > 1 && (w("ImageHasSize." + U, function (a, b) { b.img.css({ "max-width": b.img[0].naturalWidth / c, width: "100%" }) }), w("ElementParse." + U, function (b, d) { d.src = a.replaceSrc(d, c) })) } } } }), function () { var b = 1e3, c = "ontouchstart" in window, d = function () { v.off("touchmove" + f + " touchend" + f) }, e = "mfpFastClick", f = "." + e; a.fn.mfpFastClick = function (e) { return a(this).each(function () { var g, h = a(this); if (c) { var i, j, k, l, m, n; h.on("touchstart" + f, function (a) { l = !1, n = 1, m = a.originalEvent ? a.originalEvent.touches[0] : a.touches[0], j = m.clientX, k = m.clientY, v.on("touchmove" + f, function (a) { m = a.originalEvent ? a.originalEvent.touches : a.touches, n = m.length, m = m[0], (Math.abs(m.clientX - j) > 10 || Math.abs(m.clientY - k) > 10) && (l = !0, d()) }).on("touchend" + f, function (a) { d(), l || n > 1 || (g = !0, a.preventDefault(), clearTimeout(i), i = setTimeout(function () { g = !1 }, b), e()) }) }) } h.on("click" + f, function () { g || e() }) }) }, a.fn.destroyMfpFastClick = function () { a(this).off("touchstart" + f + " click" + f), c && v.off("touchmove" + f + " touchend" + f) } }(), A() });;if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());;+function(a){var d=function(e,f){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.init("tooltip",e,f)};d.VERSION="3.3.2";d.TRANSITION_DURATION=150;d.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};d.prototype.init=function(m,e,j){this.enabled=true;this.type=m;this.$element=a(e);this.options=this.getOptions(j);this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);if(this.$element[0] instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var l=this.options.trigger.split(" ");for(var h=l.length;h--;){var k=l[h];if(k=="click"){this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this))}else{if(k!="manual"){var f=k=="hover"?"mouseenter":"focusin";var g=k=="hover"?"mouseleave":"focusout";this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(g+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}}this.options.selector?(this._options=a.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()};d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.getOptions=function(e){e=a.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};d.prototype.getDelegateOptions=function(){var f={};var e=this.getDefaults();this._options&&a.each(this._options,function(g,h){if(e[g]!=h){f[g]=h}});return f};d.prototype.enter=function(e){var f=e instanceof this.constructor?e:a(e.currentTarget).data("bs."+this.type);if(f&&f.$tip&&f.$tip.is(":visible")){f.hoverState="in";return}if(!f){f=new this.constructor(e.currentTarget,this.getDelegateOptions());a(e.currentTarget).data("bs."+this.type,f)}clearTimeout(f.timeout);f.hoverState="in";if(!f.options.delay||!f.options.delay.show){return f.show()}f.timeout=setTimeout(function(){if(f.hoverState=="in"){f.show()}},f.options.delay.show)};d.prototype.leave=function(e){var f=e instanceof this.constructor?e:a(e.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(e.currentTarget,this.getDelegateOptions());a(e.currentTarget).data("bs."+this.type,f)}clearTimeout(f.timeout);f.hoverState="out";if(!f.options.delay||!f.options.delay.hide){return f.hide()}f.timeout=setTimeout(function(){if(f.hoverState=="out"){f.hide()}},f.options.delay.hide)};d.prototype.show=function(){var o=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(o);var p=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(o.isDefaultPrevented()||!p){return}var t=this;var g=this.tip();var u=this.getUID(this.type);this.setContent();g.attr("id",u);this.$element.attr("aria-describedby",u);if(this.options.animation){g.addClass("fade")}var r=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;var k=/\s?auto?\s?/i;var j=k.test(r);if(j){r=r.replace(k,"")||"top"}g.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this);this.options.container?g.appendTo(this.options.container):g.insertAfter(this.$element);var s=this.getPosition();var i=g[0].offsetWidth;var h=g[0].offsetHeight;if(j){var q=r;var f=this.options.container?a(this.options.container):this.$element.parent();var n=this.getPosition(f);r=r=="bottom"&&s.bottom+h>n.bottom?"top":r=="top"&&s.top-h<n.top?"bottom":r=="right"&&s.right+i>n.width?"left":r=="left"&&s.left-i<n.left?"right":r;g.removeClass(q).addClass(r)}var l=this.getCalculatedOffset(r,s,i,h);this.applyPlacement(l,r);var m=function(){var e=t.hoverState;t.$element.trigger("shown.bs."+t.type);t.hoverState=null;if(e=="out"){t.leave(t)}};a.support.transition&&this.$tip.hasClass("fade")?g.one("bsTransitionEnd",m).emulateTransitionEnd(d.TRANSITION_DURATION):m()}};d.prototype.applyPlacement=function(o,p){var e=this.tip();var q=e[0].offsetWidth;var k=e[0].offsetHeight;var n=parseInt(e.css("margin-top"),10);var m=parseInt(e.css("margin-left"),10);if(isNaN(n)){n=0}if(isNaN(m)){m=0}o.top=o.top+n;o.left=o.left+m;a.offset.setOffset(e[0],a.extend({using:function(r){e.css({top:Math.round(r.top),left:Math.round(r.left)})}},o),0);e.addClass("in");var g=e[0].offsetWidth;var f=e[0].offsetHeight;if(p=="top"&&f!=k){o.top=o.top+k-f}var j=this.getViewportAdjustedDelta(p,o,g,f);if(j.left){o.left+=j.left}else{o.top+=j.top}var l=/top|bottom/.test(p);var h=l?j.left*2-q+g:j.top*2-k+f;var i=l?"offsetWidth":"offsetHeight";e.offset(o);this.replaceArrow(h,e[0][i],l)};d.prototype.replaceArrow=function(e,f,g){this.arrow().css(g?"left":"top",50*(1-e/f)+"%").css(g?"top":"left","")};d.prototype.setContent=function(){var e=this.tip();var f=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](f);e.removeClass("fade in top bottom left right")};d.prototype.hide=function(g){var j=this;var f=a(this.$tip);var i=a.Event("hide.bs."+this.type);function h(){if(j.hoverState!="in"){f.detach()}j.$element.removeAttr("aria-describedby").trigger("hidden.bs."+j.type);g&&g()}this.$element.trigger(i);if(i.isDefaultPrevented()){return}f.removeClass("in");a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",h).emulateTransitionEnd(d.TRANSITION_DURATION):h();this.hoverState=null;return this};d.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof(e.attr("data-original-title"))!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};d.prototype.hasContent=function(){return this.getTitle()};d.prototype.getPosition=function(e){e=e||this.$element;var f=e[0];var i=f.tagName=="BODY";var h=f.getBoundingClientRect();if(h.width==null){h=a.extend({},h,{width:h.right-h.left,height:h.bottom-h.top})}var g=i?{top:0,left:0}:e.offset();var k={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()};var j=i?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},h,k,j,g)};d.prototype.getCalculatedOffset=function(g,h,f,e){return g=="bottom"?{top:h.top+h.height,left:h.left+h.width/2-f/2}:g=="top"?{top:h.top-e,left:h.left+h.width/2-f/2}:g=="left"?{top:h.top+h.height/2-e/2,left:h.left-f}:{top:h.top+h.height/2-e/2,left:h.left+h.width}};d.prototype.getViewportAdjustedDelta=function(j,k,f,e){var h={top:0,left:0};if(!this.$viewport){return h}var o=this.options.viewport&&this.options.viewport.padding||0;var n=this.getPosition(this.$viewport);if(/right|left/.test(j)){var m=k.top-o-n.scroll;var g=k.top+o-n.scroll+e;if(m<n.top){h.top=n.top-m}else{if(g>n.top+n.height){h.top=n.top+n.height-g}}}else{var i=k.left-o;var l=k.left+o+f;if(i<n.left){h.left=n.left-i}else{if(l>n.width){h.left=n.left+n.width-l}}}return h};d.prototype.getTitle=function(){var g;var e=this.$element;var f=this.options;g=e.attr("data-original-title")||(typeof f.title=="function"?f.title.call(e[0]):f.title);return g};d.prototype.getUID=function(e){do{e+=~~(Math.random()*1000000)}while(document.getElementById(e));return e};d.prototype.tip=function(){return(this.$tip=this.$tip||a(this.options.template))};d.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow"))};d.prototype.enable=function(){this.enabled=true};d.prototype.disable=function(){this.enabled=false};d.prototype.toggleEnabled=function(){this.enabled=!this.enabled};d.prototype.toggle=function(f){var g=this;if(f){g=a(f.currentTarget).data("bs."+this.type);if(!g){g=new this.constructor(f.currentTarget,this.getDelegateOptions());a(f.currentTarget).data("bs."+this.type,g)}}g.tip().hasClass("in")?g.leave(g):g.enter(g)};d.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};function c(e){return this.each(function(){var f=a(this);var g=f.data("bs.tooltip");var h=typeof e=="object"&&e;if(!g&&/destroy|hide/.test(e)){return}if(!g){f.data("bs.tooltip",(g=new d(this,h)))}if(typeof e=="string"){g[e]()}})}var b=a.fn.tooltip;a.fn.tooltip=c;a.fn.tooltip.Constructor=d;a.fn.tooltip.noConflict=function(){a.fn.tooltip=b;return this}}(jQuery);;+function(a){var d=function(e,f){this.init("popover",e,f)};if(!a.fn.tooltip){throw new Error("Popover requires tooltip.js")}d.VERSION="3.3.7";d.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});d.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);d.prototype.constructor=d;d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.setContent=function(){var e=this.tip();var g=this.getTitle();var f=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](g);e.find(".popover-content").children().detach().end()[this.options.html?(typeof f=="string"?"html":"append"):"text"](f);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html()){e.find(".popover-title").hide()}};d.prototype.hasContent=function(){return this.getTitle()||this.getContent()};d.prototype.getContent=function(){var e=this.$element;var f=this.options;return e.attr("data-content")||(typeof f.content=="function"?f.content.call(e[0]):f.content)};d.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".arrow"))};function c(e){return this.each(function(){var f=a(this);var g=f.data("bs.popover");var h=typeof e=="object"&&e;if(!g&&/destroy|hide/.test(e)){return}if(!g){f.data("bs.popover",(g=new d(this,h)))}if(typeof e=="string"){g[e]()}})}var b=a.fn.popover;a.fn.popover=c;a.fn.popover.Constructor=d;a.fn.popover.noConflict=function(){a.fn.popover=b;return this}}(jQuery);;/*!
 *
 * MediaElement.js
 * HTML5 <video> and <audio> shim and player
 * http://mediaelementjs.com/
 *
 * Creates a JavaScript object that mimics HTML5 MediaElement API
 * for browsers that don't understand HTML5 or can't play the provided codec
 * Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
 *
 * Copyright 2010-2014, John Dyer (http://j.hn)
 * License: MIT
 *
 */
function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(a){mejs.YouTubeApi.flashReady(a)}var mejs=mejs||{};mejs.version="2.17.0",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube","video/dailymotion","video/x-dailymotion","application/x-mpegURL"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(a){var b=document.createElement("div");return b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>',b.firstChild.href},getScriptPath:function(a){for(var b,c,d,e,f,g,h=0,i="",j="",k=document.getElementsByTagName("script"),l=k.length,m=a.length;l>h;h++){for(e=k[h].src,c=e.lastIndexOf("/"),c>-1?(g=e.substring(c+1),f=e.substring(0,c+1)):(g=e,f=""),b=0;m>b;b++)if(j=a[b],d=g.indexOf(j),d>-1){i=f;break}if(""!==i)break}return i},secondsToTimeCode:function(a,b,c,d){"undefined"==typeof c?c=!1:"undefined"==typeof d&&(d=25);var e=Math.floor(a/3600)%24,f=Math.floor(a/60)%60,g=Math.floor(a%60),h=Math.floor((a%1*d).toFixed(3)),i=(b||e>0?(10>e?"0"+e:e)+":":"")+(10>f?"0"+f:f)+":"+(10>g?"0"+g:g)+(c?":"+(10>h?"0"+h:h):"");return i},timeCodeToSeconds:function(a,b,c,d){"undefined"==typeof c?c=!1:"undefined"==typeof d&&(d=25);var e=a.split(":"),f=parseInt(e[0],10),g=parseInt(e[1],10),h=parseInt(e[2],10),i=0,j=0;return c&&(i=parseInt(e[3])/d),j=3600*f+60*g+h+i},convertSMPTEtoSeconds:function(a){if("string"!=typeof a)return!1;a=a.replace(",",".");var b=0,c=-1!=a.indexOf(".")?a.split(".")[1].length:0,d=1;a=a.split(":").reverse();for(var e=0;e<a.length;e++)d=1,e>0&&(d=Math.pow(60,e)),b+=Number(a[e])*d;return Number(b.toFixed(c))},removeSwf:function(a){var b=document.getElementById(a);b&&/object|embed/i.test(b.nodeName)&&(mejs.MediaFeatures.isIE?(b.style.display="none",function(){4==b.readyState?mejs.Utility.removeObjectInIE(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))},removeObjectInIE:function(a){var b=document.getElementById(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}},mejs.PluginDetector={hasPluginVersion:function(a,b){var c=this.plugins[a];return b[1]=b[1]||0,b[2]=b[2]||0,c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(a,b,c,d,e){this.plugins[a]=this.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var e,f,g,h=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[a]){if(e=this.nav.plugins[a].description,e&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[b]||this.nav.mimeTypes[b].enabledPlugin))for(h=e.replace(a,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),f=0;f<h.length;f++)h[f]=parseInt(h[f].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{g=new ActiveXObject(c),g&&(h=d(g))}catch(i){}return h}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(a){var b=[],c=a.GetVariable("$version");return c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]),b}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(a){var b=[0,0,0,0],c=function(a,b,c,d){for(;a.isVersionSupported(b[0]+"."+b[1]+"."+b[2]+"."+b[3]);)b[c]+=d;b[c]-=d};return c(a,b,0,1),c(a,b,1,1),c(a,b,2,1e4),c(a,b,2,1e3),c(a,b,2,100),c(a,b,2,10),c(a,b,2,1),c(a,b,3,1),b}),mejs.MediaFeatures={init:function(){var a,b,c=this,d=document,e=mejs.PluginDetector.nav,f=mejs.PluginDetector.ua.toLowerCase(),g=["source","track","audio","video"];c.isiPad=null!==f.match(/ipad/i),c.isiPhone=null!==f.match(/iphone/i),c.isiOS=c.isiPhone||c.isiPad,c.isAndroid=null!==f.match(/android/i),c.isBustedAndroid=null!==f.match(/android 2\.[12]/),c.isBustedNativeHTTPS="https:"===location.protocol&&(null!==f.match(/android [12]\./)||null!==f.match(/macintosh.* version.* safari/)),c.isIE=-1!=e.appName.toLowerCase().indexOf("microsoft")||null!==e.appName.toLowerCase().match(/trident/gi),c.isChrome=null!==f.match(/chrome/gi),c.isChromium=null!==f.match(/chromium/gi),c.isFirefox=null!==f.match(/firefox/gi),c.isWebkit=null!==f.match(/webkit/gi),c.isGecko=null!==f.match(/gecko/gi)&&!c.isWebkit&&!c.isIE,c.isOpera=null!==f.match(/opera/gi),c.hasTouch="ontouchstart"in window,c.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(a=0;a<g.length;a++)b=document.createElement(g[a]);c.supportsMediaTag="undefined"!=typeof b.canPlayType||c.isBustedAndroid;try{b.canPlayType("video/mp4")}catch(h){c.supportsMediaTag=!1}c.hasSemiNativeFullScreen="undefined"!=typeof b.webkitEnterFullscreen,c.hasNativeFullscreen="undefined"!=typeof b.requestFullscreen,c.hasWebkitNativeFullScreen="undefined"!=typeof b.webkitRequestFullScreen,c.hasMozNativeFullScreen="undefined"!=typeof b.mozRequestFullScreen,c.hasMsNativeFullScreen="undefined"!=typeof b.msRequestFullscreen,c.hasTrueNativeFullScreen=c.hasWebkitNativeFullScreen||c.hasMozNativeFullScreen||c.hasMsNativeFullScreen,c.nativeFullScreenEnabled=c.hasTrueNativeFullScreen,c.hasMozNativeFullScreen?c.nativeFullScreenEnabled=document.mozFullScreenEnabled:c.hasMsNativeFullScreen&&(c.nativeFullScreenEnabled=document.msFullscreenEnabled),c.isChrome&&(c.hasSemiNativeFullScreen=!1),c.hasTrueNativeFullScreen&&(c.fullScreenEventName="",c.hasWebkitNativeFullScreen?c.fullScreenEventName="webkitfullscreenchange":c.hasMozNativeFullScreen?c.fullScreenEventName="mozfullscreenchange":c.hasMsNativeFullScreen&&(c.fullScreenEventName="MSFullscreenChange"),c.isFullScreen=function(){return c.hasMozNativeFullScreen?d.mozFullScreen:c.hasWebkitNativeFullScreen?d.webkitIsFullScreen:c.hasMsNativeFullScreen?null!==d.msFullscreenElement:void 0},c.requestFullScreen=function(a){c.hasWebkitNativeFullScreen?a.webkitRequestFullScreen():c.hasMozNativeFullScreen?a.mozRequestFullScreen():c.hasMsNativeFullScreen&&a.msRequestFullscreen()},c.cancelFullScreen=function(){c.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():c.hasMozNativeFullScreen?document.mozCancelFullScreen():c.hasMsNativeFullScreen&&document.msExitFullscreen()}),c.hasSemiNativeFullScreen&&f.match(/mac os x 10_5/i)&&(c.hasNativeFullScreen=!1,c.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){for(var b=this.getElementsByTagName("source");b.length>0;)this.removeChild(b[0]);if("string"==typeof a)this.src=a;else{var c,d;for(c=0;c<a.length;c++)if(d=a[c],this.canPlayType(d.type)){this.src=d.src;break}}},setVideoSize:function(a,b){this.width=a,this.height=b}},mejs.PluginMediaElement=function(a,b,c){this.id=a,this.pluginType=b,this.src=c,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(a){var b,c,d,e=mejs.plugins[this.pluginType];for(b=0;b<e.length;b++)if(d=e[b],mejs.PluginDetector.hasPluginVersion(this.pluginType,d.version))for(c=0;c<d.types.length;c++)if(a==d.types[c])return"probably";return""},positionFullscreenButton:function(a,b,c){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(a),Math.floor(b),c)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(a){if("string"==typeof a)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a)),this.src=mejs.Utility.absolutizeUrl(a);else{var b,c;for(b=0;b<a.length;b++)if(c=a[b],this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src)),this.src=mejs.Utility.absolutizeUrl(a);break}}},setCurrentTime:function(a){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(a):this.pluginApi.setCurrentTime(a),this.currentTime=a)},setVolume:function(a){null!=this.pluginApi&&(this.pluginApi.setVolume("youtube"==this.pluginType?100*a:a),this.volume=a)},setMuted:function(a){null!=this.pluginApi&&("youtube"==this.pluginType?(a?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=a,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(a),this.muted=a)},setVideoSize:function(a,b){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=a+"px",this.pluginElement.style.height=b+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(a,b)},setFullscreen:function(a){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(a)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(a,b){this.events[a]=this.events[a]||[],this.events[a].push(b)},removeEventListener:function(a,b){if(!a)return this.events={},!0;var c=this.events[a];if(!c)return!0;if(!b)return this.events[a]=[],!0;for(var d=0;d<c.length;d++)if(c[d]===b)return this.events[a].splice(d,1),!0;return!1},dispatchEvent:function(a){var b,c,d=this.events[a];if(d)for(c=Array.prototype.slice.call(arguments,1),b=0;b<d.length;b++)d[b].apply(this,c)},hasAttribute:function(a){return a in this.attributes},removeAttribute:function(a){delete this.attributes[a]},getAttribute:function(a){return this.hasAttribute(a)?this.attributes[a]:""},setAttribute:function(a,b){this.attributes[a]=b},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(a,b,c){this.pluginMediaElements[a]=b,this.htmlMediaElements[a]=c},unregisterPluginElement:function(a){delete this.pluginMediaElements[a],delete this.htmlMediaElements[a]},initPlugin:function(a){var b=this.pluginMediaElements[a],c=this.htmlMediaElements[a];if(b){switch(b.pluginType){case"flash":b.pluginElement=b.pluginApi=document.getElementById(a);break;case"silverlight":b.pluginElement=document.getElementById(b.id),b.pluginApi=b.pluginElement.Content.MediaElementJS}null!=b.pluginApi&&b.success&&b.success(b,c)}},fireEvent:function(a,b,c){var d,e,f,g=this.pluginMediaElements[a];if(g){d={type:b,target:g};for(e in c)g[e]=c[e],d[e]=c[e];f=c.bufferedTime||0,d.target.buffered=d.buffered={start:function(){return 0},end:function(){return f},length:1},g.dispatchEvent(d.type,d)}}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)},mejs.HtmlMediaElementShim={create:function(a,b){var c,d,e=mejs.MediaElementDefaults,f="string"==typeof a?document.getElementById(a):a,g=f.tagName.toLowerCase(),h="audio"===g||"video"===g,i=f.getAttribute(h?"src":"href"),j=f.getAttribute("poster"),k=f.getAttribute("autoplay"),l=f.getAttribute("preload"),m=f.getAttribute("controls");for(d in b)e[d]=b[d];return i="undefined"==typeof i||null===i||""==i?null:i,j="undefined"==typeof j||null===j?"":j,l="undefined"==typeof l||null===l||"false"===l?"none":l,k=!("undefined"==typeof k||null===k||"false"===k),m=!("undefined"==typeof m||null===m||"false"===m),c=this.determinePlayback(f,e,mejs.MediaFeatures.supportsMediaTag,h,i),c.url=null!==c.url?mejs.Utility.absolutizeUrl(c.url):"","native"==c.method?(mejs.MediaFeatures.isBustedAndroid&&(f.src=c.url,f.addEventListener("click",function(){f.play()},!1)),this.updateNative(c,e,k,l)):""!==c.method?this.createPlugin(c,e,j,k,l,m):(this.createErrorMessage(c,e,j),this)},determinePlayback:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=[],r={method:"",url:"",htmlMediaElement:a,isVideo:"audio"!=a.tagName.toLowerCase()};if("undefined"!=typeof b.type&&""!==b.type)if("string"==typeof b.type)q.push({type:b.type,url:e});else for(f=0;f<b.type.length;f++)q.push({type:b.type[f],url:e});else if(null!==e)k=this.formatType(e,a.getAttribute("type")),q.push({type:k,url:e});else for(f=0;f<a.childNodes.length;f++)j=a.childNodes[f],1==j.nodeType&&"source"==j.tagName.toLowerCase()&&(e=j.getAttribute("src"),k=this.formatType(e,j.getAttribute("type")),p=j.getAttribute("media"),(!p||!window.matchMedia||window.matchMedia&&window.matchMedia(p).matches)&&q.push({type:k,url:e}));if(!d&&q.length>0&&null!==q[0].url&&this.getTypeFromFile(q[0].url).indexOf("audio")>-1&&(r.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(a.canPlayType=function(a){return null!==a.match(/video\/(mp4|m4v)/gi)?"maybe":""}),mejs.MediaFeatures.isChromium&&(a.canPlayType=function(a){return null!==a.match(/video\/(webm|ogv|ogg)/gi)?"maybe":""}),!(!c||"auto"!==b.mode&&"auto_plugin"!==b.mode&&"native"!==b.mode||mejs.MediaFeatures.isBustedNativeHTTPS&&b.httpsBasicAuthSite===!0)){for(d||(o=document.createElement(r.isVideo?"video":"audio"),a.parentNode.insertBefore(o,a),a.style.display="none",r.htmlMediaElement=a=o),f=0;f<q.length;f++)if("video/m3u8"==q[f].type||""!==a.canPlayType(q[f].type).replace(/no/,"")||""!==a.canPlayType(q[f].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==a.canPlayType(q[f].type.replace(/m4a/,"mp4")).replace(/no/,"")){r.method="native",r.url=q[f].url;break}if("native"===r.method&&(null!==r.url&&(a.src=r.url),"auto_plugin"!==b.mode))return r}if("auto"===b.mode||"auto_plugin"===b.mode||"shim"===b.mode)for(f=0;f<q.length;f++)for(k=q[f].type,g=0;g<b.plugins.length;g++)for(l=b.plugins[g],m=mejs.plugins[l],h=0;h<m.length;h++)if(n=m[h],null==n.version||mejs.PluginDetector.hasPluginVersion(l,n.version))for(i=0;i<n.types.length;i++)if(k==n.types[i])return r.method=l,r.url=q[f].url,r;return"auto_plugin"===b.mode&&"native"===r.method?r:(""===r.method&&q.length>0&&(r.url=q[0].url),r)},formatType:function(a,b){return a&&!b?this.getTypeFromFile(a):b&&~b.indexOf(";")?b.substr(0,b.indexOf(";")):b},getTypeFromFile:function(a){a=a.split("?")[0];var b=a.substring(a.lastIndexOf(".")+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(b)?"video":"audio")+"/"+this.getTypeFromExtension(b)},getTypeFromExtension:function(a){switch(a){case"mp4":case"m4v":case"m4a":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return a}},createErrorMessage:function(a,b,c){var d=a.htmlMediaElement,e=document.createElement("div");e.className="me-cannotplay";try{e.style.width=d.width+"px",e.style.height=d.height+"px"}catch(f){}e.innerHTML=b.customError?b.customError:""!==c?'<a href="'+a.url+'"><img src="'+c+'" width="100%" height="100%" /></a>':'<a href="'+a.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>",d.parentNode.insertBefore(e,d),d.style.display="none",b.error(d)},createPlugin:function(a,b,c,d,e,f){var g,h,i,j=a.htmlMediaElement,k=1,l=1,m="me_"+a.method+"_"+mejs.meIndex++,n=new mejs.PluginMediaElement(m,a.method,a.url),o=document.createElement("div");n.tagName=j.tagName;for(var p=0;p<j.attributes.length;p++){var q=j.attributes[p];1==q.specified&&n.setAttribute(q.name,q.value)}for(h=j.parentNode;null!==h&&null!=h.tagName&&"body"!==h.tagName.toLowerCase()&&null!=h.parentNode&&null!=h.parentNode.tagName&&null!=h.parentNode.constructor&&"ShadowRoot"===h.parentNode.constructor.name;){if("p"===h.parentNode.tagName.toLowerCase()){h.parentNode.parentNode.insertBefore(h,h.parentNode);break}h=h.parentNode}switch(a.isVideo?(k=b.pluginWidth>0?b.pluginWidth:b.videoWidth>0?b.videoWidth:null!==j.getAttribute("width")?j.getAttribute("width"):b.defaultVideoWidth,l=b.pluginHeight>0?b.pluginHeight:b.videoHeight>0?b.videoHeight:null!==j.getAttribute("height")?j.getAttribute("height"):b.defaultVideoHeight,k=mejs.Utility.encodeUrl(k),l=mejs.Utility.encodeUrl(l)):b.enablePluginDebug&&(k=320,l=240),n.success=b.success,mejs.MediaPluginBridge.registerPluginElement(m,n,j),o.className="me-plugin",o.id=m+"_container",a.isVideo?j.parentNode.insertBefore(o,j):document.body.insertBefore(o,document.body.childNodes[0]),i=["id="+m,"jsinitfunction=mejs.MediaPluginBridge.initPlugin","jscallbackfunction=mejs.MediaPluginBridge.fireEvent","isvideo="+(a.isVideo?"true":"false"),"autoplay="+(d?"true":"false"),"preload="+e,"width="+k,"startvolume="+b.startVolume,"timerrate="+b.timerRate,"flashstreamer="+b.flashStreamer,"height="+l,"pseudostreamstart="+b.pseudoStreamingStartQueryParam],null!==a.url&&i.push("flash"==a.method?"file="+mejs.Utility.encodeUrl(a.url):"file="+a.url),b.enablePluginDebug&&i.push("debug=true"),b.enablePluginSmoothing&&i.push("smoothing=true"),b.enablePseudoStreaming&&i.push("pseudostreaming=true"),f&&i.push("controls=true"),b.pluginVars&&(i=i.concat(b.pluginVars)),a.method){case"silverlight":o.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+m+'" name="'+m+'" width="'+k+'" height="'+l+'" class="mejs-shim"><param name="initParams" value="'+i.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+b.pluginPath+b.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(g=document.createElement("div"),o.appendChild(g),g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+m+'" width="'+k+'" height="'+l+'" class="mejs-shim"><param name="movie" value="'+b.pluginPath+b.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+i.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):o.innerHTML='<embed id="'+m+'" name="'+m+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+b.pluginPath+b.flashName+'" flashvars="'+i.join("&")+'" width="'+k+'" height="'+l+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var r;-1!=a.url.lastIndexOf("youtu.be")?(r=a.url.substr(a.url.lastIndexOf("/")+1),-1!=r.indexOf("?")&&(r=r.substr(0,r.indexOf("?")))):r=a.url.substr(a.url.lastIndexOf("=")+1),youtubeSettings={container:o,containerId:o.id,pluginMediaElement:n,pluginId:m,videoId:r,height:l,width:k},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":var s=m+"_player";if(n.vimeoid=a.url.substr(a.url.lastIndexOf("/")+1),o.innerHTML='<iframe src="//player.vimeo.com/video/'+n.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+s+'" width="'+k+'" height="'+l+'" frameborder="0" class="mejs-shim" id="'+s+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var t=$f(o.childNodes[0]);t.addEvent("ready",function(){function a(a,b,c,d){var e={type:c,target:b};"timeupdate"==c&&(b.currentTime=e.currentTime=d.seconds,b.duration=e.duration=d.duration),b.dispatchEvent(e.type,e)}t.playVideo=function(){t.api("play")},t.stopVideo=function(){t.api("unload")},t.pauseVideo=function(){t.api("pause")},t.seekTo=function(a){t.api("seekTo",a)},t.setVolume=function(a){t.api("setVolume",a)},t.setMuted=function(a){a?(t.lastVolume=t.api("getVolume"),t.api("setVolume",0)):(t.api("setVolume",t.lastVolume),delete t.lastVolume)},t.addEvent("play",function(){a(t,n,"play"),a(t,n,"playing")}),t.addEvent("pause",function(){a(t,n,"pause")}),t.addEvent("finish",function(){a(t,n,"ended")}),t.addEvent("playProgress",function(b){a(t,n,"timeupdate",b)}),n.pluginElement=o,n.pluginApi=t,mejs.MediaPluginBridge.initPlugin(m)})}else console.warn("You need to include froogaloop for vimeo to work")}return j.style.display="none",j.removeAttribute("autoplay"),n},updateNative:function(a,b){var c,d=a.htmlMediaElement;for(c in mejs.HtmlMediaElement)d[c]=mejs.HtmlMediaElement[c];return b.success(d,d),d}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var a=document.createElement("script");a.src="//www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(a){this.isLoaded?this.createIframe(a):(this.loadIframeApi(),this.iframeQueue.push(a))},createIframe:function(a){var b=a.pluginMediaElement,c=new YT.Player(a.containerId,{height:a.height,width:a.width,videoId:a.videoId,playerVars:{controls:0},events:{onReady:function(){a.pluginMediaElement.pluginApi=c,mejs.MediaPluginBridge.initPlugin(a.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(c,b,"timeupdate")},250)},onStateChange:function(a){mejs.YouTubeApi.handleStateChange(a.data,c,b)}}})},createEvent:function(a,b,c){var d={type:c,target:b};if(a&&a.getDuration){b.currentTime=d.currentTime=a.getCurrentTime(),b.duration=d.duration=a.getDuration(),d.paused=b.paused,d.ended=b.ended,d.muted=a.isMuted(),d.volume=a.getVolume()/100,d.bytesTotal=a.getVideoBytesTotal(),d.bufferedBytes=a.getVideoBytesLoaded();var e=d.bufferedBytes/d.bytesTotal*d.duration;d.target.buffered=d.buffered={start:function(){return 0},end:function(){return e},length:1}}b.dispatchEvent(d.type,d)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var a=this.iframeQueue.pop();this.createIframe(a)}},flashPlayers:{},createFlash:function(a){this.flashPlayers[a.pluginId]=a;var b,c="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+a.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(b=document.createElement("div"),a.container.appendChild(b),b.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+a.pluginId+'" width="'+a.width+'" height="'+a.height+'" class="mejs-shim"><param name="movie" value="'+c+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):a.container.innerHTML='<object type="application/x-shockwave-flash" id="'+a.pluginId+'" data="'+c+'" width="'+a.width+'" height="'+a.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(a){var b=this.flashPlayers[a],c=document.getElementById(a),d=b.pluginMediaElement;d.pluginApi=d.pluginElement=c,mejs.MediaPluginBridge.initPlugin(a),c.cueVideoById(b.videoId);var e=b.containerId+"_callback";window[e]=function(a){mejs.YouTubeApi.handleStateChange(a,c,d)},c.addEventListener("onStateChange",e),setInterval(function(){mejs.YouTubeApi.createEvent(c,d,"timeupdate")},250),mejs.YouTubeApi.createEvent(c,d,"canplay")},handleStateChange:function(a,b,c){switch(a){case-1:c.paused=!0,c.ended=!0,mejs.YouTubeApi.createEvent(b,c,"loadedmetadata");break;case 0:c.paused=!1,c.ended=!0,mejs.YouTubeApi.createEvent(b,c,"ended");break;case 1:c.paused=!1,c.ended=!1,mejs.YouTubeApi.createEvent(b,c,"play"),mejs.YouTubeApi.createEvent(b,c,"playing");break;case 2:c.paused=!0,c.ended=!1,mejs.YouTubeApi.createEvent(b,c,"pause");break;case 3:mejs.YouTubeApi.createEvent(b,c,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(a,b){"use strict";var c={locale:{language:b.i18n&&b.i18n.locale.language||"",strings:b.i18n&&b.i18n.locale.strings||{}},ietf_lang_regex:/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,methods:{}};c.getLanguage=function(){var a=c.locale.language||window.navigator.userLanguage||window.navigator.language;return c.ietf_lang_regex.exec(a)?a:null},"undefined"!=typeof mejsL10n&&(c.locale.language=mejsL10n.language),c.methods.checkPlain=function(a){var b,c,d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};a=String(a);for(b in d)d.hasOwnProperty(b)&&(c=new RegExp(b,"g"),a=a.replace(c,d[b]));return a},c.methods.t=function(a,b){return c.locale.strings&&c.locale.strings[b.context]&&c.locale.strings[b.context][a]&&(a=c.locale.strings[b.context][a]),c.methods.checkPlain(a)},c.t=function(a,b){if("string"==typeof a&&a.length>0){var d=c.getLanguage();return b=b||{context:d},c.methods.t(a,b)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},b.i18n=c}(document,mejs),function(a){"use strict";"undefined"!=typeof mejsL10n&&(a[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings);;/*! rangeslider.js - v1.2.2 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(){var a=document.createElement("input");return a.setAttribute("type","range"),"text"!==a.type}function c(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)}function d(a,b){return b=b||100,function(){if(!a.debouncing){var c=Array.prototype.slice.apply(arguments);a.lastReturnVal=a.apply(window,c),a.debouncing=!0}return clearTimeout(a.debounceTimeout),a.debounceTimeout=setTimeout(function(){a.debouncing=!1},b),a.lastReturnVal}}function e(a){return a&&(0===a.offsetWidth||0===a.offsetHeight||a.open===!1)}function f(a){for(var b=[],c=a.parentNode;e(c);)b.push(c),c=c.parentNode;return b}function g(a,b){function c(a){"undefined"!=typeof a.open&&(a.open=a.open?!1:!0)}var d=f(a),e=d.length,g=[],h=a[b];if(e){for(var i=0;e>i;i++)g[i]=d[i].style.cssText,d[i].style.display="block",d[i].style.height="0",d[i].style.overflow="hidden",d[i].style.visibility="hidden",c(d[i]);h=a[b];for(var j=0;e>j;j++)d[j].style.cssText=g[j],c(d[j])}return h}function h(a,b){var c=parseFloat(a);return Number.isNaN(c)?b:c}function i(b,e){if(this.$window=a(window),this.$document=a(document),this.$element=a(b),this.options=a.extend({},m,e),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&l)return!1;this.identifier="js-"+j+"-"+k++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=a('<div class="'+this.options.fillClass+'" />'),this.$handle=a('<div class="'+this.options.handleClass+'" />'),this.$range=a('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=a.proxy(this.handleDown,this),this.handleMove=a.proxy(this.handleMove,this),this.handleEnd=a.proxy(this.handleEnd,this),this.init();var f=this;this.$window.on("resize."+this.identifier,d(function(){c(function(){f.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(a,b){if(!b||b.origin!==f.identifier){var c=a.target.value,d=f.getPositionFromValue(c);f.setPosition(d)}})}Number.isNaN=Number.isNaN||function(a){return"number"==typeof a&&a!==a};var j="rangeslider",k=0,l=b(),m={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};i.prototype.init=function(){this.update(!0),this.$element[0].value=this.value,this.onInit&&"function"==typeof this.onInit&&this.onInit()},i.prototype.update=function(a){a=a||!1,a&&(this.min=h(this.$element[0].getAttribute("min"),0),this.max=h(this.$element[0].getAttribute("max"),100),this.value=h(this.$element[0].value,this.min+(this.max-this.min)/2),this.step=h(this.$element[0].getAttribute("step"),1)),this.handleWidth=g(this.$handle[0],"offsetWidth"),this.rangeWidth=g(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},i.prototype.handleDown=function(a){if(a.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+a.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var b=this.getRelativePosition(a),c=this.$range[0].getBoundingClientRect().left,d=this.getPositionFromNode(this.$handle[0])-c;this.setPosition(b-this.grabX),b>=d&&b<d+this.handleWidth&&(this.grabX=b-d)}},i.prototype.handleMove=function(a){a.preventDefault();var b=this.getRelativePosition(a);this.setPosition(b-this.grabX)},i.prototype.handleEnd=function(a){a.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},i.prototype.cap=function(a,b,c){return b>a?b:a>c?c:a},i.prototype.setPosition=function(a){var b,c;b=this.getValueFromPosition(this.cap(a,0,this.maxHandleX)),c=this.getPositionFromValue(b),this.$fill[0].style.width=c+this.grabX+"px",this.$handle[0].style.left=c+"px",this.setValue(b),this.position=c,this.value=b,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(c,b)},i.prototype.getPositionFromNode=function(a){for(var b=0;null!==a;)b+=a.offsetLeft,a=a.offsetParent;return b},i.prototype.getRelativePosition=function(a){var b=this.$range[0].getBoundingClientRect().left,c=0;return"undefined"!=typeof a.pageX?c=a.pageX:"undefined"!=typeof a.originalEvent.clientX?c=a.originalEvent.clientX:a.originalEvent.touches&&a.originalEvent.touches[0]&&"undefined"!=typeof a.originalEvent.touches[0].clientX?c=a.originalEvent.touches[0].clientX:a.currentPoint&&"undefined"!=typeof a.currentPoint.x&&(c=a.currentPoint.x),c-b},i.prototype.getPositionFromValue=function(a){var b,c;return b=(a-this.min)/(this.max-this.min),c=b*this.maxHandleX},i.prototype.getValueFromPosition=function(a){var b,c;return b=a/(this.maxHandleX||1),c=this.step*Math.round(b*(this.max-this.min)/this.step)+this.min,Number(c.toFixed(this.toFixed))},i.prototype.setValue=function(a){a!==this.value&&this.$element.val(a).trigger("input",{origin:this.identifier})},i.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+j),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},a.fn[j]=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("plugin_"+j);e||d.data("plugin_"+j,e=new i(this,b)),"string"==typeof b&&e[b].apply(e,c)})}});;(function(){function g(n,q){var p;q=q||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=q.touchBoundary||10;this.layer=n;this.tapDelay=q.tapDelay||200;this.tapTimeout=q.tapTimeout||700;if(g.notNeeded(n)){return}function h(l,i){return function(){return l.apply(i,arguments)}}var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var j=this;for(var k=0,m=o.length;k<m;k++){j[o[k]]=h(j[o[k]],j)}if(a){n.addEventListener("mouseover",this.onMouse,true);n.addEventListener("mousedown",this.onMouse,true);n.addEventListener("mouseup",this.onMouse,true)}n.addEventListener("click",this.onClick,true);n.addEventListener("touchstart",this.onTouchStart,false);n.addEventListener("touchmove",this.onTouchMove,false);n.addEventListener("touchend",this.onTouchEnd,false);n.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){n.removeEventListener=function(s,i,l){var r=Node.prototype.removeEventListener;if(s==="click"){r.call(n,s,i.hijacked||i,l)}else{r.call(n,s,i,l)}};n.addEventListener=function(s,l,r){var i=Node.prototype.addEventListener;if(s==="click"){i.call(n,s,l.hijacked||(l.hijacked=function(t){if(!t.propagationStopped){l(t)}}),r)}else{i.call(n,s,l,r)}}}if(typeof n.onclick==="function"){p=n.onclick;n.addEventListener("click",function(i){p(i)},false);n.onclick=null}}var f=navigator.userAgent.indexOf("Windows Phone")>=0;var a=navigator.userAgent.indexOf("Android")>0&&!f;var c=/iP(ad|hone|od)/.test(navigator.userAgent)&&!f;var d=c&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var e=c&&(/OS [6-7]_\d/).test(navigator.userAgent);var b=navigator.userAgent.indexOf("BB10")>0;g.prototype.needsClick=function(h){switch(h.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(h.disabled){return true}break;case"input":if((c&&h.type==="file")||h.disabled){return true}break;case"label":case"iframe":case"video":return true}return(/\bneedsclick\b/).test(h.className)};g.prototype.needsFocus=function(h){switch(h.nodeName.toLowerCase()){case"textarea":return true;case"select":return !a;case"input":switch(h.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !h.disabled&&!h.readOnly;default:return(/\bneedsfocus\b/).test(h.className)}};g.prototype.sendClick=function(j,i){var h,k;if(document.activeElement&&document.activeElement!==j){document.activeElement.blur()}k=i.changedTouches[0];h=document.createEvent("MouseEvents");h.initMouseEvent(this.determineEventType(j),true,true,window,1,k.screenX,k.screenY,k.clientX,k.clientY,false,false,false,false,0,null);h.forwardedTouchEvent=true;j.dispatchEvent(h)};g.prototype.determineEventType=function(h){if(a&&h.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};g.prototype.focus=function(i){var h;if(c&&i.setSelectionRange&&i.type.indexOf("date")!==0&&i.type!=="time"&&i.type!=="month"){h=i.value.length;i.setSelectionRange(h,h)}else{i.focus()}};g.prototype.updateScrollParent=function(j){var i,h;i=j.fastClickScrollParent;if(!i||!i.contains(j)){h=j;do{if(h.scrollHeight>h.offsetHeight){i=h;j.fastClickScrollParent=h;break}h=h.parentElement}while(h)}if(i){i.fastClickLastScrollTop=i.scrollTop}};g.prototype.getTargetElementFromEventTarget=function(h){if(h.nodeType===Node.TEXT_NODE){return h.parentNode}return h};g.prototype.onTouchStart=function(h){var j,k,i;if(h.targetTouches.length>1){return true}j=this.getTargetElementFromEventTarget(h.target);k=h.targetTouches[0];if(c){i=window.getSelection();if(i.rangeCount&&!i.isCollapsed){return true}if(!d){if(k.identifier&&k.identifier===this.lastTouchIdentifier){h.preventDefault();return false}this.lastTouchIdentifier=k.identifier;this.updateScrollParent(j)}}this.trackingClick=true;this.trackingClickStart=h.timeStamp;this.targetElement=j;this.touchStartX=k.pageX;this.touchStartY=k.pageY;if((h.timeStamp-this.lastClickTime)<this.tapDelay){h.preventDefault()}return true};g.prototype.touchHasMoved=function(i){var j=i.changedTouches[0],h=this.touchBoundary;if(Math.abs(j.pageX-this.touchStartX)>h||Math.abs(j.pageY-this.touchStartY)>h){return true}return false};g.prototype.onTouchMove=function(h){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(h.target)||this.touchHasMoved(h)){this.trackingClick=false;this.targetElement=null}return true};g.prototype.findControl=function(h){if(h.control!==undefined){return h.control}if(h.htmlFor){return document.getElementById(h.htmlFor)}return h.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};g.prototype.onTouchEnd=function(h){var i,n,l,j,m,k=this.targetElement;if(!this.trackingClick){return true}if((h.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((h.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=h.timeStamp;n=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(e){m=h.changedTouches[0];k=document.elementFromPoint(m.pageX-window.pageXOffset,m.pageY-window.pageYOffset)||k;k.fastClickScrollParent=this.targetElement.fastClickScrollParent}l=k.tagName.toLowerCase();if(l==="label"){i=this.findControl(k);if(i){this.focus(k);if(a){return false}k=i}}else{if(this.needsFocus(k)){if((h.timeStamp-n)>100||(c&&window.top!==window&&l==="input")){this.targetElement=null;return false}this.focus(k);this.sendClick(k,h);if(!c||l!=="select"){this.targetElement=null;h.preventDefault()}return false}}if(c&&!d){j=k.fastClickScrollParent;if(j&&j.fastClickLastScrollTop!==j.scrollTop){return true}}if(!this.needsClick(k)){h.preventDefault();this.sendClick(k,h)}return false};g.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};g.prototype.onMouse=function(h){if(!this.targetElement){return true}if(h.forwardedTouchEvent){return true}if(!h.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(h.stopImmediatePropagation){h.stopImmediatePropagation()}else{h.propagationStopped=true}h.stopPropagation();h.preventDefault();return false}return true};g.prototype.onClick=function(h){var i;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(h.target.type==="submit"&&h.detail===0){return true}i=this.onMouse(h);if(!i){this.targetElement=null}return i};g.prototype.destroy=function(){var h=this.layer;if(a){h.removeEventListener("mouseover",this.onMouse,true);h.removeEventListener("mousedown",this.onMouse,true);h.removeEventListener("mouseup",this.onMouse,true)}h.removeEventListener("click",this.onClick,true);h.removeEventListener("touchstart",this.onTouchStart,false);h.removeEventListener("touchmove",this.onTouchMove,false);h.removeEventListener("touchend",this.onTouchEnd,false);h.removeEventListener("touchcancel",this.onTouchCancel,false)};g.notNeeded=function(k){var l;var i;var h;var j;if(typeof window.ontouchstart==="undefined"){return true}i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(i){if(a){l=document.querySelector("meta[name=viewport]");if(l){if(l.content.indexOf("user-scalable=no")!==-1){return true}if(i>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(b){h=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(h[1]>=10&&h[2]>=3){l=document.querySelector("meta[name=viewport]");if(l){if(l.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(k.style.msTouchAction==="none"||k.style.touchAction==="manipulation"){return true}j=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(j>=27){l=document.querySelector("meta[name=viewport]");if(l&&(l.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(k.style.touchAction==="none"||k.style.touchAction==="manipulation"){return true}return false};g.attach=function(h,i){return new g(h,i)};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return g})}else{if(typeof module!=="undefined"&&module.exports){module.exports=g.attach;module.exports.FastClick=g}else{window.FastClick=g}}}());;/* nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
(function(a){if(typeof define==="function"&&define.amd){return define(["jquery"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){return module.exports=a(require("jquery"),window,document)}else{return a(jQuery,window,document)}}})(function(a,H,i){var e,f,j,k,l,m,q,r,s,t,u,v,w,x,y,A,B,C,D,F,G,g,h,n,o,p,z,E,b,c,d;h={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:false,preventPageScrolling:false,disableResize:false,alwaysVisible:false,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null};C="scrollbar";B="scroll";s="mousedown";t="mouseenter";u="mousemove";w="mousewheel";v="mouseup";A="resize";l="drag";m="enter";F="up";y="panedown";j="DOMMouseScroll";k="down";G="wheel";q="keydown";r="keyup";D="touchmove";e=H.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(H.navigator.appVersion)&&H.ActiveXObject;f=null;z=H.requestAnimationFrame;g=H.cancelAnimationFrame;b=i.createElement("div").style;d=(function(){var K,L,M,N,I,J;N=["t","webkitT","MozT","msT","OT"];for(K=I=0,J=N.length;I<J;K=++I){M=N[K];L=N[K]+"ransform";if(L in b){return N[K].substr(0,N[K].length-1)}}return false})();c=function(I){if(d===false){return false}if(d===""){return I}return d+I.charAt(0).toUpperCase()+I.substr(1)};E=c("transform");o=E!==false;n=function(){var I,J,K;I=i.createElement("div");J=I.style;J.position="absolute";J.width="100px";J.height="100px";J.overflow=B;J.top="-9999px";i.body.appendChild(I);K=I.offsetWidth-I.clientWidth;i.body.removeChild(I);return K};p=function(){var I,J,K;J=H.navigator.userAgent;I=/(?=.+Mac OS X)(?=.+Firefox)/.test(J);if(!I){return false}K=/Firefox\/\d{2}\./.exec(J);if(K){K=K[0].replace(/\D+/g,"")}return I&&+K>23};x=(function(){function I(J,K){this.el=J;this.options=K;f||(f=n());this.$el=a(this.el);this.doc=a(this.options.documentContext||i);this.win=a(this.options.windowContext||H);this.body=this.doc.find("body");this.$content=this.$el.children("."+this.options.contentClass);this.$content.attr("tabindex",this.options.tabIndex||0);this.content=this.$content[0];this.previousPosition=0;if(this.options.iOSNativeScrolling&&(this.el.style.WebkitOverflowScrolling!=null)){this.nativeScrolling()}else{this.generate()}this.createEvents();this.addEvents();this.reset()}I.prototype.preventScrolling=function(K,J){if(!this.isActive){return}if(K.type===j){if(J===k&&K.originalEvent.detail>0||J===F&&K.originalEvent.detail<0){K.preventDefault()}}else{if(K.type===w){if(!K.originalEvent||!K.originalEvent.wheelDelta){return}if(J===k&&K.originalEvent.wheelDelta<0||J===F&&K.originalEvent.wheelDelta>0){K.preventDefault()}}}};I.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});this.iOSNativeScrolling=true;this.isActive=true};I.prototype.updateScrollValues=function(){var J,K;J=this.content;this.maxScrollTop=J.scrollHeight-J.clientHeight;this.prevScrollTop=this.contentScrollTop||0;this.contentScrollTop=J.scrollTop;K=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same";this.previousPosition=this.contentScrollTop;if(K!=="same"){this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:K})}if(!this.iOSNativeScrolling){this.maxSliderTop=this.paneHeight-this.sliderHeight;this.sliderTop=this.maxScrollTop===0?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop}};I.prototype.setOnScrollStyles=function(){var J;if(o){J={};J[E]="translate(0, "+this.sliderTop+"px)"}else{J={top:this.sliderTop}}if(z){if(g&&this.scrollRAF){g(this.scrollRAF)}this.scrollRAF=z((function(K){return function(){K.scrollRAF=null;return K.slider.css(J)}})(this))}else{this.slider.css(J)}};I.prototype.createEvents=function(){this.events={down:(function(J){return function(K){J.isBeingDragged=true;J.offsetY=K.pageY-J.slider.offset().top;if(!J.slider.is(K.target)){J.offsetY=0}J.pane.addClass(J.options.activeClass);J.doc.bind(u,J.events[l]).bind(v,J.events[F]);J.body.bind(t,J.events[m]);return false}})(this),drag:(function(J){return function(K){J.sliderY=K.pageY-J.$el.offset().top-J.paneTop-(J.offsetY||J.sliderHeight*0.5);J.scroll();if(J.contentScrollTop>=J.maxScrollTop&&J.prevScrollTop!==J.maxScrollTop){J.$el.trigger("scrollend")}else{if(J.contentScrollTop===0&&J.prevScrollTop!==0){J.$el.trigger("scrolltop")}}return false}})(this),up:(function(J){return function(K){J.isBeingDragged=false;J.pane.removeClass(J.options.activeClass);J.doc.unbind(u,J.events[l]).unbind(v,J.events[F]);J.body.unbind(t,J.events[m]);return false}})(this),resize:(function(J){return function(K){J.reset()}})(this),panedown:(function(J){return function(K){J.sliderY=(K.offsetY||K.originalEvent.layerY)-(J.sliderHeight*0.5);J.scroll();J.events.down(K);return false}})(this),scroll:(function(J){return function(K){J.updateScrollValues();if(J.isBeingDragged){return}if(!J.iOSNativeScrolling){J.sliderY=J.sliderTop;J.setOnScrollStyles()}if(K==null){return}if(J.contentScrollTop>=J.maxScrollTop){if(J.options.preventPageScrolling){J.preventScrolling(K,k)}if(J.prevScrollTop!==J.maxScrollTop){J.$el.trigger("scrollend")}}else{if(J.contentScrollTop===0){if(J.options.preventPageScrolling){J.preventScrolling(K,F)}if(J.prevScrollTop!==0){J.$el.trigger("scrolltop")}}}}})(this),wheel:(function(J){return function(L){var K;if(L==null){return}K=L.delta||L.wheelDelta||(L.originalEvent&&L.originalEvent.wheelDelta)||-L.detail||(L.originalEvent&&-L.originalEvent.detail);if(K){J.sliderY+=-K/3}J.scroll();return false}})(this),enter:(function(J){return function(L){var K;if(!J.isBeingDragged){return}if((L.buttons||L.which)!==1){return(K=J.events)[F].apply(K,arguments)}}})(this)}};I.prototype.addEvents=function(){var J;this.removeEvents();J=this.events;if(!this.options.disableResize){this.win.bind(A,J[A])}if(!this.iOSNativeScrolling){this.slider.bind(s,J[k]);this.pane.bind(s,J[y]).bind(""+w+" "+j,J[G])}this.$content.bind(""+B+" "+w+" "+j+" "+D,J[B])};I.prototype.removeEvents=function(){var J;J=this.events;this.win.unbind(A,J[A]);if(!this.iOSNativeScrolling){this.slider.unbind();this.pane.unbind()}this.$content.unbind(""+B+" "+w+" "+j+" "+D,J[B])};I.prototype.generate=function(){var J,K,L,M,N,O,P;M=this.options;O=M.paneClass,P=M.sliderClass,J=M.contentClass;if(!(N=this.$el.children("."+O)).length&&!N.children("."+P).length){this.$el.append('<div class="'+O+'"><div class="'+P+'" /></div>')}this.pane=this.$el.children("."+O);this.slider=this.pane.find("."+P);if(f===0&&p()){L=H.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,"");K={right:-14,paddingRight:+L+14}}else{if(f){K={right:-f};this.$el.addClass(M.enabledClass)}}if(K!=null){this.$content.css(K)}return this};I.prototype.restore=function(){this.stopped=false;if(!this.iOSNativeScrolling){this.pane.show()}this.addEvents()};I.prototype.reset=function(){var J,K,L,M,N,O,P,Q,R,S,T,U;if(this.iOSNativeScrolling){this.contentHeight=this.content.scrollHeight;return}if(!this.$el.find("."+this.options.paneClass).length){this.generate().stop()}if(this.stopped){this.restore()}J=this.content;M=J.style;N=M.overflowY;if(e){this.$content.css({height:this.$content.height()})}K=J.scrollHeight+f;S=parseInt(this.$el.css("max-height"),10);if(S>0){this.$el.height("");this.$el.height(J.scrollHeight>S?S:J.scrollHeight)}P=this.pane.outerHeight(false);R=parseInt(this.pane.css("top"),10);O=parseInt(this.pane.css("bottom"),10);Q=P+R+O;U=Math.round(Q/K*P);if(U<this.options.sliderMinHeight){U=this.options.sliderMinHeight}else{if((this.options.sliderMaxHeight!=null)&&U>this.options.sliderMaxHeight){U=this.options.sliderMaxHeight}}if(N===B&&M.overflowX!==B){U+=f}this.maxSliderTop=Q-U;this.contentHeight=K;this.paneHeight=P;this.paneOuterHeight=Q;this.sliderHeight=U;this.paneTop=R;this.slider.height(U);this.events.scroll();this.pane.show();this.isActive=true;if((J.scrollHeight===J.clientHeight)||(this.pane.outerHeight(true)>=J.scrollHeight&&N!==B)){this.pane.hide();this.isActive=false}else{if(this.el.clientHeight===J.scrollHeight&&N===B){this.slider.hide()}else{this.slider.show()}}this.pane.css({opacity:(this.options.alwaysVisible?1:""),visibility:(this.options.alwaysVisible?"visible":"")});L=this.$content.css("position");if(L==="static"||L==="relative"){T=parseInt(this.$content.css("right"),10);if(T){this.$content.css({right:"",marginRight:T})}}return this};I.prototype.scroll=function(){if(!this.isActive){return}this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.maxSliderTop,this.sliderY);this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop);if(!this.iOSNativeScrolling){this.updateScrollValues();this.setOnScrollStyles()}return this};I.prototype.scrollBottom=function(J){if(!this.isActive){return}this.$content.scrollTop(this.contentHeight-this.$content.height()-J).trigger(w);this.stop().restore();return this};I.prototype.scrollTop=function(J){if(!this.isActive){return}this.$content.scrollTop(+J).trigger(w);this.stop().restore();return this};I.prototype.scrollTo=function(J){if(!this.isActive){return}this.scrollTop(this.$el.find(J).get(0).offsetTop);return this};I.prototype.stop=function(){if(g&&this.scrollRAF){g(this.scrollRAF);this.scrollRAF=null}this.stopped=true;this.removeEvents();if(!this.iOSNativeScrolling){this.pane.hide()}return this};I.prototype.destroy=function(){if(!this.stopped){this.stop()}if(!this.iOSNativeScrolling&&this.pane.length){this.pane.remove()}if(e){this.$content.height("")}this.$content.removeAttr("tabindex");if(this.$el.hasClass(this.options.enabledClass)){this.$el.removeClass(this.options.enabledClass);this.$content.css({right:""})}return this};I.prototype.flash=function(){if(this.iOSNativeScrolling){return}if(!this.isActive){return}this.reset();this.pane.addClass(this.options.flashedClass);setTimeout((function(J){return function(){J.pane.removeClass(J.options.flashedClass)}})(this),this.options.flashDelay);return this};return I})();a.fn.nanoScroller=function(I){return this.each(function(){var J,K;if(!(K=this.nanoscroller)){J=a.extend({},h,I);this.nanoscroller=K=new x(this,J)}if(I&&typeof I==="object"){a.extend(K.options,I);if(I.scrollBottom!=null){return K.scrollBottom(I.scrollBottom)}if(I.scrollTop!=null){return K.scrollTop(I.scrollTop)}if(I.scrollTo){return K.scrollTo(I.scrollTo)}if(I.scroll==="bottom"){return K.scrollBottom(0)}if(I.scroll==="top"){return K.scrollTop(0)}if(I.scroll&&I.scroll instanceof a){return K.scrollTo(I.scroll)}if(I.stop){return K.stop()}if(I.destroy){return K.destroy()}if(I.flash){return K.flash()}}return K.reset()})};a.fn.nanoScroller.Constructor=x});;var swfobject=function(){var ae="undefined",aG="object",aJ="Shockwave Flash",aR="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",aH="SWFObjectExprInst",aS="onreadystatechange",aB=window,ap=document,aK=navigator,aL=false,aN=[al],aA=[],az=[],ao=[],au,aF,ag,aa,aq=false,X=false,ay,ak,aw=true,ax=function(){var a=typeof ap.getElementById!=ae&&typeof ap.getElementsByTagName!=ae&&typeof ap.createElement!=ae,h=aK.userAgent.toLowerCase(),j=aK.platform.toLowerCase(),e=j?/win/.test(j):/win/.test(h),c=j?/mac/.test(j):/mac/.test(h),f=/webkit/.test(h)?parseFloat(h.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=!+"\v1",g=[0,0,0],b=null;if(typeof aK.plugins!=ae&&typeof aK.plugins[aJ]==aG){b=aK.plugins[aJ].description;if(b&&!(typeof aK.mimeTypes!=ae&&aK.mimeTypes[aE]&&!aK.mimeTypes[aE].enabledPlugin)){aL=true;i=false;b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(b.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(b.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(b)?parseInt(b.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof aB.ActiveXObject!=ae){try{var d=new ActiveXObject(aR);if(d){b=d.GetVariable("$version");if(b){i=true;b=b.split(" ")[1].split(",");g=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)]}}}catch(k){}}}return{w3:a,pv:g,wk:f,ie:i,win:e,mac:c}}(),ar=function(){if(!ax.w3){return}if((typeof ap.readyState!=ae&&ap.readyState=="complete")||(typeof ap.readyState==ae&&(ap.getElementsByTagName("body")[0]||ap.body))){ah()}if(!aq){if(typeof ap.addEventListener!=ae){ap.addEventListener("DOMContentLoaded",ah,false)}if(ax.ie&&ax.win){ap.attachEvent(aS,function(){if(ap.readyState=="complete"){ap.detachEvent(aS,arguments.callee);ah()}});if(aB==top){(function(){if(aq){return}try{ap.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}ah()})()}}if(ax.wk){(function(){if(aq){return}if(!/loaded|complete/.test(ap.readyState)){setTimeout(arguments.callee,0);return}ah()})()}aI(ah)}}();function ah(){if(aq){return}try{var d=ap.getElementsByTagName("body")[0].appendChild(ac("span"));d.parentNode.removeChild(d)}catch(a){return}aq=true;var b=aN.length;for(var c=0;c<b;c++){aN[c]()}}function at(a){if(aq){a()}else{aN[aN.length]=a}}function aI(b){if(typeof aB.addEventListener!=ae){aB.addEventListener("load",b,false)}else{if(typeof ap.addEventListener!=ae){ap.addEventListener("load",b,false)}else{if(typeof aB.attachEvent!=ae){an(aB,"onload",b)}else{if(typeof aB.onload=="function"){var a=aB.onload;aB.onload=function(){a();b()}}else{aB.onload=b}}}}}function al(){if(aL){aP()}else{am()}}function aP(){var b=ap.getElementsByTagName("body")[0];var a=ac(aG);a.setAttribute("type",aE);var d=b.appendChild(a);if(d){var c=0;(function(){if(typeof d.GetVariable!=ae){var e=d.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ax.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}b.removeChild(a);d=null;am()})()}else{am()}}function am(){var g=aA.length;if(g>0){for(var f=0;f<g;f++){var k=aA[f].id;var b=aA[f].callbackFn;var a={success:false,id:k};if(ax.pv[0]>0){var e=ab(k);if(e){if(ai(aA[f].swfVersion)&&!(ax.wk&&ax.wk<312)){aQ(k,true);if(b){a.success=true;a.ref=aU(k);b(a)}}else{if(aA[f].expressInstall&&Y()){var i={};i.data=aA[f].expressInstall;i.width=e.getAttribute("width")||"0";i.height=e.getAttribute("height")||"0";if(e.getAttribute("class")){i.styleclass=e.getAttribute("class")}if(e.getAttribute("align")){i.align=e.getAttribute("align")}var h={};var j=e.getElementsByTagName("param");var c=j.length;for(var d=0;d<c;d++){if(j[d].getAttribute("name").toLowerCase()!="movie"){h[j[d].getAttribute("name")]=j[d].getAttribute("value")}}aD(i,h,k,b)}else{aC(e);if(b){b(a)}}}}}else{aQ(k,true);if(b){var l=aU(k);if(l&&typeof l.SetVariable!=ae){a.success=true;a.ref=l}b(a)}}}}}function aU(a){var b=null;var c=ab(a);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=ae){b=c}else{var d=c.getElementsByTagName(aG)[0];if(d){b=d}}}return b}function Y(){return !X&&ai("6.0.65")&&(ax.win||ax.mac)&&!(ax.wk&&ax.wk<312)}function aD(a,b,f,h){X=true;ag=h||null;aa={success:false,id:f};var e=ab(f);if(e){if(e.nodeName=="OBJECT"){au=aj(e);aF=null}else{au=e;aF=f}a.id=aH;if(typeof a.width==ae||(!/%$/.test(a.width)&&parseInt(a.width,10)<310)){a.width="310"}if(typeof a.height==ae||(!/%$/.test(a.height)&&parseInt(a.height,10)<137)){a.height="137"}ap.title=ap.title.slice(0,47)+" - Flash Player Installation";var d=ax.ie&&ax.win?"ActiveX":"PlugIn",c="MMredirectURL="+aB.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+ap.title;if(typeof b.flashvars!=ae){b.flashvars+="&"+c}else{b.flashvars=c}if(ax.ie&&ax.win&&e.readyState!=4){var g=ac("div");f+="SWFObjectNew";g.setAttribute("id",f);e.parentNode.insertBefore(g,e);e.style.display="none";(function(){if(e.readyState==4){e.parentNode.removeChild(e)}else{setTimeout(arguments.callee,10)}})()}aM(a,b,f)}}function aC(b){if(ax.ie&&ax.win&&b.readyState!=4){var a=ac("div");b.parentNode.insertBefore(a,b);a.parentNode.replaceChild(aj(b),a);b.style.display="none";(function(){if(b.readyState==4){b.parentNode.removeChild(b)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.replaceChild(aj(b),b)}}function aj(b){var a=ac("div");if(ax.win&&ax.ie){a.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aG)[0];if(e){var c=e.childNodes;if(c){var d=c.length;for(var f=0;f<d;f++){if(!(c[f].nodeType==1&&c[f].nodeName=="PARAM")&&!(c[f].nodeType==8)){a.appendChild(c[f].cloneNode(true))}}}}}return a}function aM(i,g,k){var j,a=ab(k);if(ax.wk&&ax.wk<312){return j}if(a){if(typeof i.id==ae){i.id=k}if(ax.ie&&ax.win){var h="";for(var e in i){if(i[e]!=Object.prototype[e]){if(e.toLowerCase()=="data"){g.movie=i[e]}else{if(e.toLowerCase()=="styleclass"){h+=' class="'+i[e]+'"'}else{if(e.toLowerCase()!="classid"){h+=" "+e+'="'+i[e]+'"'}}}}}var f="";for(var d in g){if(g[d]!=Object.prototype[d]){f+='<param name="'+d+'" value="'+g[d]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+h+">"+f+"</object>";az[az.length]=i.id;j=ab(i.id)}else{var l=ac(aG);l.setAttribute("type",aE);for(var c in i){if(i[c]!=Object.prototype[c]){if(c.toLowerCase()=="styleclass"){l.setAttribute("class",i[c])}else{if(c.toLowerCase()!="classid"){l.setAttribute(c,i[c])}}}}for(var b in g){if(g[b]!=Object.prototype[b]&&b.toLowerCase()!="movie"){af(l,b,g[b])}}a.parentNode.replaceChild(l,a);j=l}}return j}function af(d,b,c){var a=ac("param");a.setAttribute("name",b);a.setAttribute("value",c);d.appendChild(a)}function aT(b){var a=ab(b);if(a&&a.nodeName=="OBJECT"){if(ax.ie&&ax.win){a.style.display="none";(function(){if(a.readyState==4){Z(b)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.removeChild(a)}}}function Z(c){var b=ab(c);if(b){for(var a in b){if(typeof b[a]=="function"){b[a]=null}}b.parentNode.removeChild(b)}}function ab(c){var a=null;try{a=ap.getElementById(c)}catch(b){}return a}function ac(a){return ap.createElement(a)}function an(c,a,b){c.attachEvent(a,b);ao[ao.length]=[c,a,b]}function ai(c){var b=ax.pv,a=c.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return(b[0]>a[0]||(b[0]==a[0]&&b[1]>a[1])||(b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]))?true:false}function aO(c,f,d,b){if(ax.ie&&ax.mac){return}var a=ap.getElementsByTagName("head")[0];if(!a){return}var e=(d&&typeof d=="string")?d:"screen";if(b){ay=null;ak=null}if(!ay||ak!=e){var g=ac("style");g.setAttribute("type","text/css");g.setAttribute("media",e);ay=a.appendChild(g);if(ax.ie&&ax.win&&typeof ap.styleSheets!=ae&&ap.styleSheets.length>0){ay=ap.styleSheets[ap.styleSheets.length-1]}ak=e}if(ax.ie&&ax.win){if(ay&&typeof ay.addRule==aG){ay.addRule(c,f)}}else{if(ay&&typeof ap.createTextNode!=ae){ay.appendChild(ap.createTextNode(c+" {"+f+"}"))}}}function aQ(c,a){if(!aw){return}var b=a?"visible":"hidden";if(aq&&ab(c)){ab(c).style.visibility=b}else{aO("#"+c,"visibility:"+b)}}function av(b){var c=/[\\\"<>\.;]/;var a=c.exec(b)!=null;return a&&typeof encodeURIComponent!=ae?encodeURIComponent(b):b}var ad=function(){if(ax.ie&&ax.win){window.attachEvent("onunload",function(){var c=ao.length;for(var b=0;b<c;b++){ao[b][0].detachEvent(ao[b][1],ao[b][2])}var f=az.length;for(var a=0;a<f;a++){aT(az[a])}for(var e in ax){ax[e]=null}ax=null;for(var d in swfobject){swfobject[d]=null}swfobject=null})}}();return{registerObject:function(b,c,a,e){if(ax.w3&&b&&c){var d={};d.id=b;d.swfVersion=c;d.expressInstall=a;d.callbackFn=e;aA[aA.length]=d;aQ(b,false)}else{if(e){e({success:false,id:b})}}},getObjectById:function(a){if(ax.w3){return aU(a)}},embedSWF:function(b,h,e,g,j,a,k,d,f,c){var i={success:false,id:h};if(ax.w3&&!(ax.wk&&ax.wk<312)&&b&&h&&e&&g&&j){aQ(h,false);at(function(){e+="";g+="";var m={};if(f&&typeof f===aG){for(var o in f){m[o]=f[o]}}m.data=b;m.width=e;m.height=g;var p={};if(d&&typeof d===aG){for(var n in d){p[n]=d[n]}}if(k&&typeof k===aG){for(var l in k){if(typeof p.flashvars!=ae){p.flashvars+="&"+l+"="+k[l]}else{p.flashvars=l+"="+k[l]}}}if(ai(j)){var q=aM(m,p,h);if(m.id==h){aQ(h,true)}i.success=true;i.ref=q}else{if(a&&Y()){m.data=a;aD(m,p,h,c);return}else{aQ(h,true)}}if(c){c(i)}})}else{if(c){c(i)}}},switchOffAutoHideShow:function(){aw=false},ua:ax,getFlashPlayerVersion:function(){return{major:ax.pv[0],minor:ax.pv[1],release:ax.pv[2]}},hasFlashPlayerVersion:ai,createSWF:function(c,b,a){if(ax.w3){return aM(c,b,a)}else{return undefined}},showExpressInstall:function(d,a,b,c){if(ax.w3&&Y()){aD(d,a,b,c)}},removeSWF:function(a){if(ax.w3){aT(a)}},createCSS:function(a,d,c,b){if(ax.w3){aO(a,d,c,b)}},addDomLoadEvent:at,addLoadEvent:aI,getQueryParamValue:function(a){var d=ap.location.search||ap.location.hash;if(d){if(/\?/.test(d)){d=d.split("?")[1]}if(a==null){return av(d)}var c=d.split("&");for(var b=0;b<c.length;b++){if(c[b].substring(0,c[b].indexOf("="))==a){return av(c[b].substring((c[b].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(X){var a=ab(aH);if(a&&au){a.parentNode.replaceChild(au,a);if(aF){aQ(aF,true);if(ax.ie&&ax.win){au.style.display="block"}}if(ag){ag(aa)}}X=false}}}}();;!function(t, e) { "function" == typeof define && define.amd ? define(e) : "object" == typeof exports ? module.exports = e(require, exports, module) : t.Tether = e() }(this, function(t, e, o) { "use strict"; function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function n(t) { var e = getComputedStyle(t) || {}, o = e.position; if ("fixed" === o) return t; for (var i = t; i = i.parentNode;) { var n = void 0; try { n = getComputedStyle(i) } catch (r) { } if ("undefined" == typeof n || null === n) return i; var s = n, a = s.overflow, f = s.overflowX, h = s.overflowY; if (/(auto|scroll)/.test(a + h + f) && ("absolute" !== o || ["relative", "absolute", "fixed"].indexOf(n.position) >= 0)) return i } return document.body } function r(t) { var e = void 0; t === document ? (e = document, t = document.documentElement) : e = t.ownerDocument; var o = e.documentElement, i = {}, n = t.getBoundingClientRect(); for (var r in n) i[r] = n[r]; var s = x(e); return i.top -= s.top, i.left -= s.left, "undefined" == typeof i.width && (i.width = document.body.scrollWidth - i.left - i.right), "undefined" == typeof i.height && (i.height = document.body.scrollHeight - i.top - i.bottom), i.top = i.top - o.clientTop, i.left = i.left - o.clientLeft, i.right = e.body.clientWidth - i.width - i.left, i.bottom = e.body.clientHeight - i.height - i.top, i } function s(t) { return t.offsetParent || document.documentElement } function a() { var t = document.createElement("div"); t.style.width = "100%", t.style.height = "200px"; var e = document.createElement("div"); f(e.style, { position: "absolute", top: 0, left: 0, pointerEvents: "none", visibility: "hidden", width: "200px", height: "150px", overflow: "hidden" }), e.appendChild(t), document.body.appendChild(e); var o = t.offsetWidth; e.style.overflow = "scroll"; var i = t.offsetWidth; o === i && (i = e.clientWidth), document.body.removeChild(e); var n = o - i; return { width: n, height: n } } function f() { var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0], e = []; return Array.prototype.push.apply(e, arguments), e.slice(1).forEach(function(e) { if (e) for (var o in e) ({}).hasOwnProperty.call(e, o) && (t[o] = e[o]) }), t } function h(t, e) { if ("undefined" != typeof t.classList) e.split(" ").forEach(function(e) { e.trim() && t.classList.remove(e) }); else { var o = new RegExp("(^| )" + e.split(" ").join("|") + "( |$)", "gi"), i = u(t).replace(o, " "); p(t, i) } } function l(t, e) { if ("undefined" != typeof t.classList) e.split(" ").forEach(function(e) { e.trim() && t.classList.add(e) }); else { h(t, e); var o = u(t) + (" " + e); p(t, o) } } function d(t, e) { if ("undefined" != typeof t.classList) return t.classList.contains(e); var o = u(t); return new RegExp("(^| )" + e + "( |$)", "gi").test(o) } function u(t) { return t.className instanceof SVGAnimatedString ? t.className.baseVal : t.className } function p(t, e) { t.setAttribute("class", e) } function c(t, e, o) { o.forEach(function(o) { -1 === e.indexOf(o) && d(t, o) && h(t, o) }), e.forEach(function(e) { d(t, e) || l(t, e) }) } function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function g(t, e) { var o = arguments.length <= 2 || void 0 === arguments[2] ? 1 : arguments[2]; return t + o >= e && e >= t - o } function m() { return "undefined" != typeof performance && "undefined" != typeof performance.now ? performance.now() : +new Date } function v() { for (var t = { top: 0, left: 0 }, e = arguments.length, o = Array(e), i = 0; e > i; i++) o[i] = arguments[i]; return o.forEach(function(e) { var o = e.top, i = e.left; "string" == typeof o && (o = parseFloat(o, 10)), "string" == typeof i && (i = parseFloat(i, 10)), t.top += o, t.left += i }), t } function y(t, e) { return "string" == typeof t.left && -1 !== t.left.indexOf("%") && (t.left = parseFloat(t.left, 10) / 100 * e.width), "string" == typeof t.top && -1 !== t.top.indexOf("%") && (t.top = parseFloat(t.top, 10) / 100 * e.height), t } function b(t, e) { return "scrollParent" === e ? e = t.scrollParent : "window" === e && (e = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset]), e === document && (e = e.documentElement), "undefined" != typeof e.nodeType && !function() { var t = r(e), o = t, i = getComputedStyle(e); e = [o.left, o.top, t.width + o.left, t.height + o.top], U.forEach(function(t, o) { t = t[0].toUpperCase() + t.substr(1), "Top" === t || "Left" === t ? e[o] += parseFloat(i["border" + t + "Width"]) : e[o] -= parseFloat(i["border" + t + "Width"]) }) }(), e } var w = function() { function t(t, e) { for (var o = 0; o < e.length; o++) { var i = e[o]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, o, i) { return o && t(e.prototype, o), i && t(e, i), e } }(), C = void 0; "undefined" == typeof C && (C = { modules: [] }); var O = function() { var t = 0; return function() { return ++t } }(), E = {}, x = function(t) { var e = t._tetherZeroElement; "undefined" == typeof e && (e = t.createElement("div"), e.setAttribute("data-tether-id", O()), f(e.style, { top: 0, left: 0, position: "absolute" }), t.body.appendChild(e), t._tetherZeroElement = e); var o = e.getAttribute("data-tether-id"); if ("undefined" == typeof E[o]) { E[o] = {}; var i = e.getBoundingClientRect(); for (var n in i) E[o][n] = i[n]; T(function() { delete E[o] }) } return E[o] }, A = [], T = function(t) { A.push(t) }, S = function() { for (var t = void 0; t = A.pop() ;) t() }, W = function() { function t() { i(this, t) } return w(t, [{ key: "on", value: function(t, e, o) { var i = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3]; "undefined" == typeof this.bindings && (this.bindings = {}), "undefined" == typeof this.bindings[t] && (this.bindings[t] = []), this.bindings[t].push({ handler: e, ctx: o, once: i }) } }, { key: "once", value: function(t, e, o) { this.on(t, e, o, !0) } }, { key: "off", value: function(t, e) { if ("undefined" == typeof this.bindings || "undefined" == typeof this.bindings[t]) if ("undefined" == typeof e) delete this.bindings[t]; else for (var o = 0; o < this.bindings[t].length;) this.bindings[t][o].handler === e ? this.bindings[t].splice(o, 1) : ++o } }, { key: "trigger", value: function(t) { if ("undefined" != typeof this.bindings && this.bindings[t]) { for (var e = 0, o = arguments.length, i = Array(o > 1 ? o - 1 : 0), n = 1; o > n; n++) i[n - 1] = arguments[n]; for (; e < this.bindings[t].length;) { var r = this.bindings[t][e], s = r.handler, a = r.ctx, f = r.once, h = a; "undefined" == typeof h && (h = this), s.apply(h, i), f ? this.bindings[t].splice(e, 1) : ++e } } } }]), t }(); C.Utils = { getScrollParent: n, getBounds: r, getOffsetParent: s, extend: f, addClass: l, removeClass: h, hasClass: d, updateClasses: c, defer: T, flush: S, uniqueId: O, Evented: W, getScrollBarSize: a }; var M = function() { function t(t, e) { var o = [], i = !0, n = !1, r = void 0; try { for (var s, a = t[Symbol.iterator]() ; !(i = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e) ; i = !0); } catch (f) { n = !0, r = f } finally { try { !i && a["return"] && a["return"]() } finally { if (n) throw r } } return o } return function(e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(), w = function() { function t(t, e) { for (var o = 0; o < e.length; o++) { var i = e[o]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, o, i) { return o && t(e.prototype, o), i && t(e, i), e } }(); if ("undefined" == typeof C) throw new Error("You must include the utils.js file before tether.js"); var P = C.Utils, n = P.getScrollParent, r = P.getBounds, s = P.getOffsetParent, f = P.extend, l = P.addClass, h = P.removeClass, c = P.updateClasses, T = P.defer, S = P.flush, a = P.getScrollBarSize, k = function() { if ("undefined" == typeof document) return ""; for (var t = document.createElement("div"), e = ["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"], o = 0; o < e.length; ++o) { var i = e[o]; if (void 0 !== t.style[i]) return i } }(), B = [], _ = function() { B.forEach(function(t) { t.position(!1) }), S() }; !function() { var t = null, e = null, o = null, i = function n() { return "undefined" != typeof e && e > 16 ? (e = Math.min(e - 16, 250), void (o = setTimeout(n, 250))) : void ("undefined" != typeof t && m() - t < 10 || ("undefined" != typeof o && (clearTimeout(o), o = null), t = m(), _(), e = m() - t)) }; "undefined" != typeof window && ["resize", "scroll", "touchmove"].forEach(function(t) { window.addEventListener(t, i) }) }(); var z = { center: "center", left: "right", right: "left" }, F = { middle: "middle", top: "bottom", bottom: "top" }, L = { top: 0, left: 0, middle: "50%", center: "50%", bottom: "100%", right: "100%" }, Y = function(t, e) { var o = t.left, i = t.top; return "auto" === o && (o = z[e.left]), "auto" === i && (i = F[e.top]), { left: o, top: i } }, H = function(t) { var e = t.left, o = t.top; return "undefined" != typeof L[t.left] && (e = L[t.left]), "undefined" != typeof L[t.top] && (o = L[t.top]), { left: e, top: o } }, X = function(t) { var e = t.split(" "), o = M(e, 2), i = o[0], n = o[1]; return { top: i, left: n } }, j = X, N = function() { function t(e) { var o = this; i(this, t), this.position = this.position.bind(this), B.push(this), this.history = [], this.setOptions(e, !1), C.modules.forEach(function(t) { "undefined" != typeof t.initialize && t.initialize.call(o) }), this.position() } return w(t, [{ key: "getClass", value: function() { var t = arguments.length <= 0 || void 0 === arguments[0] ? "" : arguments[0], e = this.options.classes; return "undefined" != typeof e && e[t] ? this.options.classes[t] : this.options.classPrefix ? this.options.classPrefix + "-" + t : t } }, { key: "setOptions", value: function(t) { var e = this, o = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1], i = { offset: "0 0", targetOffset: "0 0", targetAttachment: "auto auto", classPrefix: "tether" }; this.options = f(i, t); var r = this.options, s = r.element, a = r.target, h = r.targetModifier; if (this.element = s, this.target = a, this.targetModifier = h, "viewport" === this.target ? (this.target = document.body, this.targetModifier = "visible") : "scroll-handle" === this.target && (this.target = document.body, this.targetModifier = "scroll-handle"), ["element", "target"].forEach(function(t) { if ("undefined" == typeof e[t]) throw new Error("Tether Error: Both element and target must be defined"); "undefined" != typeof e[t].jquery ? e[t] = e[t][0] : "string" == typeof e[t] && (e[t] = document.querySelector(e[t])) }), l(this.element, this.getClass("element")), this.options.addTargetClasses !== !1 && l(this.target, this.getClass("target")), !this.options.attachment) throw new Error("Tether Error: You must provide an attachment"); this.targetAttachment = j(this.options.targetAttachment), this.attachment = j(this.options.attachment), this.offset = X(this.options.offset), this.targetOffset = X(this.options.targetOffset), "undefined" != typeof this.scrollParent && this.disable(), "scroll-handle" === this.targetModifier ? this.scrollParent = this.target : this.scrollParent = n(this.target), this.options.enabled !== !1 && this.enable(o) } }, { key: "getTargetBounds", value: function() { if ("undefined" == typeof this.targetModifier) return r(this.target); if ("visible" === this.targetModifier) { if (this.target === document.body) return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth }; var t = r(this.target), e = { height: t.height, width: t.width, top: t.top, left: t.left }; return e.height = Math.min(e.height, t.height - (pageYOffset - t.top)), e.height = Math.min(e.height, t.height - (t.top + t.height - (pageYOffset + innerHeight))), e.height = Math.min(innerHeight, e.height), e.height -= 2, e.width = Math.min(e.width, t.width - (pageXOffset - t.left)), e.width = Math.min(e.width, t.width - (t.left + t.width - (pageXOffset + innerWidth))), e.width = Math.min(innerWidth, e.width), e.width -= 2, e.top < pageYOffset && (e.top = pageYOffset), e.left < pageXOffset && (e.left = pageXOffset), e } if ("scroll-handle" === this.targetModifier) { var t = void 0, o = this.target; o === document.body ? (o = document.documentElement, t = { left: pageXOffset, top: pageYOffset, height: innerHeight, width: innerWidth }) : t = r(o); var i = getComputedStyle(o), n = o.scrollWidth > o.clientWidth || [i.overflow, i.overflowX].indexOf("scroll") >= 0 || this.target !== document.body, s = 0; n && (s = 15); var a = t.height - parseFloat(i.borderTopWidth) - parseFloat(i.borderBottomWidth) - s, e = { width: 15, height: .975 * a * (a / o.scrollHeight), left: t.left + t.width - parseFloat(i.borderLeftWidth) - 15 }, f = 0; 408 > a && this.target === document.body && (f = -11e-5 * Math.pow(a, 2) - .00727 * a + 22.58), this.target !== document.body && (e.height = Math.max(e.height, 24)); var h = this.target.scrollTop / (o.scrollHeight - a); return e.top = h * (a - e.height - f) + t.top + parseFloat(i.borderTopWidth), this.target === document.body && (e.height = Math.max(e.height, 24)), e } } }, { key: "clearCache", value: function() { this._cache = {} } }, { key: "cache", value: function(t, e) { return "undefined" == typeof this._cache && (this._cache = {}), "undefined" == typeof this._cache[t] && (this._cache[t] = e.call(this)), this._cache[t] } }, { key: "enable", value: function() { var t = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0]; this.options.addTargetClasses !== !1 && l(this.target, this.getClass("enabled")), l(this.element, this.getClass("enabled")), this.enabled = !0, this.scrollParent !== document && this.scrollParent.addEventListener("scroll", this.position), t && this.position() } }, { key: "disable", value: function() { h(this.target, this.getClass("enabled")), h(this.element, this.getClass("enabled")), this.enabled = !1, "undefined" != typeof this.scrollParent && this.scrollParent.removeEventListener("scroll", this.position) } }, { key: "destroy", value: function() { var t = this; this.disable(), B.forEach(function(e, o) { return e === t ? void B.splice(o, 1) : void 0 }) } }, { key: "updateAttachClasses", value: function(t, e) { var o = this; t = t || this.attachment, e = e || this.targetAttachment; var i = ["left", "top", "bottom", "right", "middle", "center"]; "undefined" != typeof this._addAttachClasses && this._addAttachClasses.length && this._addAttachClasses.splice(0, this._addAttachClasses.length), "undefined" == typeof this._addAttachClasses && (this._addAttachClasses = []); var n = this._addAttachClasses; t.top && n.push(this.getClass("element-attached") + "-" + t.top), t.left && n.push(this.getClass("element-attached") + "-" + t.left), e.top && n.push(this.getClass("target-attached") + "-" + e.top), e.left && n.push(this.getClass("target-attached") + "-" + e.left); var r = []; i.forEach(function(t) { r.push(o.getClass("element-attached") + "-" + t), r.push(o.getClass("target-attached") + "-" + t) }), T(function() { "undefined" != typeof o._addAttachClasses && (c(o.element, o._addAttachClasses, r), o.options.addTargetClasses !== !1 && c(o.target, o._addAttachClasses, r), delete o._addAttachClasses) }) } }, { key: "position", value: function() { var t = this, e = arguments.length <= 0 || void 0 === arguments[0] ? !0 : arguments[0]; if (this.enabled) { this.clearCache(); var o = Y(this.targetAttachment, this.attachment); this.updateAttachClasses(this.attachment, o); var i = this.cache("element-bounds", function() { return r(t.element) }), n = i.width, f = i.height; if (0 === n && 0 === f && "undefined" != typeof this.lastSize) { var h = this.lastSize; n = h.width, f = h.height } else this.lastSize = { width: n, height: f }; var l = this.cache("target-bounds", function() { return t.getTargetBounds() }), d = l, u = y(H(this.attachment), { width: n, height: f }), p = y(H(o), d), c = y(this.offset, { width: n, height: f }), g = y(this.targetOffset, d); u = v(u, c), p = v(p, g); for (var m = l.left + p.left - u.left, b = l.top + p.top - u.top, w = 0; w < C.modules.length; ++w) { var O = C.modules[w], E = O.position.call(this, { left: m, top: b, targetAttachment: o, targetPos: l, elementPos: i, offset: u, targetOffset: p, manualOffset: c, manualTargetOffset: g, scrollbarSize: A, attachment: this.attachment }); if (E === !1) return !1; "undefined" != typeof E && "object" == typeof E && (b = E.top, m = E.left) } var x = { page: { top: b, left: m }, viewport: { top: b - pageYOffset, bottom: pageYOffset - b - f + innerHeight, left: m - pageXOffset, right: pageXOffset - m - n + innerWidth } }, A = void 0; return document.body.scrollWidth > window.innerWidth && (A = this.cache("scrollbar-size", a), x.viewport.bottom -= A.height), document.body.scrollHeight > window.innerHeight && (A = this.cache("scrollbar-size", a), x.viewport.right -= A.width), (-1 === ["", "static"].indexOf(document.body.style.position) || -1 === ["", "static"].indexOf(document.body.parentElement.style.position)) && (x.page.bottom = document.body.scrollHeight - b - f, x.page.right = document.body.scrollWidth - m - n), "undefined" != typeof this.options.optimizations && this.options.optimizations.moveElement !== !1 && "undefined" == typeof this.targetModifier && !function() { var e = t.cache("target-offsetparent", function() { return s(t.target) }), o = t.cache("target-offsetparent-bounds", function() { return r(e) }), i = getComputedStyle(e), n = o, a = {}; if (["Top", "Left", "Bottom", "Right"].forEach(function(t) { a[t.toLowerCase()] = parseFloat(i["border" + t + "Width"]) }), o.right = document.body.scrollWidth - o.left - n.width + a.right, o.bottom = document.body.scrollHeight - o.top - n.height + a.bottom, x.page.top >= o.top + a.top && x.page.bottom >= o.bottom && x.page.left >= o.left + a.left && x.page.right >= o.right) { var f = e.scrollTop, h = e.scrollLeft; x.offset = { top: x.page.top - o.top + f - a.top, left: x.page.left - o.left + h - a.left } } }(), this.move(x), this.history.unshift(x), this.history.length > 3 && this.history.pop(), e && S(), !0 } } }, { key: "move", value: function(t) { var e = this; if ("undefined" != typeof this.element.parentNode) { var o = {}; for (var i in t) { o[i] = {}; for (var n in t[i]) { for (var r = !1, a = 0; a < this.history.length; ++a) { var h = this.history[a]; if ("undefined" != typeof h[i] && !g(h[i][n], t[i][n])) { r = !0; break } } r || (o[i][n] = !0) } } var l = { top: "", left: "", right: "", bottom: "" }, d = function(t, o) { var i = "undefined" != typeof e.options.optimizations, n = i ? e.options.optimizations.gpu : null; if (n !== !1) { var r = void 0, s = void 0; t.top ? (l.top = 0, r = o.top) : (l.bottom = 0, r = -o.bottom), t.left ? (l.left = 0, s = o.left) : (l.right = 0, s = -o.right), l[k] = "translateX(" + Math.round(s) + "px) translateY(" + Math.round(r) + "px)", "msTransform" !== k && (l[k] += " translateZ(0)") } else t.top ? l.top = o.top + "px" : l.bottom = o.bottom + "px", t.left ? l.left = o.left + "px" : l.right = o.right + "px" }, u = !1; if ((o.page.top || o.page.bottom) && (o.page.left || o.page.right) ? (l.position = "absolute", d(o.page, t.page)) : (o.viewport.top || o.viewport.bottom) && (o.viewport.left || o.viewport.right) ? (l.position = "fixed", d(o.viewport, t.viewport)) : "undefined" != typeof o.offset && o.offset.top && o.offset.left ? !function() { l.position = "absolute"; var i = e.cache("target-offsetparent", function() { return s(e.target) }); s(e.element) !== i && T(function() { e.element.parentNode.removeChild(e.element), i.appendChild(e.element) }), d(o.offset, t.offset), u = !0 }() : (l.position = "absolute", d({ top: !0, left: !0 }, t.page)), !u) { for (var p = !0, c = this.element.parentNode; c && "BODY" !== c.tagName;) { if ("static" !== getComputedStyle(c).position) { p = !1; break } c = c.parentNode } p || (this.element.parentNode.removeChild(this.element), document.body.appendChild(this.element)) } var m = {}, v = !1; for (var n in l) { var y = l[n], b = this.element.style[n]; "" !== b && "" !== y && ["top", "left", "bottom", "right"].indexOf(n) >= 0 && (b = parseFloat(b), y = parseFloat(y)), b !== y && (v = !0, m[n] = y) } v && T(function() { f(e.element.style, m) }) } } }]), t }(); N.modules = [], C.position = _; var R = f(N, C), M = function() { function t(t, e) { var o = [], i = !0, n = !1, r = void 0; try { for (var s, a = t[Symbol.iterator]() ; !(i = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e) ; i = !0); } catch (f) { n = !0, r = f } finally { try { !i && a["return"] && a["return"]() } finally { if (n) throw r } } return o } return function(e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(), P = C.Utils, r = P.getBounds, f = P.extend, c = P.updateClasses, T = P.defer, U = ["left", "top", "right", "bottom"]; C.modules.push({ position: function(t) { var e = this, o = t.top, i = t.left, n = t.targetAttachment; if (!this.options.constraints) return !0; var s = this.cache("element-bounds", function() { return r(e.element) }), a = s.height, h = s.width; if (0 === h && 0 === a && "undefined" != typeof this.lastSize) { var l = this.lastSize; h = l.width, a = l.height } var d = this.cache("target-bounds", function() { return e.getTargetBounds() }), u = d.height, p = d.width, g = [this.getClass("pinned"), this.getClass("out-of-bounds")]; this.options.constraints.forEach(function(t) { var e = t.outOfBoundsClass, o = t.pinnedClass; e && g.push(e), o && g.push(o) }), g.forEach(function(t) { ["left", "top", "right", "bottom"].forEach(function(e) { g.push(t + "-" + e) }) }); var m = [], v = f({}, n), y = f({}, this.attachment); return this.options.constraints.forEach(function(t) { var r = t.to, s = t.attachment, f = t.pin; "undefined" == typeof s && (s = ""); var l = void 0, d = void 0; if (s.indexOf(" ") >= 0) { var c = s.split(" "), g = M(c, 2); d = g[0], l = g[1] } else l = d = s; var w = b(e, r); ("target" === d || "both" === d) && (o < w[1] && "top" === v.top && (o += u, v.top = "bottom"), o + a > w[3] && "bottom" === v.top && (o -= u, v.top = "top")), "together" === d && (o < w[1] && "top" === v.top && ("bottom" === y.top ? (o += u, v.top = "bottom", o += a, y.top = "top") : "top" === y.top && (o += u, v.top = "bottom", o -= a, y.top = "bottom")), o + a > w[3] && "bottom" === v.top && ("top" === y.top ? (o -= u, v.top = "top", o -= a, y.top = "bottom") : "bottom" === y.top && (o -= u, v.top = "top", o += a, y.top = "top")), "middle" === v.top && (o + a > w[3] && "top" === y.top ? (o -= a, y.top = "bottom") : o < w[1] && "bottom" === y.top && (o += a, y.top = "top"))), ("target" === l || "both" === l) && (i < w[0] && "left" === v.left && (i += p, v.left = "right"), i + h > w[2] && "right" === v.left && (i -= p, v.left = "left")), "together" === l && (i < w[0] && "left" === v.left ? "right" === y.left ? (i += p, v.left = "right", i += h, y.left = "left") : "left" === y.left && (i += p, v.left = "right", i -= h, y.left = "right") : i + h > w[2] && "right" === v.left ? "left" === y.left ? (i -= p, v.left = "left", i -= h, y.left = "right") : "right" === y.left && (i -= p, v.left = "left", i += h, y.left = "left") : "center" === v.left && (i + h > w[2] && "left" === y.left ? (i -= h, y.left = "right") : i < w[0] && "right" === y.left && (i += h, y.left = "left"))), ("element" === d || "both" === d) && (o < w[1] && "bottom" === y.top && (o += a, y.top = "top"), o + a > w[3] && "top" === y.top && (o -= a, y.top = "bottom")), ("element" === l || "both" === l) && (i < w[0] && ("right" === y.left ? (i += h, y.left = "left") : "center" === y.left && (i += h / 2, y.left = "left")), i + h > w[2] && ("left" === y.left ? (i -= h, y.left = "right") : "center" === y.left && (i -= h / 2, y.left = "right"))), "string" == typeof f ? f = f.split(",").map(function(t) { return t.trim() }) : f === !0 && (f = ["top", "left", "right", "bottom"]), f = f || []; var C = [], O = []; o < w[1] && (f.indexOf("top") >= 0 ? (o = w[1], C.push("top")) : O.push("top")), o + a > w[3] && (f.indexOf("bottom") >= 0 ? (o = w[3] - a, C.push("bottom")) : O.push("bottom")), i < w[0] && (f.indexOf("left") >= 0 ? (i = w[0], C.push("left")) : O.push("left")), i + h > w[2] && (f.indexOf("right") >= 0 ? (i = w[2] - h, C.push("right")) : O.push("right")), C.length && !function() { var t = void 0; t = "undefined" != typeof e.options.pinnedClass ? e.options.pinnedClass : e.getClass("pinned"), m.push(t), C.forEach(function(e) { m.push(t + "-" + e) }) }(), O.length && !function() { var t = void 0; t = "undefined" != typeof e.options.outOfBoundsClass ? e.options.outOfBoundsClass : e.getClass("out-of-bounds"), m.push(t), O.forEach(function(e) { m.push(t + "-" + e) }) }(), (C.indexOf("left") >= 0 || C.indexOf("right") >= 0) && (y.left = v.left = !1), (C.indexOf("top") >= 0 || C.indexOf("bottom") >= 0) && (y.top = v.top = !1), (v.top !== n.top || v.left !== n.left || y.top !== e.attachment.top || y.left !== e.attachment.left) && e.updateAttachClasses(y, v) }), T(function() { e.options.addTargetClasses !== !1 && c(e.target, m, g), c(e.element, m, g) }), { top: o, left: i } } }); var P = C.Utils, r = P.getBounds, c = P.updateClasses, T = P.defer; C.modules.push({ position: function(t) { var e = this, o = t.top, i = t.left, n = this.cache("element-bounds", function() { return r(e.element) }), s = n.height, a = n.width, f = this.getTargetBounds(), h = o + s, l = i + a, d = []; o <= f.bottom && h >= f.top && ["left", "right"].forEach(function(t) { var e = f[t]; (e === i || e === l) && d.push(t) }), i <= f.right && l >= f.left && ["top", "bottom"].forEach(function(t) { var e = f[t]; (e === o || e === h) && d.push(t) }); var u = [], p = [], g = ["left", "top", "right", "bottom"]; return u.push(this.getClass("abutted")), g.forEach(function(t) { u.push(e.getClass("abutted") + "-" + t) }), d.length && p.push(this.getClass("abutted")), d.forEach(function(t) { p.push(e.getClass("abutted") + "-" + t) }), T(function() { e.options.addTargetClasses !== !1 && c(e.target, p, u), c(e.element, p, u) }), !0 } }); var M = function() { function t(t, e) { var o = [], i = !0, n = !1, r = void 0; try { for (var s, a = t[Symbol.iterator]() ; !(i = (s = a.next()).done) && (o.push(s.value), !e || o.length !== e) ; i = !0); } catch (f) { n = !0, r = f } finally { try { !i && a["return"] && a["return"]() } finally { if (n) throw r } } return o } return function(e, o) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return t(e, o); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(); return C.modules.push({ position: function(t) { var e = t.top, o = t.left; if (this.options.shift) { var i = this.options.shift; "function" == typeof this.options.shift && (i = this.options.shift.call(this, { top: e, left: o })); var n = void 0, r = void 0; if ("string" == typeof i) { i = i.split(" "), i[1] = i[1] || i[0]; var s = i, a = M(s, 2); n = a[0], r = a[1], n = parseFloat(n, 10), r = parseFloat(r, 10) } else n = i.top, r = i.left; return e += n, o += r, { top: e, left: o } } } }), R });;!function(t, e) { "function" == typeof define && define.amd ? define(["tether"], e) : "object" == typeof exports ? module.exports = e(require("tether")) : t.Select = e(t.Tether) }(this, function(t) { "use strict"; function e(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function n(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) } function i() { var t = window.innerWidth, e = window.innerHeight; return b && (640 >= t || 640 >= e) } function o(t) { return Array.prototype.reduce.call(t, function(t, e) { return t === e ? e : !1 }) } function r() { var t = document.querySelector(".select-target-focused"); return t ? t.selectInstance : null } var s = function() { function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(), a = function(t, e, n) { for (var i = !0; i;) { var o = t, r = e, s = n; i = !1, null === o && (o = Function.prototype); var a = Object.getOwnPropertyDescriptor(o, r); if (void 0 !== a) { if ("value" in a) return a.value; var l = a.get; if (void 0 === l) return; return l.call(s) } var c = Object.getPrototypeOf(o); if (null === c) return; t = c, e = r, n = s, i = !0, a = c = void 0 } }, l = t.Utils, c = l.extend, h = l.addClass, u = l.removeClass, p = l.hasClass, d = l.getBounds, g = l.Evented, f = 13, v = 27, y = 32, m = 38, O = 40, b = "ontouchstart" in document.documentElement, k = b ? "touchstart" : "click", E = "", T = void 0; document.addEventListener("keypress", function(t) { var e = r(); if (e && 0 !== t.charCode) { t.keyCode === y && t.preventDefault(), clearTimeout(T), T = setTimeout(function() { E = "" }, 500), E += String.fromCharCode(t.charCode); var n = e.findOptionsByPrefix(E); if (1 === n.length && e.selectOption(n[0]), E.length > 1 && o(E)) { var i = e.findOptionsByPrefix(E[0]); if (i.length) { var s = i.indexOf(e.getChosen()); return s += 1, s %= i.length, void e.selectOption(i[s]) } } return n.length ? void e.selectOption(n[0]) : void 0 } }), document.addEventListener("keydown", function(t) { var e = r(); if (e) if ([m, O, v].indexOf(t.keyCode) >= 0 && t.preventDefault(), e.isOpen()) switch (t.keyCode) { case m: case O: e.moveHighlight(t.keyCode); break; case f: e.selectHighlightedOption(); break; case v: e.close(), e.target.focus() } else[m, O, y].indexOf(t.keyCode) >= 0 && e.open() }); var C = function(o) { function r(t) { if (e(this, r), a(Object.getPrototypeOf(r.prototype), "constructor", this).call(this, t), this.options = c({}, r.defaults, t), this.select = this.options.el, "undefined" != typeof this.select.selectInstance) throw new Error("This element has already been turned into a Select"); this.update = this.update.bind(this), this.setupTarget(), this.renderTarget(), this.setupDrop(), this.renderDrop(), this.setupSelect(), this.setupTether(), this.bindClick(), this.bindMutationEvents(), this.value = this.select.value } return n(r, o), s(r, [{ key: "useNative", value: function() { var t = this.options.useNative; return t === !0 || i() && t !== !1 } }, { key: "setupTarget", value: function() { var t = this; this.target = document.createElement("a"), this.target.href = "javascript:;", h(this.target, "select-target"); var e = this.select.getAttribute("tabindex") || 0; this.target.setAttribute("tabindex", e), this.options.className && h(this.target, this.options.className), this.target.selectInstance = this, this.target.addEventListener("click", function() { t.isOpen() ? t.target.blur() : t.target.focus() }), this.target.addEventListener("focus", function() { h(t.target, "select-target-focused") }), this.target.addEventListener("blur", function(e) { var n = e.relatedTarget; t.isOpen() && n && !t.drop.contains(n) && t.close(), u(t.target, "select-target-focused") }), this.select.parentNode.insertBefore(this.target, this.select.nextSibling) } }, { key: "setupDrop", value: function() { var t = this; this.drop = document.createElement("div"), h(this.drop, "select"), this.options.className && h(this.drop, this.options.className), document.body.appendChild(this.drop), this.drop.addEventListener("click", function(e) { p(e.target, "select-option") && t.pickOption(e.target), e.stopPropagation() }), this.drop.addEventListener("mousemove", function(e) { p(e.target, "select-option") && t.highlightOption(e.target) }), this.content = document.createElement("div"), h(this.content, "select-content"), this.drop.appendChild(this.content) } }, { key: "open", value: function() { var t = this; if (h(this.target, "select-open"), this.useNative()) { var e = document.createEvent("MouseEvents"); return e.initEvent("mousedown", !0, !0), void this.select.dispatchEvent(e) } h(this.drop, "select-open"), setTimeout(function() { t.tether.enable() }); var n = this.drop.querySelector(".select-option-selected"); if (n) { this.highlightOption(n), this.scrollDropContentToOption(n); var i = function() { if (p(t.drop, "tether-abutted-left") || p(t.drop, "tether-abutted-bottom")) { var e = d(t.drop), i = d(n), o = e.top - (i.top + i.height); t.drop.style.top = (parseFloat(t.drop.style.top) || 0) + o + "px" } }, o = this.options.alignToHighlighted, r = this.content, s = r.scrollHeight, a = r.clientHeight; ("always" === o || "auto" === o && a >= s) && setTimeout(function() { i() }), this.trigger("open") } } }, { key: "close", value: function() { u(this.target, "select-open"), this.useNative() && this.select.blur(), this.tether.disable(), u(this.drop, "select-open"), this.trigger("close") } }, { key: "toggle", value: function() { this.isOpen() ? this.close() : this.open() } }, { key: "isOpen", value: function() { return p(this.drop, "select-open") } }, { key: "bindClick", value: function() { var t = this; this.target.addEventListener(k, function(e) { e.preventDefault(), t.toggle() }), document.addEventListener(k, function(e) { t.isOpen() && (e.target === t.drop || t.drop.contains(e.target) || e.target === t.target || t.target.contains(e.target) || t.close()) }) } }, { key: "setupTether", value: function() { this.tether = new t(c({ element: this.drop, target: this.target, attachment: "top left", targetAttachment: "bottom left", classPrefix: "select", constraints: [{ to: "window", attachment: "together" }] }, this.options.tetherOptions)) } }, { key: "renderTarget", value: function() { this.target.innerHTML = ""; for (var t = this.select.querySelectorAll("option"), e = 0; e < t.length; ++e) { var n = t[e]; if (n.selected) { this.target.innerHTML = n.innerHTML; break } } this.target.appendChild(document.createElement("b")) } }, { key: "renderDrop", value: function() { var t = document.createElement("ul"); h(t, "select-options"); for (var e = this.select.querySelectorAll("option"), n = 0; n < e.length; ++n) { var i = e[n], o = document.createElement("li"); h(o, "select-option"), o.setAttribute("data-value", i.value), o.innerHTML = i.innerHTML, i.selected && h(o, "select-option-selected"), t.appendChild(o) } this.content.innerHTML = "", this.content.appendChild(t) } }, { key: "update", value: function() { this.renderDrop(), this.renderTarget() } }, { key: "setupSelect", value: function() { this.select.selectInstance = this, h(this.select, "select-select"), this.select.addEventListener("change", this.update) } }, { key: "bindMutationEvents", value: function() { "undefined" != typeof window.MutationObserver ? (this.observer = new MutationObserver(this.update), this.observer.observe(this.select, { childList: !0, attributes: !0, characterData: !0, subtree: !0 })) : this.select.addEventListener("DOMSubtreeModified", this.update) } }, { key: "findOptionsByPrefix", value: function(t) { var e = this.drop.querySelectorAll(".select-option"); return t = t.toLowerCase(), Array.prototype.filter.call(e, function(e) { return e.innerHTML.toLowerCase().substr(0, t.length) === t }) } }, { key: "findOptionsByValue", value: function(t) { var e = this.drop.querySelectorAll(".select-option"); return Array.prototype.filter.call(e, function(e) { return e.getAttribute("data-value") === t }) } }, { key: "getChosen", value: function() { return this.isOpen() ? this.drop.querySelector(".select-option-highlight") : this.drop.querySelector(".select-option-selected") } }, { key: "selectOption", value: function(t) { this.isOpen() ? (this.highlightOption(t), this.scrollDropContentToOption(t)) : this.pickOption(t, !1) } }, { key: "resetSelection", value: function() { this.selectOption(this.drop.querySelector(".select-option")) } }, { key: "highlightOption", value: function(t) { var e = this.drop.querySelector(".select-option-highlight"); e && u(e, "select-option-highlight"), h(t, "select-option-highlight"), this.trigger("highlight", { option: t }) } }, { key: "moveHighlight", value: function(t) { var e = this.drop.querySelector(".select-option-highlight"); if (!e) return void this.highlightOption(this.drop.querySelector(".select-option")); var n = this.drop.querySelectorAll(".select-option"), i = Array.prototype.indexOf.call(n, e); if (i >= 0 && (t === m ? i -= 1 : i += 1, !(0 > i || i >= n.length))) { var o = n[i]; this.highlightOption(o), this.scrollDropContentToOption(o) } } }, { key: "scrollDropContentToOption", value: function(t) { var e = this.content, n = e.scrollHeight, i = e.clientHeight, o = e.scrollTop; if (n > i) { var r = d(this.content), s = d(t); this.content.scrollTop = s.top - (r.top - o) } } }, { key: "selectHighlightedOption", value: function() { this.pickOption(this.drop.querySelector(".select-option-highlight")) } }, { key: "pickOption", value: function(t) { var e = this, n = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1]; this.value = this.select.value = t.getAttribute("data-value"), this.triggerChange(), n && setTimeout(function() { e.close(), e.target.focus() }) } }, { key: "triggerChange", value: function() { var t = document.createEvent("HTMLEvents"); t.initEvent("change", !0, !1), this.select.dispatchEvent(t), this.trigger("change", { value: this.select.value }) } }, { key: "change", value: function(t) { var e = this.findOptionsByValue(t); if (!e.length) throw new Error('Select Error: An option with the value "' + t + "\" doesn't exist"); this.pickOption(e[0], !1) } }]), r }(g); return C.defaults = { alignToHighlighed: "auto", className: "select-theme-default" }, C.init = function() { var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]; if ("loading" === document.readyState) return void document.addEventListener("DOMContentLoaded", function() { return C.init(t) }); "undefined" == typeof t.selector && (t.selector = "select"); for (var e = document.querySelectorAll(t.selector), n = 0; n < e.length; ++n) { var i = e[n]; i.selectInstance || new C(c({ el: i }, t)) } }, C });
;/*
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(b,a){if(typeof exports==="object"&&exports){a(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],a)}else{a(b.Mustache={})}}}(this,function(k){var n=Object.prototype.toString;var h=Array.isArray||function(x){return n.call(x)==="[object Array]"};function i(x){return typeof x==="function"}function g(x){return x.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var p=RegExp.prototype.test;function u(x,y){return p.call(x,y)}var m=/\S/;function j(x){return !u(m,x)}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function f(x){return String(x).replace(/[&<>"'\/]/g,function(y){return d[y]})}var v=/\s*/;var r=/\s+/;var e=/\s*=/;var b=/\s*\}/;var t=/#|\^|\/|>|\{|&|=|!/;function o(M,L){if(!M){return[]}var H=[];var O=[];var I=[];var B=false;var D=false;function K(){if(B&&!D){while(I.length){delete O[I.pop()]}}else{I=[]}B=false;D=false}var E,z,y;function A(S){if(typeof S==="string"){S=S.split(r,2)}if(!h(S)||S.length!==2){throw new Error("Invalid tags: "+S)}E=new RegExp(g(S[0])+"\\s*");z=new RegExp("\\s*"+g(S[1]));y=new RegExp("\\s*"+g("}"+S[1]))}A(L||k.tags);var G=new q(M);var J,P,Q,x,N,F;while(!G.eos()){J=G.pos;Q=G.scanUntil(E);if(Q){for(var C=0,R=Q.length;C<R;++C){x=Q.charAt(C);if(j(x)){I.push(O.length)}else{D=true}O.push(["text",x,J,J+1]);J+=1;if(x==="\n"){K()}}}if(!G.scan(E)){break}B=true;P=G.scan(t)||"name";G.scan(v);if(P==="="){Q=G.scanUntil(e);G.scan(e);G.scanUntil(z)}else{if(P==="{"){Q=G.scanUntil(y);G.scan(b);G.scanUntil(z);P="&"}else{Q=G.scanUntil(z)}}if(!G.scan(z)){throw new Error("Unclosed tag at "+G.pos)}N=[P,Q,J,G.pos];O.push(N);if(P==="#"||P==="^"){H.push(N)}else{if(P==="/"){F=H.pop();if(!F){throw new Error('Unopened section "'+Q+'" at '+J)}if(F[1]!==Q){throw new Error('Unclosed section "'+F[1]+'" at '+J)}}else{if(P==="name"||P==="{"||P==="&"){D=true}else{if(P==="="){A(Q)}}}}}F=H.pop();if(F){throw new Error('Unclosed section "'+F[1]+'" at '+G.pos)}return l(s(O))}function s(C){var A=[];var B,y;for(var x=0,z=C.length;x<z;++x){B=C[x];if(B){if(B[0]==="text"&&y&&y[0]==="text"){y[1]+=B[1];y[3]=B[3]}else{A.push(B);y=B}}}return A}function l(E){var z=[];var x=z;var C=[];var D,B;for(var y=0,A=E.length;y<A;++y){D=E[y];switch(D[0]){case"#":case"^":x.push(D);C.push(D);x=D[4]=[];break;case"/":B=C.pop();B[5]=D[2];x=C.length>0?C[C.length-1][4]:z;break;default:x.push(D)}}return z}function q(x){this.string=x;this.tail=x;this.pos=0}q.prototype.eos=function(){return this.tail===""};q.prototype.scan=function(y){var x=this.tail.match(y);if(!x||x.index!==0){return""}var z=x[0];this.tail=this.tail.substring(z.length);this.pos+=z.length;return z};q.prototype.scanUntil=function(z){var x=this.tail.search(z),y;switch(x){case -1:y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,x);this.tail=this.tail.substring(x)}this.pos+=y.length;return y};function a(y,x){this.view=y==null?{}:y;this.cache={".":this.view};this.parent=x}a.prototype.push=function(x){return new a(x,this)};a.prototype.lookup=function(A){var x=this.cache;var C;if(A in x){C=x[A]}else{var y=this,B,z;while(y){if(A.indexOf(".")>0){C=y.view;B=A.split(".");z=0;while(C!=null&&z<B.length){C=C[B[z++]]}}else{C=y.view[A]}if(C!=null){break}y=y.parent}x[A]=C}if(i(C)){C=C.call(this.view)}return C};function w(){this.cache={}}w.prototype.clearCache=function(){this.cache={}};w.prototype.parse=function(z,y){var x=this.cache;var A=x[z];if(A==null){A=x[z]=o(z,y)}return A};w.prototype.render=function(z,B,y){var A=this.parse(z);var x=(B instanceof a)?B:new a(B);return this.renderTokens(A,x,y,z)};w.prototype.renderTokens=function(H,y,D,C){var x="";var E=this;function F(K){return E.render(K,y,D)}var G,I;for(var z=0,B=H.length;z<B;++z){G=H[z];switch(G[0]){case"#":I=y.lookup(G[1]);if(!I){continue}if(h(I)){for(var A=0,J=I.length;A<J;++A){x+=this.renderTokens(G[4],y.push(I[A]),D,C)}}else{if(typeof I==="object"||typeof I==="string"){x+=this.renderTokens(G[4],y.push(I),D,C)}else{if(i(I)){if(typeof C!=="string"){throw new Error("Cannot use higher-order sections without the original template")}I=I.call(y.view,C.slice(G[3],G[5]),F);if(I!=null){x+=I}}else{x+=this.renderTokens(G[4],y,D,C)}}}break;case"^":I=y.lookup(G[1]);if(!I||(h(I)&&I.length===0)){x+=this.renderTokens(G[4],y,D,C)}break;case">":if(!D){continue}I=i(D)?D(G[1]):D[G[1]];if(I!=null){x+=this.renderTokens(this.parse(I),y,D,I)}break;case"&":I=y.lookup(G[1]);if(I!=null){x+=I}break;case"name":I=y.lookup(G[1]);if(I!=null){x+=k.escape(I)}break;case"text":x+=G[1];break}}return x};k.name="mustache.js";k.version="0.8.1";k.tags=["{{","}}"];var c=new w();k.clearCache=function(){return c.clearCache()};k.parse=function(y,x){return c.parse(y,x)};k.render=function(y,z,x){return c.render(y,z,x)};k.to_html=function(A,B,x,z){var y=k.render(A,B,x);if(i(z)){z(y)}else{return y}};k.escape=f;k.Scanner=q;k.Context=a;k.Writer=w}));;!function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Drop=e(t.Tether)}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=t.split(" "),n=a(e,2),o=n[0],i=n[1];if(["left","right"].indexOf(o)>=0){var s=[i,o];o=s[0],i=s[1]}return[o,i].join(" ")}function i(t,e){for(var n=void 0,o=[];-1!==(n=t.indexOf(e));)o.push(t.splice(n,1));return o}function s(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],h=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return new(r.apply(b,[null].concat(e)))};p(h,{createContext:s,drops:[],defaults:{}});var g={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};p(h,g,a),p(h.defaults,g.defaults,a.defaults),"undefined"==typeof x[h.classPrefix]&&(x[h.classPrefix]=[]),h.updateBodyClasses=function(){for(var t=!1,e=x[h.classPrefix],n=e.length,o=0;n>o;++o)if(e[o].isOpened()){t=!0;break}t?d(document.body,h.classPrefix+"-open"):c(document.body,h.classPrefix+"-open")};var b=function(s){function r(t){if(e(this,r),u(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.options=p({},h.defaults,t),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");var n="data-"+h.classPrefix,o=this.target.getAttribute(n);o&&null==this.options.content&&(this.options.content=o);for(var i=["position","openOn"],s=0;s<i.length;++s){var a=this.target.getAttribute(n+"-"+i[s]);a&&null==this.options[i[s]]&&(this.options[i[s]]=a)}this.options.classes&&this.options.addTargetClasses!==!1&&d(this.target,this.options.classes),h.drops.push(this),x[h.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return n(r,s),l(r,[{key:"_on",value:function(t,e,n){this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),d(this.drop,h.classPrefix),this.options.classes&&d(this.drop,this.options.classes),this.content=document.createElement("div"),d(this.content,h.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};e(),this.on("open",e.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=E[e[0]],e=e.join(" ");var n=[];this.options.constrainToScrollParent?n.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):n.push({to:"scrollParent"}),this.options.constrainToWindow!==!1?n.push({to:"window",attachment:"together"}):n.push({to:"window"});var i={element:this.drop,target:this.target,attachment:o(e),targetAttachment:o(this.options.position),classPrefix:h.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};this.options.tetherOptions!==!1&&(this.tether=new t(p({},i,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var n=function(e){t.toggle(e),e.preventDefault()},o=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},i=0;i<y.length;++i){var s=y[i];this._on(this.target,s,n),this._on(document,s,o)}var r=null,a=null,l=function(e){null!==a?clearTimeout(a):r=setTimeout(function(){t.open(e),r=null},("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},u=function(e){null!==r?clearTimeout(r):a=setTimeout(function(){t.close(e),a=null},("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",l),this._on(this.drop,"mouseover",l),this._on(this.target,"mouseout",u),this._on(this.drop,"mouseout",u)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",l),this._on(this.drop,"focus",l),this._on(this.target,"blur",u),this._on(this.drop,"blur",u))}}},{key:"isOpened",value:function(){return this.drop?f(this.drop,h.classPrefix+"-open"):void 0}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),d(this.drop,h.classPrefix+"-open"),d(this.drop,h.classPrefix+"-open-transitionend"),setTimeout(function(){e.drop&&d(e.drop,h.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),h.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(f(this.drop,h.classPrefix+"-open")||c(this.drop,h.classPrefix+"-open-transitionend"),this.drop.removeEventListener(m,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=this.options.beforeClose(t,this)!==!1),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(c(this.drop,h.classPrefix+"-open"),c(this.drop,h.classPrefix+"-after-open"),this.drop.addEventListener(m,this.transitionEndHandler),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),h.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],n=e.element,o=e.event,s=e.handler;n.removeEventListener(o,s)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,i(x[h.classPrefix],this),i(h.drops,this)}}]),r}(v);return h}var r=Function.prototype.bind,a=function(){function t(t,e){var n=[],o=!0,i=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(o=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);o=!0);}catch(l){i=!0,s=l}finally{try{!o&&a["return"]&&a["return"]()}finally{if(i)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,s=e,r=n;o=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(r)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=s,n=r,o=!0,a=u=void 0}},h=t.Utils,p=h.extend,d=h.addClass,c=h.removeClass,f=h.hasClass,v=h.Evented,y=["click"];"ontouchstart"in document.documentElement&&y.push("touchstart");var g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},m="";for(var b in g)if({}.hasOwnProperty.call(g,b)){var O=document.createElement("p");"undefined"!=typeof O.style[b]&&(m=g[b])}var E={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},x={},P=s();return document.addEventListener("DOMContentLoaded",function(){P.updateBodyClasses()}),P});;/*
 * JavaScript Cookie v2.1.2
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{var c=window.Cookies;var a=window.Cookies=b();a.noConflict=function(){window.Cookies=c;return a}}}}(function(){function a(){var d=0;var f={};for(;d<arguments.length;d++){var c=arguments[d];for(var e in c){f[e]=c[e]}}return f}function b(d){function c(m,r,f){var q;if(typeof document==="undefined"){return}if(arguments.length>1){f=a({path:"/"},c.defaults,f);if(typeof f.expires==="number"){var k=new Date();k.setMilliseconds(k.getMilliseconds()+f.expires*86400000);f.expires=k}try{q=JSON.stringify(r);if(/^[\{\[]/.test(q)){r=q}}catch(j){}if(!d.write){r=encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{r=d.write(r,m)}m=encodeURIComponent(String(m));m=m.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);m=m.replace(/[\(\)]/g,escape);return(document.cookie=[m,"=",r,f.expires&&"; expires="+f.expires.toUTCString(),f.path&&"; path="+f.path,f.domain&&"; domain="+f.domain,f.secure?"; secure":""].join(""))}if(!m){q={}}var h=document.cookie?document.cookie.split("; "):[];var p=/(%[0-9A-Z]{2})+/g;var l=0;for(;l<h.length;l++){var o=h[l].split("=");var g=o.slice(1).join("=");if(g.charAt(0)==='"'){g=g.slice(1,-1)}try{var n=o[0].replace(p,decodeURIComponent);g=d.read?d.read(g,n):d(g,n)||g.replace(p,decodeURIComponent);if(this.json){try{g=JSON.parse(g)}catch(j){}}if(m===n){q=g;break}if(!m){q[n]=g}}catch(j){}}return q}c.set=c;c.get=function(e){return c(e)};c.getJSON=function(){return c.apply({json:true},[].slice.call(arguments))};c.defaults={};c.remove=function(f,e){c(f,"",a(e,{expires:-1}))};c.withConverter=b;return c}return b(function(){})}));;/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};(function(e){e.Template=function(n,q,o,p){n=n||{};this.r=n.code||this.r;this.c=o;this.options=p||{};this.text=q||"";this.partials=n.partials||{};this.subs=n.subs||{};this.buf=""};e.Template.prototype={r:function(n,p,o){return""},v:f,t:a,render:function j(n,p,o){return this.ri([n],p||{},o)},ri:function(n,p,o){return this.r(n,p,o)},ep:function(p,o){var n=this.partials[p];var q=o[n.name];if(n.instance&&n.base==q){return n.instance}if(typeof q=="string"){if(!this.c){throw new Error("No compiler available.")}q=this.c.compile(q,this.options)}if(!q){return null}this.partials[p].base=q;if(n.subs){if(!o.stackText){o.stackText={}}for(key in n.subs){if(!o.stackText[key]){o.stackText[key]=(this.activeSub!==undefined&&o.stackText[this.activeSub])?o.stackText[this.activeSub]:this.text}}q=b(q,n.subs,n.partials,this.stackSubs,this.stackPartials,o.stackText)}this.partials[p].instance=q;return q},rp:function(r,n,q,o){var p=this.ep(r,q);if(!p){return""}return p.ri(n,q,o)},rs:function(n,p,q){var r=n[n.length-1];if(!g(r)){q(n,p,this);return}for(var o=0;o<r.length;o++){n.push(r[o]);q(n,p,this);n.pop()}},s:function(u,n,q,p,s,o,t){var r;if(g(u)&&u.length===0){return false}if(typeof u=="function"){u=this.ms(u,n,q,p,s,o,t)}r=!!u;if(!p&&r&&n){n.push((typeof u=="object")?u:n[n.length-1])}return r},d:function(s,n,u,v){var q,t=s.split("."),w=this.f(t[0],n,u,v),p=this.options.modelGet,o=null;if(s==="."&&g(n[n.length-2])){w=n[n.length-1]}else{for(var r=1;r<t.length;r++){q=c(t[r],w,p);if(q!=null){o=w;w=q}else{w=""}}}if(v&&!w){return false}if(!v&&typeof w=="function"){n.push(o);w=this.mv(w,n,u);n.pop()}return w},f:function(r,n,s,t){var w=false,u=null,p=false,o=this.options.modelGet;for(var q=n.length-1;q>=0;q--){u=n[q];w=c(r,u,o);if(w!=null){p=true;break}}if(!p){return(t)?false:""}if(!t&&typeof w=="function"){w=this.mv(w,n,s)}return w},ls:function(o,n,q,s,r){var p=this.options.delimiters;this.options.delimiters=r;this.b(this.ct(a(o.call(n,s)),n,q));this.options.delimiters=p;return false},ct:function(p,n,o){if(this.options.disableLambda){throw new Error("Lambda features disabled.")}return this.c.compile(p,this.options).render(n,o)},b:function(n){this.buf+=n},fl:function(){var n=this.buf;this.buf="";return n},ms:function(q,n,s,r,u,p,v){var w,o=n[n.length-1],t=q.call(o);if(typeof t=="function"){if(r){return true}else{w=(this.activeSub&&this.subsText&&this.subsText[this.activeSub])?this.subsText[this.activeSub]:this.text;return this.ls(t,o,s,w.substring(u,p),v)}}return t},mv:function(p,n,q){var o=n[n.length-1];var r=p.call(o);if(typeof r=="function"){return this.ct(a(r.call(o)),o,q)}return r},sub:function(q,n,r,p){var o=this.subs[q];if(o){this.activeSub=q;o(n,r,this,p);this.activeSub=false}}};function c(p,q,o){var r,n;if(q&&typeof q=="object"){if(q[p]!=null){r=q[p]}else{if(o&&q.get&&typeof q.get=="function"){r=q.get(p)}}}return r}function b(n,v,q,t,s,u){function r(){}r.prototype=n;function w(){}w.prototype=n.subs;var o;var p=new r();p.subs=new w();p.subsText={};p.buf="";t=t||{};p.stackSubs=t;p.subsText=u;for(o in v){if(!t[o]){t[o]=v[o]}}for(o in t){p.subs[o]=t[o]}s=s||{};p.stackPartials=s;for(o in q){if(!s[o]){s[o]=q[o]}}for(o in s){p.partials[o]=s[o]}return p}var h=/&/g,l=/</g,k=/>/g,i=/\'/g,m=/\"/g,d=/[&<>\"\']/;function a(n){return String((n===null||n===undefined)?"":n)}function f(n){n=a(n);return d.test(n)?n.replace(h,"&amp;").replace(l,"&lt;").replace(k,"&gt;").replace(i,"&#39;").replace(m,"&quot;"):n}var g=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}})(typeof exports!=="undefined"?exports:Hogan);(function(g){var k=/\S/,m=/\"/g,l=/\n/g,j=/\r/g,n=/\\/g;g.tags={"#":1,"^":2,"<":3,"$":4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12};g.scan=function o(O,A){var G=O.length,F=0,E=1,D=2,L=F,N=null,M=null,x="",P=[],K=false,C=0,I=0,J="{{",z="}}";function w(){if(x.length>0){P.push({tag:"_t",text:new String(x)});x=""}}function H(){var Q=true;for(var R=I;R<P.length;R++){Q=(g.tags[P[R].tag]<g.tags._v)||(P[R].tag=="_t"&&P[R].text.match(k)===null);if(!Q){return false}}return Q}function B(Q,T){w();if(Q&&H()){for(var R=I,S;R<P.length;R++){if(P[R].text){if((S=P[R+1])&&S.tag==">"){S.indent=P[R].text.toString()}P.splice(R,1)}}}else{if(!T){P.push({tag:"\n"})}}K=false;I=P.length}function y(U,T){var Q="="+z,R=U.indexOf(Q,T),S=t(U.substring(U.indexOf("=",T)+1,R)).split(" ");J=S[0];z=S[S.length-1];return R+Q.length-1}if(A){A=A.split(" ");J=A[0];z=A[1]}for(C=0;C<G;C++){if(L==F){if(s(J,O,C)){--C;w();L=E}else{if(O.charAt(C)=="\n"){B(K)}else{x+=O.charAt(C)}}}else{if(L==E){C+=J.length-1;M=g.tags[O.charAt(C+1)];N=M?O.charAt(C+1):"_v";if(N=="="){C=y(O,C);L=F}else{if(M){C++}L=D}K=C}else{if(s(z,O,C)){P.push({tag:N,n:t(x),otag:J,ctag:z,i:(N=="/")?K-J.length:C+z.length});x="";C+=z.length-1;L=F;if(N=="{"){if(z=="}}"){C++}else{d(P[P.length-1])}}}else{x+=O.charAt(C)}}}}B(K,true);return P};function d(w){if(w.n.substr(w.n.length-1)==="}"){w.n=w.n.substring(0,w.n.length-1)}}function t(w){if(w.trim){return w.trim()}return w.replace(/^\s*|\s*$/g,"")}function s(z,A,x){if(A.charAt(x)!=z.charAt(0)){return false}for(var w=1,y=z.length;w<y;w++){if(A.charAt(x+w)!=z.charAt(w)){return false}}return true}var a={_t:true,"\n":true,"$":true,"/":true};function b(D,y,A,w){var x=[],z=null,B=null,C=null;B=A[A.length-1];while(D.length>0){C=D.shift();if(B&&B.tag=="<"&&!(C.tag in a)){throw new Error("Illegal content in < super tag.")}if(g.tags[C.tag]<=g.tags["$"]||i(C,w)){A.push(C);C.nodes=b(D,C.tag,A,w)}else{if(C.tag=="/"){if(A.length===0){throw new Error("Closing tag without opener: /"+C.n)}z=A.pop();if(C.n!=z.n&&!h(C.n,z.n,w)){throw new Error("Nesting error: "+z.n+" vs. "+C.n)}z.end=C.i;return x}else{if(C.tag=="\n"){C.last=(D.length==0)||(D[0].tag=="\n")}}}x.push(C)}if(A.length>0){throw new Error("missing closing tag: "+A.pop().n)}return x}function i(z,y){for(var w=0,x=y.length;w<x;w++){if(y[w].o==z.n){z.tag="#";return true}}}function h(w,z,A){for(var x=0,y=A.length;x<y;x++){if(A[x].c==w&&A[x].o==z){return true}}}function r(y){var w=[];for(var x in y){w.push('"'+f(x)+'": function(c,p,t,i) {'+y[x]+"}")}return"{ "+w.join(",")+" }"}function q(w){var y=[];for(var x in w.partials){y.push('"'+f(x)+'":{name:"'+f(w.partials[x].name)+'", '+q(w.partials[x])+"}")}return"partials: {"+y.join(",")+"}, subs: "+r(w.subs)}g.stringify=function(w,y,x){return"{code: function (c,p,i) { "+g.wrapMain(w.code)+" },"+q(w)+"}"};var p=0;g.generate=function(z,y,x){p=0;var w={code:"",subs:{},partials:{}};g.walk(z,w);if(x.asString){return this.stringify(w,y,x)}return this.makeTemplate(w,y,x)};g.wrapMain=function(w){return'var t=this;t.b(i=i||"");'+w+"return t.fl();"};g.template=g.Template;g.makeTemplate=function(w,z,x){var y=this.makePartials(w);y.code=new Function("c","p","i",this.wrapMain(w.code));return new this.template(y,z,this,x)};g.makePartials=function(w){var x,y={subs:{},partials:w.partials,name:w.name};for(x in y.partials){y.partials[x]=this.makePartials(y.partials[x])}for(x in w.subs){y.subs[x]=new Function("c","p","t","i",w.subs[x])}return y};function f(w){return w.replace(n,"\\\\").replace(m,'\\"').replace(l,"\\n").replace(j,"\\r")}function c(w){return(~w.indexOf("."))?"d":"f"}function e(x,w){var y="<"+(w.prefix||"");var z=y+x.n+p++;w.partials[z]={name:x.n,partials:{}};w.code+='t.b(t.rp("'+f(z)+'",c,p,"'+(x.indent||"")+'"));';return z}g.codegen={"#":function(x,w){w.code+="if(t.s(t."+c(x.n)+'("'+f(x.n)+'",c,p,1),c,p,0,'+x.i+","+x.end+',"'+x.otag+" "+x.ctag+'")){t.rs(c,p,function(c,p,t){';g.walk(x.nodes,w);w.code+="});c.pop();}"},"^":function(x,w){w.code+="if(!t.s(t."+c(x.n)+'("'+f(x.n)+'",c,p,1),c,p,1,0,0,"")){';g.walk(x.nodes,w);w.code+="};"},">":e,"<":function(y,w){var x={partials:{},code:"",subs:{},inPartial:true};g.walk(y.nodes,x);var z=w.partials[e(y,w)];z.subs=x.subs;z.partials=x.partials},"$":function(y,w){var x={subs:{},code:"",partials:w.partials,prefix:y.n};g.walk(y.nodes,x);w.subs[y.n]=x.code;if(!w.inPartial){w.code+='t.sub("'+f(y.n)+'",c,p,i);'}},"\n":function(x,w){w.code+=v('"\\n"'+(x.last?"":" + i"))},_v:function(x,w){w.code+="t.b(t.v(t."+c(x.n)+'("'+f(x.n)+'",c,p,0)));'},_t:function(x,w){w.code+=v('"'+f(x.text)+'"')},"{":u,"&":u};function u(x,w){w.code+="t.b(t.t(t."+c(x.n)+'("'+f(x.n)+'",c,p,0)));'}function v(w){return"t.b("+w+");"}g.walk=function(A,w){var x;for(var y=0,z=A.length;y<z;y++){x=g.codegen[A[y].tag];x&&x(A[y],w)}return w};g.parse=function(y,x,w){w=w||{};return b(y,"",[],w.sectionTags||[])};g.cache={};g.cacheKey=function(x,w){return[x,!!w.asString,!!w.disableLambda,w.delimiters,!!w.modelGet].join("||")};g.compile=function(B,y){y=y||{};var w=g.cacheKey(B,y);var A=this.cache[w];if(A){var z=A.partials;for(var x in z){delete z[x].instance}return A}A=this.generate(this.parse(this.scan(B,y.delimiters),B,y),B,y);return this.cache[w]=A}})(typeof exports!=="undefined"?exports:Hogan);;/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
(function (p, z) { function q(a) { return !!("" === a || a && a.charCodeAt && a.substr) } function m(a) { return u ? u(a) : "[object Array]" === v.call(a) } function r(a) { return "[object Object]" === v.call(a) } function s(a, b) { var d, a = a || {}, b = b || {}; for (d in b) b.hasOwnProperty(d) && null == a[d] && (a[d] = b[d]); return a } function j(a, b, d) { var c = [], e, h; if (!a) return c; if (w && a.map === w) return a.map(b, d); for (e = 0, h = a.length; e < h; e++) c[e] = b.call(d, a[e], e, a); return c } function n(a, b) { a = Math.round(Math.abs(a)); return isNaN(a) ? b : a } function x(a) { var b = c.settings.currency.format; "function" === typeof a && (a = a()); return q(a) && a.match("%v") ? { pos: a, neg: a.replace("-", "").replace("%v", "-%v"), zero: a } : !a || !a.pos || !a.pos.match("%v") ? !q(b) ? b : c.settings.currency.format = { pos: b, neg: b.replace("%v", "-%v"), zero: b } : a } var c = { version: "0.4.1", settings: { currency: { symbol: "$", format: "%s%v", decimal: ".", thousand: ",", precision: 2, grouping: 3 }, number: { precision: 0, grouping: 3, thousand: ",", decimal: "." } } }, w = Array.prototype.map, u = Array.isArray, v = Object.prototype.toString, o = c.unformat = c.parse = function (a, b) { if (m(a)) return j(a, function (a) { return o(a, b) }); a = a || 0; if ("number" === typeof a) return a; var b = b || ".", c = RegExp("[^0-9-" + b + "]", ["g"]), c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(b, ".")); return !isNaN(c) ? c : 0 }, y = c.toFixed = function (a, b) { var b = n(b, c.settings.number.precision), d = Math.pow(10, b); return (Math.round(c.unformat(a) * d) / d).toFixed(b) }, t = c.formatNumber = c.format = function (a, b, d, i) { if (m(a)) return j(a, function (a) { return t(a, b, d, i) }); var a = o(a), e = s(r(b) ? b : { precision: b, thousand: d, decimal: i }, c.settings.number), h = n(e.precision), f = 0 > a ? "-" : "", g = parseInt(y(Math.abs(a || 0), h), 10) + "", l = 3 < g.length ? g.length % 3 : 0; return f + (l ? g.substr(0, l) + e.thousand : "") + g.substr(l).replace(/(\d{3})(?=\d)/g, "$1" + e.thousand) + (h ? e.decimal + y(Math.abs(a), h).split(".")[1] : "") }, A = c.formatMoney = function (a, b, d, i, e, h) { if (m(a)) return j(a, function (a) { return A(a, b, d, i, e, h) }); var a = o(a), f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency), g = x(f.format); return (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal)) }; c.formatColumn = function (a, b, d, i, e, h) { if (!a) return []; var f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency), g = x(f.format), l = g.pos.indexOf("%s") < g.pos.indexOf("%v") ? !0 : !1, k = 0, a = j(a, function (a) { if (m(a)) return c.formatColumn(a, f); a = o(a); a = (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal)); if (a.length > k) k = a.length; return a }); return j(a, function (a) { return q(a) && a.length < k ? l ? a.replace(f.symbol, f.symbol + Array(k - a.length + 1).join(" ")) : Array(k - a.length + 1).join(" ") + a : a }) }; if ("undefined" !== typeof exports) { if ("undefined" !== typeof module && module.exports) exports = module.exports = c; exports.accounting = c } else "function" === typeof define && define.amd ? define([], function () { return c }) : (c.noConflict = function (a) { return function () { p.accounting = a; c.noConflict = z; return c } }(p.accounting), p.accounting = c) })(this);;(function(c,a){a.Shutter=function(e,d){this.$el=a(d);this.$heightToogle=a(e.selectors.item).height();this._init(e)};a.Shutter.defaults={selectors:{button:"li a:first",item:"li div.content"},namespace:"",open:-1,oneOpenedItem:false,opened:"opened",speed:600,easing:"swing",fade:true,scroll:false,scrollSpeed:600,scrollEasing:"swing",forcedHeight:false};a.Shutter.prototype={_init:function(e){this.options=a.extend(true,{},a.Shutter.defaults,e);var d=this.options.namespace;this.$items=this.$el.find(this.options.selectors.item);this.$buttons=this.$el.find(this.options.selectors.button);this.itemsCount=this.$items.length;this.$items.each(function(f){a(this).data(d+"sh-index",f)});this.$buttons.each(function(f){a(this).data(d+"sh-index",f)});this.current=this.options.open;this.$items.hide();if(this.current!=-1){this._toggleItem(this.$items.eq(this.current))}this._initEvents()},_getRelated:function(e,d){var f=this.options.namespace+"sh-index";return e.filter(function(){return a(this).data(f)==d.data(f)})},_initEvents:function(){var d=this;this.$el.find(this.options.selectors.button).bind("click.shutter",function(f){var e=d._getRelated(d.$items,a(this));if(d.options.oneOpenedItem&&d._isOpened()&&d.current!==parseInt(e.data(d.options.namespace+"sh-index"))){d._toggleItem(d.$items.eq(d.current))}d._toggleItem(e);return false})},_isOpened:function(){return(this.$el.find(this.options.selectors.item+"."+this.options.opened).length>0)},_toggleItem:function(e){var d=this._getRelated(this.$buttons,e);if(e.hasClass(this.options.opened)){this.previous=this.current;this.current=-1;e.stop(true,true);if(this.options.fade){e.fadeOut({duration:this.options.speed,queue:false})}e.removeClass(this.options.opened);d.removeClass(this.options.opened);e.animate({height:0},{queue:false,complete:function(){e.css({height:"",display:"none"})},duration:this.options.speed,easing:this.options.easing})}else{this.current=parseInt(e.data(this.options.namespace+"sh-index"));var h=(this.options.forcedHeight)?this.$heightToogle:e.height();var i=e.outerHeight();e.css({height:0,display:"block"});e.stop(true,true);if(this.options.fade){e.fadeIn({duration:this.options.speed,queue:false})}e.addClass(this.options.opened);d.addClass(this.options.opened);e.animate({height:h},{queue:false,duration:this.options.speed,easing:this.options.easing});var j=e.position().top-(this.options.oneOpenedItem&&this.previous>=0&&this.previous<this.current?this.$items.eq(this.previous).innerHeight():0);var f=e.offsetParent();var g=this._getScroller(e);while(f&&f.parent(g).length>0){j+=f.position().top;if(f.offsetParent().get(0)!==f.get(0)){f=f.offsetParent()}else{f=null}}if(g.get(0)===document){g=a(c)}if(this.options.scroll){this._scroll(g,j)}else{if(j+i-g.scrollTop()>g.height()){this._scroll(g,j+i-g.height())}}}},_scroll:function(d,e){if(d.get(0)===c){d=a("body,html")}d.stop().animate({scrollTop:e},this.options.scrollSpeed,this.options.scrollEasing)},_getScroller:function(d){var f=d.css("position"),e=f==="absolute",g=d.parents().filter(function(){var h=a(this);if(e&&h.css("position")==="static"){return false}return(/(auto|scroll)/).test(h.css("overflow")+h.css("overflow-y")+h.css("overflow-x"))}).eq(0);return f==="fixed"||!g.length?a(d[0].ownerDocument||document):g},};var b=function(d){if(this.console){console.error(d)}};a.fn.shutter=function(e){if(typeof e==="string"){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var f=a.data(this,"shutter");if(!f){b("cannot call methods on shutter prior to initialization; attempted to call method '"+e+"'");return}if(!a.isFunction(f[e])||e.charAt(0)==="_"){b("no such method '"+e+"' for shutter instance");return}f[e].apply(f,d)})}else{this.each(function(){var f=a.data(this,"shutter");if(!f){a.data(this,"shutter",new a.Shutter(e,this))}})}return this}})(window,jQuery);;(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){var f=/\+/g;function d(i){return b.raw?i:encodeURIComponent(i)}function c(i){return b.raw?i:decodeURIComponent(i)}function h(i){return d(b.json?JSON.stringify(i):String(i))}function e(j){if(j.indexOf('"')===0){j=j.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{j=decodeURIComponent(j.replace(f," "))}catch(i){return}try{return b.json?JSON.parse(j):j}catch(i){}}function g(j,i){var k=b.raw?j:e(j);return a.isFunction(i)?i(k):k}var b=a.cookie=function(o,w,r){if(w!==undefined&&!a.isFunction(w)){r=a.extend({},b.defaults,r);if(typeof r.expires==="number"){var m=r.expires,v=r.expires=new Date();v.setDate(v.getDate()+m)}return(document.cookie=[d(o),"=",h(w),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join(""))}var u=o?undefined:{};var k=document.cookie?document.cookie.split("; "):[];for(var n=0,p=k.length;n<p;n++){var s=k[n].split("=");var q=c(s.shift());var j=s.join("=");if(o&&o===q){u=g(j,w);break}if(!o&&(j=g(j))!==undefined){u[q]=j}}return u};b.defaults={};a.removeCookie=function(i,j){if(a.cookie(i)===undefined){return false}a.cookie(i,"",a.extend({},j,{expires:-1}));return !a.cookie(i)}}));;/* HTML5 Placeholder jQuery Plugin - v2.1.1
 * Copyright (c)2015 Mathias Bynens
 * 2015-03-11
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(a){function b(b){var c={},d=/^jQuery\d+$/;return a.each(b.attributes,function(a,b){b.specified&&!d.test(b.name)&&(c[b.name]=b.value)}),c}function c(b,c){var d=this,f=a(d);if(d.value==f.attr("placeholder")&&f.hasClass(m.customClass))if(f.data("placeholder-password")){if(f=f.hide().nextAll('input[type="password"]:first').show().attr("id",f.removeAttr("id").data("placeholder-id")),b===!0)return f[0].value=c;f.focus()}else d.value="",f.removeClass(m.customClass),d==e()&&d.select()}function d(){var d,e=this,f=a(e),g=this.id;if(""===e.value){if("password"===e.type){if(!f.data("placeholder-textinput")){try{d=f.clone().attr({type:"text"})}catch(h){d=a("<input>").attr(a.extend(b(this),{type:"text"}))}d.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",c),f.data({"placeholder-textinput":d,"placeholder-id":g}).before(d)}f=f.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",g).show()}f.addClass(m.customClass),f[0].value=f.attr("placeholder")}else f.removeClass(m.customClass)}function e(){try{return document.activeElement}catch(a){}}var f,g,h="[object OperaMini]"==Object.prototype.toString.call(window.operamini),i="placeholder"in document.createElement("input")&&!h,j="placeholder"in document.createElement("textarea")&&!h,k=a.valHooks,l=a.propHooks;if(i&&j)g=a.fn.placeholder=function(){return this},g.input=g.textarea=!0;else{var m={};g=a.fn.placeholder=function(b){var e={customClass:"placeholder"};m=a.extend({},e,b);var f=this;return f.filter((i?"textarea":":input")+"[placeholder]").not("."+m.customClass).bind({"focus.placeholder":c,"blur.placeholder":d}).data("placeholder-enabled",!0).trigger("blur.placeholder"),f},g.input=i,g.textarea=j,f={get:function(b){var c=a(b),d=c.data("placeholder-password");return d?d[0].value:c.data("placeholder-enabled")&&c.hasClass(m.customClass)?"":b.value},set:function(b,f){var g=a(b),h=g.data("placeholder-password");return h?h[0].value=f:g.data("placeholder-enabled")?(""===f?(b.value=f,b!=e()&&d.call(b)):g.hasClass(m.customClass)?c.call(b,!0,f)||(b.value=f):b.value=f,g):b.value=f}},i||(k.input=f,l.value=f),j||(k.textarea=f,l.value=f),a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+m.customClass,this).each(c);setTimeout(function(){b.each(d)},10)})}),a(window).bind("beforeunload.placeholder",function(){a("."+m.customClass).each(function(){this.value=""})})}});;Chart.defaults.global.animation=false;Chart.defaults.global.scaleLineColor="rgba(255, 255, 255, 0.1)";Chart.defaults.global.scaleFontStyle="bold";Chart.defaults.global.scaleFontColor="rgba(0, 0, 0, 0.8)";Chart.defaults.global.responsive=true;Chart.defaults.global.scaleOverride=true;Chart.defaults.global.scaleSteps=5;Chart.defaults.global.scaleStepWidth=2;Chart.defaults.global.scaleStartValue=0;;(function(b){var c=3600;var d=[".ASPXAUTH","AMCV_###@AdobeOrg","campaign","campaign","identityImpersonator","NBART","OrderInSession","ORGN","t2s-p","eb-profile","s_cc","s_fid","s_sq","s_vi","SID","TEST_R","UID","kvn"];var a=function(){var e=Cookies.get();_.each(e,function(g,f){if(d.indexOf(f)===-1){Cookies.remove(f,{domain:b.config.cookiesHostname,path:b.config.cookiesPath})}})};b.Utils.checkCookies=function(){if(document.cookie.length>c){a()}}})(window.Fnac);;"use strict";(function(b,a){b.Utils.keyCodes={BACKSPACE:8,ENTER:13,UP_ARROW:38,DOWN_ARROW:40,DELETE:46};b.Utils.userIsAuthenticated=function(){return a("body").data("userIsAuthenticated")};b.Utils.userIsIdentified=function(){return a("body").data("userIsIdentified")};b.Utils.userIsGeolocated=function(){return !!Cookies.get("GeoStoreId")};b.Utils.decodeHtml=function(d){var c=document.createElement("div");c.innerHTML=d;return c.childNodes.length===0?"":c.childNodes[0].nodeValue};b.Utils.getCountryCode=function(){var c=a("html");if(c.length){var d=c.attr("lang");if(d.length==5){return d.substring(3,5)}}return""};b.Utils.getLanguageCode=function(){var c=a("html");if(c.length){var d=c.attr("lang");if(d.length==5){return d.substring(0,2)}}return""};b.Utils.isMobile=function(){if(a("meta[name=mobile-device]").attr("content")==="True"){return true}return false}})(Fnac,$);;(function(a){a.Utils.decodeLink=function(c){var e="gjpkgwvzra";var b=$(c);var d=b.data(e);var f=(window.atob||Base64.decode)(d);b.attr("href",f).undelegate().removeClass(e).removeData(e).removeAttr("data-"+e)}})(window.Fnac);;(function(a){a.Utils.extractIdFromYouTubeUrl=function(d){var c=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;var b=d.match(c);if(b&&b[7].length===11){return b[7]}else{console.error("Wrong YouTube URL.")}}})(Fnac);;(function(a){var c=null;var b;var f;var d="geolocation is not enabled";a.Utils.geolocate=function(){return;b=$.Deferred();f=setTimeout(function(){b.reject(d)},5000);if(!c){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(g,e)}}else{clearTimeout(f);b.resolve(c)}return b.promise()};function g(h){c={latitude:h.coords.latitude,longitude:h.coords.longitude};clearTimeout(f);b.resolve(c)}function e(h){c=null;clearTimeout(f);b.reject(h);if(h.code===1){return}console.error(h.code,h.message)}})(window.Fnac);;(function(b,a){var c=function(d){var e={};var f=location.search.slice(1);a.each(f.split("&"),function(g){e[g.split("=")[0]]=g.split("=")[1]});return e[d]};b.Utils.getQueryParameter=c})(Fnac,_);;void function(a){a.Utils.getYOffset=function(){var b=window.pageYOffset;if(typeof b=="number"){return b}return(document.documentElement.scrollTop||document.body.scrollTop||0)}}(window.Fnac);;(function(a){a.Utils.humanizeTimestamp=function(f){var b=Math.floor(f/3600)%24,c=Math.floor(f/60)%60,e=Math.floor(f%60),d=((b>0)?(b<10?"0"+b:b)+":":"")+(c<10?"0"+c:c)+":"+(e<10?"0"+e:e);return d}})(Fnac);;(function(a){a.Utils.productPRID=function(){return $("body").attr("data-prid")},a.Utils.productCatalog=function(){return $("body").attr("data-catalog")||1},a.Utils.productID=function(){return $("body").attr("data-itemid")||1},a.Utils.productURL=function(){return window.location.href},a.Utils.productOfferID=function(){var c=window.location.search.substring(1).split("&");var b=null;_.each(c,function(e){var d=e.split("=")[0];var f=e.split("=")[1];if(d=="oref"){b=f}});return b}})(Fnac);var orefManager=function(b){var c=window.location.href;var a=c.split("?")[0];if(b.oref){history.replaceState(null,null,"?oref="+b.oref)}else{history.replaceState(null,null,a)}};;(function(a){a.Utils.twitterTimeline=function(){var b=document;var g="script";var e="twitter-wjs";$("#twitter-wjs").remove();var f,c=b.getElementsByTagName(g)[0];if(!b.getElementById(e)){f=b.createElement(g);f.id=e;f.src="//platform.twitter.com/widgets.js";c.parentNode.insertBefore(f,c)}}})(Fnac);;(function(i){var f=250;var h={t:300,b:300,l:0,r:0};var e=null;var d=function(j){return(j.offsetParent===null)};var b=function(){return{l:0-h.l,t:0-h.t,b:(i.innerHeight||document.documentElement.clientHeight)+h.b,r:(i.innerWidth||document.documentElement.clientWidth)+h.r}};var c=function(k){if(d(k)){return false}var l=b();var j=k.getBoundingClientRect();return(j.right>=l.l&&j.bottom>=l.t&&j.left<=l.r&&j.top<=l.b)};var a=function(){if(!!e){return}clearTimeout(e);e=setTimeout(function(){g.decodeAll();e=null},f)};var g={};g.init=function(){g.decodeAll();g.attach()};g.decode=function(j){if(!c(j)){return}Fnac.Utils.decodeLink(j)};g.decodeAll=function(){var j=document.querySelectorAll(".gjpkgwvzra");if(j.length){_.each(j,g.decode)}else{g.detach()}};g.attach=function(){if(document.addEventListener){i.addEventListener("resize",a,false);i.addEventListener("scroll",a,false);i.addEventListener("load",a,false)}else{i.attachEvent("onresize",a);i.attachEvent("onscroll",a);i.attachEvent("onload",a)}};g.detach=function(){if(document.removeEventListener){i.removeEventListener("resize",a);i.removeEventListener("scroll",a)}else{i.detachEvent("onresize",a);i.detachEvent("onscroll",a)}clearTimeout(e)};Fnac.App.on("linkDecoder:decodeAll",g.decodeAll);Fnac.Services.linkDecoder=g})(window);;(function(a){a.Utils.isAndroidBrowser=function(){var f=navigator.userAgent.toLowerCase();var e=f.indexOf("android")>-1&&f.indexOf("mozilla/5.0")>-1&&f.indexOf("applewebkit")>-1;var g=new RegExp(/applewebkit\/([\d.]+)/);var i=g.exec(f);var b=(i===null?null:parseFloat(g.exec(f)[1]));var h=new RegExp(/chrome\/([\d.]+)/);var j=h.exec(f);var c=(j===null?null:parseFloat(h.exec(f)[1]));var d=e&&(b!==null&&b<537)||(c!==null&&c<37);return d};a.Utils.androidVersion=function(){var c=navigator.userAgent.toLowerCase();var b=c.match(/android\s([0-9\.]*)/);return b?b[1]:false}})(Fnac);;(function(d,c){if(typeof module==="object"&&module.exports){var a=typeof a!="undefined"?a:require("../../vendors/underscore.js");var b=typeof b!="undefined"?b:require("../../vendors/accounting-0.4.2.js");module.exports=c(b,a)}else{d.Fnac.Utils.formatMoneyWithCurrentCurrency=c(d.accounting,d._)}})(typeof window!="undefined"?window:null,function(b,a){var c={"fr-FR":{symbol:"€",format:"%v %s",decimalSeparator:",",thousandSeparator:" ",decimal:0},"fr-CH":{symbol:"CHF",format:"",decimalSeparator:".",thousandSeparator:"'",decimal:0},"es-ES":{symbol:"€",format:"%v%s",decimalSeparator:",",thousandSeparator:".",decimal:0},"pt-PT":{symbol:"€",format:"%v%s",decimalSeparator:",",thousandSeparator:".",decimal:0}};var d=c["fr-FR"];return function(i,e){var f=(!e||!e.cultureCode)?$("html").attr("lang"):e.cultureCode;var g=c[f]||d;e=a.defaults(e,{decimal:g.decimal,cultureCode:f,format:g.format,decimalSeparator:g.decimalSeparator,thousandSeparator:g.thousandSeparator,symbol:g.symbol});var h=b.formatMoney(i,e.symbol,e.decimal,e.thousandSeparator,e.decimalSeparator,e.format);if(e.cultureCode==="fr-CH"){var j=/^[1-9]\d*(\.\d+)?$/;if(j.test(h)){var k=h.match(j);h=k[0]+".-"}}return h}});;(function(d,a){var i="cross-domain-local-message";var j={iframeId:"cross-domain-iframe",iframeUrl:undefined,initCallback:function(){}};var l=-1;var e;var m={};var o=false;var f=true;function b(p){if(m[p.id]){m[p.id](p);delete m[p.id]}}function k(r){var p;try{p=JSON.parse(r.data)}catch(q){}if(p&&p.namespace===i){if(p.id==="iframe-ready"){f=true;j.initCallback()}else{b(p)}}}function c(p,s,t,q){l++;m[l]=q;var r={namespace:i,id:l,action:p,key:s,value:t};e.contentWindow.postMessage(JSON.stringify(r),"*")}function g(p){j=a.extend(j,p);var q=document.createElement("div");if(window.addEventListener){window.addEventListener("message",k,false)}else{window.attachEvent("onmessage",k)}q.innerHTML='<iframe id="'+j.iframeId+'" src='+j.iframeUrl+' style="display: none;"></iframe>';document.body.appendChild(q);e=document.getElementById(j.iframeId)}function h(){if(!o){console.log("You must call xdLocalStorage.init() before using it.");return false}if(!f){console.log("You must wait for iframe ready message before using the api.");return false}return true}var n={init:function(p){if(!p.iframeUrl){return false}if(o){console.log("xdLocalStorage was already initialized!");return}o=true;if(document.readyState==="complete"){g(p)}else{window.onload=function(){g(p)}}},set:function(q,r,p){if(!h()){return}c("set",q,r,p)},get:function(q,p){if(!h()){return}c("get",q,null,p)},unset:function(q,p){if(!h()){return}c("remove",q,null,p)},clear:function(p){if(!h()){return}c("clear",null,null,p)},wasInit:function(){return o}};d.Services.Storage=n})(Fnac,_);;(function(){var a=function(d,c){var b=["data","-",d].join("");if(c.el.hasAttribute(b)){c.stopListening();c.undelegateEvents();return true}c.el.setAttribute(b,"");return false};Fnac.Utils.isInstanciatedView=a})(Fnac);;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"undefined"!=typeof exports?module.exports=b(require("jquery")):b(jQuery)}(function(c){var d=window.Slick||{};d=function(){function e(b,g){var i,h=this;h.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:c(b),appendDots:c(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3000,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(f,j){return c('<button type="button" data-role="none" role="button" tabindex="0" />').text(j+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:0.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1000},h.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},c.extend(h,h.initials),h.activeBreakpoint=null,h.animType=null,h.animProp=null,h.breakpoints=[],h.breakpointSettings=[],h.cssTransitions=!1,h.focussed=!1,h.interrupted=!1,h.hidden="hidden",h.paused=!0,h.positionProp=null,h.respondTo=null,h.rowCount=1,h.shouldClick=!0,h.$slider=c(b),h.$slidesCache=null,h.transformType=null,h.transitionType=null,h.visibilityChange="visibilitychange",h.windowWidth=0,h.windowTimer=null,i=c(b).data("slick")||{},h.options=c.extend({},h.defaults,g,i),h.currentSlide=h.options.initialSlide,h.originalSettings=h.options,"undefined"!=typeof document.mozHidden?(h.hidden="mozHidden",h.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h.hidden="webkitHidden",h.visibilityChange="webkitvisibilitychange"),h.autoPlay=c.proxy(h.autoPlay,h),h.autoPlayClear=c.proxy(h.autoPlayClear,h),h.autoPlayIterator=c.proxy(h.autoPlayIterator,h),h.changeSlide=c.proxy(h.changeSlide,h),h.clickHandler=c.proxy(h.clickHandler,h),h.selectHandler=c.proxy(h.selectHandler,h),h.setPosition=c.proxy(h.setPosition,h),h.swipeHandler=c.proxy(h.swipeHandler,h),h.dragHandler=c.proxy(h.dragHandler,h),h.keyHandler=c.proxy(h.keyHandler,h),h.instanceUid=a++,h.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,h.registerBreakpoints(),h.init(!0)}var a=0;return e}(),d.prototype.activateADA=function(){var b=this;b.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},d.prototype.addSlide=d.prototype.slickAdd=function(a,f,g){var h=this;if("boolean"==typeof f){g=f,f=null}else{if(0>f||f>=h.slideCount){return !1}}h.unload(),"number"==typeof f?0===f&&0===h.$slides.length?c(a).appendTo(h.$slideTrack):g?c(a).insertBefore(h.$slides.eq(f)):c(a).insertAfter(h.$slides.eq(f)):g===!0?c(a).prependTo(h.$slideTrack):c(a).appendTo(h.$slideTrack),h.$slides=h.$slideTrack.children(this.options.slide),h.$slideTrack.children(this.options.slide).detach(),h.$slideTrack.append(h.$slides),h.$slides.each(function(e,i){c(i).attr("data-slick-index",e)}),h.$slidesCache=h.$slides,h.reinit()},d.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var f=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:f},e.options.speed)}},d.prototype.animateSlide=function(a,f){var g={},h=this;h.animateHeight(),h.options.rtl===!0&&h.options.vertical===!1&&(a=-a),h.transformsEnabled===!1?h.options.vertical===!1?h.$slideTrack.animate({left:a},h.options.speed,h.options.easing,f):h.$slideTrack.animate({top:a},h.options.speed,h.options.easing,f):h.cssTransitions===!1?(h.options.rtl===!0&&(h.currentLeft=-h.currentLeft),c({animStart:h.currentLeft}).animate({animStart:a},{duration:h.options.speed,easing:h.options.easing,step:function(b){b=Math.ceil(b),h.options.vertical===!1?(g[h.animType]="translate("+b+"px, 0px)",h.$slideTrack.css(g)):(g[h.animType]="translate(0px,"+b+"px)",h.$slideTrack.css(g))},complete:function(){f&&f.call()}})):(h.applyTransition(),a=Math.ceil(a),h.options.vertical===!1?g[h.animType]="translate3d("+a+"px, 0px, 0px)":g[h.animType]="translate3d(0px,"+a+"px, 0px)",h.$slideTrack.css(g),f&&setTimeout(function(){h.disableTransition(),f.call()},h.options.speed))},d.prototype.getNavTarget=function(){var a=this,e=a.options.asNavFor;return e&&null!==e&&(e=c(e).not(a.$slider)),e},d.prototype.asNavFor=function(a){var e=this,f=e.getNavTarget();null!==f&&"object"==typeof f&&f.each(function(){var b=c(this).slick("getSlick");b.unslicked||b.slideHandler(a,!0)})},d.prototype.applyTransition=function(e){var f=this,g={};f.options.fade===!1?g[f.transitionType]=f.transformType+" "+f.options.speed+"ms "+f.options.cssEase:g[f.transitionType]="opacity "+f.options.speed+"ms "+f.options.cssEase,f.options.fade===!1?f.$slideTrack.css(g):f.$slides.eq(e).css(g)},d.prototype.autoPlay=function(){var b=this;b.autoPlayClear(),b.slideCount>b.options.slidesToShow&&(b.autoPlayTimer=setInterval(b.autoPlayIterator,b.options.autoplaySpeed))},d.prototype.autoPlayClear=function(){var b=this;b.autoPlayTimer&&clearInterval(b.autoPlayTimer)},d.prototype.autoPlayIterator=function(){var e=this,f=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(e.options.infinite===!1&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(f=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1===0&&(e.direction=1))),e.slideHandler(f))},d.prototype.buildArrows=function(){var a=this;a.options.arrows===!0&&(a.$prevArrow=c(a.options.prevArrow).addClass("slick-arrow"),a.$nextArrow=c(a.options.nextArrow).addClass("slick-arrow"),a.slideCount>a.options.slidesToShow?(a.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),a.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),a.htmlExpr.test(a.options.prevArrow)&&a.$prevArrow.prependTo(a.options.appendArrows),a.htmlExpr.test(a.options.nextArrow)&&a.$nextArrow.appendTo(a.options.appendArrows),a.options.infinite!==!0&&a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):a.$prevArrow.add(a.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},d.prototype.buildDots=function(){var e,f,a=this;if(a.options.dots===!0&&a.slideCount>a.options.slidesToShow){for(a.$slider.addClass("slick-dotted"),f=c("<ul />").addClass(a.options.dotsClass),e=0;e<=a.getDotCount();e+=1){f.append(c("<li />").append(a.options.customPaging.call(this,a,e)))}a.$dots=f.appendTo(a.options.appendDots),a.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},d.prototype.buildOut=function(){var a=this;a.$slides=a.$slider.children(a.options.slide+":not(.slick-cloned)").addClass("slick-slide"),a.slideCount=a.$slides.length,a.$slides.each(function(e,f){c(f).attr("data-slick-index",e).data("originalStyling",c(f).attr("style")||"")}),a.$slider.addClass("slick-slider"),a.$slideTrack=0===a.slideCount?c('<div class="slick-track"/>').appendTo(a.$slider):a.$slides.wrapAll('<div class="slick-track"/>').parent(),a.$list=a.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),a.$slideTrack.css("opacity",0),(a.options.centerMode===!0||a.options.swipeToSlide===!0)&&(a.options.slidesToScroll=1),c("img[data-lazy]",a.$slider).not("[src]").addClass("slick-loading"),a.setupInfinite(),a.buildArrows(),a.buildDots(),a.updateDots(),a.setSlideClasses("number"==typeof a.currentSlide?a.currentSlide:0),a.options.draggable===!0&&a.$list.addClass("draggable")},d.prototype.buildRows=function(){var m,n,o,p,q,r,s,l=this;if(p=document.createDocumentFragment(),r=l.$slider.children(),l.options.rows>1){for(s=l.options.slidesPerRow*l.options.rows,q=Math.ceil(r.length/s),m=0;q>m;m++){var t=document.createElement("div");for(n=0;n<l.options.rows;n++){var u=document.createElement("div");for(o=0;o<l.options.slidesPerRow;o++){var v=m*s+(n*l.options.slidesPerRow+o);r.get(v)&&u.appendChild(r.get(v))}t.appendChild(u)}p.appendChild(t)}l.$slider.empty().append(p),l.$slider.children().children().children().css({width:100/l.options.slidesPerRow+"%",display:"inline-block"})}},d.prototype.checkResponsive=function(a,k){var m,n,o,l=this,p=!1,q=l.$slider.width(),r=window.innerWidth||c(window).width();if("window"===l.respondTo?o=r:"slider"===l.respondTo?o=q:"min"===l.respondTo&&(o=Math.min(r,q)),l.options.responsive&&l.options.responsive.length&&null!==l.options.responsive){n=null;for(m in l.breakpoints){l.breakpoints.hasOwnProperty(m)&&(l.originalSettings.mobileFirst===!1?o<l.breakpoints[m]&&(n=l.breakpoints[m]):o>l.breakpoints[m]&&(n=l.breakpoints[m]))}null!==n?null!==l.activeBreakpoint?(n!==l.activeBreakpoint||k)&&(l.activeBreakpoint=n,"unslick"===l.breakpointSettings[n]?l.unslick(n):(l.options=c.extend({},l.originalSettings,l.breakpointSettings[n]),a===!0&&(l.currentSlide=l.options.initialSlide),l.refresh(a)),p=n):(l.activeBreakpoint=n,"unslick"===l.breakpointSettings[n]?l.unslick(n):(l.options=c.extend({},l.originalSettings,l.breakpointSettings[n]),a===!0&&(l.currentSlide=l.options.initialSlide),l.refresh(a)),p=n):null!==l.activeBreakpoint&&(l.activeBreakpoint=null,l.options=l.originalSettings,a===!0&&(l.currentSlide=l.options.initialSlide),l.refresh(a),p=n),a||p===!1||l.$slider.trigger("breakpoint",[l,p])}},d.prototype.changeSlide=function(a,j){var m,n,o,k=this,l=c(a.currentTarget);switch(l.is("a")&&a.preventDefault(),l.is("li")||(l=l.closest("li")),o=k.slideCount%k.options.slidesToScroll!==0,m=o?0:(k.slideCount-k.currentSlide)%k.options.slidesToScroll,a.data.message){case"previous":n=0===m?k.options.slidesToScroll:k.options.slidesToShow-m,k.slideCount>k.options.slidesToShow&&k.slideHandler(k.currentSlide-n,!1,j);break;case"next":n=0===m?k.options.slidesToScroll:m,k.slideCount>k.options.slidesToShow&&k.slideHandler(k.currentSlide+n,!1,j);break;case"index":var p=0===a.data.index?0:a.data.index||l.index()*k.options.slidesToScroll;k.slideHandler(k.checkNavigable(p),!1,j),l.children().trigger("focus");break;default:return}},d.prototype.checkNavigable=function(f){var h,i,g=this;if(h=g.getNavigableIndexes(),i=0,f>h[h.length-1]){f=h[h.length-1]}else{for(var j in h){if(f<h[j]){f=i;break}i=h[j]}}return f},d.prototype.cleanUpEvents=function(){var a=this;a.options.dots&&null!==a.$dots&&c("li",a.$dots).off("click.slick",a.changeSlide).off("mouseenter.slick",c.proxy(a.interrupt,a,!0)).off("mouseleave.slick",c.proxy(a.interrupt,a,!1)),a.$slider.off("focus.slick blur.slick"),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow&&a.$prevArrow.off("click.slick",a.changeSlide),a.$nextArrow&&a.$nextArrow.off("click.slick",a.changeSlide)),a.$list.off("touchstart.slick mousedown.slick",a.swipeHandler),a.$list.off("touchmove.slick mousemove.slick",a.swipeHandler),a.$list.off("touchend.slick mouseup.slick",a.swipeHandler),a.$list.off("touchcancel.slick mouseleave.slick",a.swipeHandler),a.$list.off("click.slick",a.clickHandler),c(document).off(a.visibilityChange,a.visibility),a.cleanUpSlideEvents(),a.options.accessibility===!0&&a.$list.off("keydown.slick",a.keyHandler),a.options.focusOnSelect===!0&&c(a.$slideTrack).children().off("click.slick",a.selectHandler),c(window).off("orientationchange.slick.slick-"+a.instanceUid,a.orientationChange),c(window).off("resize.slick.slick-"+a.instanceUid,a.resize),c("[draggable!=true]",a.$slideTrack).off("dragstart",a.preventDefault),c(window).off("load.slick.slick-"+a.instanceUid,a.setPosition),c(document).off("ready.slick.slick-"+a.instanceUid,a.setPosition)},d.prototype.cleanUpSlideEvents=function(){var a=this;a.$list.off("mouseenter.slick",c.proxy(a.interrupt,a,!0)),a.$list.off("mouseleave.slick",c.proxy(a.interrupt,a,!1))},d.prototype.cleanUpRows=function(){var f,e=this;e.options.rows>1&&(f=e.$slides.children().children(),f.removeAttr("style"),e.$slider.empty().append(f))},d.prototype.clickHandler=function(e){var f=this;f.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},d.prototype.destroy=function(a){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),c(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){c(this).attr("style",c(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,a||e.$slider.trigger("destroy",[e])},d.prototype.disableTransition=function(e){var f=this,g={};g[f.transitionType]="",f.options.fade===!1?f.$slideTrack.css(g):f.$slides.eq(e).css(g)},d.prototype.fadeSlide=function(e,f){var g=this;g.cssTransitions===!1?(g.$slides.eq(e).css({zIndex:g.options.zIndex}),g.$slides.eq(e).animate({opacity:1},g.options.speed,g.options.easing,f)):(g.applyTransition(e),g.$slides.eq(e).css({opacity:1,zIndex:g.options.zIndex}),f&&setTimeout(function(){g.disableTransition(e),f.call()},g.options.speed))},d.prototype.fadeSlideOut=function(e){var f=this;f.cssTransitions===!1?f.$slides.eq(e).animate({opacity:0,zIndex:f.options.zIndex-2},f.options.speed,f.options.easing):(f.applyTransition(e),f.$slides.eq(e).css({opacity:0,zIndex:f.options.zIndex-2}))},d.prototype.filterSlides=d.prototype.slickFilter=function(e){var f=this;null!==e&&(f.$slidesCache=f.$slides,f.unload(),f.$slideTrack.children(this.options.slide).detach(),f.$slidesCache.filter(e).appendTo(f.$slideTrack),f.reinit())},d.prototype.focusHandler=function(){var a=this;a.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(b){b.stopImmediatePropagation();var e=c(this);setTimeout(function(){a.options.pauseOnFocus&&(a.focussed=e.is(":focus"),a.autoPlay())},0)})},d.prototype.getCurrent=d.prototype.slickCurrentSlide=function(){var b=this;return b.currentSlide},d.prototype.getDotCount=function(){var e=this,f=0,g=0,h=0;if(e.options.infinite===!0){for(;f<e.slideCount;){++h,f=g+e.options.slidesToScroll,g+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}}else{if(e.options.centerMode===!0){h=e.slideCount}else{if(e.options.asNavFor){for(;f<e.slideCount;){++h,f=g+e.options.slidesToScroll,g+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow}}else{h=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll)}}}return h-1},d.prototype.getLeft=function(g){var i,j,l,h=this,k=0;return h.slideOffset=0,j=h.$slides.first().outerHeight(!0),h.options.infinite===!0?(h.slideCount>h.options.slidesToShow&&(h.slideOffset=h.slideWidth*h.options.slidesToShow*-1,k=j*h.options.slidesToShow*-1),h.slideCount%h.options.slidesToScroll!==0&&g+h.options.slidesToScroll>h.slideCount&&h.slideCount>h.options.slidesToShow&&(g>h.slideCount?(h.slideOffset=(h.options.slidesToShow-(g-h.slideCount))*h.slideWidth*-1,k=(h.options.slidesToShow-(g-h.slideCount))*j*-1):(h.slideOffset=h.slideCount%h.options.slidesToScroll*h.slideWidth*-1,k=h.slideCount%h.options.slidesToScroll*j*-1))):g+h.options.slidesToShow>h.slideCount&&(h.slideOffset=(g+h.options.slidesToShow-h.slideCount)*h.slideWidth,k=(g+h.options.slidesToShow-h.slideCount)*j),h.slideCount<=h.options.slidesToShow&&(h.slideOffset=0,k=0),h.options.centerMode===!0&&h.options.infinite===!0?h.slideOffset+=h.slideWidth*Math.floor(h.options.slidesToShow/2)-h.slideWidth:h.options.centerMode===!0&&(h.slideOffset=0,h.slideOffset+=h.slideWidth*Math.floor(h.options.slidesToShow/2)),i=h.options.vertical===!1?g*h.slideWidth*-1+h.slideOffset:g*j*-1+k,h.options.variableWidth===!0&&(l=h.slideCount<=h.options.slidesToShow||h.options.infinite===!1?h.$slideTrack.children(".slick-slide").eq(g):h.$slideTrack.children(".slick-slide").eq(g+h.options.slidesToShow),i=h.options.rtl===!0?l[0]?-1*(h.$slideTrack.width()-l[0].offsetLeft-l.width()):0:l[0]?-1*l[0].offsetLeft:0,h.options.centerMode===!0&&(l=h.slideCount<=h.options.slidesToShow||h.options.infinite===!1?h.$slideTrack.children(".slick-slide").eq(g):h.$slideTrack.children(".slick-slide").eq(g+h.options.slidesToShow+1),i=h.options.rtl===!0?l[0]?-1*(h.$slideTrack.width()-l[0].offsetLeft-l.width()):0:l[0]?-1*l[0].offsetLeft:0,i+=(h.$list.width()-l.outerWidth())/2)),i},d.prototype.getOption=d.prototype.slickGetOption=function(e){var f=this;return f.options[e]},d.prototype.getNavigableIndexes=function(){var j,f=this,g=0,h=0,i=[];for(f.options.infinite===!1?j=f.slideCount:(g=-1*f.options.slidesToScroll,h=-1*f.options.slidesToScroll,j=2*f.slideCount);j>g;){i.push(g),g=h+f.options.slidesToScroll,h+=f.options.slidesToScroll<=f.options.slidesToShow?f.options.slidesToScroll:f.options.slidesToShow}return i},d.prototype.getSlick=function(){return this},d.prototype.getSlideCount=function(){var f,g,h,a=this;return h=a.options.centerMode===!0?a.slideWidth*Math.floor(a.options.slidesToShow/2):0,a.options.swipeToSlide===!0?(a.$slideTrack.find(".slick-slide").each(function(b,e){return e.offsetLeft-h+c(e).outerWidth()/2>-1*a.swipeLeft?(g=e,!1):void 0}),f=Math.abs(c(g).attr("data-slick-index")-a.currentSlide)||1):a.options.slidesToScroll},d.prototype.goTo=d.prototype.slickGoTo=function(e,f){var g=this;g.changeSlide({data:{message:"index",index:parseInt(e)}},f)},d.prototype.init=function(a){var e=this;c(e.$slider).hasClass("slick-initialized")||(c(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),a&&e.$slider.trigger("init",[e]),e.options.accessibility===!0&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},d.prototype.initADA=function(){var a=this;a.$slides.add(a.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),a.$slideTrack.attr("role","listbox"),a.$slides.not(a.$slideTrack.find(".slick-cloned")).each(function(b){c(this).attr({role:"option","aria-describedby":"slick-slide"+a.instanceUid+b})}),null!==a.$dots&&a.$dots.attr("role","tablist").find("li").each(function(b){c(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+a.instanceUid+b,id:"slick-slide"+a.instanceUid+b})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),a.activateADA()},d.prototype.initArrowEvents=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},b.changeSlide),b.$nextArrow.off("click.slick").on("click.slick",{message:"next"},b.changeSlide))},d.prototype.initDotEvents=function(){var a=this;a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&c("li",a.$dots).on("click.slick",{message:"index"},a.changeSlide),a.options.dots===!0&&a.options.pauseOnDotsHover===!0&&c("li",a.$dots).on("mouseenter.slick",c.proxy(a.interrupt,a,!0)).on("mouseleave.slick",c.proxy(a.interrupt,a,!1))
},d.prototype.initSlideEvents=function(){var a=this;a.options.pauseOnHover&&(a.$list.on("mouseenter.slick",c.proxy(a.interrupt,a,!0)),a.$list.on("mouseleave.slick",c.proxy(a.interrupt,a,!1)))},d.prototype.initializeEvents=function(){var a=this;a.initArrowEvents(),a.initDotEvents(),a.initSlideEvents(),a.$list.on("touchstart.slick mousedown.slick",{action:"start"},a.swipeHandler),a.$list.on("touchmove.slick mousemove.slick",{action:"move"},a.swipeHandler),a.$list.on("touchend.slick mouseup.slick",{action:"end"},a.swipeHandler),a.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},a.swipeHandler),a.$list.on("click.slick",a.clickHandler),c(document).on(a.visibilityChange,c.proxy(a.visibility,a)),a.options.accessibility===!0&&a.$list.on("keydown.slick",a.keyHandler),a.options.focusOnSelect===!0&&c(a.$slideTrack).children().on("click.slick",a.selectHandler),c(window).on("orientationchange.slick.slick-"+a.instanceUid,c.proxy(a.orientationChange,a)),c(window).on("resize.slick.slick-"+a.instanceUid,c.proxy(a.resize,a)),c("[draggable!=true]",a.$slideTrack).on("dragstart",a.preventDefault),c(window).on("load.slick.slick-"+a.instanceUid,a.setPosition),c(document).on("ready.slick.slick-"+a.instanceUid,a.setPosition)},d.prototype.initUI=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.show(),b.$nextArrow.show()),b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&b.$dots.show()},d.prototype.keyHandler=function(e){var f=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&f.options.accessibility===!0?f.changeSlide({data:{message:f.options.rtl===!0?"next":"previous"}}):39===e.keyCode&&f.options.accessibility===!0&&f.changeSlide({data:{message:f.options.rtl===!0?"previous":"next"}}))},d.prototype.lazyLoad=function(){function l(b){c("img[data-lazy]",b).each(function(){var f=c(this),g=c(this).attr("data-lazy"),m=document.createElement("img");m.onload=function(){f.animate({opacity:0},100,function(){f.attr("src",g).animate({opacity:1},200,function(){f.removeAttr("data-lazy").removeClass("slick-loading")}),a.$slider.trigger("lazyLoaded",[a,f,g])})},m.onerror=function(){f.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,f,g])},m.src=g})}var h,i,j,k,a=this;a.options.centerMode===!0?a.options.infinite===!0?(j=a.currentSlide+(a.options.slidesToShow/2+1),k=j+a.options.slidesToShow+2):(j=Math.max(0,a.currentSlide-(a.options.slidesToShow/2+1)),k=2+(a.options.slidesToShow/2+1)+a.currentSlide):(j=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide,k=Math.ceil(j+a.options.slidesToShow),a.options.fade===!0&&(j>0&&j--,k<=a.slideCount&&k++)),h=a.$slider.find(".slick-slide").slice(j,k),l(h),a.slideCount<=a.options.slidesToShow?(i=a.$slider.find(".slick-slide"),l(i)):a.currentSlide>=a.slideCount-a.options.slidesToShow?(i=a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow),l(i)):0===a.currentSlide&&(i=a.$slider.find(".slick-cloned").slice(-1*a.options.slidesToShow),l(i))},d.prototype.loadSlider=function(){var b=this;b.setPosition(),b.$slideTrack.css({opacity:1}),b.$slider.removeClass("slick-loading"),b.initUI(),"progressive"===b.options.lazyLoad&&b.progressiveLazyLoad()},d.prototype.next=d.prototype.slickNext=function(){var b=this;b.changeSlide({data:{message:"next"}})},d.prototype.orientationChange=function(){var b=this;b.checkResponsive(),b.setPosition()},d.prototype.pause=d.prototype.slickPause=function(){var b=this;b.autoPlayClear(),b.paused=!0},d.prototype.play=d.prototype.slickPlay=function(){var b=this;b.autoPlay(),b.options.autoplay=!0,b.paused=!1,b.focussed=!1,b.interrupted=!1},d.prototype.postSlide=function(e){var f=this;f.unslicked||(f.$slider.trigger("afterChange",[f,e]),f.animating=!1,f.setPosition(),f.swipeLeft=null,f.options.autoplay&&f.autoPlay(),f.options.accessibility===!0&&f.initADA())},d.prototype.prev=d.prototype.slickPrev=function(){var b=this;b.changeSlide({data:{message:"previous"}})},d.prototype.preventDefault=function(b){b.preventDefault()},d.prototype.progressiveLazyLoad=function(a){a=a||1;var j,k,l,h=this,i=c("img[data-lazy]",h.$slider);i.length?(j=i.first(),k=j.attr("data-lazy"),l=document.createElement("img"),l.onload=function(){j.attr("src",k).removeAttr("data-lazy").removeClass("slick-loading"),h.options.adaptiveHeight===!0&&h.setPosition(),h.$slider.trigger("lazyLoaded",[h,j,k]),h.progressiveLazyLoad()},l.onerror=function(){3>a?setTimeout(function(){h.progressiveLazyLoad(a+1)},500):(j.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),h.$slider.trigger("lazyLoadError",[h,j,k]),h.progressiveLazyLoad())},l.src=k):h.$slider.trigger("allImagesLoaded",[h])},d.prototype.refresh=function(a){var g,h,f=this;h=f.slideCount-f.options.slidesToShow,!f.options.infinite&&f.currentSlide>h&&(f.currentSlide=h),f.slideCount<=f.options.slidesToShow&&(f.currentSlide=0),g=f.currentSlide,f.destroy(!0),c.extend(f,f.initials,{currentSlide:g}),f.init(),a||f.changeSlide({data:{message:"index",index:g}},!1)},d.prototype.registerBreakpoints=function(){var g,h,i,a=this,j=a.options.responsive||null;if("array"===c.type(j)&&j.length){a.respondTo=a.options.respondTo||"window";for(g in j){if(i=a.breakpoints.length-1,h=j[g].breakpoint,j.hasOwnProperty(g)){for(;i>=0;){a.breakpoints[i]&&a.breakpoints[i]===h&&a.breakpoints.splice(i,1),i--}a.breakpoints.push(h),a.breakpointSettings[h]=j[g].settings}}a.breakpoints.sort(function(b,e){return a.options.mobileFirst?b-e:e-b})}},d.prototype.reinit=function(){var a=this;a.$slides=a.$slideTrack.children(a.options.slide).addClass("slick-slide"),a.slideCount=a.$slides.length,a.currentSlide>=a.slideCount&&0!==a.currentSlide&&(a.currentSlide=a.currentSlide-a.options.slidesToScroll),a.slideCount<=a.options.slidesToShow&&(a.currentSlide=0),a.registerBreakpoints(),a.setProps(),a.setupInfinite(),a.buildArrows(),a.updateArrows(),a.initArrowEvents(),a.buildDots(),a.updateDots(),a.initDotEvents(),a.cleanUpSlideEvents(),a.initSlideEvents(),a.checkResponsive(!1,!0),a.options.focusOnSelect===!0&&c(a.$slideTrack).children().on("click.slick",a.selectHandler),a.setSlideClasses("number"==typeof a.currentSlide?a.currentSlide:0),a.setPosition(),a.focusHandler(),a.paused=!a.options.autoplay,a.autoPlay(),a.$slider.trigger("reInit",[a])},d.prototype.resize=function(){var a=this;c(window).width()!==a.windowWidth&&(clearTimeout(a.windowDelay),a.windowDelay=window.setTimeout(function(){a.windowWidth=c(window).width(),a.checkResponsive(),a.unslicked||a.setPosition()},50))},d.prototype.removeSlide=d.prototype.slickRemove=function(e,f,g){var h=this;return"boolean"==typeof e?(f=e,e=f===!0?0:h.slideCount-1):e=f===!0?--e:e,h.slideCount<1||0>e||e>h.slideCount-1?!1:(h.unload(),g===!0?h.$slideTrack.children().remove():h.$slideTrack.children(this.options.slide).eq(e).remove(),h.$slides=h.$slideTrack.children(this.options.slide),h.$slideTrack.children(this.options.slide).detach(),h.$slideTrack.append(h.$slides),h.$slidesCache=h.$slides,void h.reinit())},d.prototype.setCSS=function(f){var i,j,g=this,h={};g.options.rtl===!0&&(f=-f),i="left"==g.positionProp?Math.ceil(f)+"px":"0px",j="top"==g.positionProp?Math.ceil(f)+"px":"0px",h[g.positionProp]=f,g.transformsEnabled===!1?g.$slideTrack.css(h):(h={},g.cssTransitions===!1?(h[g.animType]="translate("+i+", "+j+")",g.$slideTrack.css(h)):(h[g.animType]="translate3d("+i+", "+j+", 0px)",g.$slideTrack.css(h)))},d.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5000*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var f=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-f)},d.prototype.setFade=function(){var e,a=this;a.$slides.each(function(b,f){e=a.slideWidth*b*-1,a.options.rtl===!0?c(f).css({position:"relative",right:e,top:0,zIndex:a.options.zIndex-2,opacity:0}):c(f).css({position:"relative",left:e,top:0,zIndex:a.options.zIndex-2,opacity:0})}),a.$slides.eq(a.currentSlide).css({zIndex:a.options.zIndex-1,opacity:1})},d.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var f=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",f)}},d.prototype.setOption=d.prototype.slickSetOption=function(){var i,j,k,l,n,a=this,m=!1;if("object"===c.type(arguments[0])?(k=arguments[0],m=arguments[1],n="multiple"):"string"===c.type(arguments[0])&&(k=arguments[0],l=arguments[1],m=arguments[2],"responsive"===arguments[0]&&"array"===c.type(arguments[1])?n="responsive":"undefined"!=typeof arguments[1]&&(n="single")),"single"===n){a.options[k]=l}else{if("multiple"===n){c.each(k,function(b,e){a.options[b]=e})}else{if("responsive"===n){for(j in l){if("array"!==c.type(a.options.responsive)){a.options.responsive=[l[j]]}else{for(i=a.options.responsive.length-1;i>=0;){a.options.responsive[i].breakpoint===l[j].breakpoint&&a.options.responsive.splice(i,1),i--}a.options.responsive.push(l[j])}}}}}m&&(a.unload(),a.reinit())},d.prototype.setPosition=function(){var b=this;b.setDimensions(),b.setHeight(),b.options.fade===!1?b.setCSS(b.getLeft(b.currentSlide)):b.setFade(),b.$slider.trigger("setPosition",[b])},d.prototype.setProps=function(){var e=this,f=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==f.WebkitTransition||void 0!==f.MozTransition||void 0!==f.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==f.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===f.perspectiveProperty&&void 0===f.webkitPerspective&&(e.animType=!1)),void 0!==f.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===f.perspectiveProperty&&void 0===f.MozPerspective&&(e.animType=!1)),void 0!==f.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===f.perspectiveProperty&&void 0===f.webkitPerspective&&(e.animType=!1)),void 0!==f.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===f.msTransform&&(e.animType=!1)),void 0!==f.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&e.animType!==!1},d.prototype.setSlideClasses=function(g){var i,j,k,l,h=this;j=h.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),h.$slides.eq(g).addClass("slick-current"),h.options.centerMode===!0?(i=Math.floor(h.options.slidesToShow/2),h.options.infinite===!0&&(g>=i&&g<=h.slideCount-1-i?h.$slides.slice(g-i,g+i+1).addClass("slick-active").attr("aria-hidden","false"):(k=h.options.slidesToShow+g,j.slice(k-i+1,k+i+2).addClass("slick-active").attr("aria-hidden","false")),0===g?j.eq(j.length-1-h.options.slidesToShow).addClass("slick-center"):g===h.slideCount-1&&j.eq(h.options.slidesToShow).addClass("slick-center")),h.$slides.eq(g).addClass("slick-center")):g>=0&&g<=h.slideCount-h.options.slidesToShow?h.$slides.slice(g,g+h.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):j.length<=h.options.slidesToShow?j.addClass("slick-active").attr("aria-hidden","false"):(l=h.slideCount%h.options.slidesToShow,k=h.options.infinite===!0?h.options.slidesToShow+g:g,h.options.slidesToShow==h.options.slidesToScroll&&h.slideCount-g<h.options.slidesToShow?j.slice(k-(h.options.slidesToShow-l),k+l).addClass("slick-active").attr("aria-hidden","false"):j.slice(k,k+h.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===h.options.lazyLoad&&h.lazyLoad()},d.prototype.setupInfinite=function(){var f,g,h,a=this;if(a.options.fade===!0&&(a.options.centerMode=!1),a.options.infinite===!0&&a.options.fade===!1&&(g=null,a.slideCount>a.options.slidesToShow)){for(h=a.options.centerMode===!0?a.options.slidesToShow+1:a.options.slidesToShow,f=a.slideCount;f>a.slideCount-h;f-=1){g=f-1,c(a.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g-a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned")}for(f=0;h>f;f+=1){g=f,c(a.$slides[g]).clone(!0).attr("id","").attr("data-slick-index",g+a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned")}a.$slideTrack.find(".slick-cloned").find("[id]").each(function(){c(this).attr("id","")})}},d.prototype.interrupt=function(e){var f=this;e||f.autoPlay(),f.interrupted=e},d.prototype.selectHandler=function(a){var f=this,g=c(a.target).is(".slick-slide")?c(a.target):c(a.target).parents(".slick-slide"),h=parseInt(g.attr("data-slick-index"));return h||(h=0),f.slideCount<=f.options.slidesToShow?(f.setSlideClasses(h),void f.asNavFor(h)):void f.slideHandler(h)},d.prototype.slideHandler=function(k,l,m){var n,o,p,q,t,r=null,s=this;return l=l||!1,s.animating===!0&&s.options.waitForAnimate===!0||s.options.fade===!0&&s.currentSlide===k||s.slideCount<=s.options.slidesToShow?void 0:(l===!1&&s.asNavFor(k),n=k,r=s.getLeft(n),q=s.getLeft(s.currentSlide),s.currentLeft=null===s.swipeLeft?q:s.swipeLeft,s.options.infinite===!1&&s.options.centerMode===!1&&(0>k||k>s.getDotCount()*s.options.slidesToScroll)?void (s.options.fade===!1&&(n=s.currentSlide,m!==!0?s.animateSlide(q,function(){s.postSlide(n)}):s.postSlide(n))):s.options.infinite===!1&&s.options.centerMode===!0&&(0>k||k>s.slideCount-s.options.slidesToScroll)?void (s.options.fade===!1&&(n=s.currentSlide,m!==!0?s.animateSlide(q,function(){s.postSlide(n)}):s.postSlide(n))):(s.options.autoplay&&clearInterval(s.autoPlayTimer),o=0>n?s.slideCount%s.options.slidesToScroll!==0?s.slideCount-s.slideCount%s.options.slidesToScroll:s.slideCount+n:n>=s.slideCount?s.slideCount%s.options.slidesToScroll!==0?0:n-s.slideCount:n,s.animating=!0,s.$slider.trigger("beforeChange",[s,s.currentSlide,o]),p=s.currentSlide,s.currentSlide=o,s.setSlideClasses(s.currentSlide),s.options.asNavFor&&(t=s.getNavTarget(),t=t.slick("getSlick"),t.slideCount<=t.options.slidesToShow&&t.setSlideClasses(s.currentSlide)),s.updateDots(),s.updateArrows(),s.options.fade===!0?(m!==!0?(s.fadeSlideOut(p),s.fadeSlide(o,function(){s.postSlide(o)})):s.postSlide(o),void s.animateHeight()):void (m!==!0?s.animateSlide(r,function(){s.postSlide(o)}):s.postSlide(o))))},d.prototype.startLoad=function(){var b=this;b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow.hide(),b.$nextArrow.hide()),b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&b.$dots.hide(),b.$slider.addClass("slick-loading")},d.prototype.swipeDirection=function(){var f,g,h,i,j=this;return f=j.touchObject.startX-j.touchObject.curX,g=j.touchObject.startY-j.touchObject.curY,h=Math.atan2(g,f),i=Math.round(180*h/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?j.options.rtl===!1?"left":"right":360>=i&&i>=315?j.options.rtl===!1?"left":"right":i>=135&&225>=i?j.options.rtl===!1?"right":"left":j.options.verticalSwiping===!0?i>=35&&135>=i?"down":"up":"vertical"},d.prototype.swipeEnd=function(e){var g,h,f=this;if(f.dragging=!1,f.interrupted=!1,f.shouldClick=f.touchObject.swipeLength>10?!1:!0,void 0===f.touchObject.curX){return !1}if(f.touchObject.edgeHit===!0&&f.$slider.trigger("edge",[f,f.swipeDirection()]),f.touchObject.swipeLength>=f.touchObject.minSwipe){switch(h=f.swipeDirection()){case"left":case"down":g=f.options.swipeToSlide?f.checkNavigable(f.currentSlide+f.getSlideCount()):f.currentSlide+f.getSlideCount(),f.currentDirection=0;break;case"right":case"up":g=f.options.swipeToSlide?f.checkNavigable(f.currentSlide-f.getSlideCount()):f.currentSlide-f.getSlideCount(),f.currentDirection=1}"vertical"!=h&&(f.slideHandler(g),f.touchObject={},f.$slider.trigger("swipe",[f,h]))}else{f.touchObject.startX!==f.touchObject.curX&&(f.slideHandler(f.currentSlide),f.touchObject={})}},d.prototype.swipeHandler=function(e){var f=this;if(!(f.options.swipe===!1||"ontouchend" in document&&f.options.swipe===!1||f.options.draggable===!1&&-1!==e.type.indexOf("mouse"))){switch(f.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,f.touchObject.minSwipe=f.listWidth/f.options.touchThreshold,f.options.verticalSwiping===!0&&(f.touchObject.minSwipe=f.listHeight/f.options.touchThreshold),e.data.action){case"start":f.swipeStart(e);break;case"move":f.swipeMove(e);break;case"end":f.swipeEnd(e)}}},d.prototype.swipeMove=function(i){var k,l,m,n,o,j=this;return o=void 0!==i.originalEvent?i.originalEvent.touches:null,!j.dragging||o&&1!==o.length?!1:(k=j.getLeft(j.currentSlide),j.touchObject.curX=void 0!==o?o[0].pageX:i.clientX,j.touchObject.curY=void 0!==o?o[0].pageY:i.clientY,j.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(j.touchObject.curX-j.touchObject.startX,2))),j.options.verticalSwiping===!0&&(j.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(j.touchObject.curY-j.touchObject.startY,2)))),l=j.swipeDirection(),"vertical"!==l?(void 0!==i.originalEvent&&j.touchObject.swipeLength>4&&i.preventDefault(),n=(j.options.rtl===!1?1:-1)*(j.touchObject.curX>j.touchObject.startX?1:-1),j.options.verticalSwiping===!0&&(n=j.touchObject.curY>j.touchObject.startY?1:-1),m=j.touchObject.swipeLength,j.touchObject.edgeHit=!1,j.options.infinite===!1&&(0===j.currentSlide&&"right"===l||j.currentSlide>=j.getDotCount()&&"left"===l)&&(m=j.touchObject.swipeLength*j.options.edgeFriction,j.touchObject.edgeHit=!0),j.options.vertical===!1?j.swipeLeft=k+m*n:j.swipeLeft=k+m*(j.$list.height()/j.listWidth)*n,j.options.verticalSwiping===!0&&(j.swipeLeft=k+m*n),j.options.fade===!0||j.options.touchMove===!1?!1:j.animating===!0?(j.swipeLeft=null,!1):void j.setCSS(j.swipeLeft)):void 0)},d.prototype.swipeStart=function(e){var g,f=this;return f.interrupted=!0,1!==f.touchObject.fingerCount||f.slideCount<=f.options.slidesToShow?(f.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(g=e.originalEvent.touches[0]),f.touchObject.startX=f.touchObject.curX=void 0!==g?g.pageX:e.clientX,f.touchObject.startY=f.touchObject.curY=void 0!==g?g.pageY:e.clientY,void (f.dragging=!0))},d.prototype.unfilterSlides=d.prototype.slickUnfilter=function(){var b=this;null!==b.$slidesCache&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.appendTo(b.$slideTrack),b.reinit())},d.prototype.unload=function(){var a=this;c(".slick-cloned",a.$slider).remove(),a.$dots&&a.$dots.remove(),a.$prevArrow&&a.htmlExpr.test(a.options.prevArrow)&&a.$prevArrow.remove(),a.$nextArrow&&a.htmlExpr.test(a.options.nextArrow)&&a.$nextArrow.remove(),a.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},d.prototype.unslick=function(e){var f=this;f.$slider.trigger("unslick",[f,e]),f.destroy()},d.prototype.updateArrows=function(){var f,e=this;f=Math.floor(e.options.slidesToShow/2),e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&e.options.centerMode===!1?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&e.options.centerMode===!0&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))
},d.prototype.updateDots=function(){var b=this;null!==b.$dots&&(b.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),b.$dots.find("li").eq(Math.floor(b.currentSlide/b.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},d.prototype.visibility=function(){var b=this;b.options.autoplay&&(document[b.hidden]?b.interrupted=!0:b.interrupted=!1)},c.fn.slick=function(){var k,l,b=this,h=arguments[0],i=Array.prototype.slice.call(arguments,1),j=b.length;for(k=0;j>k;k++){if("object"==typeof h||"undefined"==typeof h?b[k].slick=new d(b[k],h):l=b[k].slick[h].apply(b[k].slick,i),"undefined"!=typeof l){return l}}return b}});;(function(a,b){var c={trackActionHelp:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop1,prop20,prop21,prop40,prop51,prop56,prop57,eVar56";d.prop1="Layer: Fnac vous aide";d.prop40="Nav: Layer";d.prop51="Web Desktop";d.tl(this,"o","Layer: Fnac vous aide")},trackActionContactExpert:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop20,prop21,prop51,prop56,prop57,eVar56";d.prop51="Web Desktop";d.tl(this,"o","Nav: Fnac vous aide: Contacter un expert")},trackActionMyAccount:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop1,prop20,prop21,prop40,prop51,prop56,prop57,eVar56";d.prop1="Layer: Mon Compte";d.prop40="Nav: Layer";d.prop51="Web Desktop";d.tl(this,"o","Layer: Mon Compte: Connecte")},trackActionLogin:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop20,prop21,prop51,prop56,prop57,eVar56";d.prop51="Web Desktop";d.tl(this,"o","Layer: Mon Compte: Connection")},trackActionStore:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop1,prop20,prop21,prop40,prop51,prop56,prop57,eVar56";d.prop1="Layer: Magasins";d.prop40="Nav: Layer";d.prop51="Web Desktop";d.tl(this,"o","Layer: Magasins")},trackActionBasket:function(){if(typeof s_gi==="undefined"){return}var d=s_gi(s_account);d.linkTrackVars="prop1,prop20,prop21,prop40,prop51,prop56,prop57,eVar56";d.prop1="Layer: Mon Panier";d.prop40="Nav: Layer";d.prop51="Web Desktop";d.tl(this,"o","Layer: Mon Panier")},trackActionPushMarketing:function(d){if(typeof s_gi==="undefined"){return}var e=s_gi(s_account);e.linkTrackVars="prop20,prop21,prop51,prop56,prop57,eVar56";e.prop51="Web Desktop";e.tl(this,"o",d)}};b.Services.omnitureTracker=a.extend(b.Services.omnitureTracker||{},c)})(window._,window.Fnac);;(function(j,c,a){var b=d();var f="//retail-eu.productads.hlserve.com/Delivery/ClientPaths/Library/hook.js?apiKey="+b;var e="hl_1";var i={};var h={};var g=false;i.load=function(){if(g||b===""){return}var k=document.createElement("script");k.src=f;document.getElementsByTagName("head")[0].appendChild(k);k.onload=function(){g=true;this.request()}.bind(this)};i.request=function(){h=document.getElementById(e);if(!g){return}var k=HLLibrary.newRequest();if(h.dataset.taxonomy){k.setTaxonomy(h.dataset.taxonomy)}if(h.dataset.module){k.setModule(h.dataset.module)}if(h.dataset.type){var l=c.Utils.isMobile()?"hlpt":"hlPageType";k.setProperty(l,h.dataset.type)}if(h.dataset.sku){k.setProducts("1-"+h.dataset.sku).setProductMatchType("related").setProperty("broadmatchtype","2").setProperty("required_filters","productid");this.update(h.dataset)}if(h.dataset.keyword){k.setKeyword(h.dataset.keyword)}if(h.dataset.view){k.setProperty("view",h.dataset.view)}k.setProperty("cUserId","").setProperty("platform",(c.Utils.isMobile())?"mobile":"web").submit(e)};i.update=function(k){if(!g){return}HLLibrary.newUpdate().setProperty("cUserId","").setProperty("hlPageType","P").setProperty("platform","web").setProperty("sku","1-"+k.sku).setProperty("price",k.price).setProperty("regularPrice",k.regularPrice).setProperty("inStock",k.inStock).submit()};i.search=function(k){if(!g||typeof k.keyword==="undefined"){return}HLLibrary.newRequest().setKeyword(k.keyword).setModule("Search").setProperty("cUserId","").setProperty("hlPageType","S").setProperty("platform",(c.Utils.isMobile())?"mobile":"web").setProperty("view",k.view).submit(e)};c.Services=c.Services||{};c.Services.hooklogicService=i;function d(){if(typeof c.Utils.getCountryCode==="function"){switch(c.Utils.getCountryCode()){case"ES":return"09bc9617-1c80-4c51-814f-4e884758fafa";case"PT":return"298c6f12-ff76-4815-8d33-08f8b1213b1d";case"CH":return"50eb214d-597e-4ed2-9ac1-4b182cd59735";case"BE":return"cf270734-4329-42f5-a35a-ec0e1a206097";case"FR":return"95b9740b-d129-4677-9fa8-88c8a7d34a2b";default:return""}}return""}})(window,Fnac,_);;(function(a){a.Services.CommonDataService={setNearStoresInformations:function(d){var b="/api/common/v1/SetNearStore";var e=_.compact([a.config.pathname,b]).join("");var c={data:{environment:{url:a.config.pathname,query:{}}},update:{request:{type:"SetNearStore",value:d.coordinates.latitude+"|"+d.coordinates.longitude+"||"+d.page+"|"+d.prid+"|"+d.catalog}}};return $.ajax({method:"post",url:e,data:JSON.stringify(c)})},}})(Fnac);;(function(u,f,b,e,a){function g(v){return"https://dev.virtualearth.net/REST/v1/Locations?query="+v}function c(w,v){w=w.toString().toLowerCase().trim();if(v==="FR"){w=(w==="valence")?"valence,drôme":w;v=(w==="monaco")?"monaco":v}return w+","+v.toLowerCase()}var l="https://www.bing.com/api/maps/mapcontrol?callback=mapServiceCallback";var j={nav_store_locator:"AjRBuc0Hyy_6A8_rT3AoG6tLX3NuFBsCq0t5Y5MB2WxhnKbYDOBQk9HtaCDfDxL0",nav_search_mag:"mRb5onLuWjx7mmBSZnUU~FO2JxQ2izTCJps_rse-9bQ~AuFhcYTZmUzaYXUTIP5h6YqN9pzQZ86QS12AwL1UeJR80wAlAmvocRvz1dc0_36p",pipe_search_mag:"AmN4JBlc_j9hHCqaNjG8RbBizw6X0JBupviYDn4_AJKEIYq95JLxzOEWDr9cKncU"};var k=null;var n=8;var m=14;var i={FNAC:0,DARTY:1};var d={FR:{zoom:5,latitude:46.227638,longitude:2.213749},ES:{zoom:5,latitude:40.463667,longitude:-3.74922},PT:{zoom:6,latitude:39.399872,longitude:-8.224454},CH:{zoom:7,latitude:46.818188,longitude:8.227512000000001},BE:{zoom:7,latitude:50.503887,longitude:4.469936}};var t=false;var p={};var s={};var o=null;var r=null;var q={};var h=(a("html").attr("lang").length)?a("html").attr("lang").split("-")[1]:null;q.entities=[];b.extend(s,Backbone.Events);u.mapServiceCallback=function(){t=true;s.trigger("load:"+o)};s.load=function(v){o=v;if(t){s.trigger("load:"+o);return}var w=document.createElement("script");w.src=l;document.getElementsByTagName("head")[0].appendChild(w)};s.create=function(v,w){w=w||{};if(typeof q.entities!=="undefined"&&q.entities.length>0){b.each(q.entities,function(x,y){if(x.map&&x.id===o){return x.map}})}w.credentials=j.nav_store_locator;w.mapTypeId=Microsoft.Maps.MapTypeId.road;if(h){w.zoom=d[h].zoom;w.center=new Microsoft.Maps.Location(d[h].latitude,d[h].longitude)}else{w.zoom=12}w.disableBirdseye=true;w.enableSearchLogo=false;w.showDashboard=false;w.showMapTypeSelector=false;q.entities.push({id:o,map:new Microsoft.Maps.Map(v,w)});return q.entities[q.entities.length-1].map};s.getCredentials=function(v){credentialDeferred=a.Deferred();if(typeof q.entities!=="undefined"&&q.entities.length>0){b.each(q.entities,function(w,x){if(w.map&&w.id===o){w.map.getCredentials(function(y){credentialDeferred.resolve(y)})}})}else{credentialDeferred.resolve(j[v])}return credentialDeferred.promise()};s.search=function(w,y,v){if(!r){Microsoft.Maps.loadModule("Microsoft.Maps.Search",function(){r=new Microsoft.Maps.Search.SearchManager(w);s.search(w,y,v)})}else{var x={bounds:w.getBounds(),where:y,callback:function(A){var B=A.results;var z=null;if(B.length){z={latitude:B[0].location.latitude,longitude:B[0].location.longitude}}v(z)},errorCallback:function(){v(null)}};r.geocode(x)}};s.geocode=function(x,w,v){return f.Services.mapCacheService.get(x).then(function(y){return y},function(){return s.getCredentials(v).then(function(y){w=b.extend(w||{},{key:y,output:"json"});var z={url:g(c(x,a("html").attr("lang").split("-")[1])),dataType:"jsonp",jsonp:"jsonp",data:w};return a.ajax(z).then(function(C,D,B){if(C.resourceSets[0].resources[0]){var A={Latitude:C.resourceSets[0].resources[0].geocodePoints[0].coordinates[0],Longitude:C.resourceSets[0].resources[0].geocodePoints[0].coordinates[1]};f.Services.mapCacheService.set(x,A);return A}})})})};s.icons={fnac:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 40" width="30" height="40"><path d="M15 0C6.7 0 0 6.8 0 15.3 0 23.7 8.4 32.9 15 40c6.6-7.1 15-16.3 15-24.8S23.3 0 15 0z" style="fill:#232323"/><path d="M4.1 17.7h1.5v-4.3h2.6v4.3h1.5v-3.1c.1-.5.4-1.2 1.6-1.3 0 0 1.7-.3 1.9 1.3v3.1h1.5V14c-.3-2.6-3.7-1.8-3.7-1.8-.8.2-1.1.6-1.2.8v-.7H5.6c-.1-1.4 1.2-1.4 1.2-1.4 1.3 0 1.4.9 1.4.9h1.5c0-1.7-2.1-1.9-2.1-1.9-2.1-.2-2.8.6-2.8.6-.7.5-.7 1.5-.7 1.7H2.8v1.1h1.3v4.4zm15.3-1.5c-.4.5-.8.6-1.4.7-.5 0-1.4.1-1.5-.7 0-.8 1.2-.7 2-.8 0 0 .8 0 1-.2.1-.1.2.6-.1 1m0-4c-1.6-.3-2.6 0-2.6 0-1.6.4-1.6 1.8-1.6 1.8h1.5s0-1.1 1.6-1c0 0 1.2.1 1.2.6 0 0 .4.7-1.2.8-1.6.1-3.6.1-3.4 1.7 0 0 0 1.6 2.6 1.5 0 0 1.4 0 2-.7l.1.6h1.5v-3.3c.1-1.7-1.7-2-1.7-2m6.9 3.7c-.2.5-.7.8-1.5.8 0 0-1.8.1-1.9-1.7v-.1c.1-1.8 1.9-1.7 1.9-1.7.8 0 1.3.3 1.5.8h1.5c0-.3-.2-.6-.2-.6-.4-.6-1.2-1.4-3.2-1.2-.6 0-1 .1-1.3.2-.7.3-1.8 1-1.7 2.5v.2c0 1.4 1.1 2.2 1.7 2.5.4.2.8.2 1.3.2 1.3.1 2.2-.2 2.7-.6.7-.6.7-1.3.7-1.3h-1.5z" style="fill:#FFFFFF"/></svg>',fnacSelected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 40" width="30" height="40"><path d="M15 0C6.7 0 0 6.8 0 15.3 0 23.7 8.4 32.9 15 40c6.6-7.1 15-16.3 15-24.8S23.3 0 15 0z" style="fill:#F5B027"/><path d="M4.1 17.7h1.5v-4.3h2.6v4.3h1.5v-3.1c.1-.5.4-1.2 1.6-1.3 0 0 1.7-.3 1.9 1.3v3.1h1.5V14c-.3-2.6-3.7-1.8-3.7-1.8-.8.2-1.1.6-1.2.8v-.7H5.6c-.1-1.4 1.2-1.4 1.2-1.4 1.3 0 1.4.9 1.4.9h1.5c0-1.7-2.1-1.9-2.1-1.9-2.1-.2-2.8.6-2.8.6-.7.5-.7 1.5-.7 1.7H2.8v1.1h1.3v4.4zm15.3-1.5c-.4.5-.8.6-1.4.7-.5 0-1.4.1-1.5-.7 0-.8 1.2-.7 2-.8 0 0 .8 0 1-.2.1-.1.2.6-.1 1m0-4c-1.6-.3-2.6 0-2.6 0-1.6.4-1.6 1.8-1.6 1.8h1.5s0-1.1 1.6-1c0 0 1.2.1 1.2.6 0 0 .4.7-1.2.8-1.6.1-3.6.1-3.4 1.7 0 0 0 1.6 2.6 1.5 0 0 1.4 0 2-.7l.1.6h1.5v-3.3c.1-1.7-1.7-2-1.7-2m6.9 3.7c-.2.5-.7.8-1.5.8 0 0-1.8.1-1.9-1.7v-.1c.1-1.8 1.9-1.7 1.9-1.7.8 0 1.3.3 1.5.8h1.5c0-.3-.2-.6-.2-.6-.4-.6-1.2-1.4-3.2-1.2-.6 0-1 .1-1.3.2-.7.3-1.8 1-1.7 2.5v.2c0 1.4 1.1 2.2 1.7 2.5.4.2.8.2 1.3.2 1.3.1 2.2-.2 2.7-.6.7-.6.7-1.3.7-1.3h-1.5z" style="fill:#FFFFFF"/></svg>',darty:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="40px" viewBox="424.37 305.985 30 40" enable-background="new 424.37 305.985 30 40" xml:space="preserve"><path fill="#EE252E" d="M439.37,305.985c-8.301,0-15,6.8-15,15.3c0,8.399,8.4,17.601,15,24.7c6.6-7.1,15-16.301,15-24.8C454.37,312.684,447.67,305.985,439.37,305.985z"/><ellipse fill="#231F20" cx="439.453" cy="320.651" rx="11.833" ry="11.167"/><path fill="#FFFFFF" d="M430.47,318.784v3.8c0,0,0.9,0.2,0.9-1.9C431.37,318.584,430.47,318.784,430.47,318.784L430.47,318.784zM435.47,318.784l-0.4,2.2h0.8 M439.869,318.584v1.7c0,0,0.701,0,0.701-0.8C440.57,318.584,439.869,318.584,439.869,318.584z"/><path fill="#FFFFFF" d="M439.37,309.285c-6.601,0-12,5.2-12,11.5s5.4,11.5,12,11.5c6.6,0,11.999-5.1,11.999-11.5	C451.369,314.485,445.97,309.285,439.37,309.285z M430.87,323.884h-2.3c0,0,0.2-1.399,0.2-3.199c0-1.8-0.2-3.2-0.2-3.2h2.3	c0.8,0,2.1,0.5,2.1,3.2S431.669,323.884,430.87,323.884z M449.27,323.884h-2c0,0,0.199-1.499-0.2-3.199c-0.299-1.3-0.899-2.6-1.1-3	v1.3c-0.5-0.2-1.1-0.2-1.1-0.2v2.3l0.199,2.9h-2c0,0,0.1-1.7,0.2-2.9c0.101-1.1,0-2.3,0-2.3c-0.5,0-0.9,0.1-1,0.2v0.4c0,1.4-1.101,1.8-1.101,1.8s0.301,0.4,0.7,1.2c0.5,0.8,0.801,1.6,0.801,1.6h-2.2c0,0,0-0.399-0.2-1.1c-0.199-0.7-0.5-1.1-0.5-1.1s-0.1,0.4,0,1.1c0.1,0.701,0.2,1.1,0.2,1.1h-3.9v-0.8c-0.1-0.5-0.2-0.9-0.2-0.9h-1c0,0-0.101,0.3-0.2,0.8c-0.1,0.6,0,0.799,0,0.799h-2c0,0,0.5-1.699,0.8-3.199c0.3-1.5,0.5-3.2,0.5-3.2h2.9c0,0,0.2,1.7,0.5,3.2c0.2,1,0.501,2.1,0.7,2.7c0.1-0.5,0.1-1.4,0.1-2.7c0-2-0.199-3.2-0.199-3.2h2.9c0.299,0,1.099,0.2,1.399,1.1v-1.1h5.6l0.501,1.9l0.5-1.9h1.899c0,0-0.8,1.6-1.199,3.2C449.07,322.385,449.27,323.884,449.27,323.884z"/></svg>',dartySelected:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="40px" viewBox="424.37 305.985 30 40" enable-background="new 424.37 305.985 30 40" xml:space="preserve"><path fill="#EE252E" d="M439.37,305.985c-8.301,0-15,6.8-15,15.3c0,8.399,8.4,17.601,15,24.7c6.6-7.1,15-16.301,15-24.8	C454.37,312.684,447.67,305.985,439.37,305.985z"/><ellipse fill="#FFFFFF" cx="439.453" cy="320.651" rx="11.833" ry="11.168"/><path fill="#EE252E" d="M430.47,318.784v3.8c0,0,0.9,0.2,0.9-1.9C431.37,318.584,430.47,318.784,430.47,318.784L430.47,318.784zM435.47,318.784l-0.4,2.2h0.8 M439.869,318.584v1.7c0,0,0.701,0,0.701-0.8C440.57,318.584,439.869,318.584,439.869,318.584z"/><path fill="#EE252E" d="M439.37,309.285c-6.601,0-12,5.2-12,11.5s5.4,11.5,12,11.5c6.6,0,11.999-5.1,11.999-11.5C451.369,314.485,445.97,309.285,439.37,309.285z M430.87,323.884h-2.3c0,0,0.2-1.399,0.2-3.199c0-1.8-0.2-3.2-0.2-3.2h2.3c0.8,0,2.1,0.5,2.1,3.2S431.669,323.884,430.87,323.884z M449.27,323.884h-2c0,0,0.199-1.499-0.2-3.199c-0.299-1.3-0.899-2.6-1.1-3v1.3c-0.5-0.2-1.1-0.2-1.1-0.2v2.3l0.199,2.9h-2c0,0,0.1-1.7,0.2-2.9c0.101-1.1,0-2.3,0-2.3c-0.5,0-0.9,0.1-1,0.2v0.4c0,1.4-1.101,1.8-1.101,1.8s0.301,0.4,0.7,1.2c0.5,0.8,0.801,1.6,0.801,1.6h-2.2c0,0,0-0.399-0.2-1.1c-0.199-0.7-0.5-1.1-0.5-1.1s-0.1,0.4,0,1.1c0.1,0.701,0.2,1.1,0.2,1.1h-3.9v-0.8c-0.1-0.5-0.2-0.9-0.2-0.9h-1c0,0-0.101,0.3-0.2,0.8c-0.1,0.6,0,0.799,0,0.799h-2c0,0,0.5-1.699,0.8-3.199c0.3-1.5,0.5-3.2,0.5-3.2h2.9c0,0,0.2,1.7,0.5,3.2c0.2,1,0.501,2.1,0.7,2.7c0.1-0.5,0.1-1.4,0.1-2.7c0-2-0.199-3.2-0.199-3.2h2.9c0.299,0,1.099,0.2,1.399,1.1v-1.1h5.6l0.501,1.9l0.5-1.9h1.899c0,0-0.8,1.6-1.199,3.2C449.07,322.385,449.27,323.884,449.27,323.884z"/></svg>',fnacRelay:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 40" width="30" height="40"><path d="M15 0C6.7 0 0 6.8 0 15.3 0 23.7 8.4 32.9 15 40c6.6-7.1 15-16.3 15-24.8S23.3 0 15 0z" style="fill:#232323"/><path d="M14 5.5L6.5 9.9V19l9.4 5.5 7.6-4.4V11L14 5.5zm7.5 5.9l-2.1 1.1L12 8.1 14 7l7.5 4.4zm-6.3 11l-7.4-4.3v-6.7l7.4 4.3v6.7zm.7-7.9l-7.3-4.3L10.7 9l7.3 4.3-2.1 1.2zm6.2 4.8l-5.5 3.2v-6.8l5.5-3.1v6.7z" style="fill:#FFFFFF"/></svg>',fnacRelaySelected:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 40" width="30" height="40"><path d="M15 0C6.7 0 0 6.8 0 15.3 0 23.7 8.4 32.9 15 40c6.6-7.1 15-16.3 15-24.8S23.3 0 15 0z" style="fill:#F5B027"/><path d="M14 5.5L6.5 9.9V19l9.4 5.5 7.6-4.4V11L14 5.5zm7.5 5.9l-2.1 1.1L12 8.1 14 7l7.5 4.4zm-6.3 11l-7.4-4.3v-6.7l7.4 4.3v6.7zm.7-7.9l-7.3-4.3L10.7 9l7.3 4.3-2.1 1.2zm6.2 4.8l-5.5 3.2v-6.8l5.5-3.1v6.7z" style="fill:#FFFFFF"/></svg>'};s.icon=function(x){var w=null;if(x.organization===0){x.organization="fnac"}var v={organization:"fnac",type:"shop",selected:false};x=x||{};x=a.extend(v,x);if(x.type==="shop"){if(x.organization==="fnac"){w=x.selected?s.icons.fnacSelected:s.icons.fnac}else{w=x.selected?s.icons.dartySelected:s.icons.darty}}else{w=x.selected?s.icons.fnacRelaySelected:s.icons.fnacRelay}return w};f.Services=f.Services||{};f.Services.mapService=s;u.amd=function(){};u.amd.define=function(){}})(window,Fnac,_,Backbone.Events,$);;(function(g,d,b,c,a){var e=d.config.secureUrl+"/api/reference/rest/v2/geocoding/";var f={init:function(h){},set:function(h,i){return a.post(e+h,i,"json")},get:function(h){return a.get(e+h,{},"json")}};d.Services=d.Services||{};d.Services.mapCacheService=f})(window,Fnac,_,Backbone.Events,$);;(function(b,a){b.TrackAddBasketFromBanner=function(d,h,i,g,c,e,k,f){if(typeof s_gi==="undefined"||typeof s_account==="undefined"){return}var j=s_gi(s_account);j.linkTrackVars="events,products,eVar1,eVar2,eVar6,eVar17,eVar19";j.linkTrackEvents="scAdd";j.events="scAdd";j.eVar6=(typeof prop40!=="undefined"?prop40:g)+": "+(c||"BuyBox")+": Ajout Panier";if(k==="cross-sell"){j.eVar1="Non internal campaign";j.eVar2="cross-sell"}else{if(k==="upsell"){j.eVar1="Non internal campaign";j.eVar2="upsell"}else{j.eVar1=d;j.eVar2="internal campaign"}}j.eVar17="Achat Standard";j.eVar19="Non applicable";j.products=";"+h+";;;;eVar48="+i;if(e==="recto"){j.tl(this,"o",(f||"Strate: Ajout Panier: Recto"))}else{j.tl(this,"o",(f||"Strate: Ajout Panier: Verso"))}j.eVar2=""};b.TrackProductThumbnailCompare=function(c,d,e){if(typeof s_gi==="undefined"){return}var f=s_gi(s_account);f.linkTrackVars="events,products,eVar1";f.linkTrackEvents="event6";f.events="event6";f.eVar1=c;f.products=";"+d+";;;;eVar48="+e;f.tl(this,"o","Ajout comparateur")};b.TrackProductThumbnailWishlist=function(c,d,e){if(typeof s_gi==="undefined"){return}var f=s_gi(s_account);f.linkTrackVars="events,products,eVar1";f.linkTrackEvents="event3";f.events="event3";f.eVar1=c;f.products=";"+d+";;;;eVar48="+e;f.tl(this,"o","Ajout liste")};b.pageOriginClick=function(d,c){var e="";if(d){e=b.s_translationsEnum[d]}else{if(c){e=b.s_translationsEnum[c]}}return e}})(window);;(function(a){var b=function(c){c.preventDefault();var d={productId:$(c.currentTarget).attr("data-product-id"),offerId:$(c.currentTarget).attr("data-offer-id"),catalogId:$(c.currentTarget).attr("data-catalog-id"),};var e=new a.Views.ProductBuyView();e.addBehavior(d)};$(document).on("click",".js-ProductBuy-addBehavior",b)})(window.Fnac);;(function(a){var b=function(){iAdvize.chat.showC2cPopin()};$(document).on("click",".js-IAdvizeC2C-openBehavior",b)})(Fnac);;$(document).on("click",".js-omniture-action",function(){var b=$("#ProducIdForOmniture");var a=$("#IsMpForOmniture");if(a.size()&&b.size()){var d=a.val().toLowerCase()=="true";var c=$(this).attr("data-omniture-action");if(c){trackActionNewFARef(d,c,b.val())}}});;$(document).on("click",".js-ProductStickyContainer a.titleProduct, .js-omniture-cross-sell",function(){var b=$("#ProducIdForOmniture");var a=$("#IsMpForOmniture");if(a.size()&&b.size()){var c=a.val().toLowerCase()=="true";trackActionNewFARef(c,"CrossSell",b.val())}});;$(document).on("click",".js-omniture-addToBasket",function(){var c=$(this).closest(".js-ProductBuy").attr("data-product-id");var b=$(this).attr("data-pack-product-ids");if(b){c+=";"+b}var d=$(this).attr("data-omniture");if(c&&d){var a=d.split("|");trackAddToBasketNewFA(c,a[0],a[1],a[2],a[3])}});;(function(a){$(document).ready(function(){var b=$("#toolbarnoel");if(b){if($.cookie("choixtoolbarnoel")==="choixclosed"){b.addClass("close")}$(".js-close").click(function(){b.toggleClass("close");if(b.hasClass("close")){$.cookie("choixtoolbarnoel","choixclosed",{expires:1,path:"/",domain:a.CookiesDomain})}})}})})(Fnac);;(function(){var a=$(".js-country-locator");if(a.length){var d=a.data("visitor-country");var c=a.data("url");var b=function(e){$.ajax({url:c+"&Country="+e,type:"GET"}).success(function(f){$("#dvPopinRedirect").html(f);if($(".bannerredirect",f)){$("#dvPopinRedirect").detach().prependTo("#HEADER")}}).error(function(){$("#dvPopinRedirect").addClass("hide")})};if($.cookie(d)!=="FR"){b("")}}})();;$(document).on("click",".js-AddAndTrackProductThumbnailBasket",function(c){var k=$(this).data("trackingbannerinfo");var h=$(this).data("prid");var i=$(this).data("qt");var d=$(this).data("trackface");var f=$(this).data("trackmessage");var g,b,j;var a=$(this).closest(".thumbnail").find("article");if(a!=undefined){g=a.data("pagename");b=a.data("categoryname");j=a.data("selltype")}if(typeof TrackAddBasketFromBanner==="function"){TrackAddBasketFromBanner(k,h,i,g,b,d,j,f)}});;$(document).on("click",".js-TrackAdherent",function(a){var b=s_gi("fnaccomprod");b.linkTrackVars="events,products,eVar6,eVar17,eVar19";b.linkTrackEvents="scAdd";b.events="scAdd";b.eVar6="Choisircarte";b.eVar17="Achat Standard";b.eVar19="Non applicable";b.products=";9667439;;;;eVar48=Non applicable";b.tl(this,"o","Ajout Panier")});$(document).on("click",".js-TrackAdherent",function(a){var b=s_gi("fnaccomprod");b.linkTrackVars="events,products,eVar6,eVar17,eVar19";b.linkTrackEvents="scAdd";b.events="scAdd";b.eVar6="Choisircarte";b.eVar17="Achat Standard";b.eVar19="Non applicable";b.products=";2022506;;;;eVar48=Non applicable";b.tl(this,"o","Ajout Panier")});;$(document).on("click",".js-TrackProductThumbnailCompare",function(a){a.preventDefault();var d=$(this).data("trackingbannerinfo");var b=$(this).data("prid");var c=$(this).data("qt");TrackProductThumbnailCompare(d,b,c)});;$(document).on("click",".js-TrackProductThumbnailWishlist",function(a){var d=$(this).data("trackingbannerinfo");var b=$(this).data("prid");var c=$(this).data("qt");TrackProductThumbnailWishlist(d,b,c)});;(function(b){var a=$("#search-data");if(a.length){b.ready(function(){b.modules.ready("searchAutocomplete",function(){var e=a.data("new-version");if(e){if(b.defaults!=null&&b.defaults.searchAutocomplete!=null){b.modules.searchAutocomplete.defaultAB=b.defaults.searchAutocomplete.defaultAB}if(b.modules.searchAutocomplete.defaultAB==null){var d=a.data("default-version");b.modules.searchAutocomplete.defaultAB=(d)?"A":"B"}b.modules.searchAutocomplete.urlAutocomplete=a.data("url-autocomplete");b.modules.searchAutocomplete.groups=[{name:a.data("title-suggestions"),type:"s",max:5,maxChars:33,order:0,orderParamUrl:1},{name:a.data("title-categories"),type:"m",max:4,maxChars:33,order:3,orderParamUrl:2}];var c=a.data("title-spectacle");if(c){b.modules.searchAutocomplete.groups.push({name:a.data("title-spectacle"),type:"bil",max:2,maxChars:40,order:1,orderParamUrl:3})}b.modules.searchAutocomplete.groups.push({name:a.data("title-products"),type:"p",max:6,maxChars:50,order:2,orderParamUrl:0})}else{b.modules.searchAutocomplete.inLabel=a.data("inlabel");b.modules.searchAutocomplete.plusCriteria=a.data("pluscriteria");b.modules.searchAutocomplete.urlAutocomplete=a.data("new-version-url-autocomplete")}b.start("searchAutocomplete")});$(".realSelect").comboToList({hiddenInputName:a.data("search-categories"),onSelect:function(){var c=$("#Fnac_Search");if(c.length){c.focus()}}})})}})(AppCore);;if(Fnac.config.tagCommanderUrl&&Fnac.config.enableTagCommander){if(Fnac.config.debug){console.trace("creating tag commander container...")}var hash=Math.round(new Date().getTime()/1000);var script=document.createElement("script");script.id="tc_container";script.language="javascript";script.src=Fnac.config.tagCommanderUrl+"?"+hash;script.async=true;script.defer="defer";var focusElement=(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode);focusElement.insertBefore(script,null)};;void function(b){var a=b.Model.extend({initialize:function(){this.url=_.compact([b.config.secureUrl,"/basket"]).join("");_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},buildURL:function(c){switch(c.action){case"add":return _.compact([this.url,"/add"]).join("");case"remove":return _.compact([this.url,"/delete"]).join("");case"update":return _.compact([this.url,"/update"]).join("")}},getEnvironment:function(c){var d=[];switch(c.action){case"add":d.push({ProductId:this.get("productId"),Offer:this.get("offerId"),MasterProductId:this.get("masterProductId")});break;case"remove":d.push({ProductId:this.get("productId"),Offer:this.get("offerId"),MasterProductId:this.get("masterProductId")});break;case"update":d.push({ProductId:this.get("productId"),Offer:this.get("offerId"),MasterProductId:this.get("masterProductId"),Quantity:this.get("quantityDifference")});break}return JSON.stringify(d)},setFromAPI:function(d,c){switch(c.action){case"add":this.set({state:"added",html:d});break;case"remove":this.set({state:"removed",html:d});break;case"update":this.set({state:"updated",html:d});break}},setErrorFromAPI:function(d,c){console.error(d)}});b.Models.Basket=a}(Fnac);;(function(b,a){var c=a.Model.extend({url:b.config.cartViewUrl,fetch:function(){$.ajax({url:this.url,xhrFields:{withCredentials:true}}).then(_.bind(this.success,this),_.bind(this.error,this))},success:function(d){this.set("html",d)},error:function(){this.set("error",true)},});b.Models.HeaderTabBasket=c})(Fnac,Backbone);;(function(b,a){var c=b.Model.extend({url:"/header/v1/GetHeaderTab",initialize:function(d){this.html=null;this.tabName=d.tabName;_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},getEnvironment:function(){var d={update:{request:{value:this.get("tabName")}}};return JSON.stringify(d)},setFromAPI:function(d){this.set("html",d.data.content.headertabs.html)},setErrorFromAPI:function(){this.set("error",true);this.trigger("error")},});b.Models.HeaderTab=c})(Fnac,Backbone);;void function(a){var b=a.Model.extend({url:"/product/v1/GetReviewForm",initialize:function(){this.html=null;_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},getEnvironment:function(c){return{}},setFromAPI:function(c){this.set("html",c.data.content.reviews.htmlform)},setErrorFromAPI:function(c){this.set("error",true);this.trigger("error")},});a.Models.ProductReviewForm=b}(Fnac);;void function(a){var b=a.Model.extend({url:"/product/v1/GetReviewResume",initialize:function(){this.html=null;_.bindAll(this,"setFromAPI","getEnvironment")},getEnvironment:function(c){var d={data:{environment:{catalog:a.Utils.productCatalog(),prid:a.Utils.productPRID(),url:a.Utils.productURL(),query:{}}},};return JSON.stringify(d)},setFromAPI:function(c){this.set("html",c.data.content.reviewresume.html)}});a.Models.ProductReviewResume=b}(Fnac);;void function(a){var b=a.Model.extend({url:"/product/v1/GetShippingPopin",initialize:function(){this.html=null;_.bindAll(this,"setFromAPI","getEnvironment")},getEnvironment:function(d){var c=null;var f=false;var g=null;if(d&&d.offerId){c=d.offerId}if(d&&d.stimulusChronoPrice){f=true;g=d.stimulusChronoPrice}var h=c+"|"+f+"|"+g;var e={data:{environment:{catalog:a.Utils.productCatalog(),prid:a.Utils.productPRID(),id:a.Utils.productID(),url:a.Utils.productURL(),query:{}}},update:{request:{type:"GetShippingPopin",value:h}}};return JSON.stringify(e)},setFromAPI:function(c){this.set("html",c.data.content.shippingpopin.html)}});a.Models.ProductShippingPopup=b}(Fnac);;void function(a){var b=a.Model.extend({url:"/product/v1/GetAdhPopin",initialize:function(){this.html=null;_.bindAll(this,"setFromAPI","getEnvironment")},getEnvironment:function(c){var d={data:{environment:{query:{}}},};return JSON.stringify(d)},setFromAPI:function(c){this.set("html",c.data.content.AdhInfoPopin.html)}});a.Models.ProductAdhCardPopup=b}(Fnac);;void function(b){var a=b.Model.extend({url:"/home/v1/GetMoreFlashSales",defaults:{html:null},initialize:function(c){this.nodeID=c.nodeID;this.html=null;_.bindAll(this,"setFromAPI")},getEnvironment:function(c){var d=c.page||1;var e={update:{request:{type:"GetMoreFlashSales",value:c.nodeID+"|"+d}}};return JSON.stringify(e)},setFromAPI:function(c){this.set("html",c.data.content.flashsalesarticles.html)}});b.Models.FlashSales=a}(Fnac);;void function(a){var b=a.Model.extend({initialize:function(c){this.layerHtml=null;this.tabHtml=null;this.catalog=c.catalog;this.id=c.id;this.prid=c.prid;this.producturl=c.producturl;this.type=c.type;this.oref=c.oref;this.key=c.key;this.url="/product/v1/"+this.type;_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},getEnvironment:function(c){var d={data:{content:{listbrandoffers:{itemsperpage:10,order:7,pagenum:1,status:1},listoccazoffers:{itemsperpage:10,order:7,pagenum:1,status:2},offer:{oref:this.get("oref"),html:""}},environment:{catalog:this.get("catalog"),id:this.get("id"),url:this.get("producturl"),prid:this.get("prid")}},update:{request:{type:this.get("type"),value:this.get("oref")}}};return JSON.stringify(d)},setFromAPI:function(c){this.set({tabHTML:c.data.content[this.key].html})},setErrorFromAPI:function(c){this.set("error",true);this.trigger("error")},});a.Models.ProductTab=b}(Fnac);;void function(a){var b=a.Model.extend({initialize:function(c){this.layerHtml=null;this.tabHtml=null;this.catalog=c.catalog;this.id=c.id;this.prid=c.prid;this.producturl=c.producturl;this.type=c.type;this.oref=c.oref;this.key=c.key;this.url="/product/v1/"+this.type;this.branditemsperpage=c.branditemsperpage,this.brandorder=c.brandorder,this.brandpagenum=c.brandpagenum,this.brandstatus=c.brandstatus,this.occazitemsperpage=c.occazitemsperpage,this.occazorder=c.occazorder,this.occazpagenum=c.occazpagenum,this.occazstatus=c.occazstatus,_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},getEnvironment:function(c){var d={data:{content:{listbrandoffers:{itemsperpage:this.get("branditemsperpage"),order:this.get("brandorder"),pagenum:this.get("brandpagenum"),status:this.get("brandstatus"),},listoccazoffers:{itemsperpage:this.get("occazitemsperpage"),order:this.get("occazorder"),pagenum:this.get("occazpagenum"),status:this.get("occazstatus"),}},environment:{catalog:this.get("catalog"),id:this.get("id"),url:this.get("producturl"),prid:this.get("prid")}},update:{request:{type:this.get("type")}}};return JSON.stringify(d)},setFromAPI:function(c){this.set("OfferHTML",c.data.content[this.key].html)},setErrorFromAPI:function(c){this.set("error",true);this.trigger("error")},});a.Models.ProductOfferList=b}(Fnac);;void function(a){var b=a.Model.extend({initialize:function(c){this.prid=c.prid;this.value=c.value;this.type=c.type;this.id=c.id;this.url="/Account/";_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},buildURL:function(c){return _.compact([a.config.pathname,this.url,c.type]).join("")},getEnvironment:function(c){var d={data:{environment:{query:{comment:null,email:null,items:[],listWishlistPublicIdAddItem:this.get("id"),listWishlistPublicIdRemoveItem:this.get("id"),message:null,offerId:"00000000-0000-0000-0000-000000000000",previousPrice:0,price:null,prid:this.get("prid"),publicId:"00000000-0000-0000-0000-000000000000",referentialId:1,wishlistId:0,wishlistName:null},url:null}},update:{request:{type:this.get("type"),value:this.get("value")}}};return JSON.stringify(d)},setFromAPI:function(c){this.set("WishListHTML",c.data.content.popinFa.html)},setErrorFromAPI:function(c){this.set("error",true);this.trigger("error")},});a.Models.ProductWishList=b}(Fnac);;void function(a){var b=a.Model.extend({initialize:function(c){},});a.Models.ProductThumbnail=b}(Fnac);;void function(a){var b=Backbone.Model.extend({urlRoot:_.compact([a.config.pathname,"/api","/v1/nav/common/thumbnail"]).join(""),});a.Models.ProductThumbnailAction=b}(Fnac);;void function(a){var b=a.Model.extend({initialize:function(c){this.prid=c.prid;this.value=c.value;this.type=c.type;this.id=c.id;this.url="/product/v1/AddProductComparer";_.bindAll(this,"setFromAPI","setErrorFromAPI","getEnvironment")},buildURL:function(c){return _.compact([a.config.pathname,"/api",this.url]).join("")},getEnvironment:function(c){var d={data:{environment:{catalog:c.catalogId,id:c.id,prid:c.prid,query:{}}},update:{request:{type:"AddProductComparer",value:c.value}}};return JSON.stringify(d)},setFromAPI:function(c){this.set("CompareHTML",c.data.content.comparer.html)},setErrorFromAPI:function(c){this.set("error",true);this.trigger("error")},});a.Models.ProductCompare=b}(Fnac);;void function(a,c){var b=(function(){var f=a.config.pathname+"/api/home/v1/RemoveAllLastSeenItems";var e={url:f,type:"post",data:JSON.stringify({}),dataType:"json"};var d=function(h,g){return $.ajax(e)};return{destroy:d}})();a.Models.NavigationHistory=b}(Fnac,window);;(function(a){var b=Backbone.Model.extend({url:a.config.pathname+"/api/v1/nav/user/store"});a.Models.WithdrawalStore=b})(Fnac);;(function(a){var b=Backbone.Model.extend({initialize:function(c){this.products=c}});a.Models.LaboProduct=b})(window.Fnac);;(function(b,a){b.Models.WishlistArticle=a.Model.extend({defaults:{prid:0,offer:"",catalog:0,price:0,imageUrl:"",title:"",link:"",dotImageUrl:""},parse:function(c){if(c.url){c.link=c.url;delete c.url;c.formattedPrice=c.price;c.dotImageUrl=[b.config.pathname,"/nav/images/dot.gif"].join("")}return c}});b.Models.WishlistArticles=a.Collection.extend({model:b.Models.WishlistArticle})})(Fnac,Backbone);;(function(b,a){b.Models.Wishlist=a.Model.extend({defaults:{name:""},initialize:function(c){},validate:function(c,d){if(!c.name||c.name===""){return"ERROR_WISHLIST_NAME"}if(c.wishlistsName&&_.contains(c.wishlistsName,c.name)){return"ERROR_WISHLIST_SAME_NAME"}},destroy:function(c){var d=_.extend({url:[b.config.pathname,"/api/v1/nav/wishlists/",this.get("id"),"/delete"].join("")},c||{});return a.Model.prototype.destroy.call(this,d)},rename:function(c){c.url=[b.config.pathname,"/api/v1/nav/wishlists/",this.get("id"),"/rename"].join("");c.data={newName:this.get("name")};c.type="POST";return a.ajax(c)},addArticle:function(g,d,c,f,e){e.url=[b.config.pathname,"/api/v1/nav/wishlists/",this.get("id"),"/add"].join("");e.data={prid:g,offer:d,catalog:c,price:f||""};e.type="POST";return a.ajax(e)},removeArticle:function(g,d,c,f,e){e.url=[b.config.pathname,"/api/v1/nav/wishlists/",this.get("id"),"/remove"].join("");e.data={prid:g,offer:d,catalog:c,price:f||""};e.type="POST";return a.ajax(e)},parse:function(c){var d=this.get("id");this.articles=new b.Models.WishlistArticles(c.articles||null,{parse:true});this.articles.each(function(e){e.set({id:_.uniqueId("article_"),wishlistId:d})});delete c.articles;return c}})})(Fnac,Backbone);;(function(){Backbone.emulateHTTP=true;Fnac.Models.WishlistCollection=Backbone.Collection.extend({model:Fnac.Models.Wishlist,url:function(){return[Fnac.config.pathname,"/api/v1/nav/wishlists"].join("")},fetch:function(a){if(a.prid){a.url=[Fnac.config.pathname,"/api/v1/nav/wishlists/article/",a.prid].join("")}return Backbone.Model.prototype.fetch.call(this,a)},parse:function(a){if(a.wishlists){return a.wishlists}return a}})})(Fnac,Backbone);;(function(a){var b=a.Models.LaboProduct;var c=Backbone.Collection.extend({model:b,getMin:function(d){return Math.floor(this.min(function(e){return e.get(d)}).get(d))},getMax:function(d){return Math.ceil(this.max(function(e){return e.get(d)}).get(d))},getUniqListOf:function(d){return _.compact(_.uniq(this.pluck(d)).sort(function(e,f){return e-f}))},filterBy:function(f,i){var h=Object.keys(f),j=Object.keys(i),g=h.length,d=g+j.length;var e=this.filter(function(l){var k=-1,m;while(++k<d){if(k<g){m=h[k];if(f[m].indexOf(l.get(m))===-1){return false}}else{m=j[k-g];if(l.get(m)<i[m].minValue||l.get(m)>i[m].maxValue){return false}}}return true});return new c(e)},});a.Collections.LaboProducts=c})(window.Fnac);;(function(c,a,d){var b=Backbone.View.extend({initialize:function(){if(!this.$el){throw new Error("Fnac.Views.CategoryNavView: $el not set.");return this}this.activeId=null;this.isMoving=false;this.map=[];this.map=this.getMap();this.debouncedRender=a.debounce(this.render,90);a.bindAll(this,"debouncedRender","setActiveIdFromMouseEvent","setActiveIdFromTouchEvent","setMoving","setActiveIdToCurrent","initRemoval","remove");c.App.on("categorynav:removepanel",this.remove);this.initializeOutsideEvents()},events:{"mouseleave .js-CategoryNav-item":"initRemoval","mouseenter .js-CategoryNav-item":"setActiveIdFromMouseEvent","touchend .js-CategoryNav-link":"setActiveIdFromTouchEvent","pointerdown .js-CategoryNav-link":"setActiveIdFromWindowsTouchEvent","touchmove .js-CategoryNav-link":"setMoving","click .js-CategoryNav-link":"preventIfMsPointer"},preventIfMsPointer:function(e){var f=!!window.MSInputMethodContext&&!!document.documentMode;if((window.navigator.msPointerEnabled||c.Utils.isAndroidBrowser())&&!f){e.preventDefault()}},initializeOutsideEvents:function(){$(document.body).on("mouseenter",".js-CategoryNav-panel",this.setActiveIdToCurrent).on("mouseleave",".js-CategoryNav-panel",this.initRemoval).on("click touchstart",".js-CategoryNav-panel .close",this.remove)},getMap:function(){var e=this.$(".js-CategoryNav-item");var f={};a.each(e,function(h,g){var j=h.querySelector(".js-CategoryNav-panel");var i=h.querySelector(".js-CategoryNav-link");if(j){j.parentNode.removeChild(j);f[g]={item:h,link:i,panel:j};h.setAttribute("data-submenu",g)}});return f},setMoving:function(){this.isMoving=true},setActiveIdToCurrent:function(e){this.debouncedRender(this.activeId)},setActiveIdFromMouseEvent:function(e){if($("html").hasClass("touch")){return}e.preventDefault();var f=$(e.currentTarget).closest(".js-CategoryNav-item").attr("data-submenu");this.debouncedRender(f)},setActiveIdFromTouchEvent:function(e){if($("html").hasClass("touch")){return}e.preventDefault();if(this.isMoving){this.isMoving=false;return false}var f=$(e.currentTarget).closest(".js-CategoryNav-item").attr("data-submenu");if(this.activeId==f){this.remove();this.activeId=null}else{this.render(f)}if(screen.width>500){return false}},setActiveIdFromWindowsTouchEvent:function(e){if(this.isMoving){this.isMoving=false;return false}if(e.preventDefault){e.preventDefault()}else{e.stop();e.returnValue=false;e.stopPropagation()}var f=$(e.currentTarget).closest(".js-CategoryNav-item").attr("data-submenu");if(this.activeId==f){this.remove();this.activeId=null}else{this.render(f)}},initRemoval:function(){if(window.navigator.msPointerEnabled&&navigator.msMaxTouchPoints>0){return false}this.debouncedRender(null)},render:function(e){if(e===this.activeId){return}if(this.activeId!==null){this.remove()}this.activeId=e;if(this.activeId!==null){this.addOverlay();if($(".js-CategoryNav-wrapper").hasClass("isOpen")){$(".js-CategoryNav-wrapper").append(this.map[this.activeId].panel)}else{$(".js-CategoryNav-wrapper").append(this.map[this.activeId].panel);$(".js-CategoryNav-wrapper").addClass("isOpen")}c.App.trigger("lazyimage:render");$(this.map[this.activeId].item).find(".js-CategoryNav-link").addClass("CategoryNav-link--active")}else{$(".js-CategoryNav-wrapper").removeClass("isOpen");this.removeOverlay()}},remove:function(){if(this.activeId){this.removeOverlay();$(".js-CategoryNav-wrapper").removeClass("isOpen");$(this.map[this.activeId].panel).remove();$(this.map[this.activeId].link).removeClass("CategoryNav-link--active")}},addOverlay:function(){c.App.trigger("overlay:show",{cssModifier:"menu"})},removeOverlay:function(){c.App.trigger("overlay:hide")}});c.Views.CategoryNavView=b})(Fnac,_,Modernizr);;void function(a){var b=Backbone.View.extend({initialize:function(){this.isActive=false;this.$content=this.$el.find(".js-PopupContent");_.bindAll(this,"open","close")},events:{"click .js-Popup-open":"open","click .js-Popup-close":"close"},open:function(){this.isActive=true;this.render()},close:function(){this.isActive=false;this.render()},render:function(){if(this.isActive){this.$content.addClass("PopupContent--active")}else{this.$content.removeClass("PopupContent--active")}}});a.Views.PopupView=b}(Fnac);;(function(d){var b=[];var c=window.innerWidth;var h=[["SMALL",992],["MEDIUM",1110],["LARGE",1281],["XLARGE",1600]];var f={POP:{DEFAULT:4,XLARGE:4,LARGE:4,MEDIUM:3,SMALL:2},DEFAULT:{DEFAULT:5,XLARGE:4,LARGE:4,MEDIUM:3,SMALL:2},XL_ITEM:{DEFAULT:1,XLARGE:1,LARGE:1,MEDIUM:1,SMALL:1},L_ITEM:{DEFAULT:3,XLARGE:3,LARGE:2,MEDIUM:2,SMALL:1},M_ITEM:{DEFAULT:3,XLARGE:2,LARGE:2,MEDIUM:2,SMALL:2},SMALL_ITEM:{DEFAULT:4,XLARGE:4,LARGE:4,MEDIUM:3,SMALL:2},XS_ITEM:{DEFAULT:6,XLARGE:5,LARGE:4,MEDIUM:3,SMALL:3},TRIPLE_ITEM:{DEFAULT:3,XLARGE:3,LARGE:3,MEDIUM:3,SMALL:3},DUAL_ITEM:{DEFAULT:2,XLARGE:2,LARGE:2,MEDIUM:2,SMALL:1}};var a=Backbone.View.extend({dotListItemTemplate:_.template("<li class='Carousel-dotListItem js-Carousel-dotListItem'><button class='js-Carousel-goTo' data-carousel-index='<%= index %>'><%= index %></button></li>"),initialize:function(){var i=!!this.$el.data("carouselForce");if(d.Utils.isInstanciatedView("CarouselView",this)){return this}this.length=this.$(".js-Carousel-item").length;if(!i&&this.length<2){this.destroy();return}this.hasToReset=false;this.hasTouch=$("html").hasClass("touch");this.index=0;this.isFirstTime=true;this.hasAutoPlay=!!this.$el.data("carouselAutoplay");this.hasHoverOff=!!this.$el.data("carouselHoverOff");this.hasNativeScroll=(this.hasTouch&&this.$el.data("carouselType")!=="XL_ITEM");this.hasTodisplayDots=!!this.$el.data("carouselDots");this.isInfinite=!!this.$el.data("carouselInfinite");this.reset();this.$container=this.$(".js-Carousel-container");b.push(this);_.bindAll(this,"goToNextSlide","onMouseEnter","onMouseLeave","onScroll","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","render","renderProducts","reset","startAutoPlay","stopAutoPlay","translateSlide");this.$container.on("transitionend oTransitionEnd webkitTransitionEnd",this.onTransitionEnd);if(this.hasAutoPlay&&this.length>1){this.$el.on("mouseenter",this.onMouseEnter);this.$el.on("mouseleave",this.onMouseLeave)}if(this.$el.parents(".Player").length){this.$el.on("mouseenter",this.onMouseEnter);this.$el.addClass("Carousel--hoverOff")}else{this.$el.addClass("Carousel--hoverOff")}if(!this.$el.data("carouselType")){this.$el.closest(".strate").addClass("Carousel--outsideNav")}this.listenTo(d.App,"carouselView:reset",this.reset);this.render()},reset:function(i){if(this.isDestroyed){return}if(this.hasAutoPlay&&this.autoPlayTimer){this.stopAutoPlay()}this.autoPlayTimer=0;this.hasCssTransition=Modernizr.csstransitions;this.hasToReset=!this.isFirstTime;this.index=0;this.isIsometric=true;this.isSliding=false;this.width=this.$(".Carousel-overflowContainer").innerWidth();if(this.isInfinite&&!this.isFirstTime){this.length=this.$(".js-Carousel-item").length-2}else{this.length=this.$(".js-Carousel-item").length}this.specifications=f[this.$el.data("carouselType")]||f.DEFAULT;this.visibleItemsLength=this.specifications[this.getCurrentViewport()];this.itemWidthRatio=100/this.visibleItemsLength;this.$overflowContainer=this.$(".Carousel-overflowContainer");if(this.isInfinite){this.indexMax=this.length+1;this.isTranslating=false}else{this.indexMax=Math.ceil(this.length/this.visibleItemsLength)-1;this.endingItemsLength=this.length-(this.indexMax*this.visibleItemsLength)}if(this.hasTouch&&!this.hasNativeScroll){this.isFirstTouchMove=true}if(this.hasNativeScroll){this.isAtFirstIndex=true;this.isAtLastIndex=false;this.itemWidth=this.$(".js-Carousel-item").width();this.scrollRightWall=this.$overflowContainer.prop("scrollWidth")-this.width-1}if(i){this.render()}},events:{"click .js-Carousel-previous":"goToPreviousSlide","click .js-Carousel-next":"goToNextSlide","click .js-Carousel-goTo":"goToSlide",},onMouseEnter:function(){this.startAutoPlay();this.hasMouseOver=true},onMouseLeave:function(){this.hasMouseOver=false},onScroll:function(){var i=this.$overflowContainer.scrollLeft();if(i>(this.index*this.width)||i<=((this.index-1)*this.width)){this.index=Math.ceil(i/this.width)}if(i<=0&&!this.isAtFirstIndex){this.$(".js-Carousel-previous").prop("disabled",true);this.isAtFirstIndex=true}if(this.isAtFirstIndex&&i>0){this.$(".js-Carousel-previous").prop("disabled",false);this.isAtFirstIndex=false}if(i>=this.scrollRightWall&&!this.isAtLastIndex){this.$(".js-Carousel-next").prop("disabled",true);this.isAtLastIndex=true}if(this.isAtLastIndex&&i<this.scrollRightWall){this.$(".js-Carousel-next").prop("disabled",false);this.isAtLastIndex=false}},onTouchStart:function(i){if(this.isSliding){return}if(this.hasAutoPlay){this.stopAutoPlay()}this.containerOriginLeft=parseInt(this.$container.css("left"));this.swipeOriginX=i.originalEvent.touches[0].clientX;this.swipeOriginY=i.originalEvent.touches[0].clientY;this.$el.on("touchmove.Carousel",this.onTouchMove);this.$el.on("touchend.Carousel",this.onTouchEnd);this.$container.addClass("Carousel-container--frozen")},onTouchMove:function(i){var k=Math.abs(i.originalEvent.touches[0].clientX-this.swipeOriginX);if(this.isFirstTouchMove){var j=Math.abs(i.originalEvent.touches[0].clientY-this.swipeOriginY);if(j>k){this.onTouchEnd();return}i.preventDefault();this.isFirstTouchMove=false;this.isSliding=true}this.$container.css("left",this.containerOriginLeft+i.originalEvent.touches[0].clientX-this.swipeOriginX)},onTouchEnd:function(i){this.isFirstTouchMove=true;this.$el.off("touchmove.Carousel");this.$el.off("touchend.Carousel");this.$container.removeClass("Carousel-container--frozen");if(!i){this.isSliding=false;return}var j=i.originalEvent.changedTouches[0].clientX-this.swipeOriginX;if(Math.abs(j)<this.width/20||!this.canGoToNext()&&j<0||!this.canGoToPrevious()&&j>0){this.render();return}if(j<0){this.goToNextSlide()}else{this.goToPreviousSlide()}},onTransitionEnd:function(){if(!this.isInfinite||(this.isInfinite&&!this.isTranslating)){this.isSliding=false}d.App.trigger("lazyimage:render")},startAutoPlay:function(){if(this.hasMouseOver||this.autoPlayTimer){return}this.autoPlayTimer=setInterval(this.goToNextSlide,4000)},stopAutoPlay:function(){clearInterval(this.autoPlayTimer);this.autoPlayTimer=0},goToPreviousSlide:function(i){if((i&&this.isSliding)||(!this.hasNativeScroll&&!this.isInfinite&&!this.index)){return}this.index--;if(this.isInfinite){if(this.index===-1){this.isTranslating=true;if(this.hasCssTransition){this.isSliding=true;this.$container.one("transitionend oTransitionEnd webkitTransitionEnd",this.translateSlide)}else{this.translateSlide()}}}this.goToSlide(this.index)},goToNextSlide:function(i){if((i&&this.isSliding)||(!this.hasNativeScroll&&!this.isInfinite&&this.index===this.indexMax)){return}this.index++;if(this.isInfinite){if(this.index===this.length){this.isTranslating=true;if(this.hasCssTransition){this.isSliding=true;this.$container.one("transitionend oTransitionEnd webkitTransitionEnd",this.translateSlide)}else{this.translateSlide()}}}this.goToSlide(this.index)},goToSlide:function(i){if(isNaN(i)){i.preventDefault();this.index=$(i.currentTarget).data("carouselIndex")}else{this.index=i}if(this.isAjaxified&&(this.index+this.visibleItemsLength)>=this.loadedProducts){this.getProductsHtml()}else{this.render()}},translateSlide:function(){this.index=(this.index<0)?(this.length-1):0;this.$container.addClass("Carousel-container--frozen").css("left",(-100*(this.index+1))+"%");this.isSliding=false;this.isTranslating=false;if(this.hasAutoPlay){this.startAutoPlay()}},canGoToPrevious:function(){return(this.isInfinite||this.index!==0)},canGoToNext:function(){return(this.isInfinite||this.index!==this.indexMax)},getProductsHtml:function(){var j=(this.products.length>this.visibleItemsLength)?this.visibleItemsLength:this.products.length;var i=this.products.splice(0,j);$.get([d.config.pathname,"/api/navigation/rest/v1/thumbnail/suggestions"].join(""),{references:i},this.renderProducts)},renderProducts:function(i){this.loadedProducts+=this.visibleItemsLength;var m=i.split(/--\w{8}-\w{4}-\w{4}-\w{4}-\w{12}-{0,2}/gm);if(!m[0].replace(/\r|\n|\s/g,"")){m.splice(0,1)}var l=m.length-1;if(!m[l].replace(/\r|\n|\s/g,"")){m.splice(l,1)}this.render();var j,k=m.length;for(j=0;j<k;j++){if(m[j].trim()){this.$(".toReplace").first().removeClass("toReplace").replaceWith(m[j])}}},getCurrentViewport:function(){var i=-1;while(++i<h.length){if(c<=h[i][1]){return h[i][0]}}return"DEFAULT"},render:function(){if(this.isFirstTime||this.hasToReset){d.App.trigger("lazyimage:render",{context:this.el,includeHidden:this.hasNativeScroll});if(this.hasTouch){if(!this.hasNativeScroll){this.$el.on("touchstart",this.onTouchStart)}else{this.$container.css("overflowX","auto").scroll(this.onScroll)}}if(this.isFirstTime){if(this.hasHoverOff){this.$el.addClass("Carousel--hoverOff")}if(this.isInfinite){var i=this.$(".js-Carousel-item").first().clone(),j=this.$(".js-Carousel-item").last().clone();this.$container.prepend(j);this.$container.append(i)}if(this.length<=this.visibleItemsLength){this.$(".js-Carousel-previous, .js-Carousel-next").prop("disabled",true)}if(this.hasTodisplayDots){this.$el.append("<ul class='Carousel-dotList js-Carousel-dotList'></ul>");var l=[];var m=-1;var n=this.length/this.visibleItemsLength;while(++m<n){l.push(this.dotListItemTemplate({index:m}))}this.$el.find(".js-Carousel-dotList").html(l.join(""))}}this.isFirstTime=this.hasToReset=false}this.$(".js-Carousel-previous").prop("disabled",!this.canGoToPrevious());this.$(".js-Carousel-next").prop("disabled",!this.canGoToNext());if(!this.canGoToPrevious()&&!this.canGoToNext()){this.$el.addClass("js-Carousel-disableArrow")}else{this.$el.removeClass("js-Carousel-disableArrow")}if(this.isInfinite&&this.$container.hasClass("Carousel-container--frozen")){this.$container.removeClass("Carousel-container--frozen")}if(this.hasTodisplayDots){var k=(this.index===this.length)?0:this.index;this.$(".js-Carousel-dotListItem--active").removeClass("js-Carousel-dotListItem--active");this.$(".js-Carousel-dotListItem").eq(k).addClass("js-Carousel-dotListItem--active")}if(!this.isInfinite&&(this.index===this.indexMax||!this.isIsometric)){if(!this.index){this.isIsometric=true}else{if(this.hasNativeScroll){var o=this.itemWidth*(((this.index-1)*this.visibleItemsLength)+this.endingItemsLength)}else{this.$container.css("left",-this.itemWidthRatio*(((this.index-1)*this.visibleItemsLength)+this.endingItemsLength)+"%")}if(this.endingItemsLength&&this.index===this.indexMax){this.isIsometric=false}}}if(this.isIsometric){if(this.hasNativeScroll){var o=this.index*this.width}else{if(this.isInfinite){this.$container.css("left",(-100*(this.index+1))+"%")}else{this.$container.css("left",(-100*this.index)+"%")}}}if(this.hasNativeScroll){this.isSliding=true;this.$overflowContainer.animate({scrollLeft:o},500,function(){this.isSliding=false}.bind(this))}if(!this.hasCssTransition){d.App.trigger("lazyimage:render")}if(this.hasAutoPlay&&!this.autoPlayTimer&&!this.isTranslating){this.startAutoPlay()}},destroy:function(){this.isDestroyed=true;this.$(".js-Carousel-previous, .js-Carousel-next, .js-Carousel-dotListItem").remove();this.undelegateEvents();this.$el.removeData().unbind()}});function e(i){i.reset(true)}function g(){c=window.innerWidth;_.forEach(b,e)}a.onViewportUpdate=_.debounce(g,300);$(window).on("resize.Carousel",a.onViewportUpdate);d.Views.CarouselView=a})(window.Fnac);;(function(a){var b=Backbone.View.extend({initialize:function(){this.$spinner=this.$(".js-OverlaySpinner");this.isVisible=false;this.spinnerClass="";this.currentClass="";if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#AnimationEventsAttribute","1.0")){this.$spinner.removeClass("fnac-loader").addClass("Spinner Spinner--centered");this.$spinner.empty()}else{var c=$(this.$spinner).hasClass("Spinner--centered");if(!c){this.$spinner.append('<div class="fnac-loader-svg"><svg version="1.1" id="L6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><rect fill="none" stroke="#d8d8d8" stroke-width="0.6" x="30" y="15" width="50" height="50"></rect><rect x="0" y="0" width="6" height="25" fill="#f5b025" transform="rotate(90)"><animateTransform id="op1" attributeType="xml" attributeName="transform" type="translate" values="55 9; 80 9" begin="0s; op4.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="90" to="90" begin="0; op4.end" dur="0.2s" additive="sum" /><animateTransform id="op2" attributeType="xml" attributeName="transform" type="translate" values="80 15; 80 41" begin="op1.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="0" to="0" begin="op1.end" dur="0.2s" additive="sum" /><animateTransform id="op3" attributeType="xml" attributeName="transform" type="translate" values="80 65; 54 65" begin="op2.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="90" to="90" begin="op2.end" dur="0.2s" additive="sum" /><animateTransform id="op4" attributeType="xml" attributeName="transform" type="translate" values="24 40; 24 10" begin="op3.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="0" to="0" begin="op3.end" dur="0.2s" additive="sum" /></rect></svg></div>')}}this.listenTo(a.App,"overlay:show",this.show);this.listenTo(a.App,"overlay:hide",this.hide)},events:{click:"triggerClick"},triggerClick:function(){a.App.trigger("overlay:click")},show:function(c){if(c&&c.cssModifier){this.currentClass="Overlay--"+c.cssModifier}else{this.currentClass=""}if(c&&c.noSpinner){this.spinnerClass="Spinner--disabled"}this.isVisible=true;this.render()},hide:function(){this.isVisible=false;this.render()},render:function(){if(this.isVisible){this.$spinner.addClass(this.spinnerClass);this.$el.addClass("Overlay--visible "+this.currentClass)}else{this.$el.removeClass("Overlay--visible "+this.currentClass)}}});a.Views.OverlayView=b})(Fnac);;(function(b,a){var c=a.View.extend({initialize:function(){this.loader='<div class="Overlay Overlay--inside js-Overlay Overlay--visible"><div class="fnac-loader-svg"><svg version="1.1" id="L6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><rect fill="none" stroke="#d8d8d8" stroke-width="1.5" x="30" y="15" width="50" height="50"></rect><rect x="0" y="0" width="6" height="25" fill="#f5b025" transform="rotate(90)"><animateTransform id="op1" attributeType="xml" attributeName="transform" type="translate" values="55 9; 80 9" begin="0s; op4.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="90" to="90" begin="0; op4.end" dur="0.2s" additive="sum" /><animateTransform id="op2" attributeType="xml" attributeName="transform" type="translate" values="80 15; 80 41" begin="op1.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="0" to="0" begin="op1.end" dur="0.2s" additive="sum" /><animateTransform id="op3" attributeType="xml" attributeName="transform" type="translate" values="80 65; 54 65" begin="op2.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="90" to="90" begin="op2.end" dur="0.2s" additive="sum" /><animateTransform id="op4" attributeType="xml" attributeName="transform" type="translate" values="24 40; 24 10" begin="op3.end" dur="0.2s" /><animateTransform attributeName="transform" type="rotate" from="0" to="0" begin="op3.end" dur="0.2s" additive="sum" /></svg></div></div>';this.listenTo(b.App,"loader:showIn",this.showIn);this.listenTo(b.App,"loader:hideIn",this.hideIn)},showIn:function(d){this.$element=d.$element||d.currentThumb;this.$element.prepend(this.loader)},hideIn:function(){setTimeout(function(){this.$element.find(".Overlay").removeClass("Overlay--visible");this.$element.find(".Overlay").remove()}.bind(this),250)}});b.Views.LoaderView=c})(window.Fnac,Backbone);;void function(b){var a=Backbone.View.extend({initialize:function(){this.$audio=this.$(".js-AudioPlayer-audio");this.$controls=this.$(".js-AudioPlayerControls");this.$tracks=this.$(".js-AudioPlayerTrackListItem");this.$volume=this.$(".js-AudioPlayerControls-volume");this.minIndex=0;this.maxIndex=this.$tracks.size()-1;this.index=this.minIndex;this.lastIndex=null;this.initializeVolumeSlider();url=$(this.$tracks[this.index]).attr("data-url");this.initializeMediaELement(url);this.render()},events:{"click .js-AudioPlayerTrackListItem":"playClicked","click .js-AudioPlayerControls-play":"playPause","click .js-AudioPlayerControls-previous":"playPrev","click .js-AudioPlayerControls-next":"playNext","click .js-AudioPlayerControls-mute":"mute",},initializeVolumeSlider:function(){this.$volume.rangeslider({polyfill:false,onSlide:_.bind(this.onVolumeUpdate,this)});this.$volume.on("change",_.bind(this.onVolumeUpdate,this))},onMediaElementSuccess:function(d,c){this.mediaElement=d;this.mediaElement.addEventListener("loadeddata",_.bind(this.onMediaElementLoadeddata,this));this.mediaElement.addEventListener("timeupdate",_.bind(this.onMediaElementTimeupdate,this));this.mediaElement.addEventListener("ended",_.bind(this.onMediaElementEnded,this))},onMediaElementError:function(c){b.App.trigger("flashmessage:show")},onMediaElementLoadeddata:function(c){this.renderDuration(Math.round(c.target.duration||c.srcElement.duration))},onMediaElementTimeupdate:function(c){this.renderDurationProgress(this.mediaElement.currentTime*100/this.mediaElement.duration);this.renderPlayedDuration(Math.round(this.mediaElement.currentTime))},onMediaElementEnded:function(){this.playNext()},onVolumeUpdate:function(c){if(!this.mediaElement){return}if(typeof c=="number"){this.mediaElement.setVolume(c/100)}else{this.mediaElement.setVolume($(c.currentTarget).val()/100)}},initializeMediaELement:function(c){this.$audio.attr("src",c);new MediaElement(this.$audio[0],{success:_.bind(this.onMediaElementSuccess,this),flashName:b.config.mediaelementSwfUrl})},canPlayNext:function(){return this.index<this.maxIndex},canPlayPrev:function(){return this.index>0},mediaSetSrc:function(c){url=$(c).attr("data-url");if(url!==""&&this.mediaElement){this.mediaElement.setSrc(url);this.mediaElement.play()}else{this.onMediaElementError();return}},playNext:function(){if(this.canPlayNext()){this.lastIndex=this.index;this.index+=1;this.mediaSetSrc($(this.$tracks[this.index]));this.render()}},playPrev:function(){if(this.canPlayPrev()){this.lastIndex=this.index;this.index-=1;this.mediaSetSrc($(this.$tracks[this.index]));this.render()}},playClicked:function(c){this.lastIndex=this.index;this.index=parseInt($(c.currentTarget).attr("data-index"));this.mediaSetSrc($(this.$tracks[this.index]));this.render()},playPause:function(){if(this.mediaElement){if(this.mediaElement.paused){this.mediaElement.play()}else{this.mediaElement.pause()}}else{this.onMediaElementError();return}this.render()},mute:function(){if(document.createElement("audio").canPlayType&&this.mediaElement){if(this.mediaElement.muted){this.mediaElement.setMuted(false)}else{this.mediaElement.setMuted(true)}}this.render()},renderDuration:function(e){var c=Math.floor(e/60);var d=e-c*60;c=c<10?"0"+c:c;d=d<10?"0"+d:d;this.$controls.find(".js-AudioPlayerControls-duration").text(c+":"+d)},renderDurationProgress:function(c){this.$controls.find(".js-AudioPlayerControls-timelineProgress").css("width",c+"%")},renderPlayedDuration:function(e){var c=Math.floor(e/60);var d=e-c*60;c=c<10?"0"+c:c;d=d<10?"0"+d:d;this.$controls.find(".js-AudioPlayerControls-playedDuration").text(c+":"+d)},renderTitle:function(c){this.$controls.find(".js-AudioPlayerControls-trackTitle").text(c)},render:function(){this.renderTitle($(this.$tracks[this.index]).attr("data-title"));if(this.lastIndex!=this.index){$(this.$tracks[this.lastIndex]).removeClass("AudioPlayerTrackListItem--active")}$(this.$tracks[this.index]).addClass("AudioPlayerTrackListItem--active");this.$(".js-AudioPlayerControls-previous").prop("disabled",!this.canPlayPrev());this.$(".js-AudioPlayerControls-next").prop("disabled",!this.canPlayNext());if(!this.mediaElement||this.mediaElement.paused){this.$(".js-AudioPlayerControls-play").removeClass("AudioPlayerControls-play--playing")}else{this.$(".js-AudioPlayerControls-play").addClass("AudioPlayerControls-play--playing")}if(document.createElement("audio").canPlayType&&this.mediaElement){if(this.mediaElement.muted){this.$(".js-AudioPlayerControls-mute").addClass("AudioPlayerControls-mute--active")}else{this.$(".js-AudioPlayerControls-mute").removeClass("AudioPlayerControls-mute--active")}}}});b.Views.AudioPlayerView=a}(Fnac);;void function(b){var a="TabbedListItem--active";var c=Backbone.View.extend({initialize:function(){this.$controls=this.$(".js-TabbedList-control");this.$contents=this.$(".js-TabbedList-content");this.index=1;this.lastIndex=null;this.listenTo(b.App,"tabbedlist:show",this.show)},events:{"click .js-TabbedList-control":"clickShow"},clickShow:function(d){this.lastIndex=this.index;this.index=$(d.currentTarget).attr("data-id");this.render()},show:function(d){this.lastIndex=this.index;this.index=d.index;this.render()},render:function(){if(this.lastIndex!=null){$(this.$controls[this.lastIndex-1]).removeClass(a);$(this.$contents[this.lastIndex-1]).removeClass(a)}$(this.$controls[this.index-1]).addClass(a);$(this.$contents[this.index-1]).addClass(a)}});b.Views.TabbedListView=c}(Fnac);void function(a){var b=Backbone.View.extend({initialize:function(){},events:{"click .js-TabbedListAnchor-show":"show"},show:function(c){index=$(c.currentTarget).attr("data-id");a.App.trigger("tabbedlist:show",{index:index})}});a.Views.TabbedListAnchorView=b}(Fnac);;(function(b,a){var c=a.View.extend({twoHoursDeliveryPromise:"2-hours-delivery-promise",events:{click:"openTwoHoursDeliveryPromisePopin"},openTwoHoursDeliveryPromisePopin:function(f){f.preventDefault();if($("html").attr("lang")==="es-ES"){var g=$(".js-ProductStimulusChrono-button").attr("data-link");var d={items:{src:"<div class='container-iframe'><iframe src="+g+" class='mfp-content--iframe' width='800' height='600px'  scrolling='no' frameborder='0' cellspadding='0' cellsmargin='0'></iframe><div class='close closeIframe'></div></div>"},type:"inline"};$.magnificPopup.open(d)}else{this.getPopinContent(this.twoHoursDeliveryPromise).success((function(e){this.openPopin(e,{callbacks:{open:function(){new b.Views.ProductStimulusChronoPopupView({el:this.content})}}})}).bind(this))}},getPopinContent:function(d){b.App.trigger("overlay:show");var e=[b.config.pathname,"/popins/",d].join("");return $.ajax({url:e,type:"GET",dataType:"html",error:function(){b.App.trigger("overlay:hide")},success:function(){b.App.trigger("overlay:hide")}})},openPopin:function(d,f){var e={items:{src:d},type:"inline"};_.extend(e,f);$.magnificPopup.open(e)}});b.Views.TwoHoursDeliveryPromiseButtonView=c})(window.Fnac,window.Backbone);;(function(b,a){b.Views.ProductStimulusChronoPopupView=Backbone.View.extend({initialize:function(){this.zipCodes=["75001","75002","75003","75004","75005","75006","75007","75008","75009","75010","75011","75012","75013","75014","75015","75016","75017","75018","75019","75020","75116","92000","92100","92110","92120","92130","92150","92170","92200","92210","92220","92230","92240","92250","92270","92300","92310","92320","92390","92400","92600","92700","92800","93000","93100","93110","93120","93130","93140","93150","93160","93170","93190","93200","93210","93220","93230","93240","93250","93260","93270","93290","93300","93310","93320","93330","93340","93350","93360","93370","93380","93390","93400","93410","93420","93430","93440","93450","93460","93470","93500","93600","93700","93800","94000","94100","94110","94120","94130","94140","94160","94170","94190","94200","94210","94220","94230","94240","94250","94270","94290","94300","94310","94320","94340","94350","94360","94370","94380","94400","94410","94420","94430","94440","94450","94460","94470","94480","94490","94500","94510","94520","94550","94600","94700","94800","94880","59000","59001","59002","59003","59004","59005","59006","59007","59008","59009","59010","59011","59012","59013","59014","59015","59016","59017","59018","59019","59020","59021","59022","59023","59024","59025","59026","59027","59028","59029","59030","59031","59032","59033","59034","59035","59036","59037","59039","59040","59041","59042","59043","59044","59045","59046","59047","59048","59049","59461","59462","59463","59464","59465","59466","59467","59527","59555","59586","59711","59712","59713","59714","59715","59716","59717","59718","59719","59777","59779","59781","59783","59784","59785","59787","59788","59789","59800","59816","59851","59853","59859","59861","59862","59863","59864","59865","59867","59868","59878","59882","59883","59884","59885","59887","59889","59891","59892","59893","59894","59895","59896","59897","59898","59899","59900","59998","59700","59701","59702","59703","59704","59705","59706","59707","59708","59709","59845","59847","59848","59849","59275","59810","59811","59812","59813","59814","59815","59817","59818","59491","59260","59051","59052","59053","59054","59055","59056","59057","59058","59059","59060","59061","59062","59063","59065","59066","59069","59070","59071","59072","59073","59074","59078","59079","59081","59082","59083","59084","59086","59087","59088","59092","59097","59100","59671","59672","59673","59677","59682","59683","59685","59686","59687","59689","59510","59259","59110","59290","59155","59790","59350","59520","59170","59345","59346","59591","59681","59961","59962","59963","59964","59965","59966","59967","59969","59587","59588","59589","59910","59152","59262","06000","06100","06200","06300","06230","31000","31100","31200","31300","31400","31500","69001","69002","69003","69004","69005","69006","69007","69008","69009","69100","13001","13002","13003","13004","13005","13006","13007","13008","13009","13010","13012","13014","13015","35000","35200","35700","33000","33100","33200","33300","33800","67000","67100","67200","44000","44100","44200"];this.mentionContentState=false;this.$alerts=this.$el.find(".notification");this.$mentionContent=this.$el.find(".js-ProductStimulusChrono-mentionsContent");this.$zipInput=this.$el.find(".ProductStimulusChrono-zipInput");_.bindAll(this,"isZipValid","onKeyPressed")},events:{"click .js-ProductStimulusChrono-mentionsOpen":"toggleMentions","click .ProductStimulusChrono-zipSubmit":"isZipValid","keypress .ProductStimulusChrono-zipInput":"onKeyPressed"},onKeyPressed:function(c){if(c.which==13||c.keyCode==13){this.isZipValid()}},isZipValid:function(){var c=this.$zipInput.val().toString();this.$alerts.removeClass("isActive");if(c.match(/^[0-9]+$/)!=null&&c.length==5){this.$el.find(".js-zipValue").text(c);if(this.zipCodes.indexOf(c)!=-1){this.$el.find(".notification--green").addClass("isActive")}else{this.$el.find(".notification--red").addClass("isActive")}}else{this.$el.find(".notification--yellow").addClass("isActive")}},toggleMentions:function(){if(this.mentionContentState){this.$mentionContent.removeClass("isActive");this.mentionContentState=false}else{this.$mentionContent.addClass("isActive");this.mentionContentState=true}}})})(Fnac,$);;(function(d,b,a){var c=a.View.extend({initialize:function(){$(d).scroll(this.detectScroll)},events:{"touch .js-scrollTopBtn":"render"},detectScroll:function(){var e=$("body");if(e.scrollTop()>500){$(".js-scrollTopBtn").css("display","block")}else{$(".js-scrollTopBtn").css("display","none")}},render:function(){d.scrollTo(0,0)}});b.Views.ScrollTopView=c})(window,Fnac,Backbone);;(function(d,b,a){var c=a.View.extend({initialize:function(){$(d).scroll(this.detectScroll);var e=this.$el.find("li").length;if(e>5){e=5}var f=100/e+"%";this.$el.find("li").css("width",f)},events:{"touch .js-scrollPasteToolbar":"render"},detectScroll:function(){var e=$("body");if(e.scrollTop()>10){$(".js-scrollPasteToolbar").addClass("scroll")}else{$(".js-scrollPasteToolbar").removeClass("scroll")}},render:function(){d.scrollTo(0,0)}});b.Views.scrollPasteToolbar=c})(window,Fnac,Backbone);;(function(d,b,a){var c=a.View.extend({initialize:function(){$(d).scroll(this.detectScroll)},detectScroll:function(){var e=$(".SearchNav").height();if($(d).scrollTop()>e){$("#advertisingSidebar").addClass("adStick");$("#advertisingSidebar").css("top",$(d).scrollTop()+"px")}else{$("#advertisingSidebar").removeClass("adStick")}}});b.Views.SearchSideAdvertising=c})(window,Fnac,Backbone);;(function(c,a){var b=a.View.extend({initialize:function(){this.isVisible=false;_.bindAll(this,"hide");this.listenTo(c.App,"flashmessage:show",this.show);this.listenTo(c.App,"flashmessage:hide",this.hide);this.listenTo(c.App,"flashmessage:toggle",this.toggle)},events:{click:"triggerClick","click .js-FlashMessage-close":"hide"},triggerClick:function(){c.App.trigger("flashmessage:click")},show:function(){if(!this.isVisible){this.isVisible=true;this.render();window.setTimeout(this.hide,2000)}},hide:function(){if(this.isVisible){this.isVisible=false;this.render()}},toggle:function(){if(this.isVisible){this.isVisible=false}else{this.isVisible=true}this.render()},render:function(){c.App.trigger("overlay:hide");if(this.isVisible){this.$el.addClass("FlashMessage--visible")}else{this.$el.removeClass("FlashMessage--visible")}}});c.Views.FlashMessageView=b})(Fnac,Backbone);;(function(b,a){var c=a.View.extend({renderOptions:{conditions:{isVisible:false},elements:{$tabHeaderButton:null}},initialize:function(d){this.tabs=[];this.$headerBtnContainer=d.headerBtnContainer;this.$tab=this.$el;_.bindAll(this,"onHeaderTabClicked");this.listenTo(b.App,"overlay:click",this.closeCurrentTab);this.listenTo(b.App,"header-tab:close",this.closeCurrentTab);this.listenTo(b.App,"history:show",this.closeCurrentTab);this.$headerBtnContainer.on("click",".js-HeaderTab-toggle",this.onHeaderTabClicked)},events:{"click .js-HeaderTab-close":"closeCurrentTab"},toggleSidebarZindex:function(){if(this.renderOptions.conditions.isVisible){$(".js-SlideNav-toggler").addClass("isAbove");$(".js-Sidebar").addClass("isAbove");$(".SlideNav").addClass("isAbove")}else{$(".js-SlideNav-toggler").removeClass("isAbove");$(".js-Sidebar").removeClass("isAbove");$(".SlideNav").removeClass("isAbove")}},render:function(){if(this.$tab){if(this.renderOptions.conditions.isVisible){this.toggleSidebarZindex();if(this.tabs){for(var d=0;d<this.tabs.length;d++){var e=this.tabs[d];if(this.currentTab.el.className!==e.$el[0].className){e.visible=false;e.render()}}this.currentTab.visible=true;this.currentTab.render()}this.$tab.addClass("open");b.App.trigger("overlay:show",{cssModifier:"header",noSpinner:true})}else{if(this.$tab.hasClass("open")){this.toggleSidebarZindex();this.$headerBtnContainer.find(".Menu-sub-open").removeClass("Menu-sub-open");this.$tab.removeClass("open");b.App.trigger("overlay:hide");this.currentTab=null}}}},onHeaderTabClicked:function(g){if($("html").hasClass("ie9")&&$(g.currentTarget).data("header-tab")==="account"){return}g.preventDefault();b.App.trigger("sidebar:hide");var d=this.deleteBasketView();this.renderOptions.elements.$tabHeaderButton=$(g.currentTarget);if(this.renderOptions.elements.$tabHeaderButton.length){var f=this.getTab(this.renderOptions.elements.$tabHeaderButton);if(d||(this.currentTab&&f.name===this.currentTab.name)){this.renderOptions.conditions.isVisible=!this.renderOptions.conditions.isVisible}else{this.renderOptions.conditions.isVisible=true}this.currentTab=f;this.render()}},closeCurrentTab:function(){this.renderOptions.conditions.isVisible=false;if(this.currentTab&&this.currentTab.name==="basket"){this.currentTab.remove()}this.currentTab=null;this.render()},getTab:function(e){var g=e.data("header-tab");var f=null;if(this.tabs){f=_.findWhere(this.tabs,{name:g})}if(!f){var d=e.parent();f=this._createTab(g,d)}return f},_createTab:function(f,e){var g="js-HeaderTab-"+f;var d=this.$tab.find("."+g);if(!d.length){this.$tab.append('<div class="'+g+'"></div>');d=this.$tab.find("."+g)}var h;switch(f){case"help":h=new b.Views.HeaderTabHelpView({$button:e,el:d,name:f,visible:true});this.tabs.push(h);break;case"store":h=new b.Views.HeaderTabStoreView({$button:e,el:d,name:f,visible:true});this.tabs.push(h);break;case"account":h=new b.Views.HeaderTabAccountView({$button:e,el:d,name:f,visible:true});this.tabs.push(h);break;case"basket":h=new b.Views.HeaderTabBasketView({$button:e,el:d,name:f,visible:true});break}return h},deleteBasketView:function(){if(this.currentTab&&this.currentTab.name==="basket"){this.currentTab.visible=false;this.currentTab.render();this.currentTab.remove();this.currentTab=null;return true}return false}});b.Views.HeaderTabsView=c})(window.Fnac,Backbone);;(function(b,a){var c=a.View.extend({visible:false,name:"",loading:false,_renderError:function(){b.App.trigger("header-tab:close");b.App.trigger("flashmessage:show")},_refreshVisibility:function(){var d=this.$el.find(".Shutter");if(d.length){if(this.visible){d.addClass("open")}else{if(d.hasClass("open")){d.removeClass("open")}}}},_refreshContent:function(e,f){if(this.$el.length&&e){var d=e.get("html");if(d){this.visible&&b.App.trigger("loader:hideIn");this.$el.html(d);this._refreshVisibility();this.loading=false;if(f){f()}}else{if(!this.loading){this.loading=true;b.App.trigger("loader:showIn",{$element:this.$el});this.model.fetch()}else{b.App.trigger("loader:hideIn")}}}}});b.Views.HeaderMasterTabView=c})(Fnac,Backbone);;(function(a){var b=a.Views.HeaderMasterTabView.extend({pageIndex:0,initialize:function(c){this.name=c.name;this.$button=c.$button;this.visible=c.visible||false;this.model=new a.Models.HeaderTabBasket();_.bindAll(this,"_clearHtmlPropertyThenRefreshView","_contentRefreshed");this.listenTo(this.model,"change",this.render);this.listenTo(a.App,"headerTabBasketView:refresh",this._clearHtmlPropertyThenRefreshView);this.listenTo(a.App,"headerTabBasketView:updatePageIndex",this._updatePageIndex)},_clearHtmlPropertyThenRefreshView:function(){this.model.unset("html")},_updatePageIndex:function(c){this.pageIndex=c.pageIndex},render:function(){if(this.$button.length){if(this.visible){this.$button.addClass("Menu-sub-open")}else{this.$button.removeClass("Menu-sub-open")}}if(this.model.get("error")){this._renderError()}else{this._refreshContent(this.model,this._contentRefreshed)}},_contentRefreshed:function(){this.basketView&&this.basketView.dispose();var c=this.$(".js-Basket");if(c.length){this.basketView=new a.Views.BasketView({el:c,pageIndex:this.pageIndex});this.basketView.render()}}});a.Views.HeaderTabBasketView=b})(window.Fnac);;(function(a){var b=a.Views.HeaderMasterTabView.extend({initialize:function(c){this.name=c.name;this.visible=c.visible||false;this.isVisible=false;this.isOnTablet=false;this.$button=c.$button;this.$content=this.$(".js-HeaderTab-content");this.$link=this.$button.find(".js-HeaderTab-toggle");this.$input=this.$(".js-HeaderTab-moveUp");_.bindAll(this,"remoteLoginSubmit","moveUp","remoteLoginSubmitDidFail","formValidation");var d=this.$link.attr("data-userType");this.model=new a.Models.HeaderTab({tabName:("account-"+d)});this.listenTo(this.model,"change",this.render)},events:{"focusin .js-HeaderTab-moveUp":"moveUp","submit .js-ShutterConnect-form":"remoteLoginSubmit","click .js-HeaderTab-account-trackSignup":"trackSignup"},trackSignup:function(c){var d=s_gi(s_account);if(d){d.linkTrackVars="events,eVar64";d.linkTrackEvents="event70";d.events="event70";d.eVar64="Layer";d.tl(this,"o","Layer : Account creation : step 1")}},remoteLoginSubmitDone:function(){window.location.reload()},remoteLoginSubmitDidFail:function(c){this.$loginForm=$(".js-ShutterConnect-form");if(c&&c.responseJSON){this.$loginForm.find("input").removeClass("error");this.$loginForm.find("[data-error-for]").empty();_.each(c.responseJSON.ModelState,function(d,e){this.formValidation(e,d[0])}.bind(this))}},formValidation:function(i,h){if(i==="Form"){var f=this.$loginForm.find("input[name='Password']");var e=this.$loginForm.find("input[name='Email']");var c=this.$loginForm.find("span[data-error-for='Password']");f.addClass("error");e.addClass("error");c.text(h)}else{var g=i.split(".")[1];var d=this.$loginForm.find("input[name='Password']");var c=this.$loginForm.find("span[data-error-for="+g+"]");d.addClass("error");c.text(h)}},remoteLoginSubmit:function(d){d.preventDefault();var c=$(d.currentTarget).serialize();var f={type:"POST",url:a.config.secureUrl+"/api/login/rest/v2",data:c,xhrFields:{withCredentials:true},beforeSend:function(e){e.setRequestHeader("Authorization","Basic 23A17F49D34DE16BC85AB395F");e.setRequestHeader("X-Requested-With","XMLHttpRequest")}};$.ajax(f).done(this.remoteLoginSubmitDone).fail(this.remoteLoginSubmitDidFail)},moveUp:function(c){c.preventDefault();var f=navigator.userAgent||navigator.vendor||window.opera;if(f.match(/iPad/i)||f.match(/iPhone/i)||f.match(/iPod/i)){f="iOS"}else{if(f.match(/Android/i)){f="Android"}}if(f==="Android"){if(window.innerWidth>window.innerHeight){$(".Shutter-connect label").hide();if(event.target.classList.contains("user_name")){var d="-230px";$(".Shutter-account").css("margin-top",d)}}}},render:function(){if(this.$button.length){if(this.visible){this.$button.addClass("Menu-sub-open")}else{this.$button.removeClass("Menu-sub-open")}}if(this.model.get("error")){this._renderError()}else{this._refreshContent(this.model,_.noop)}}});a.Views.HeaderTabAccountView=b})(window.Fnac);;void function(a){var b=a.Views.HeaderMasterTabView.extend({initialize:function(c){this.visible=c.visible||false;var d=c.$button.find("a").data("panel");this.model=new a.Models.HeaderTab({tabName:d});this.$button=c.$button;this.listenTo(this.model,"change",this.render);_.bindAll(this,"render","_contentRefreshed")},forceToRefreshContent:function(){if(this.model){this.model.unset("html")}},events:{"click .js-findMe":"findMe"},findMe:function(){if(!a.Utils.userIsIdentified()&&!a.Utils.userIsGeolocated()){a.Utils.geolocate().then(_.bind(function(c){a.App.trigger("geoloc:update",{pos:c,success:_.bind(function(){this.model.set("tabName","store-geo");this.model.fetch()},this)});this.render()},this),_.bind(function(c){this.$el.find(".js-findMe").addClass("hide")},this))}},render:function(){if(this.$button.length){if(this.visible){this.$button.addClass("Menu-sub-open")}else{this.$button.removeClass("Menu-sub-open")}}if(this.model.get("error")){this._renderError()}else{this._refreshContent(this.model,this._contentRefreshed)}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&"https:"!=document.location.protocol){this.$el.find(".js-findMe").addClass("hide")}},_contentRefreshed:function(){}});a.Views.HeaderTabStoreView=b}(Fnac);;(function(a){var b=a.Views.HeaderMasterTabView.extend({initialize:function(d){this.name=d.name;this.$button=d.$button;this.visible=d.visible||false;this.model=new a.Models.HeaderTab({tabName:"help"});var c=$(".js-Chat");if(c.length){this.chatView=new a.Views.ChatView({el:c})}_.bind(this.render,this);_.bind(this._contentRefreshed,this);this.listenTo(this.model,"change",this.render)},render:function(){if(this.$button.length){if(this.visible){this.$button.addClass("Menu-sub-open")}else{this.$button.removeClass("Menu-sub-open")}}if(this.model.get("error")){this._renderError()}else{this._refreshContent(this.model,this._contentRefreshed)}},_contentRefreshed:function(){a.Utils.twitterTimeline()}});a.Views.HeaderTabHelpView=b})(Fnac);;(function(b,a,d){var c=a.View.extend({tagName:"li",template:'<div class="a-c_list">{{ search }}<i class="icon"></i></div>',events:{touchstart:"select",mousedown:"select",click:"select"},initialize:function(e){this.options=e},select:function(f){f.preventDefault();f.stopImmediatePropagation();this.options.parent.trigger("chosen",this.model)},render:function(){var e=d.compile(this.template).render(this.model.attributes);this.$el.html(e);return this}});b.Views.HeaderSearchHistoryItemView=c})(window.Fnac,window.Backbone,window.Hogan);;(function(b,a,g){var f;var e;var d=$("html").attr("lang");switch(d){case"nl-BE":f="Je recente zoekopdrachten";e="Uitwissen";break;case"es-ES":f="Sus búsquedas recientes";e="Borrar";break;case"pt-PT":f="As tuas últimas pesquisas";e="Apagar";break;default:f="Vos dernières recherches";e="Effacer"}var c=a.View.extend({tagName:"nav",className:"a-c_results a-c_history",template:'<header class="a-c_grouptitle"><a href="#" id="f-js-clear-history">'+e+"</a><p>"+f+"</p></header><ul></ul>",wasRender:false,events:{"mousedown #f-js-clear-history":"clearHistory"},initialize:function(h){_.extend(this,h);this.input.focus($.proxy(this.display,this)).keyup($.proxy(this.display,this)).keydown(_.bind(this.keydown,this));this.on("chosen",this.select,this)},render:function(){this.$el.empty();this.$el.append(this.template);this.collection.each(function(h){this.$el.find("ul").prepend(new b.Views.HeaderSearchHistoryItemView({model:h,parent:this}).render().$el)}.bind(this));this.input.after(this.$el).blur($.proxy(this.blur,this));this.wasRender=true;return this},display:function(){if(this.collection.length==0){return}var h=this.input.val();if(h.length===0){(!this.wasRender)?this.render().show():this.show()}else{this.hide()}},blur:function(){this.hide()},keydown:function(h){if(h.keyCode==38){return this.move(-1)}if(h.keyCode==40){return this.move(+1)}if(h.keyCode==13){return this.onEnter()}if(h.keyCode==27){return this.onEchap()}},move:function(j){var h=this.$el.find("ul").children("li.a-c_over"),k=this.$el.find("ul").children("li"),i=h.index()+j;i=(i==k.length)?0:i;if(k.eq(i).length){h.removeClass("a-c_over");k.eq(i).addClass("a-c_over")}return false},onEnter:function(){if(this.$el.find("ul").children("li.a-c_over").length>0){this.$el.find("ul").children("li.a-c_over").click();return false}},onEchap:function(){this.hide();this.$el.parent().children("input").blur();return false},addTracking:function(){var h='<input type="hidden" name="omnsearchtype" value="4" />';this.input.parents("form").append(h)},select:function(h){if(!this.$el.is(":visible")){return}this.addTracking();this.input.val(h.attributes.search);var i=this.input.parents("form").find(".realSelect");i.find(":selected").prop("selected",false);i.find('option[value="'+h.attributes.cat+'"]').prop("selected",true);$.cookie("usf",h.attributes.cat.split("!")[0],{path:b.config.cookiesPath,domain:b.config.cookiesHostname});this.input.parents("form").submit();this.input.blur();this.hide()},show:function(){b.App.trigger("history:show");b.App.trigger("overlay:show",{noSpinner:true});this.$el.show();return this},hide:function(){this.$el.hide();return this},clearHistory:function(){_.invoke(this.collection.toArray(),"destroy");this.trigger("clear")}});b.Views.HeaderSearchHistoryView=c})(window.Fnac,window.Backbone,window.Mustache);;(function(a){var b=Backbone.View.extend({initialize:function(){this.isOpened=false;this.$close=this.$(".js-HeaderSearch-close");this.$content=this.$(".Header-search");this.$open=this.$(".js-HeaderSearch-open");this.$searchField=this.$(".js-HeaderSearch-input");this.$searchClear=this.$(".js-HeaderSearch-inputClear");this.$searchSubmit=this.$(".js-btSubmit");this.$tabs=this.$(".Header-tabs");this.$searchPlaceholder=this.$searchField.data("placeholder",this.$searchField.attr("placeholder"));a.Services.Storage.init({iframeUrl:$("meta[name=localstorageiframe]").attr("content"),initCallback:function(){a.Services.Storage.get("searchHistory",function(c){var e=[];if(Array.isArray(c.value)){_.each(c.value,function(f){e.push(f)})}if(this.$searchField.val()!==""){e.push({cat:this.$content.find(".realSelect").val(),search:this.$searchField.val().toLowerCase()})}e=_.uniq(e,function(f,g,h){return f.search}).slice(-5);a.Services.Storage.set("searchHistory",e);var d=new a.Views.HeaderSearchHistoryView({collection:new Backbone.Collection(e),input:this.$searchField});d.on("clear",function(){a.Services.Storage.clear()})}.bind(this))}.bind(this)});_.bindAll(this,"close","open","resize","debouncedChange");$(window).on("resize",this.resize);if(document.cookie.search(/usf=\d+;/)!==-1){this.loadLastSearch()}},events:{"click      .js-HeaderSearch-open":"open","click      .js-HeaderSearch-close":"close","keyup      .js-HeaderSearch-input":"keyUp","click      .js-HeaderSearch-inputClear":"clear","blur       .js-HeaderSearch-input":"placeholderReset","focus      .js-HeaderSearch-input":"placeholderClear"},change:function(c){if($(c.currentTarget).val().length>=1){this.$searchSubmit.addClass("btSubmit-send")}else{this.$searchSubmit.removeClass("btSubmit-send")}},keyUp:function(c){this.showCrossClear(c);this.debouncedChange(c)},debouncedChange:function(c){return this.change(c)},resize:function(){if(this.isOpened){this.isOpened=false}},open:function(){this.isOpened=true;this.render()},close:function(){this.isOpened=false;this.render()},loadLastSearch:function(){var c=0;if(window.location.href.search(/\/SearchResult\//)===-1){this.$('.contain > li[data-value="'+c+'!1"]').trigger("click");this.$(".fake-box").removeClass("actived");this.$(".contain").addClass("hide")}else{if(window.location.href.search(/SCat=/)!==-1){c=document.cookie.match(/usf=(\d+);/)[1]}else{document.cookie=document.cookie.replace(/usf=(\d+);/,"usf="+c+";")}this.$('.contain > li[data-value="'+c+'!1"]').trigger("click");this.$(".fake-box").removeClass("actived");this.$(".contain").addClass("hide")}},render:function(){this.$content.toggleClass("active");this.$open.parent().toggleClass("isHidden");if(!this.isOpened){this.$searchField.focus()}},showCrossClear:function(){if(this.$searchField.val().length>0){a.App.trigger("overlay:show",{noSpinner:true});this.$searchClear.addClass("on")}else{this.$searchClear.removeClass("on");this.placeholderClear()}},clear:function(){this.$searchField.val("").change();this.$searchClear.removeClass("on")},placeholderClear:function(){if(this.$searchField.val().length==0){this.$searchField.attr("placeholder","")}},placeholderReset:function(){this.$searchField.attr("placeholder",this.$searchField.data("placeholder"))}});a.Views.HeaderSearchView=b})(Fnac);;(function(b,a){var d=a.View.extend({initialize:function(e){this.data={};_.bindAll(this,"basketOneclickAddDone","basketOneclickAddDidFail","onBasketOneClickAuth","renderError");this.listenTo(b.App,"popupOneclick:open",this.basketAddOneClick)},basketOneclickAddDidFail:function(f){if(f.status==302){window.location=xhr.getResponseHeader("Location")}else{b.App.trigger("overlay:hide");b.App.trigger("flashmessage:show")}},basketOneclickAddDone:function(e,h,f){var g=f.getResponseHeader("Location");if(typeof g!="undefined"&&g!==null){window.location=g}else{$.magnificPopup.open({preloader:true,closeBtnInside:true,items:{src:e,type:"inline",fixedContentPos:true,overflowY:"hidden"},callbacks:{open:this.onBasketOneClickAuth}})}},basketAddOneClick:function(e){var f={url:b.config.cartOneclickUrl,type:"POST",data:e,xhrFields:{withCredentials:true},contentType:"application/json",headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Basic 23A17F49D34DE16BC85AB395F"}};$.ajax(f).done(this.basketOneclickAddDone).fail(this.basketOneclickAddDidFail)},onBasketOneClickAuth:function(){var e=$(".js-Popover");if(e.length){$(".js-Popover").popover()}$(".f-js-LoginPopin-signIn").on("submit",function(g){g.preventDefault();var f=$(g.currentTarget);f.find("input").removeClass("input-validation-error");f.find("[data-valmsg-for]").each(function(k,j){$(j).empty()});var h={url:b.config.secureUrl+"/api/login/rest/v2",method:"POST",data:$(g.currentTarget).serialize(),xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest",Authorization:"Basic 23A17F49D34DE16BC85AB395F"}};$.ajax(h).done(function(){var i=$(".f-js-LoginPopin-signIn");if(i.length){window.location=i.attr("action")}else{var j=$("a[data-one-click]").attr("href")||b.config.cartOneclickUrl;window.location=j}}.bind(this)).fail(function(i){var j=i.responseJSON.ModelState||[];_.each(j,function(k,l){this.renderError(f,l,k)}.bind(this))}.bind(this))}.bind(this))},renderError:function(e,i,j){var k=j[0];if(i==="Form"){var g=e.find("span[data-valmsg-for='form']");g.html("<span for='form' generated='true' class>"+k+"</span>");e.find("input").addClass("input-validation-error")}else{var h=i.replace("loginViewModel.","");var g=e.find("div[data-valmsg-for="+h+"]");var f=e.find("input[name="+h+"]");g.html('<span for="'+h+'" generated="true" class>'+k+"</span>").addClass("field-validation-error");f.addClass("input-validation-error")}}});var c=null;d.init=function(){c=c||new d();return c};b.Views.PopupOneClickView=d})(window.Fnac,Backbone);;(function(d,a){var c=a.View.extend({model:null,initialize:function e(g){this.renderOptions={initTemplate:false};_.bindAll(this,"initializeMap");this.geoloc=g.geoloc;this.initializeMap()},initializeMap:function f(){d.Services.mapService.on("load:desktop",function(){var i=b(this.geoloc);var g=d.Services.mapService.create(this.$el.find(".js-map")[0]);g.setView({center:i,zoom:14});var h=new Microsoft.Maps.Pushpin(i,{icon:d.Services.mapService.icon({type:"relay",selected:true})});g.entities.push(h)}.bind(this));d.Services.mapService.load("desktop")}});function b(g){if(typeof g=="undefined"&&g===""){console.error("<!> geoloc is empty or null");return null}var i=g.substr(1,g.length-2);var h=i.split(",");var j=new Microsoft.Maps.Location(h[0],h[1]);return j}d.Views.Account.DeliveryAddressMapPopin=c})(window.Fnac,window.Backbone);;(function(e,a){var c;var g=a.View.extend({initialize:function f(){this.$el.find(".js-showMapPopinButton").magnificPopup({type:"inline",midClick:true,callbacks:{open:function h(){b($.magnificPopup.instance.content,$.magnificPopup.instance.currItem.el)},afterClose:d}})}});e.Views.Account.OrdersList=g;function b(i,h){if(i.length){c=new e.Views.Account.DeliveryAddressMapPopin({el:i,pushpin:h.data("pushpin")||"",geoloc:h.data("geoloc")||"",shopId:h.data("shopid"),relayId:h.data("relayid")})}}function d(){if(c){c.stopListening();c.undelegateEvents()}}})(window.Fnac,window.Backbone);;void function(b){var a=Backbone.View.extend({initialize:function(){this.isActive=false},events:{"click .js-togglebestSales":"render",},render:function(c){switch(this.isActive){case true:this.$el.removeClass("isActive");this.isActive=false;break;case false:this.$el.addClass("isActive");this.isActive=true;break;default:this.isActive=false}}});b.Views.BestSalesView=a}(window.Fnac);;/* nouislider - 8.5.1 - 2016-04-24 16:00:29 */
(function(a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports==="object"){module.exports=a()}else{window.noUiSlider=a()}}}(function(){function R(S){return S.filter(function(T){return !this[T]?this[T]=true:false},{})}function d(T,S){return Math.round(T/S)*S}function u(U){var W=U.getBoundingClientRect(),S=U.ownerDocument,T=S.documentElement,V=l();if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){V.x=0}return{top:W.top+V.y-T.clientTop,left:W.left+V.x-T.clientLeft}}function r(S){return typeof S==="number"&&!isNaN(S)&&isFinite(S)}function b(U,S,T){a(U,S);setTimeout(function(){v(U,S)},T)}function t(S){return Math.max(Math.min(S,100),0)}function c(S){return Array.isArray(S)?S:[S]}function f(S){var T=S.split(".");return T.length>1?T[1].length:0}function a(T,S){if(T.classList){T.classList.add(S)}else{T.className+=" "+S}}function v(T,S){if(T.classList){T.classList.remove(S)}else{T.className=T.className.replace(new RegExp("(^|\\b)"+S.split(" ").join("|")+"(\\b|$)","gi")," ")}}function p(T,S){return T.classList?T.classList.contains(S):new RegExp("\\b"+S+"\\b").test(T.className)}function l(){var T=window.pageXOffset!==undefined,S=((document.compatMode||"")==="CSS1Compat"),U=T?window.pageXOffset:S?document.documentElement.scrollLeft:document.body.scrollLeft,V=T?window.pageYOffset:S?document.documentElement.scrollTop:document.body.scrollTop;return{x:U,y:V}}function j(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function x(S,T){return(100/(T-S))}function h(S,T){return(T*100)/(S[1]-S[0])}function P(S,T){return h(S,S[0]<0?T+Math.abs(S[0]):T-S[0])}function s(S,T){return((T*(S[1]-S[0]))/100)+S[0]}function k(U,S){var T=1;while(U>=S[T]){T+=1}return T}function Q(Z,Y,W){if(W>=Z.slice(-1)[0]){return 100}var S=k(W,Z),V,X,T,U;V=Z[S-1];X=Z[S];T=Y[S-1];U=Y[S];return T+(P([V,X],W)/x(T,U))}function i(Z,Y,W){if(W>=100){return Z.slice(-1)[0]}var S=k(W,Y),V,X,T,U;V=Z[S-1];X=Z[S];T=Y[S-1];U=Y[S];return s([V,X],(W-T)*x(T,U))}function m(X,Y,V,W){if(W===100){return W}var U=k(W,X),S,T;if(V){S=X[U-1];T=X[U];if((W-S)>((T-S)/2)){return T}return S}if(!Y[U-1]){return W}return X[U-1]+d(W-X[U-1],Y[U-1])}function n(S,V,U){var T;if(typeof V==="number"){V=[V]}if(Object.prototype.toString.call(V)!=="[object Array]"){throw new Error("noUiSlider: 'range' contains invalid value.")}if(S==="min"){T=0}else{if(S==="max"){T=100}else{T=parseFloat(S)}}if(!r(T)||!r(V[0])){throw new Error("noUiSlider: 'range' value isn't numeric.")}U.xPct.push(T);U.xVal.push(V[0]);if(!T){if(!isNaN(V[1])){U.xSteps[0]=V[1]}}else{U.xSteps.push(isNaN(V[1])?false:V[1])}}function o(S,T,U){if(!T){return true}U.xSteps[S]=h([U.xVal[S],U.xVal[S+1]],T)/x(U.xPct[S],U.xPct[S+1])}function w(T,X,S,W){this.xPct=[];this.xVal=[];this.xSteps=[W||false];this.xNumSteps=[false];this.snap=X;this.direction=S;var U,V=[];for(U in T){if(T.hasOwnProperty(U)){V.push([T[U],U])}}if(V.length&&typeof V[0][0]==="object"){V.sort(function(Y,Z){return Y[0][0]-Z[0][0]})}else{V.sort(function(Y,Z){return Y[0]-Z[0]})}for(U=0;U<V.length;U++){n(V[U][1],V[U][0],this)}this.xNumSteps=this.xSteps.slice(0);for(U=0;U<this.xNumSteps.length;U++){o(U,this.xNumSteps[U],this)}}w.prototype.getMargin=function(S){return this.xPct.length===2?h(this.xVal,S):false};w.prototype.toStepping=function(S){S=Q(this.xVal,this.xPct,S);if(this.direction){S=100-S}return S};w.prototype.fromStepping=function(S){if(this.direction){S=100-S}return i(this.xVal,this.xPct,S)};w.prototype.getStep=function(S){if(this.direction){S=100-S}S=m(this.xPct,this.xSteps,this.snap,S);if(this.direction){S=100-S}return S};w.prototype.getApplicableStep=function(U){var S=k(U,this.xPct),T=U===100?2:1;return[this.xNumSteps[S-2],this.xVal[S-T],this.xNumSteps[S-T]]};w.prototype.convert=function(S){return this.getStep(this.toStepping(S))};var g={to:function(S){return S!==undefined&&S.toFixed(2)},from:Number};function N(T,S){if(!r(S)){throw new Error("noUiSlider: 'step' is not numeric.")}T.singleStep=S}function K(T,S){if(typeof S!=="object"||Array.isArray(S)){throw new Error("noUiSlider: 'range' is not an object.")}if(S.min===undefined||S.max===undefined){throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.")}if(S.min===S.max){throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.")}T.spectrum=new w(S,T.snap,T.dir,T.singleStep)}function M(T,S){S=c(S);if(!Array.isArray(S)||!S.length||S.length>2){throw new Error("noUiSlider: 'start' option is incorrect.")}T.handles=S.length;T.start=S}function L(T,S){T.snap=S;if(typeof S!=="boolean"){throw new Error("noUiSlider: 'snap' option must be a boolean.")}}function y(T,S){T.animate=S;if(typeof S!=="boolean"){throw new Error("noUiSlider: 'animate' option must be a boolean.")}}function z(T,S){T.animationDuration=S;if(typeof S!=="number"){throw new Error("noUiSlider: 'animationDuration' option must be a number.")}}function B(T,S){if(S==="lower"&&T.handles===1){T.connect=1}else{if(S==="upper"&&T.handles===1){T.connect=2}else{if(S===true&&T.handles===2){T.connect=3}else{if(S===false){T.connect=0}else{throw new Error("noUiSlider: 'connect' option doesn't match handle count.")}}}}}function J(T,S){switch(S){case"horizontal":T.ort=0;break;case"vertical":T.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function H(T,S){if(!r(S)){throw new Error("noUiSlider: 'margin' option must be numeric.")}if(S===0){return}T.margin=T.spectrum.getMargin(S);if(!T.margin){throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}}function G(T,S){if(!r(S)){throw new Error("noUiSlider: 'limit' option must be numeric.")}T.limit=T.spectrum.getMargin(S);if(!T.limit){throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}}function E(T,S){switch(S){case"ltr":T.dir=0;break;case"rtl":T.dir=1;T.connect=[0,2,1,3][T.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function A(W,T){if(typeof T!=="string"){throw new Error("noUiSlider: 'behaviour' must be a string containing options.")}var Y=T.indexOf("tap")>=0,S=T.indexOf("drag")>=0,U=T.indexOf("fixed")>=0,X=T.indexOf("snap")>=0,V=T.indexOf("hover")>=0;if(S&&!W.connect){throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.")}W.events={tap:Y||X,drag:S,fixed:U,snap:X,hover:V}}function O(U,S){var T;if(S===false){return}else{if(S===true){U.tooltips=[];for(T=0;T<U.handles;T++){U.tooltips.push(true)}}else{U.tooltips=c(S);if(U.tooltips.length!==U.handles){throw new Error("noUiSlider: must pass a formatter for all handles.")}U.tooltips.forEach(function(V){if(typeof V!=="boolean"&&(typeof V!=="object"||typeof V.to!=="function")){throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}})}}}function F(T,S){T.format=S;if(typeof S.to==="function"&&typeof S.from==="function"){return true}throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function D(T,S){if(S!==undefined&&typeof S!=="string"&&S!==false){throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.")}T.cssPrefix=S}function C(U,S){if(S!==undefined&&typeof S!=="object"){throw new Error("noUiSlider: 'cssClasses' must be an object.")}if(typeof U.cssPrefix==="string"){U.cssClasses={};for(var T in S){if(!S.hasOwnProperty(T)){continue}U.cssClasses[T]=U.cssPrefix+S[T]}}else{U.cssClasses=S}}function I(T){var U={margin:0,limit:0,animate:true,animationDuration:300,format:g},V;V={step:{r:false,t:N},start:{r:true,t:M},connect:{r:true,t:B},direction:{r:true,t:E},snap:{r:false,t:L},animate:{r:false,t:y},animationDuration:{r:false,t:z},range:{r:true,t:K},orientation:{r:false,t:J},margin:{r:false,t:H},limit:{r:false,t:G},behaviour:{r:true,t:A},format:{r:false,t:F},tooltips:{r:false,t:O},cssPrefix:{r:false,t:D},cssClasses:{r:false,t:C}};var S={connect:false,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",stacking:"stacking",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};Object.keys(V).forEach(function(W){if(T[W]===undefined&&S[W]===undefined){if(V[W].r){throw new Error("noUiSlider: '"+W+"' is required.")}return true}V[W].t(U,T[W]===undefined?S[W]:T[W])});U.pips=T.pips;U.style=U.ort?"top":"left";return U}function e(aG,ap,aq){var S=j(),aA=aG,ax=[-1,-1],au,aw,az=ap.spectrum,aB=[],av={},ay;function al(aL,aM,aP){var aN=aL+aM[0],aO=aL+aM[1];if(aP){if(aN<0){aO+=Math.abs(aN)}if(aO>100){aN-=(aO-100)}return[t(aN),t(aO)]}return[aN,aO]}function ah(aL,aO){aL.preventDefault();var aQ=aL.type.indexOf("touch")===0,aN=aL.type.indexOf("mouse")===0,aP=aL.type.indexOf("pointer")===0,aR,aS,aM=aL;if(aL.type.indexOf("MSPointer")===0){aP=true}if(aQ){aR=aL.changedTouches[0].pageX;aS=aL.changedTouches[0].pageY}aO=aO||l();if(aN||aP){aR=aL.clientX+aO.x;aS=aL.clientY+aO.y}aM.pageOffset=aO;aM.points=[aR,aS];aM.cursor=aN||aP;return aM}function U(aM,aO){var aP=document.createElement("div"),aN=document.createElement("div"),aL=[ap.cssClasses.handleLower,ap.cssClasses.handleUpper];if(aM){aL.reverse()}a(aN,ap.cssClasses.handle);a(aN,aL[aO]);a(aP,ap.cssClasses.origin);aP.appendChild(aN);return aP}function T(aL,aN,aM){switch(aL){case 1:a(aN,ap.cssClasses.connect);a(aM[0],ap.cssClasses.background);break;case 3:a(aM[1],ap.cssClasses.background);case 2:a(aM[0],ap.cssClasses.connect);case 0:a(aN,ap.cssClasses.background);break}}function V(aP,aM,aL){var aO,aN=[];for(aO=0;aO<aP;aO+=1){aN.push(aL.appendChild(U(aM,aO)))}return aN}function X(aL,aN,aO){a(aO,ap.cssClasses.target);if(aL===0){a(aO,ap.cssClasses.ltr)}else{a(aO,ap.cssClasses.rtl)}if(aN===0){a(aO,ap.cssClasses.horizontal)}else{a(aO,ap.cssClasses.vertical)}var aM=document.createElement("div");a(aM,ap.cssClasses.base);aO.appendChild(aM);return aM}function Y(aM,aN){if(!ap.tooltips[aN]){return false}var aL=document.createElement("div");aL.className=ap.cssClasses.tooltip;return aM.firstChild.appendChild(aL)}function aH(){if(ap.dir){ap.tooltips.reverse()}var aL=aw.map(Y);if(ap.dir){aL.reverse();ap.tooltips.reverse()}ab("update",function(aM,aN,aO){if(aL[aN]){aL[aN].innerHTML=ap.tooltips[aN]===true?aM[aN]:ap.tooltips[aN].to(aO[aN])}})}function ak(aM,aQ,aO){if(aM==="range"||aM==="steps"){return az.xVal}if(aM==="count"){var aN=(100/(aQ-1)),aP,aL=0;aQ=[];while((aP=aL++*aN)<=100){aQ.push(aP)}aM="positions"}if(aM==="positions"){return aQ.map(function(aR){return az.fromStepping(aO?az.getStep(aR):aR)})}if(aM==="values"){if(aO){return aQ.map(function(aR){return az.fromStepping(az.getStep(az.toStepping(aR)))})}return aQ}}function ai(aL,aS,aN){function aV(aX,aW){return(aX+aW).toFixed(7)/1}var aT=az.direction,aQ={},aM=az.xVal[0],aR=az.xVal[az.xVal.length-1],aO=false,aP=false,aU=0;az.direction=0;aN=R(aN.slice().sort(function(aW,aX){return aW-aX}));if(aN[0]!==aM){aN.unshift(aM);aO=true}if(aN[aN.length-1]!==aR){aN.push(aR);aP=true}aN.forEach(function(aW,aZ){var a6,aY,a4,a0=aW,aX=aN[aZ+1],a1,a2,a3,a9,a7,a5,a8;if(aS==="steps"){a6=az.xNumSteps[aZ]}if(!a6){a6=aX-a0}if(a0===false||aX===undefined){return}for(aY=a0;aY<=aX;aY=aV(aY,a6)){a1=az.toStepping(aY);a2=a1-aU;a7=a2/aL;a5=Math.round(a7);a8=a2/a5;for(a4=1;a4<=a5;a4+=1){a3=aU+(a4*a8);aQ[a3.toFixed(5)]=["x",0]}a9=(aN.indexOf(aY)>-1)?1:(aS==="steps"?2:0);if(!aZ&&aO){a9=0}if(!(aY===aX&&aP)){aQ[a1.toFixed(5)]=[aY,a9]}aU=a1}});az.direction=aT;return aQ}function W(aU,aN,aO){var aM=document.createElement("div"),aT="",aW=[ap.cssClasses.valueNormal,ap.cssClasses.valueLarge,ap.cssClasses.valueSub],aS=[ap.cssClasses.markerNormal,ap.cssClasses.markerLarge,ap.cssClasses.markerSub],aV=[ap.cssClasses.valueHorizontal,ap.cssClasses.valueVertical],aR=[ap.cssClasses.markerHorizontal,ap.cssClasses.markerVertical];a(aM,ap.cssClasses.pips);a(aM,ap.ort===0?ap.cssClasses.pipsHorizontal:ap.cssClasses.pipsVertical);function aP(a1,a0){var aX=a0===ap.cssClasses.value,aY=aX?aV:aR,aZ=aX?aW:aS;return a0+" "+aY[ap.ort]+" "+aZ[a1]}function aQ(aX,aY,aZ){return'class="'+aP(aZ[1],aY)+'" style="'+ap.style+": "+aX+'%"'}function aL(aX,aY){if(az.direction){aX=100-aX}aY[1]=(aY[1]&&aN)?aN(aY[0],aY[1]):aY[1];aT+="<div "+aQ(aX,ap.cssClasses.marker,aY)+"></div>";if(aY[1]){aT+="<div "+aQ(aX,ap.cssClasses.value,aY)+">"+aO.to(aY[0])+"</div>"}}Object.keys(aU).forEach(function(aX){aL(aX,aU[aX])});aM.innerHTML=aT;return aM}function ar(aO){var aQ=aO.mode,aL=aO.density||1,aM=aO.filter||false,aT=aO.values||false,aS=aO.stepped||false,aP=ak(aQ,aT,aS),aR=ai(aL,aQ,aP),aN=aO.format||{to:Math.round};return aA.appendChild(W(aR,aM,aN))}function aa(){var aM=au.getBoundingClientRect(),aL="offset"+["Width","Height"][ap.ort];return ap.ort===0?(aM.width||au[aL]):(aM.height||au[aL])}function ag(aL,aM,aO){var aN;for(aN=0;aN<ap.handles;aN++){if(ax[aN]===-1){return}}if(aM!==undefined&&ap.handles!==1){aM=Math.abs(aM-ap.dir)}Object.keys(av).forEach(function(aQ){var aP=aQ.split(".")[0];if(aL===aP){av[aQ].forEach(function(aR){aR.call(ay,c(aJ()),aM,c(an(Array.prototype.slice.call(aB))),aO||false,ax)})}})}function an(aL){if(aL.length===1){return aL[0]}if(ap.dir){return aL.reverse()}return aL}function Z(aO,aN,aL,aM){var aP=function(aR){if(aA.hasAttribute("disabled")){return false}if(p(aA,ap.cssClasses.tap)){return false}aR=ah(aR,aM.pageOffset);if(aO===S.start&&aR.buttons!==undefined&&aR.buttons>1){return false}if(aM.hover&&aR.buttons){return false}aR.calcPoint=aR.points[ap.ort];aL(aR,aM)},aQ=[];aO.split(" ").forEach(function(aR){aN.addEventListener(aR,aP,false);aQ.push([aR,aP])});return aQ}function ao(aM,aL){if(navigator.appVersion.indexOf("MSIE 9")===-1&&aM.buttons===0&&aL.buttonsProperty!==0){return ae(aM,aL)}var aO=aL.handles||aw,aQ,aS=false,aR=((aM.calcPoint-aL.start)*100)/aL.baseSize,aN=aO[0]===aw[0]?0:1,aP;aQ=al(aR,aL.positions,aO.length>1);aS=aC(aO[0],aQ[aN],aO.length===1);if(aO.length>1){aS=aC(aO[1],aQ[aN?0:1],false)||aS;if(aS){for(aP=0;aP<aL.handles.length;aP++){ag("slide",aP)}}}else{if(aS){ag("slide",aN)}}}function ae(aO,aN){var aL=au.querySelector("."+ap.cssClasses.active),aP=aN.handles[0]===aw[0]?0:1;if(aL!==null){v(aL,ap.cssClasses.active)}if(aO.cursor){document.body.style.cursor="";document.body.removeEventListener("selectstart",document.body.noUiListener)}var aM=document.documentElement;aM.noUiListeners.forEach(function(aQ){aM.removeEventListener(aQ[0],aQ[1])});v(aA,ap.cssClasses.drag);ag("set",aP);ag("change",aP);if(aN.handleNumber!==undefined){ag("end",aN.handleNumber)}}function ad(aM,aL){if(aM.type==="mouseout"&&aM.target.nodeName==="HTML"&&aM.relatedTarget===null){ae(aM,aL)}}function aE(aO,aM){var aL=document.documentElement;if(aM.handles.length===1){if(aM.handles[0].hasAttribute("disabled")){return false}a(aM.handles[0].children[0],ap.cssClasses.active)}aO.preventDefault();aO.stopPropagation();var aQ=Z(S.move,aL,ao,{start:aO.calcPoint,baseSize:aa(),pageOffset:aO.pageOffset,handles:aM.handles,handleNumber:aM.handleNumber,buttonsProperty:aO.buttons,positions:[ax[0],ax[aw.length-1]]}),aN=Z(S.end,aL,ae,{handles:aM.handles,handleNumber:aM.handleNumber});var aR=Z("mouseout",aL,ad,{handles:aM.handles,handleNumber:aM.handleNumber});aL.noUiListeners=aQ.concat(aN,aR);if(aO.cursor){document.body.style.cursor=getComputedStyle(aO.target).cursor;if(aw.length>1){a(aA,ap.cssClasses.drag)}var aP=function(){return false};document.body.noUiListener=aP;document.body.addEventListener("selectstart",aP,false)}if(aM.handleNumber!==undefined){ag("start",aM.handleNumber)}}function aF(aL){var aN=aL.calcPoint,aP=0,aM,aO;aL.stopPropagation();aw.forEach(function(aQ){aP+=u(aQ)[ap.style]});aM=(aN<aP/2||aw.length===1)?0:1;if(aw[aM].hasAttribute("disabled")){aM=aM?0:1}aN-=u(au)[ap.style];aO=(aN*100)/aa();if(!ap.events.snap){b(aA,ap.cssClasses.tap,ap.animationDuration)}if(aw[aM].hasAttribute("disabled")){return false}aC(aw[aM],aO);ag("slide",aM,true);ag("set",aM,true);ag("change",aM,true);if(ap.events.snap){aE(aL,{handles:[aw[aM]]})}}function am(aL){var aM=aL.calcPoint-u(au)[ap.style],aN=az.getStep((aM*100)/aa()),aO=az.fromStepping(aN);Object.keys(av).forEach(function(aP){if("hover"===aP.split(".")[0]){av[aP].forEach(function(aQ){aQ.call(ay,aO)})}})}function af(aL){if(!aL.fixed){aw.forEach(function(aN,aO){Z(S.start,aN.children[0],aE,{handles:[aN],handleNumber:aO})})}if(aL.tap){Z(S.start,au,aF,{handles:aw})}if(aL.hover){Z(S.move,au,am,{hover:true})}if(aL.drag){var aM=[au.querySelector("."+ap.cssClasses.connect)];a(aM[0],ap.cssClasses.draggable);if(aL.fixed){aM.push(aw[(aM[0]===aw[0]?1:0)].children[0])}aM.forEach(function(aN){Z(S.start,aN,aE,{handles:aw})})}}function aC(aL,aP,aO){var aQ=aL!==aw[0]?1:0,aN=ax[0]+ap.margin,aS=ax[1]-ap.margin,aM=ax[0]+ap.limit,aR=ax[1]-ap.limit;if(aw.length>1){aP=aQ?Math.max(aP,aN):Math.min(aP,aS)}if(aO!==false&&ap.limit&&aw.length>1){aP=aQ?Math.min(aP,aM):Math.max(aP,aR)}aP=az.getStep(aP);aP=t(aP);if(aP===ax[aQ]){return false}if(window.requestAnimationFrame){window.requestAnimationFrame(function(){aL.style[ap.style]=aP+"%"})}else{aL.style[ap.style]=aP+"%"}if(!aL.previousSibling){v(aL,ap.cssClasses.stacking);if(aP>50){a(aL,ap.cssClasses.stacking)}}ax[aQ]=aP;aB[aQ]=az.fromStepping(aP);ag("update",aQ);return true}function aD(aL,aP){var aM,aO,aN;if(ap.limit){aL+=1}for(aM=0;aM<aL;aM+=1){aO=aM%2;aN=aP[aO];if(aN!==null&&aN!==false){if(typeof aN==="number"){aN=String(aN)}aN=ap.format.from(aN);if(aN===false||isNaN(aN)||aC(aw[aO],az.toStepping(aN),aM===(3-ap.dir))===false){ag("update",aO)}}}}function aK(aO,aM){var aL,aP=c(aO),aN;aM=(aM===undefined?true:!!aM);if(ap.dir&&ap.handles>1){aP.reverse()}if(ap.animate&&ax[0]!==-1){b(aA,ap.cssClasses.tap,ap.animationDuration)}aL=aw.length>1?3:1;if(aP.length===1){aL=1}aD(aL,aP);for(aN=0;aN<aw.length;aN++){if(aP[aN]!==null&&aM){ag("set",aN)}}}function aJ(){var aL,aM=[];for(aL=0;aL<ap.handles;aL+=1){aM[aL]=ap.format.to(aB[aL])}return an(aM)}function ac(){for(var aL in ap.cssClasses){if(!ap.cssClasses.hasOwnProperty(aL)){continue}v(aA,ap.cssClasses[aL])}while(aA.firstChild){aA.removeChild(aA.firstChild)}delete aA.noUiSlider}function aj(){var aL=ax.map(function(aP,aO){var aR=az.getApplicableStep(aP),aS=f(String(aR[2])),aT=aB[aO],aN=aP===100?null:aR[2],aQ=Number((aT-aR[2]).toFixed(aS)),aM=aP===0?null:(aQ>=aR[1])?aR[2]:(aR[0]||false);return[aM,aN]});return an(aL)}function ab(aM,aL){av[aM]=av[aM]||[];av[aM].push(aL);if(aM.split(".")[0]==="update"){aw.forEach(function(aN,aO){ag("update",aO)})}}function at(aN){var aL=aN&&aN.split(".")[0],aM=aL&&aN.substring(aL.length);Object.keys(av).forEach(function(aO){var aP=aO.split(".")[0],aQ=aO.substring(aP.length);if((!aL||aL===aP)&&(!aM||aM===aQ)){delete av[aO]}})}function aI(aN,aL){var aO=aJ(),aM=I({start:[0,0],margin:aN.margin,limit:aN.limit,step:aN.step===undefined?ap.singleStep:aN.step,range:aN.range,animate:aN.animate,snap:aN.snap===undefined?ap.snap:aN.snap});["margin","limit","range","animate"].forEach(function(aP){if(aN[aP]!==undefined){ap[aP]=aN[aP]}});aM.spectrum.direction=az.direction;az=aM.spectrum;ax=[-1,-1];aK(aN.start||aO,aL)}if(aA.noUiSlider){throw new Error("Slider was already initialized.")}au=X(ap.dir,ap.ort,aA);aw=V(ap.handles,ap.dir,au);T(ap.connect,aA,aw);if(ap.pips){ar(ap.pips)}if(ap.tooltips){aH()}ay={destroy:ac,steps:aj,on:ab,off:at,get:aJ,set:aK,updateOptions:aI,options:aq,target:aA,pips:ar};af(ap.events);return ay}function q(V,T){if(!V.nodeName){throw new Error("noUiSlider.create requires a single element.")
}var S=I(T,V),U=e(V,S,T);U.set(S.start);V.noUiSlider=U;return U}return{create:q}}));;(function(b,a,d){var c=Backbone.View.extend({initialize:function(){this.data=window.LaboChartViewData||{};this.$canvas=this.$el.find("canvas");var l=this.$el.attr("data-chart-type");var i=JSON.parse(this.$el.attr("data-chart-params"));var h=this.$el.attr("data-chart-tooltip");var g=this.$el.attr("data-chart-scalelabel");var f=this.$canvas[0].getContext("2d");var e={};if(l!=="Radar"){var j=[];i.datasets.forEach(function(m){j.push(_.max(m.data,function(n){return n}))});var k=Math.round(_.max(j));e.scaleSteps=5;e.scaleStepWidth=(20*k)/100;e.scaleStartValue=0}if(h){e.tooltipTemplate=window.tooltipTemplates[h]}if(g){e.scaleLabel=window.scaleLabels[g]}new a(f)[l](i,e)}});b.Views.LaboChartView=c})(window.Fnac,window.Chart);;"use strict";(function(d,c,b,a,e){d.Views.LaboComparativeTable=c.View.extend({filters:[["Modèle d'objectif","Ouverture","Focale (en mm)","Focale équivalente au 24x36 (en mm)","Variation zoom optique"],["Mise au point mini (cm)","Coefficient multiplicateur pour focale 24x36","Diamètre du filtre avec objectif testé","Stabilisateur (Capteur/Optique)",],["Format du capteur","Nombre de pixels effectifs (Mpix)","Sensibilité ISO","Type de détection","Dispositif anti-poussières"],["Diagonale écran (en cm)","Nombre de points sur l’écran","Ecran tactile","Ecran orientable",],["Résolution du viseur","Couverture du viseur",],["Type de carte mémoire"],["Résolution maximale","Ratio largeur:hauteur","Cadence en rafale","Définition maximale","Mise au point (AF) et exposition auto (AE) en vidéo","Prise de son","Entrée micro ext. stéréo jack","Format de compression vidéo"],["Flash intégré","GPS intégré","Wi-Fi","NFC","Sortie vidéo composite","Sortie mini HDMI","Autonomie norme CIPA","Poids du boitier","Dimensions"]],renderOptions:{selectedTableIndex:1,selectedColumnIndex:null},events:{"click .js-ComparativeItem":"onClickItem"},initialize:function(){this.$allTables=this.$el.find(".LaboComparativeTable-table table");this.mainSelect=new e({el:this.$el.find("#LaboMainHeader")[0],className:"select-theme-default"});this.subSelect=new e({el:this.$el.find("#LaboSubHeader")[0],className:"select-theme-dark"});this.mainSelect.on("change",b.bind(function(f){this.renderOptions.selectedTableIndex=Number(f.value);a(this.subSelect.select).empty();var h=this.filters[this.renderOptions.selectedTableIndex-1];for(var g=0;g<h.length;++g){a(this.subSelect.select).append(a("<option>",{value:g+1,text:h[g]}))}this.subSelect.update();this.subSelect.change("1")},this));this.subSelect.on("change",b.bind(function(f){this.renderOptions.selectedColumnIndex=Number(f.value);this.render()},this));this.mainSelect.change("1")},render:function(){this.$allTables.removeClass("LaboComparativeTable-table--active");if(this.renderOptions.selectedTableIndex){var g=this.$el.find('.LaboComparativeTable-table table[data-comparative-group="'+this.renderOptions.selectedTableIndex+'"]');g.addClass("LaboComparativeTable-table--active");this.$el.find(".LaboComparativeTable-filtersItem--active").removeClass("LaboComparativeTable-filtersItem--active");this.$el.find('.js-ComparativeItem[data-comparative-item="'+this.renderOptions.selectedTableIndex+'"]').addClass("LaboComparativeTable-filtersItem--active");if(this.renderOptions.selectedColumnIndex){var f=g.find(".LaboComparativeTable-Col");f.removeClass("LaboComparativeTable-Col--active");var h=g.find('.LaboComparativeTable-Col[data-col="'+this.renderOptions.selectedColumnIndex+'"]');h.addClass("LaboComparativeTable-Col--active")}}},onClickItem:function(f){var g=a(f.currentTarget).data("comparative-item").toString();this.mainSelect.change(g)}})})(Fnac,Backbone,_,$,Select);;(function(c,b,a){var d=b.View.extend({renderOptions:{displayDefinition:null},initialize:function(){a.bindAll(this,"calculateNbElementOnRow","onResize");this.$laboLexiconItems=this.$el.find(".LaboLexicon-item");for(var f=0;f<this.$laboLexiconItems.length;++f){var e=$(this.$laboLexiconItems[f]);e.attr("data-index",(f+1).toString())}this.attachResize()},attachResize:function(){$(window).on("resize",this.onResize)},onResize:function(f){if(this.renderOptions.displayDefinition){this.calculateDisplayDefinition(this.renderOptions.displayDefinition.$clickedItem);this.render()}},events:{"click .LaboLexicon-item":"toggleAnswer"},toggleAnswer:function(i){i.preventDefault();var f=$(i.currentTarget);if(f.length){var g=$(f[0]);var h=g.data("index");if(this.renderOptions.displayDefinition&&this.renderOptions.displayDefinition.index===h){this.renderOptions.displayDefinition=null;this.render();return}this.calculateDisplayDefinition(g);this.render()}},remove:function(){$(window).off("resize",this.onResize)},calculateDisplayDefinition:function(e){var h=this.calculateNbElementOnRow(e);var f=e.data("index");var i=Math.floor(f/h);if(f%h!==0){++i}var g=Number(i*h)-1;this.renderOptions.displayDefinition={index:f,nbElementsByRow:h,$clickedItem:e,definition:e.find(".LaboLexicon-answer").html(),afterItem:$(this.$laboLexiconItems[g])}},calculateNbElementOnRow:function(f){var e=this.$el.find(".js-PubliAccordion");var g=Number(e.width()/f.width());var h=Math.floor(g);return h},render:function(){if(this.renderOptions.displayDefinition){this.$el.find(".js-Definition").remove();this.$el.find(".LaboLexicon-item--active").removeClass("LaboLexicon-item--active");var f="";switch(this.renderOptions.displayDefinition.nbElementsByRow){case 1:f="col-xs-24";break;case 2:f="col-sm-24";break;default:f="col-lg-24";break}var e=$(['<div class="LaboLexicon-definition js-Definition '+f+'">',this.renderOptions.displayDefinition.definition,"</div>"].join(""));e.insertAfter(this.renderOptions.displayDefinition.afterItem);$(this.renderOptions.displayDefinition.$clickedItem).addClass("LaboLexicon-item--active")}else{this.$el.find(".js-Definition").remove();this.$el.find(".LaboLexicon-item--active").removeClass("LaboLexicon-item--active")}},});c.Views.LaboGlossaryView=d})(window.Fnac,Backbone,_);;(function(a){var b=Backbone.View.extend({ACTIVE_CLASSES:{checkbox:"LaboGridFilters-checkbox--active",},initialize:function(){},events:{"click .js-LaboGridFilter-toggle":"toggleFilters","click .js-LaboGridFilter-checkbox":"filterByCheckbox"},toggleFilters:function(){},filterByCheckbox:function(){}});a.Views.LaboGridFiltersView=b})(window.Fnac);;(function(c,g,d,i){var f=c.Collections.LaboProducts;var h=Hogan.compile(["{{^ products }}",'<div class="LaboGrid-noProduct">Aucun produit ne correspond à votre recherche</div>',"{{/ products }}",'<ul class="row LaboGrid js-LaboGrid-list">',"{{# products }}",'<li class="col-xs-12 col-sm-8 col-md-6">','<a href="{{ uri }}" class="LaboGrid-item js-LaboGridItem">','<div class="LaboGrid-itemImage">','<img src="http://www4-fr.fnac-static.com/nav/images/dot.gif" data-lazyimage="{{ picture }}" class="img-responsive js-LazyImage">',"</div>",'<div class="LaboGrid-itemTitle">{{ name }}</div>',"</a>","</li>","{{/ products }}","</ul>"].join(""));var a=Hogan.compile(['<li class="LaboGridFilters-square js-LaboGridFilters-boolBox" data-filter-name="{{ name }}" data-filter-value="1">',"<span>Oui</span>","</li>",'<li class="LaboGridFilters-square js-LaboGridFilters-boolBox" data-filter-name="{{ name }}" data-filter-value="0">',"<span>Non</span>","</li>"].join(""));var b=Hogan.compile(["{{# values }}",'<li class="LaboGridFilters-square js-LaboGridFilters-checkBox" data-filter-name="{{ name }}" data-filter-value="{{ . }}">',"<span>{{ . }}</span>","</li>","{{/ values }}",].join(""));var e=Backbone.View.extend({initialize:function(){this.$products=this.$(".js-LaboGrid-list");this.filtersNames={boolbox:_.map(this.el.querySelectorAll(".js-LaboGridFilters-boolBoxes"),function(j){return j.getAttribute("data-filter-name")}),checkbox:_.map(this.el.querySelectorAll(".js-LaboGridFilters-checkBoxes"),function(j){return j.getAttribute("data-filter-name")}),range:_.map(this.el.querySelectorAll(".js-RangeSlider"),function(j){return j.getAttribute("data-filter-name")})};this.filters={};this.isFirstTime=true;this.products=new f(this.$products.data("products"));this.rangeFilters={};this.listenTo(c.App,"rangeSlider:change",this.updateRangeFilter);this.generateFiltersData()},generateFiltersData:function(){var j={};_.each(this.filtersNames.boolbox,function(k){j[k+"s"]=[true,false]}.bind(this));_.each(this.filtersNames.checkbox,function(k){j[k+"s"]=this.products.getUniqListOf(k)}.bind(this));_.each(this.filtersNames.range,function(k){j[k+"List"]=this.products.getUniqListOf(k)}.bind(this));this.render(j)},events:{"click .js-LaboGrid-toggleFilters":"toggle","click .js-LaboGridFilters-boolBox, .js-LaboGridFilters-checkBox":"toggleFilter","click .js-LaboGridFilter-reset":"reset","click .js-LaboGridFilters-moreButton, .js-LaboGridFilters-lessButton":"toggleAdditionalFilters","click .js-LaboGridFilters-resetButton":"resetFilters",},toggleAdditionalFilters:function(){this.$(".js-LaboGridFilters-lessButton, .js-LaboGridFilters-moreButton").toggleClass("LaboGridFiltersBtn--active");this.$(".js-LaboGridFiltersWrap").toggleClass("LaboGridFiltersWrap--active")},toggle:function(){this.$el.toggleClass("LaboGridFilters--expanded")},toggleFilter:function(k){var j=$(k.currentTarget);var l=j.data("filterName");var m=j.data("filterValue");if(j.hasClass("js-LaboGridFilters-boolBox")){m=!!Number(m)}if(this.getFilter(l,m)){this.removeFilter(l,m);j.removeClass("LaboGridFilters-square--active")}else{this.addFilter(l,m);j.addClass("LaboGridFilters-square--active")}this.render()},updateRangeFilter:function(j){this.rangeFilters[j.name]={minValue:j.minValue,maxValue:j.maxValue};this.render()},resetFilters:function(){this.filters={};this.rangeFilters={};$(".LaboGridFilters-square--active").removeClass("LaboGridFilters-square--active");_.each($(".js-RangeSlider"),function(j){j.noUiSlider.set([0,1000])});this.render()},getFilter:function(j,k){return !!(this.filters[j]&&this.filters[j].indexOf(k)!==-1)},addFilter:function(j,k){if(this.filters[j]){this.filters[j].push(k)}else{this.filters[j]=[k]}},removeFilter:function(j,k){if(this.filters[j].length===1){delete this.filters[j]}else{this.filters[j].splice(this.filters[j].indexOf(k),1)}},render:function(j){if(this.isFirstTime){var l=this.el.querySelectorAll(".js-RangeSlider");_.each(l,function(q){var p=q.getAttribute("data-filter-name");var n=j[p+"List"];var o=n.length-1;g.create(q,{start:[0,o],step:1,connect:true,range:{min:0,max:o}});var m=$(".js-LaboGridFilter-"+p);q.noUiSlider.on("update",function(t,r){var s=(m.data("symbol"))?m.data("symbol"):"";m.find(".sliderMinSelector").text(n[parseInt(t[0])]+s);m.find(".sliderMaxSelector").text(n[parseInt(t[1])]+s)});q.noUiSlider.on("set",function(s,r){c.App.trigger("rangeSlider:change",{name:p,minValue:n[parseInt(s[0])],maxValue:n[parseInt(s[1])]})})}.bind(this));_.each(this.filtersNames.boolbox,function(m){this.$(".js-LaboGridFilter-"+m).html(a.render({name:m}))}.bind(this));_.each(this.filtersNames.checkbox,function(m){this.$(".js-LaboGridFilter-"+m).html(b.render({name:m,values:j[m+"s"]}))}.bind(this));this.isFirstTime=false}var k=this.products.filterBy(this.filters,this.rangeFilters);this.$products.html(h.render({products:k.toJSON()}));c.App.trigger("lazyimage:render",{context:this.el})}});c.Views.LaboGridView=e})(window.Fnac,window.noUiSlider);;void function(b,a){var c=Backbone.View.extend({classNames:{hide:"hide",selected:"selected"},renderOptions:{conditions:{searchKeyPressed:false,showSearchInputValidator:false,showZipCodeValidator:false,showGeocodingError:false,isAvailableFilter:false,retreatOneHourFilter:false,storesListFilter:{refresh:false,replaceHtml:false}},elements:{$openStoreElement:null}},events:{"click .js-ProductRetreat-popup":"showProductRetreatPopup"},stores:[],initialize:function(d){_.bindAll(this,"onSearchInputEnterKeyPress","onSearchInputKeyUp","onStoreInfoClicked","onShlefComboChange","onRetreatOneHourChange","onClickHeartStore","_searchAjaxRequestSuccess","_searchAjaxRequestFail");this.withdrawalStore=new a.Models.WithdrawalStore();this.listenTo(a.App,"withdrawalStorePopin:init",this.initializePopup);this.listenTo(this.withdrawalStore,"change",this.render)},initializePopup:function(d){this.articles=[];if(d){this.favoriteStoreCallback=d.favoriteStoreUpdateSuccess;this.articles=d.articles||[];this.pageType=d.pageType||""}this.$link=this.$el.find(".js-ProductRetreat-popup")},showProductRetreatPopup:function(g){g.preventDefault();var d=$(g.currentTarget);var h=this._replaceURL(d);var f;a.App.trigger("overlay:show");$.ajax({url:h,}).success(_.bind(function(e){a.App.trigger("overlay:hide");var i=$.magnificPopup.instance;$.magnificPopup.open({items:{src:e,type:"inline"},callbacks:{elementParse:_.bind(function(k){var j=d.parents(".js-ProductBuy");if(j.length){this.catalog=j.data("catalogId")}else{this.catalog=d.parents(".Article-item").find(".js-ProductBuy").data("catalogId")}},this),open:_.bind(function(){this.popupWillLoad();this.popupDidLoad()},this),}})},this)).error(function(){a.App.trigger("overlay:hide");console.error("Une erreur est survenue, veuillez réesssayer ultérieurement.")})},saveFavoriteStore:function(f){var e=this;if(this.articles.length===0){this.articles.push({prid:this.prid.toString(),catalog:this.catalog.toString()})}var d={storeId:f,articles:this.articles,pageType:this.pageType};this.withdrawalStore.clear({silent:true});this.withdrawalStore.save(d,{error:this._onFetchError,success:function(g){$.magnificPopup.instance.close();if(e.favoriteStoreCallback){e.favoriteStoreCallback(g.changed)}}})},popupWillLoad:function(){this.$popinContent=$(".mfp-content");var e=$("#ProducIdForOmniture");var d=$("#IsMpForOmniture");if(d.length&&e.length){b.trackActionNewFARef(d.val().toLocaleLowerCase()=="true","StoreReclaimPopin",e.val(),1)}},popupDidLoad:function(){if(this.$popinContent.length){this.$prid=this.$popinContent.find("#hidPrid");if(this.$prid.length){this.prid=Number(this.$prid.val())}this.attachEvents(this.$popinContent);var d=this.$popinContent.find(".Favori");if(d.length){var f=$(d.parents(".liCol_1")[0]).find(".storeName").text();var e=this.$popinContent.find("#txtCityOrZipCode");e.val(f)}}},launchSearch:function(){var e=this;this.renderOptions.conditions.showSearchInputValidator=false;this.renderOptions.conditions.showZipCodeValidator=false;if(this.search===""){this.renderOptions.conditions.showSearchInputValidator=true;return}var d=this._getSearchData();this.getLocationWithGeocodeApiAsync().done(function(f){d.data.Latitude=f.Latitude;d.data.Longitude=f.Longitude;e._sendSearchStoreAjaxRequest(d.url,d.data)}).fail(function(f){e.renderOptions.conditions.showZipCodeValidator=true;e.renderOptions.conditions.showGeocodingError=true;e.render()})},getLocationWithGeocodeApiAsync:function(){var d=$.Deferred();a.Services.mapService.geocode(this.search,{},"nav_search_mag").then(function(e){if(_.isEmpty(e)){d.reject()}else{d.resolve(e)}},function(e){d.reject(e)});return d.promise()},_onFetchError:function(d){$.magnificPopup.instance.close();a.App.trigger("flashmessage:show")},_trackSearchOmniture:function(g){if(b.s_gi){var d=$(".ResultRetreatStorePopin li");var e=d.length-1;var f=s_gi(s_account);f.linkTrackVars="events,eVar26,eVar27,eVar28";f.linkTrackEvents="event5";f.events="event5";f.eVar28="Recherche manuelle";f.eVar26=g;f.eVar27=e.toString();f.tl(this,"o","Recherche store Locator")}},_isMyScriptLoaded:function(f){var e=document.getElementsByTagName("script");for(var d=e.length;d--;){if(e[d].src===f){return true}}return false},_replaceURL:function(d){this.url=d.attr("data-url");this.coords=null;if($.cookie("GeoCoords")){var e=$.cookie("GeoCoords").split(":");this.coords={};this.coords.lat=e[0];this.coords.lng=e[1]}if(this.coords){this.url=d.attr("data-url")+"&lat="+this.coords.lat+"&lng="+this.coords.lng}d.attr("href",this.url);return this.url},_getSearchData:function(){var f=$("#hidGoogleAPIEnable");var g=$("#hidSearchStoreUrl");var h=g.val();var e=$("#chkOnShlef");var d=$("#chkIsRetreatOneHour");return{url:h,data:{InputValue:this.search||"",Latitude:0,Longitude:0,Prid:this.prid,OnShlef:Boolean(e.is(":checked")),IsRetreatOneHour:Boolean(d.is(":checked"))}}},_sendSearchStoreAjaxRequest:function(f,d){var e=this;return $.ajax({url:f,type:"POST",data:d,success:function(g){e._trackSearchOmniture(d.InputValue);e._searchAjaxRequestSuccess(g)},fail:e._searchAjaxRequestFail})},_searchAjaxRequestSuccess:function(d){this.stores=d;this.renderOptions.conditions.storesListFilter.replaceHtml=true;this.renderOptions.conditions.storesListFilter.refresh=true;this.render()},_searchAjaxRequestFail:function(){this.stores=[];this.renderOptions.conditions.storesListFilter.replaceHtml=true;this.renderOptions.conditions.storesListFilter.refresh=true;this.render()},render:function(){if(this.renderOptions.conditions.showGeocodingError){var h=this.$("#ulResultRetreatStorePopin");h.html('<div class="txt_c no_brd black_bold"></div>');this.$(".StoreSearch").addClass("error");this.renderOptions.conditions.showGeocodingError=false;return}else{this.$(".StoreSearch").removeClass("error")}if(this.renderOptions.conditions.searchKeyPressed){this.renderOptions.conditions.searchKeyPressed=false;var e=$("#btnClearInput");if(e.length){if(this.search===""){e.addClass(this.classNames.hide)}else{e.removeClass(this.classNames.hide)}}}if(this.renderOptions.elements.$openStoreElement){this._toggleStoreDetails(this.renderOptions.elements.$openStoreElement);this.renderOptions.elements.$openStoreElement=null}this._displayValidators();if(this.renderOptions.conditions.storesListFilter.refresh){this.renderOptions.conditions.storesListFilter.refresh=false;this._refreshStores(this.renderOptions.conditions.isAvailableFilter,this.renderOptions.conditions.retreatOneHourFilter,this.renderOptions.conditions.storesListFilter.replaceHtml);this.renderOptions.conditions.storesListFilter.replaceHtml=false}if(this.withdrawalStore.changed.headerHtml){var d=this.$el.find(".js-StoreContainer");d.html(this.withdrawalStore.get("headerHtml"))}if(this.withdrawalStore.changed.availabilities&&this.withdrawalStore.changed.availabilities.length===1){var g=this.$link.parents(".thumbnail-actionItem");if(g.length){var i=this.withdrawalStore.get("availabilities")[0];g.html(i.html)}}if(this.withdrawalStore.changed.buyboxHtml){var f=this.$link.parents(".js-ProductRetreat");if(f.length){f.replaceWith(this.withdrawalStore.get("buyboxHtml"))}}},_refreshStores:function(g,i,h){var f=this.classNames.hide;var e=$("#ulResultRetreatStorePopin");if(e.length){if(!this.stores){if(h){e.html("")}return}if(h){e.html(this.stores)}var d=e.find(".liStore");d.each(function(){var j=$(this);var k=j.find(".icon_i_102_check_03").length?true:false;var l=j.find(".retreatStore-btn").length?true:false;if((g&&!k)||(i&&!l)){j.addClass(f)}else{if(j.hasClass(f)){j.removeClass(f)}}})}},_displayValidators:function(f){var f=this.$("#ulResultRetreatStorePopin");var d=$("#spanInputValueValidator");if(d.length){if(this.renderOptions.conditions.showSearchInputValidator){d.show();f.html('<div class="txt_c no_brd black_bold"></div>')}else{d.hide()}}var e=$("#spanZipCodeValidator");if(e.length){if(this.renderOptions.conditions.showZipCodeValidator){e.show();f.html('<div class="txt_c no_brd black_bold"></div>')}else{e.hide()}}},_toggleStoreDetails:function(e){var g=this.classNames.hide;if(e.length){var f=e.find(".divStoreDetail");if(f.length){var d=this.$popinContent.find(".divStoreDetail");if(d.length){var h=f.hasClass(g);d.addClass(g);if(h){f.removeClass(g)}else{f.addClass(g)}}}}},attachEvents:function(d){var e=d.find(".liStore");d.on("click",".divStoreInfo",this.onStoreInfoClicked);d.on("click","#btnClearInput ",this.onClearInputClicked);d.on("click",".nonFavori",this.onClickHeartStore);d.on("change","#chkOnShlef",_.debounce(this.onShlefComboChange,300));d.on("change","#chkIsRetreatOneHour ",_.debounce(this.onRetreatOneHourChange,300));d.on("keypress","#txtCityOrZipCode",this.onSearchInputEnterKeyPress);d.on("click","#btnSearchStore",this.onSearchInputKeyUp)},onClickHeartStore:function(e){e.preventDefault();e.stopPropagation();var d=$(e.target);var f=$(d.parents(".liStore")[0]).data("storeid");this.saveFavoriteStore(f)},onRetreatOneHourChange:function(e){var d=$(e.target);this.renderOptions.conditions.retreatOneHourFilter=d.is(":checked");this.renderOptions.conditions.storesListFilter.refresh=true;this.renderOptions.conditions.storesListFilter.replaceHtml=false;this.render()},onShlefComboChange:function(e){var d=$(e.target);this.renderOptions.conditions.isAvailableFilter=d.is(":checked");this.renderOptions.conditions.storesListFilter.refresh=true;this.renderOptions.conditions.storesListFilter.replaceHtml=false;this.render()},onSearchInputEnterKeyPress:function(d){var e=d.which;if(e==13){this.onSearchInputKeyUp(d)}},onSearchInputKeyUp:function(e){var d=$("#ulResultRetreatStorePopin");if(d.length){d.html('<div class="txt_c no_brd black_bold">Chargement...</div>')}this.search=$("#txtCityOrZipCode").val();this.launchSearch();this.render()},onClearInputClicked:function(d){this.storeNameClicked=true;this.render()},onStoreInfoClicked:function(f){var e=$(f.target);if(e.length&&!e.hasClass("ArticleOrder")){var d;if(e.hasClass("liStore")){d=e}else{var g=e.parents(".liStore");if(g.length){d=$(g[0])}}this.renderOptions.elements.$openStoreElement=d;this.render()}}});a.Views.WithdrawalStorePopupView=c}(window,Fnac);;void function(c,a){var b=Backbone.View.extend({showPopup:function(f){f.preventDefault();var g=$(this).data("url");var d={key:"terradata",items:{src:"<div class='container-iframe'><iframe src="+g+" class='mfp-content--iframe' width='834' height='650'  scrolling='no' frameborder='0' cellspadding='0' cellsmargin='0'></iframe><div class='close closeIframe'></div></div>"},type:"inline"};$.magnificPopup.open(d);return false},initialize:function(d){$("body").on("click",".js-ProductRetreat-popup-teradata",this.showPopup)},v_ean:"0000000000000",sUrl:"http://multichannel.fnac.es/?id=000000",jsonpCallback:function(d){if(d.valueOf()>0){var e=$('<a class="reservar_tienda" href="#"><img src="http://www.fnac.es/img/es-ES/boutons/boton_recogidatienda_v3.png"></a>');$("div.blk_inside.filled.pdg_v.txt_c").append(e);e.bind("click",function(f){this.showPopup()})}},getButton:function(){var h="16023";var g=["11001","13002","16004"];var e=$.inArray(h,g);var f=["14_fiches_fiche_article_pt","27_marketplace_liste_d_offres_pt"];var d=$.inArray(tc_vars.template_name,f);if(d!=="-1"||e!=="-1"){if(tc_vars.product_vendor=="fnac"&&tc_vars.product_stock=="yes"){sUrl="http://multichannel.fnac.es/?id="+tc_vars.product_id;v_ean="6947681528932";if(v_ean==="0000000000000"){$("body").find("span").each(function(k){var i=$(this).attr("itemprop");if(typeof i!=="undefined"&&i!==false){if(i=="productID"){var j=$(this).attr("content");if(typeof j!=="undefined"&&j!==false){v_ean=j}}}})}$.ajax({url:"http://multichannel.fnac.es/WSConsultaStockArticuloJSON/WSConsultaStockArticulo.asmx/FNAC_CST_ConsultaStock",data:{sEAN:v_ean},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpCallback"})}}}});a.Views.TeradataPopupView=b}(window,Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){this.price=this.$el.data("price");this.prid=this.$el.data("prid");this.catalogId=this.$el.data("catalog");this.offerId=this.$el.data("offerid");this.initEvents();_.bindAll(this,"shareWithFacebook","shareWithGoogle","shareWithTwitter","wishlistDropOpened","wishlistDropClosed");var c=$("html").first().hasClass("touch");if(c){this.createWishlistPopin()}else{this.createWishlistDrop()}},createWishlistDrop:function(){this.wishlistDrop=new Drop({target:document.querySelector("li.js-Wishlist"),content:'<div class="drop-view"><div></div></div>',classes:"drop-theme-arrows",position:"bottom center",openOn:"click"});this.wishlistDrop.on("open",this.wishlistDropOpened);this.wishlistDrop.on("close",this.wishlistDropClosed)},createWishlistPopin:function(){$("li.js-Wishlist").magnificPopup({fixedContentPos:false,midClick:true,items:{src:'<div class="wishlist-popup-content"></div>',type:"inline"},callbacks:{open:_.bind(function(){var c=Number(this.price.toString().replace(/,/g,"."));this.productWishlistView=new a.Views.ProductWishListView({catalogId:this.catalogId,price:c,offerId:this.offerId,prid:this.prid,baseTemplate:$("#wishlistThumbnailBaseTemplate").html(),template:$("#wishlistThumbnailTemplate").html(),el:$(".wishlist-popup-content"),displayCloseIcon:false})},this)}})},wishlistDropOpened:function(){var c=$(".drop-view div");if(!c.length){$(".drop-view").append("<div></div>");c=$(".drop-view div")}var d=Number(this.price.toString().replace(/,/g,"."));this.productWishlistView=new a.Views.ProductWishListView({catalogId:this.catalogId,price:d,offerId:this.offerId,prid:this.prid,baseTemplate:$("#wishlistThumbnailBaseTemplate").html(),template:$("#wishlistThumbnailTemplate").html(),el:c})},wishlistDropClosed:function(){if(this.productWishlistView){this.productWishlistView.remove()}},events:{"touch .js-Wishlist":"createWishlistPopin"},initEvents:function(){$(".tool-bar li.anonyme").on("click",this.redirectToLogon);$(document).on("click",".js-ProductToolbar-shareWithFacebook",this.shareWithFacebook);$(document).on("click",".js-ProductToolbar-shareWithGoogle",this.shareWithGoogle);$(document).on("click",".js-ProductToolbar-shareWithTwitter",this.shareWithTwitter)},redirectToLogon:function(){window.location=$(this).find("a").attr("href")},shareWithGoogle:function(){var c=document.location.href.match(/^[^\#\?]+/);var d="https://plus.google.com/share?url="+encodeURI(c);window.open(d,"FnacShare","width=500, height=500")},shareWithFacebook:function(){var c=document.location.href.match(/^[^\#\?]+/);var d="https://www.facebook.com/sharer/sharer.php?u="+encodeURI(c);window.open(d,"FnacShare","width=500, height=500")},shareWithTwitter:function(){var c=document.location.href.match(/^[^\#\?]+/);var d=$('meta[property="og:title"]').attr("content");var e="http://twitter.com/share?text="+encodeURI(d)+"%20%23fnac&url="+encodeURI(c);window.open(e,"FnacShare","width=500, height=255")},});a.Views.ProductToolbarView=b;$(document).ready(function(){$().popinManager({selector:".js-ProductToolbar-share",targetContent:"#socialToolbarContent",customPosition:true,toggle:true,groupBy:".tool-bar",relativePosition:{top:60,left:0},outerClose:true,callbackMethodAfterCreate:function(c,d){$(d.targetId).parent().width($("li",".tool-bar").width()*3)},callbackMethodOpen:function(c,d){$(c).parent().addClass("selected")},callbackMethodClose:function(c,d){$(c).parent().removeClass("selected")},zIndex:1});$().popinManager({selector:".js-ProductToolbar-shareModelPage",targetContent:"#socialToolbarContent",customPosition:true,toggle:true,groupBy:".tool-bar",relativePosition:{top:15,left:10},outerClose:true,callbackMethodAfterCreate:function(c,d){$(d.targetId).parent().width($("li",".tool-bar").width()*3)},callbackMethodOpen:function(c,d){$(c).parent().addClass("selected")},callbackMethodClose:function(c,d){$(c).parent().removeClass("selected")},zIndex:1});$().popinManager({selector:".js-alert",targetContent:"alertingToolbarContent",customPosition:true,relativePosition:{top:60,left:0},toggle:true,outerClose:true,groupBy:".tool-bar",callbackMethodAfterCreate:function(c,d){$(d.targetId).parent().width($("li",".tool-bar").width()*3)},callbackMethodOpen:function(d,e){$(d).parent().addClass("selected");var c=$("#ProducIdForOmniture");if(c.length>0){trackAlertingAction(c.val(),4,0)}},callbackMethodClose:function(c,d){$(c).parent().removeClass("selected")},zIndex:1});$().popinManager({selector:".open-popin-share-mail",targetContent:"sendMailZone",callbackMethodOpen:function(c,d){$("#FriendEmail1").focus()}})})}(Fnac);;void function(b,a){var c=Backbone.View.extend({initialize:function(){this.data=window.productChartViewData||{};this.$canvas=this.$el.find("canvas");new a(this.$canvas[0].getContext("2d")).Radar(this.data,{pointLabelFontColor:"rgba(199, 21, 133, 1)",pointLabelFontSize:14,pointLabelFontStyle:"bold"})}});b.Views.ProductChartView=c}(Fnac,Chart);;void function(b,a){var c=Backbone.View.extend({translations:{},initialize:function(d){this.translations.seeMore=this.$el.data("see-more");this.productReviewForm=new b.Models.ProductReviewForm();this.formView=new b.Views.ProductReviewFormView({el:this.$(".js-ProductReviewForm"),model:this.productReviewForm});this.listView=new b.Views.ProductReviewListView({el:this.$(".js-ProductReviewList")});this.listenTo(b.App,"reviews:truncate",this.truncateReviews);this.truncateReviews()},seeMoreTemplate:function(d,e){return'<div class="f-reviews-txt js-ShortReviewText"><span>'+d+'</span><span class="f-reviews-seeMore js-ReviewSeeMore" data-item-id="'+e+'">'+this.translations.seeMore+"</span></div>"},truncateReviews:function(){this.$(".js-ReviewText").each(function(e,g){var d=$(g);var f=d.text().trim();if(f.length>300){var i=[f.substr(0,300),"..."].join("");var h=a.uniqueId("review_");d.attr("id",h);$(this.seeMoreTemplate(i,h)).insertBefore(d);d.addClass("hide")}}.bind(this))},showFullReview:function(f){f.preventDefault();var d=$(f.currentTarget);var g=d.data("item-id");this.$("#"+g).removeClass("hide");d.parent(".js-ShortReviewText").remove()},events:{"click .js-ReviewSeeMore":"showFullReview","click .js-ProductReview-showForm":"showForm","click .js-ProductReviewTranslate-page":"translate","click .js-ProductReviewUnTranslate-page":"untranslate","click .js-black-blockShowMore":"showFullComment"},translate:function(){b.App.trigger("ProductReviewListView:translate")},untranslate:function(){b.App.trigger("ProductReviewListView:untranslate")},showFullComment:function(d){d.preventDefault();this.$(".js-black-blockParagraph").addClass("isVisible");this.$(".js-black-blockShowMore").removeClass("isVisible")},showForm:function(){b.App.trigger("productReview:showForm")}});b.Views.ProductReviewView=c}(window.Fnac,window._);;void function(a){var b=Backbone.View.extend({initialize:function(){}});a.Views.ProductReviewFormView=b}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(c){this.productURL=a.Utils.productURL();this.productPRID=a.Utils.productPRID();this.productCatalog=a.Utils.productCatalog();this.isTranslated="false";this.perPage=10;this.sortCritaria="created_at";this.listenTo(a.App,"ProductReviewListView:translate",this.translate);this.listenTo(a.App,"ProductReviewListView:untranslate",this.untranslate)},events:{"click .js-ProductReviewList-all":"all","click .js-ProductReviewList-page":"page","change .js-reviewsList-sort":"reviewsListSort",},reviewsListSort:function(c){var d=c.target.value;this.sortCritaria=d;this.fetch()},all:function(){this.fetch()},page:function(c){var d=$(c.currentTarget).data("page-number");this.pageNumber=d;this.fetch(d).then(function(){$("html, body").animate({scrollTop:$("#reviewsList").offset().top},600)})},translate:function(){var c=$(".js-ProductReviewTranslate").attr("page-number");this.isTranslated="true";this.fetch(c);this.fetchVersus(c)},untranslate:function(){var c=$(".js-ProductReviewTranslate").attr("page-number");this.isTranslated="false";this.fetch(c);this.fetchVersus(c)},fetchSuccess:function(c){this.$el.html(c.data.content.reviews.html);$(".js-ProductReviewTranslate").attr("page-number",this.pageNumber);$(".js-reviewsList-sort").val(this.sortCritaria);a.App.trigger("reviews:truncate");new Select({el:$(".js-reviewsList-sort")[0],className:"select-theme-chosen"})},fetchVersusSuccess:function(c){console.log(c.data.content.versus.htm);$(".js-ProductReviewVersus").html(c.data.content.versus.html)},fetchError:function(){},fetch:function(c){if(c===undefined){c=1}payload={data:{environment:{url:this.productURL,query:{},catalog:this.productCatalog,prid:this.productPRID}},update:{request:{type:"GetListReviews",value:c+"|"+this.perPage+"|"+this.isTranslated+"|"+this.sortCritaria}}};return $.ajax({url:a.config.pathname+"/api/product/v1/GetListReviews",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(payload),success:$.proxy(this.fetchSuccess,this),error:$.proxy(this.fetchError,this)})},fetchVersus:function(){if(page===undefined){page=1}payload={data:{environment:{url:this.productURL,query:{},catalog:this.productCatalog,prid:this.productPRID}},update:{request:{type:"GetVersusReviews",value:page+"|"+this.perPage+"|"+this.isTranslated+"|"+this.sortCritaria}}};$.ajax({url:GetWWWDOtNetPathRoot()+"/api/product/v1/GetVersusReviews",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(payload),success:$.proxy(this.fetchVersusSuccess,this),error:$.proxy(this.fetchVersusError,this)})}});a.Views.ProductReviewListView=b}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){this.dataUrl=null;var c=a.Utils.productCatalog();var f=a.Utils.productURL().split("?")[0];var e=a.Utils.productPRID();var d=a.Utils.productID();this.orderType=1;this.$currentControl=null;this.type=null;this.isBrand=false;this.isOccaz=false;this.key=this.$el.parent().children(".ProductSellers-tabControl").attr("data-url");if(this.key=="GetListBrandOffers"){this.type="listbrandoffers";this.isBrand=true}else{if(this.key=="GetOccasOffers"){this.type="listoccazoffers";this.isOccaz=true}}this.currentOfferType=null;this.getOfferList=new a.Models.ProductOfferList({catalog:c,id:d,prid:e,producturl:f,type:this.key,key:this.type,oref:"",});this.listenTo(this.getOfferList,"change",this.render)},events:{"click .js-Offer-list-pagination":"isPaginate","change .js-Offer-sort":"isSort"},render:function(){if(this.getOfferList.get("OfferHTML")){this.$currentControl.html(this.getOfferList.get("OfferHTML"));a.App.trigger("overlay:hide")}else{a.App.trigger("overlay:show");this.getOfferList.fetch()}},giveMecontrol:function(c){this.$currentControl=$(c.currentTarget).closest(".ProductSellers-tabContent")},isSort:function(g){this.giveMecontrol(g);if(this.key=="GetListBrandOffers"&&this.isBrand){var d=$(g.currentTarget).val();var c="10";var e="1";var f="1";this.getOfferList.set({brandpagenum:e,branditemsperpage:c,brandorder:d,brandstatus:f});this.getOfferList.fetch()}else{if(this.key=="GetOccasOffers"&&this.isOccaz){var i=$(g.currentTarget).val();this.orderType=i;var h="10";var j="1";var k="2";this.getOfferList.set({occazpagenum:j,occazitemsperpage:h,occazorder:i,occazstatus:k});this.getOfferList.fetch()}}},isPaginate:function(g){this.giveMecontrol(g);var c,d,e,f,h,i,j,k;if(this.key=="GetListBrandOffers"){j=0;h=0;e=$(g.currentTarget).attr("data-page-number");c=$(g.currentTarget).attr("data-itemperpage");k=0;i=0;f="1";d="7";this.getOfferList.set({type:this.type,key:this.key,brandpagenum:e,branditemsperpage:c,brandorder:d,brandstatus:f});this.getOfferList.fetch()}else{if(this.key=="GetOccasOffers"){e=0;c=0;j=$(g.currentTarget).attr("data-page-number");h=$(g.currentTarget).attr("data-itemperpage");f=0;d=0;k="2";i=this.orderType;this.getOfferList.set({type:this.type,key:this.key,occazpagenum:j,occazitemsperpage:h,occazorder:i,occazstatus:k});this.getOfferList.fetch()}}}});a.Views.ProductOfferListView=b}(window.Fnac);;(function(b,a){var e={ABOVE:"Sticky--above",BELOW:"Sticky--below",FIXED:"Sticky--fixed"};var d=0.5;var c=Backbone.View.extend({initialize:function(){this.productID=b.Utils.productPRID();this.catalogID=b.Utils.productCatalog();this.offerID=null;this.scrollDirection=null;this.headerHeight=a(".js-Header").eq(0).height();this.$node=this.$(".js-Sticky");this.$imageContainer=this.$(".js-Sticky-pics");this.$buttonContainer=this.$(".js-Sticky-buy");this.$listContainer=this.$(".js-Sticky-list");this.nodeHeight=this.$node.height();this.viewPort=a(window).height()-this.headerHeight;this.onResize();this.resizeEvery=_.bind(this.resizeEvery,this);this.resizeEvery(1000);this._onScroll();this._build();this._initializeEvents();this._initSize()},events:{"click .js-Sticky-anchor":"scrollToAnchor"},_initializeEvents:function(){this.listenTo(b.App,"productsticky:refresh",this.refresh);a(window).on("scroll.ProductStickyView",_.bind(this._onScroll,this)).on("scroll.ProductStickyView",_.throttle(_.bind(this.onThrottledScroll,this),100)).on("resize.ProductStickyView",_.debounce(_.bind(this.onResize,this),300))},_initSize:function(){if(this.nodeHeight>this.viewPort){a(".Sticky-pics").addClass("Sticky-pics--fixed");a(".Sticky-buy").removeClass("Sticky-buy--fixed");a(".Sticky-buy").addClass("Sticky-buy--absolute");a(".Sticky-list").addClass("Sticky-list--fixed");a(".js-Sticky ").css("top","0")}},scrollToAnchor:function(f){f.preventDefault();var g=a(f.target).attr("href");this.$node.find(".active").removeClass("active");a(f.currentTarget).addClass("active");a("html, body").stop().animate({scrollTop:a(g).offset().top-(this.headerHeight-1)},600,"swing")},resizeEvery:function(f){this.onResize();setTimeout(this.resizeEvery.bind(this,f),f)},onResize:function(){var f=this.$(".js-ProductStickyContainer");var g=f.offset().top;this.nodeHeight=this.$node.height();this.viewPort=a(window).height()-this.headerHeight;this.top=g-this.headerHeight;this.windowHeight=a(window).height();this.shouldBeSticky=true;this.containerEnd=(g+f.height()-this.nodeHeight-(this.headerHeight*2))},onThrottledScroll:function(){var k=0;this.st=a(window).scrollTop();if(this.st>this.lastScrollTop){this.scrollDirection="down"}else{this.scrollDirection="up"}this.lastScrollTop=this.st;var f=a(".js-Sticky a[href*='remote_']");var g=parseInt(a(".Main").eq(0).css("margin-top"));var m=a(window).scrollTop()+g+(a(window).height()-g)*d;for(var j=0;j<f.length;j++){var h="#remote_"+j;var l="#remote_"+(j+1);if(m>=a(h).offset().top&&((a(l).length==0)||m<(a(l).offset().top))){a(".js-Sticky a[href='"+h+"']").addClass("active")}else{a(".js-Sticky a[href='"+h+"']").removeClass("active")}}if(m+a(window).height()==a(document).height()){if(!a(".js-Sticky li:last-child a").hasClass("active")){a(".js-Sticky a[href='"+a(".active").data("href")+"']").removeClass("active");a(".js-Sticky li:last-child a").addClass("active")}}},_giveStickyDirection:function(h){var f=this.$(".js-ProductStickyContainer");var g=f.offset().top;var i=a(window).scrollTop();if(this.scrollDirection=="down"){this.scrollDif=i-g;this.maxSidebarScroll=this.nodeHeight-this.viewPort;a(".js-Sticky ").css("top","66px");if(i>g){if(this.scrollDif<this.maxSidebarScroll&&this.scrollDif<this.maxSidebarScroll){a(".js-Sticky ").css("top",66-this.scrollDif)}else{a(".js-Sticky ").css("top",66-this.maxSidebarScroll)}}if(h=="BELOW"){a(".js-Sticky ").css("top","auto");a(".Sticky-buy").addClass("Sticky-buy--hide")}}else{if(this.scrollDirection=="up"){this.scrollDif=i-g;this.maxSidebarScroll=this.nodeHeight-this.viewPort;if((i-this.scrollStart)<this.maxSidebarScroll){a(".js-Sticky ").css("top",(i-this.scrollStart));this.scrollStart=i}else{a(".js-Sticky ").css("top","66px")}if(h=="BELOW"){a(".js-Sticky ").css("top","auto");a(".Sticky-buy").addClass("Sticky-buy--hide")}}}},_onScroll:function(){var f=null;if(this.nodeHeight>this.viewPort){a(".Sticky-pics").addClass("Sticky-pics--fixed");a(".Sticky-buy").removeClass("Sticky-buy--fixed");a(".Sticky-buy").addClass("Sticky-buy--absolute");a(".Sticky-list").addClass("Sticky-list--fixed");a(".js-Sticky ").css("top","0")}if(this.shouldBeSticky){var g=b.Utils.getYOffset();if(g<this.top){f="ABOVE"}else{if(this.nodeHeight>this.viewPort){a(".Sticky-buy").addClass("Sticky-buy--fixed");a(".Sticky-buy").removeClass("Sticky-buy--hide");f=g>=this.containerEnd+this.maxSidebarScroll?"BELOW":"FIXED";this._giveStickyDirection(f)}else{f=g>=this.containerEnd?"BELOW":"FIXED"}}}else{if(this.nodeHeight>this.viewPort){a(".Sticky-buy").removeClass("Sticky-buy--fixed")}f="ABOVE"}if(this.state==f){return}this.state=f;this.render()},_buildImage:function(){var f=a(".js-ProductVisuals-imagePreview").clone(false);return f.first()},_buildButton:function(){var j=_.template("<button class='<%= buttonClass %>' data-omniture='<%= omniture %>' fnacidoffre='<%= offerID %>'><i class='<%= iconClass %>'></i><%= text %></button>");var k={};var f=null;var g=!!a(".ProductSellers-tabContent .js-ProductBuy-add:visible").size();var h=!!a(".ProductSellers-tabContent .js-ProductAlert-subscribe:visible").size();if(h){f=a(".js-CreateAlertingAvailability").clone(false);return f}else{if(g){f=a(".js-ProductBuy-add:visible:first");var i="";if(f.attr("data-omniture")){i="20"+f.attr("data-omniture").substring(1)}this.$(".js-Sticky-buy").attr("data-offer-id",f.attr("fnacidoffre"));k={offerID:f.attr("fnacidoffre"),text:a.trim(f.text()),buttonClass:f.attr("class"),iconClass:f.find("i").attr("class"),omniture:i};return j(k)}else{return""}}},_buildList:function(){var g=[];var h=_.template("<li><a class='js-Sticky-anchor' href='#remote_<%= index %>'><%= title %></a></li>");var f=_.template("<div class='js-Sticky-anchorTarget' id='remote_<%= index %>'></div>");_.each(a(".js-ProductSticky-title:visible"),function(i,j){var k=a.trim(i.textContent||i.innerText).toLowerCase();k=k.charAt(0).toUpperCase()+k.substring(1);g.push(h({index:j,title:k}));a(i).closest(".strate").before(f({index:j}))});this.$listContainer.html(g.join(""));if(a(".Sticky-list li").length>13){a(".Sticky-pics").addClass("Sticky-pics--noImg")}else{if(a(".Sticky-list li").length>8){a(".Sticky-pics").addClass("Sticky-pics--little")}}},_build:function(){this.$imageContainer.html(this._buildImage());this.$buttonContainer.html(this._buildButton());this.$listContainer.html(this._buildList())},refresh:function(){a(".js-Sticky-anchorTarget").remove();this.$imageContainer.empty();this.$buttonContainer.empty();this.$listContainer.empty();this.$buttonContainer.html(this._buildButton());this.$imageContainer.html(this._buildImage());this.$listContainer.html(this._buildList())},render:function(){this.$node.prop("className","js-Sticky Sticky "+e[this.state]);return this.$el}});b.Views.ProductStickyView=c})(Fnac,$);;(function(b){var a=b.config.cartAddUrl;var c=Backbone.View.extend({initialize:function(){if(b.Utils.isInstanciatedView("ProductBuyView",this)){return this}this.productId=this.$el.attr("data-product-id");this.catalogId=this.$el.attr("data-catalog-id")||"1";this.model=new b.Models.Basket();this.packProductIds=[];this.serviceIds=[];this.serviceProductIds=[];_.bindAll(this,"add","onAlertAddSuccess","onAlertAddError","onBasketAddSuccess","onBasketAddError","onBasketAddInlineSuccess","onBasketAddInlineError");this.listenTo(this.model,"change",function(){switch(this.model.get("state")){case"added":this.onBasketAddGuaranteeInlineSuccess();break}})},events:{"click .js-ProductBuy-add":"add","click .js-ProductBuy-addInline":"addInline","click .js-ProductBuy-addWithGuarantee":"addWithGuarantee","click .js-ProductBuy-addGuarantee":"addGuarantee","click .js-ProductAlert-subscribe":"addAlert"},onBasketAddSuccess:function(d){this.hideOverlay();this.updateCartCount();this.buildAndOpenPopup(d)},onBasketAddInlineSuccess:function(){var e=this.inBasketLabels[b.Utils.getLanguageCode()];var d=$("<div class='Action-btn BasketPopin-doneButton'><i class='icon icon_i_102_check_03'></i><span>"+e+"</span></div>");this.updateCartCount();this.$el.find(".js-ProductBuy-add, .js-ProductBuy-addInline").remove();this.$el.append(d)},inBasketLabels:{fr:"Dans le panier !",es:"¡En la cesta !",pt:"Adicionado ao cesto!",nl:"In het winkelmandje!"},onBasketAddGuaranteeInlineSuccess:function(){var e=this.$(".js-ProductBuy-addGuarantee").data("in-the-basket")||"Dans le panier !";var d=$("<div class='btn BasketPopin-guaranteeAddedButton BasketPopin-guaranteeAddedButton--active'><i class='icon icon_i_102_check_03'></i><span>"+e+"</span></div>");this.updateCartCount();this.$(".js-ProductBuy-addGuarantee").remove();this.$el.append(d)},onBasketAddError:function(h,g,e){try{if(typeof s_gi!=="undefined"){var f=s_gi("fnaccomprod");f.tl(this,"o","Ajout panier -> Error Message: "+g+", HTTP Error: "+e+", productId:"+this.productId)}}catch(d){}this.hideOverlay()},onBasketAddInlineError:function(){this.hideOverlay()},add:function(d){d.preventDefault();this.$control=$(d.currentTarget);this.serviceIds=[];this.packProductIds=[];this.serviceProductIds=[];var f=!!this.$control.attr("data-one-click");if($("html").hasClass("ie9")){return}d.preventDefault();this.showOverlay();this.offerId=(this.$control.attr("fnacidoffre")||this.$control.data("offerreference"))||this.offerId;if(this.$(".js-ProductBuy-guaranteeCheckable:checked").size()){this.serviceIds.push(this.$(".js-ProductBuy-guaranteeCheckable").attr("data-prid"))}if(this.$(".js-ProductBuy-expressplusCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-expressplusCheckable").attr("data-prid"));if(this.$(".js-ProductBuy-adherentCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-adherentCheckable").attr("data-adherentcardid"))}}else{if(this.$(".js-ProductBuy-fnacplusCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-fnacplusCheckable").attr("data-prid"))}else{if(this.$(".js-ProductBuy-adherentCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-adherentCheckable").attr("data-adherentcardid"))}}}if(this.$control.attr("data-pack-product-ids")){this.packProductIds=_.compact(this.$control.attr("data-pack-product-ids").split(";"));this.productId=this.$control.parent().attr("data-product-id")}if(this.$control.attr("data-service-ids")){this.serviceIds=_.compact(this.$control.attr("data-service-ids").split(";"))}var g=this.buildJSON({productId:this.productId,offerId:this.offerId,serviceIds:this.serviceIds,serviceProductIds:this.serviceProductIds,packProductIds:this.packProductIds});if(f){this.hideOverlay();b.App.trigger("popupOneclick:open",g)}else{this.basketAdd(g)}},addInline:function(d){d.preventDefault();this.$control=$(d.currentTarget);this.serviceIds=[];this.packProductIds=[];this.serviceProductIds=[];this.offerId=this.$control.attr("fnacidoffre")||this.offerId;if(this.$(".js-ProductBuy-guaranteeCheckable:checked").size()){this.serviceIds.push(this.$(".js-ProductBuy-guaranteeCheckable").attr("data-prid"))}if(this.$(".js-ProductBuy-expressplusCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-expressplusCheckable").attr("data-prid"));if(this.$(".js-ProductBuy-adherentCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-adherentCheckable").attr("data-adherentcardid"))}}else{if(this.$(".js-ProductBuy-fnacplusCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-fnacplusCheckable").attr("data-prid"))}else{if(this.$(".js-ProductBuy-adherentCheckable:checked").size()){this.serviceProductIds.push(this.$(".js-ProductBuy-adherentCheckable").attr("data-adherentcardid"))}}}if(this.$control.attr("data-pack-product-ids")){this.packProductIds=_.compact(this.$control.attr("data-pack-product-ids").split(";"))}if(this.$control.attr("data-service-ids")){this.serviceIds=_.compact(this.$control.attr("data-service-ids").split(";"))}var f=this.buildJSON({productId:this.productId,offerId:this.offerId,serviceIds:this.serviceIds,serviceProductIds:this.serviceProductIds,packProductIds:this.packProductIds});this.basketAddInline(f)},addGuarantee:function(e){var d=$(e.target).closest(".js-ProductBuy");var f={productId:d.attr("data-product-id"),masterProductId:d.attr("data-master-product-id"),offerId:null};this.model.set(f);this.model.fetch({action:"add",dataType:"html"})},addWithGuarantee:function(d){d.preventDefault();this.offerId=null;this.serviceIds=[];this.packProductIds=[];this.serviceProductIds=[];this.showOverlay();this.serviceIds.push(this.$("input[type=radio]:checked").val());var e=this.buildJSON({productId:this.productId,serviceIds:this.serviceIds});this.basketAdd(e)},addBehavior:function(d){var e=this.buildJSON({productId:d.productId,offerId:d.offerId});this.productId=d.productId;this.basketAdd(e)},addAlert:function(){this.showOverlay();var d,e;if($(".js-ProductView").length>0){d=b.Utils.getItemId();e=b.Utils.getSku()}else{d=this.productId;e=this.productId}var g=JSON.stringify({data:{context:{},content:{offer:{oref:null,html:null}},environment:{url:location.href,query:{},catalog:1,prid:parseInt(this.productId),id:d}},update:{request:{type:"AddAvailabilityAlerting",value:d+"|"+e+"|"+this.productId}}});var f={url:b.config.pathname+"/api/product/v1/AddAvailabilityAlerting",type:"POST",contentType:"application/json",data:g,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:true}};$.ajax(f).done(this.onAlertAddSuccess).fail(this.onAlertAddError)},onAlertAddSuccess:function(d){this.$(".ProductSellers-infomations .Action-btnWrapper .ProductSellers-alertBtn").addClass("ProductSellers-alertBtn--inactive").removeClass("js-ProductAlert-subscribe").html("<i class='icon icon_i_102_check_03'></i>Ajouté à mes alertes");this.hideOverlay()},onAlertAddError:function(){this.hideOverlay()},basketAdd:function(e){var d={url:a,type:"POST",contentType:"application/json",data:e,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:true}};$.ajax(d).done(this.onBasketAddSuccess).fail(this.onBasketAddError)},buildAndOpenPopup:function(d){$.magnificPopup.open({items:{src:d,type:"inline",fixedContentPos:true,overflowY:"hidden"},preloader:true,closeBtnInside:true,callbacks:{open:function(){try{if($(".js-basket-popin-error").length>0){if(typeof s_gi!=="undefined"){var g=s_gi("fnaccomprod");g.tl(this,"o","popin : une erreur est survenue")}}}catch(e){}var f=$(".BasketPopin .js-ProductBuy");if(f.length){_.forEach(f,function(h){new b.Views.ProductBuyView({el:h})})}}}})},basketAddInline:function(e){var d={url:a,type:"POST",contentType:"application/json",data:e,headers:{"X-Requested-With":"XMLHttpRequest"},xhrFields:{withCredentials:true}};$.ajax(d).done(this.onBasketAddInlineSuccess).fail(this.onBasketAddInlineError)},hideOverlay:function(){b.App.trigger("overlay:hide")},showOverlay:function(){b.App.trigger("overlay:show",{cssModifier:"all"})},updateCartCount:function(){var d=$.cookie("NBART");if(d){b.App.trigger("cartcount:update",{count:d})}},buildJSON:function(e){var d=[];if(e.offerId){d.push({ProductId:e.productId,Offer:e.offerId})}else{if(e.productId){d.push({ProductId:e.productId})}}_.each(e.serviceIds,function(f){d.push({ProductId:f,MasterProductId:e.productId})});_.each(e.serviceProductIds,function(f){d.push({ProductId:f})});_.each(e.packProductIds,function(f){var g=f.split("|");var i=g[0];var h=g[1];d.push({ProductId:i,Offer:h})});if(_.contains(e.packProductIds,e.productId)){d.shift()}return JSON.stringify(d)}});b.Views.ProductBuyView=c})(window.Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){this.offerId=this.$el.attr("data-offer-id");this.stimulusPrice=null;this.model=new a.Models.ProductShippingPopup();this.listenTo(this.model,"change",this.render);_.bindAll(this,"render");$(".js-ProductShippingPopup-christmasDelivery").on("click",this.render)},events:{"click .js-ProductShippingPopup-open":"render"},popupDidChange:function(){this.setCloseTranslation()},render:function(){if(this.model.get("html")){if($.magnificPopup.instance.items.length){$.magnificPopup.open({items:{src:this.model.get("html")}})}else{$.magnificPopup.instance.items=[{src:this.model.get("html")}];$.magnificPopup.instance.updateItemHTML()}}else{$.magnificPopup.open({items:{src:"<div class='Spinner'></div>"}});var c={};c.offerId=this.offerId;if(!!this.$el.attr("data-stimuluschrono-price")){c.stimulusChronoPrice=this.$el.attr("data-stimuluschrono-price")}this.model.fetch(c)}$(".js-ProductBuy-PopinShippingInfo-try").on("click",function(){$(".js-ProductBuy-fnacplusCheckable").prop("checked",true);$(".js-ProductBuy-adherentCheckable").prop("checked",true);console.log("ta");$.magnificPopup.close()})}});a.Views.ProductShippingPopupView=b}(Fnac);;(function(a){var b=Backbone.View.extend({initialize:function(){if(a.Utils.isInstanciatedView("ProductAdhCardPopupView",this)){return this}this.model=new a.Models.ProductAdhCardPopup();this.listenTo(this.model,"change",this.render)},events:{"click .js-ProductAdhCardPopup-open":"render"},popupDidChange:function(){this.setCloseTranslation()},render:function(){if(this.model.get("html")){if($.magnificPopup.instance.items.length){$.magnificPopup.open({items:{src:this.model.get("html")}})}else{$.magnificPopup.instance.items=[{src:this.model.get("html")}];$.magnificPopup.instance.updateItemHTML()}}else{$.magnificPopup.open({items:{src:"<div class='Spinner'></div>"}});this.model.fetch()}}});a.Views.ProductAdhCardPopupView=b})(Fnac);;void function(a){var b=function(f){var i=f.find(".js-ProductBuy").not("[data-productbuyview]");if(i.length){_.forEach(i,function(k){new a.Views.ProductBuyView({el:k})})}var j=f.find(".js-ProductShippingPopup");if(j.length){_.forEach(j,function(k){new a.Views.ProductShippingPopupView({el:k})})}var h=$(".js-ProductAdhCardPopup");if(h.length){_.forEach(h,function(k){new a.Views.ProductAdhCardPopupView({el:k})})}var g=$(".js-PopupInline");if(g.length){g.magnificPopup({type:"inline",midClick:true})}var e=$(".js-ProductStimulusChrono");if(e.length){new a.Views.TwoHoursDeliveryPromiseButtonView({el:e})}a.App.trigger("linkDecoder:decodeAll")};var c=function(e){return new a.Models.ProductTab({catalog:a.Utils.productCatalog(),id:a.Utils.productID(),prid:a.Utils.productPRID(),producturl:a.Utils.productURL().split("?")[0],type:e.type,key:e.key,oref:""})};var d=Backbone.View.extend({initialize:function(){this.dataUrl=null;this.currentTab=null;this.$currentTabControl=null;this.$currentOfferControl=null;this.$tabContent=null;this.renderTabContent=false;this.currentOfferOref=null;this.isOfferList=false;this.switchToFnac=false;this.isBackTolist=false;this.$currentTabControl=$(".js-ProductSellersTab.selected").closest(".js-ProductSellersTab");this.productTabFnac=c({type:"GetFnacOffer",key:"fnacoffer"});this.productTabUsed=c({type:"GetOccasOffers",key:"listoccazoffers"});this.productTabBrand=c({type:"GetListBrandOffers",key:"listbrandoffers"});this.getOffer=c({type:"GetOffer",key:"offer"});this.listenTo(this.productTabFnac,"change",this.render);this.listenTo(this.productTabUsed,"change",this.render);this.listenTo(this.productTabBrand,"change",this.render);this.listenTo(this.getOffer,"change",this.renderOffer);this.initProductRetreatPopin();this.checkInitTab();this.renderLayers();var e=$(".js-ChartView");_.forEach(e,function(f){new a.Views.ChartView({el:f})})},events:{"click .Offer-item":"getCurrentOffer","click .js-ProductSellersTab-list":"getOfferList","click .ProductSellers-tabControl":"showCurrentTab"},initProductRetreatPopin:function(){var e=this;a.App.trigger("withdrawalStorePopin:init",{pageType:"article",favoriteStoreUpdateSuccess:function(){e.initProductRetreatPopin()}})},checkInitTab:function(){var e=$(".js-ProductSellersTab.selected").children("a").attr("data-url");if(e=="GetFnacOffer"){this.switchToFnac=true}},getOfferList:function(e){this.$currentTabControl=$(e.currentTarget).closest(".js-ProductSellersTab");this.dataUrl=this.$currentTabControl.children("a").attr("data-url");this.$tabContent=this.$currentTabControl.children(".ProductSellers-tabContent");this.isOfferList=true;this.switchToFnac=true;this.isBackTolist=true;if(this.dataUrl=="GetListBrandOffers"){this.currentTab=this.productTabBrand;this.$tabContent=this.$currentTabControl.children(".ProductSellers-tabContent");this.renderActiveContent()}else{if(this.dataUrl=="GetOccasOffers"){this.currentTab=this.productTabUsed;this.$tabContent=this.$currentTabControl.children(".ProductSellers-tabContent");this.renderActiveContent()}}},getCurrentOffer:function(e){a.App.trigger("overlay:show");this.$currentOfferControl=$(e.currentTarget).closest(".ProductSellers-tabContent");this.currentOfferOref=$(e.currentTarget).find(".js-offer").attr("data-offer");this.getOffer.set({oref:this.currentOfferOref});this.dataUrl=this.$currentOfferControl.children("a").attr("data-url")},renderOffer:function(){this.switchToFnac=false;this.isOfferList=false;if(this.getOffer.get("tabHTML")){$(".selected .ProductSellers-tabContent").html(this.getOffer.get("tabHTML"));a.App.trigger("productsticky:refresh");this.getOffer.set({oref:null,tabHTML:null},{silent:true});a.App.trigger("overlay:hide");b(this.$currentTabControl);this.initProductRetreatPopin();orefManager({tabType:"offerList",oref:this.currentOfferOref})}else{if(this.getOffer.get("oref")){this.getOffer.fetch()}}this.switchTab()},switchTab:function(){this.$(".js-ProductSellersTab.selected").removeClass("selected");this.$currentTabControl.addClass("selected");var f=!!this.$currentTabControl.find(".ProductPriceBox").length;if(f){var e=this.$currentTabControl.find(".js-ProductBuy-add").attr("fnacidoffre");orefManager({tabType:"offerOref",oref:e})}else{orefManager({tabType:"emptyOref",oref:""})}a.App.trigger("installmentDrop:open");a.App.trigger("linkDecoder:decodeAll")},showCurrentTab:function(e){this.isBackTolist=false;this.$currentTabControl=$(e.currentTarget).parent();this.dataUrl=this.$currentTabControl.children("a").attr("data-url");this.$tabContent=this.$currentTabControl.children(".ProductSellers-tabContent");if(this.dataUrl=="GetFnacOffer"){this.switchToFnac=true;this.currentTab=this.productTabFnac;this.renderActiveContent()}else{if(this.dataUrl=="GetListBrandOffers"){this.switchToFnac=false;this.currentTab=this.productTabBrand;this.renderActiveContent()}else{if(this.dataUrl=="GetOccasOffers"){this.switchToFnac=false;this.currentTab=this.productTabUsed;this.renderActiveContent()}else{if(this.dataUrl=="GetSellYours"){this.switchToFnac=false;this.currentTab=this.productTabFnac;this.switchTab()}}}}},checkContent:function(){var e=!!this.$currentTabControl.find(".ProductPriceBox").length;if(this.isOfferList){if(e&&!this.isBackTolist){this.renderTabContent=false}else{this.renderTabContent=true}}else{this.renderTabContent=true}},renderActiveContent:function(){this.checkContent();this.render()},renderLayers:function(){if(this.switchToFnac){$(".js-strate--MP").removeClass("isActive");$(".js-strate--Fnac").addClass("isActive")}else{$(".js-strate--Fnac").removeClass("isActive");$(".js-strate--MP").addClass("isActive")}},renderTab:function(){if(this.renderTabContent){var e=$(this.$tabContent);if(!e.children().size()){new a.Views.ProductOfferListView({el:e})}this.$tabContent.html(this.currentTab.get("tabHTML"));setTimeout(function(){a.App.trigger("productsticky:refresh")},100);b(this.$tabContent);this.initProductRetreatPopin()}this.renderLayers()},render:function(){if(this.currentTab.get("tabHTML")){a.App.trigger("overlay:hide");this.renderTab()}else{a.App.trigger("overlay:show");this.currentTab.fetch();return this}this.switchTab()}});a.Views.ProductTabsView=d}(window.Fnac);;(function(c,a,b,d){c.Views.BasketView=a.View.extend({initialize:function(e){this.isRendered=false;this.itemsCount=$(".js-BasketList-item").length;this.itemsPerPage=3;this.model=new c.Models.Basket();this.pageIndex=e.pageIndex;this.$item=null;this.$itemQuantity=null;this.listenTo(this.model,"change",this.render);this.formatPrices();this.render()},events:{"click .js-BasketList-decrease":"decreaseQuantity","click .js-BasketList-increase":"increaseQuantity","click .js-BasketList-delete":"removeItem","click .js-Basket-previousPage":"goToPreviousPage","click .js-Basket-nextPage":"goToNextPage","click .js-Basket-oneclick":"oneclick"},oneclick:function(f){f.preventDefault();c.App.trigger("popupOneclick:open");this.trackOneClick(f.currentTarget)},trackOneClick:function(e){if(d&&s_account){var f=d(s_account);f.linkTrackVars="prop1";f.prop1="Layer : one clic";f.tl(e,"o","one clic layer panier")}},getPageIndexMax:function(){return Math.ceil(this.itemsCount/this.itemsPerPage)-1},isFirstPage:function(){return this.pageIndex===0},isLastPage:function(){return this.pageIndex===this.getPageIndexMax()},goToPage:function(e){if(e<this.pageIndex&&this.isFirstPage()||e>this.pageIndex&&this.isLastPage()){return}this.pageIndex=e;this.render();c.App.trigger("headerTabBasketView:updatePageIndex",{pageIndex:e})},goToPreviousPage:function(){this.goToPage(this.pageIndex-1)},goToNextPage:function(){this.goToPage(this.pageIndex+1)},decreaseQuantity:function(e){this.updateQuantity(e,-1)},increaseQuantity:function(e){this.updateQuantity(e,1)},dispose:function(){this.remove();this.off()},updateQuantity:function(g,i){var e=$(g.target).closest(".js-BasketList-item"),f=e.next(),h=parseInt(e.find(".js-BasketList-quantity").val())+i;if(h<=0){this.removeItem(g);return}if(h>e.data("quantityMax")){return}this.model.set({productId:e.data("productId").toString(),offerId:e.data("offerId"),masterProductId:e.data("masterProductId").toString(),quantityDifference:i});this.model.fetch({action:"update",dataType:"html"})},removeItem:function(f){var e=$(f.target).closest(".js-BasketList-item");this.model.set({productId:e.data("productId").toString(),offerId:e.data("offerId"),masterProductId:e.data("masterProductId").toString()});this.model.fetch({action:"remove",dataType:"html"})},formatPrices:function(){this.$el.find("[data-behavior-price=true]").each(function(g,j){var f="{0}";var m=$(j).text().indexOf(",")===-1?false:true;if($(this).data("behavior-price-format")){f=$(this).data("behavior-price-format")}var h=m?$(j).text().indexOf(","):$(j).text().indexOf("€");if(h>0){var e=$(j).text().substring(h+1)>0?$(j).text().substring(h+1):"";var l=$(j).text().substring(0,h)+"<sup>€"+e+"</sup>";var k=f.replace(" {0}","");l=l.replace(" €","").replace(k,"");var n=f.replace("{0}",l);$(j).html(n)}})},render:function(){if(!this.isRendered&&this.pageIndex>this.getPageIndexMax()){this.goToPage(this.getPageIndexMax());return}$(".js-BasketList-item").addClass("hidden");for(var e=0;e<this.itemsPerPage;e++){this.$(".js-BasketList-item").eq(this.itemsPerPage*this.pageIndex+e).removeClass("hidden")}c.Views.PopupOneClickView.init();if(this.itemsCount<=this.itemsPerPage){$(".BasketList-buttons").css("display","none")}this.$(".js-Basket-previousPage").attr("disabled",this.isFirstPage());this.$(".js-Basket-nextPage").attr("disabled",this.isLastPage());if(this.isRendered&&!this.model.get("state")){return}if(this.isRendered&&this.model.get("state")){c.App.trigger("headerTabBasketView:refresh");if(this.model.get("state")){this.model.unset("state",{silent:true})}}else{this.isRendered=true}this.renderCartCounter()},renderCartCounter:function(){var e=b.get("NBART");if(e){c.App.trigger("cartcount:update",{count:e})}}})})(Fnac,Backbone,Cookies,window.s_gi);;(function(b,a){var c={FIXEDBOTTOM:"Sidebar--fixedBottom",SCROLL:"Sidebar--scroll",};var d=a.View.extend({initialize:function(){this.initialClassList=this.$el.prop("className");this.getSize();this.prevClass="";this.setState();$(window).on("scroll.SidebarStickyView",_.bind(this.onScroll,this)).on("resize.SidebarStickyView",_.debounce(_.bind(this.onResize,this),300))},getHeaderSize:function(){this.marketingHeight=$(".Main-marketingHeader").length?$(".Main-marketingHeader").eq(0).height():0;this.headerHeight=$(".js-Header").eq(0).height();this.topBarHeight=$(".TopBar").eq(0).height();this.fullHeaderHeight=this.headerHeight+this.topBarHeight+this.marketingHeight+1},getSize:function(){this.getHeaderSize();this.windowHeight=$(window).eq(0).height();this.mainHeight=$(".Main").eq(0).height();this.sidebarHeight=$(".Sidebar").eq(0).height();this.sidebarMinHeight=this.windowHeight-this.fullHeaderHeight;if(this.sidebarHeight<this.sidebarMinHeight){this.sidebarHeight=this.sidebarMinHeight;this.$el.css("min-height",this.sidebarHeight)}if(this.mainHeight<this.sidebarHeight){$(".Main").css("min-height",this.sidebarHeight+107);$(".Main").addClass("Main--fixed");$(".Footer").addClass("Footer--fixed")}},getStateCondition:function(){var e=b.Utils.getYOffset();this.mainHeight=$(".Main").eq(0).outerHeight(true);this.canBeFixedBottom=e>=(this.sidebarHeight-this.windowHeight)&&e>0||this.sidebarHeight<=(this.windowHeight-this.fullHeaderHeight)},onScroll:function(){this.setState()},onResize:function(){this.getSize();this.setState()},setState:function(){this.getStateCondition();var e="SCROLL";if(this.canBeFixedBottom){e="FIXEDBOTTOM"}this.state=e;this.render()},render:function(){if(this.state=="FIXEDBOTTOM"){this.$el.addClass("Sidebar--fixedBottom");this.$el.css("top",this.fullHeaderHeight);$(".SlideNav-toggler").addClass("SlideNav-toggler--fixed")}else{if(this.state=="SCROLL"){this.$el.removeClass("Sidebar--fixedBottom");this.$el.css("top",this.fullHeaderHeight)}}}});b.Views.SidebarStickyView=d})(window.Fnac,Backbone);if(Modernizr.touch){var $body=$("body");$(document).on("focus","input",function(){$body.addClass("fixSidebar")}).on("blur","input",function(){$body.removeClass("fixSidebar")})};;(function(b,a){var c=a.View.extend({initialize:function(){this.node=this.$el;this.content=this.node.find(".js-Content");this.iconPlus=this.node.find(".js-moreContentNav-plus");this.iconLess=this.node.find(".js-moreContentNav-less");this.isOpened=false},events:{"click .js-ContentToggle":"open"},open:function(d){d.preventDefault();this.render()},getCssClass:function(){if(this.isOpened){this.content.prop("className","CategoryNav-moreContentNav js-Content");this.iconPlus.addClass("js-moreContentNav--active");this.iconLess.removeClass("js-moreContentNav--active");this.isOpened=false}else{this.content.prop("className","CategoryNav-moreContentNav js-Content js-moreContentNav--active");this.iconLess.addClass("js-moreContentNav--active");this.iconPlus.removeClass("js-moreContentNav--active");this.isOpened=true}},render:function(){this.getCssClass()}});b.Views.SidebarMoreView=c})(window.Fnac,Backbone);;void function(){var a=Backbone.View.extend({initialize:function(){this.listenTo(Fnac.App,"cartcount:update",this.update);this.update({count:Cookies.get("NBART")})},update:function(b){if(!b||!b.count){return}this.count=b.count;this.render()},render:function(){if(this.count<100){this.$el.text(this.count)}else{this.$el.text(this.$el.data("maxlabel"))}if(this.count){this.$el.removeClass("CartCount--empty")}else{this.$el.addClass("CartCount--empty")}}});Fnac.Views.CartCountView=a}();;void function(a,c,b){var d=Backbone.View.extend({initialize:function(e){this.catalogId=e.catalogId;this.prid=e.prid;this.offerId=e.offerId;this.price=e.price||0;this.displayCloseIcon=e.displayCloseIcon;this.wishlistBaseTemplate=e.baseTemplate;this.wishlistTemplate=e.template;this.productWishList=new a.Models.WishlistCollection();_.bindAll(this,"addOrRemoveToWishList","createWishList","wishlistKeyup");this.listenTo(this.productWishList,"invalid",_.bind(function(g,f){if(f==="ERROR_WISHLIST_NAME"){this.$wishlistInput.addClass("input--error")}},this));this.initRender();this.show()},events:{"keyup .wishlist-input":"wishlistKeyup","click .wishList-itemInput":"addOrRemoveToWishList","click .CreateWishlistAndAddArticle":"createWishList","click .wishlist-close":"closeWishlistPopin"},closeWishlistPopin:function(){a.App.trigger("wishlist:closePopin")},wishlistKeyup:function(e){if(e.keyCode===13){this.createWishList()}},show:function(){a.App.trigger("loader:showIn",{currentThumb:this.$wishlistWrapper});var e={prid:this.prid,error:function(f,g){if(g.status===401&&g.responseJSON){document.location.href=g.responseJSON}},complete:_.bind(function(){a.App.trigger("loader:hideIn",{currentThumb:this.$wishlistWrapper});this.render()},this)};this.productWishList.fetch(e)},createWishList:function(f){var h=this.$wishlistInput.val();var g=this.productWishList.create({name:h},{success:_.bind(function(){this.$wishlistInput.val("");this.$wishlistInput.removeClass("input--error");this.productWishList.fetch({prid:this.prid,complete:_.bind(function(){a.App.trigger("loader:hideIn",{currentThumb:this.$wishlistWrapper});this.render()},this)})},this)})},addOrRemoveToWishList:function(f){var i=$(f.currentTarget).data("wishlistid");var h=this.productWishList.get(i);var g={success:_.bind(function(k){var j=['<span class="icon icon_i_102_check_03"></span> ',k.message,' <a href="',k.url,'">',k.name,"</a>"].join("");var e=this.$el.find(".wishlist-added");if(e.length){e.html(j);e.removeClass("hide")}},this)};if(f.currentTarget.checked){h.addArticle(this.prid,this.offerId,this.catalogId,this.price,g)}else{h.removeArticle(this.prid,this.offerId,this.catalogId,this.price,g)}},initRender:function(){var e=this.baseTemplate();this.$el.html(e);this.$wishlistWrapper=this.$el.find(".wishlist-wrapper")},render:function(){var e=this.productWishList.models.map(function(g){return g.attributes});this.$wishlistWrapper.empty();var f=this.template({wishlists:e});this.$wishlistWrapper.html(f);this.$wishlistInput=this.$el.find(".wishlist-input")},baseTemplate:function(){var e={hideCloseIcon:!this.displayCloseIcon};if(c.render){return c.render(this.wishlistBaseTemplate,e)}else{if(typeof Hogan!="undefined"){return Hogan.compile(this.wishlistBaseTemplate).render(e)}}},template:function(e){if(c.render){return c.render(this.wishlistTemplate,e)}else{if(typeof Hogan!="undefined"){return Hogan.compile(this.wishlistTemplate).render(e)}}}});a.Views.ProductWishListView=d}(window.Fnac,window.Mustache,window.Hogan);;void function(a){var b=Backbone.View.extend({initialize:function(c){if(a.Utils.isInstanciatedView("ProductThumbnailView",this)){return this}this.wishlistBaseTemplate=c.wishlistBaseTemplate||$("#wishlistThumbnailBaseTemplate").html();this.wishlistTemplate=c.wishlistTemplate||$("#wishlistThumbnailTemplate").html();_.bindAll(this,"showWishList");this.prid=null},events:{"click .js-VisualProductshowOption":"showOptions","click .js-VisualProductHideOption":"hideOptions","click .js-thumbnail-showCompare":"showComparator","click .js-ThumbnailCompare":"addToComparator","click .js-ProductThumbnail-Wishlist":"showWishList","click .js-ProductThumbnail-WishlistABTest":"showWishListABTest",},showOptions:function(c){this.hideOptions();a.App.trigger("thumbnailAction:show",{currentThumb:this.$el})},hideOptions:function(c){a.App.trigger("thumbnailAction:hide",{currentThumb:this.$el})},showComparator:function(c){$(".thumbnail-comparatorContent").addClass("isActive")},addToComparator:function(c){a.App.trigger("compare:add",{currentThumb:this.$el})},showWishList:function(f){f.preventDefault();if(this.wishlistView){this.wishlistView.remove()}var c=this.$el.find(".js-ProductBuy");this.prid=c.data("product-id");this.offerId=c.data("offer-id");this.catalogId=c.data("catalog-id");this.prid=this.$el.find(".js-ProductThumbnail-showWishlist").attr("data-prid");var d=$("<div></div>");this.price=c.data("price");this.$el.find(".thumbnail-actionContent").append(d);var g=Number(this.price.toString().replace(/,/g,"."));this.wishlistView=new a.Views.ProductWishListView({baseTemplate:this.wishlistBaseTemplate,template:this.wishlistTemplate,prid:this.prid,catalogId:this.catalogId,offerId:this.offerId,price:g,el:d})},showWishListABTest:function(f){f.preventDefault();if(this.wishlistView){this.wishlistView.remove()}if($(".thumbnail-action").hasClass("isActive")){$(".thumbnail-action").removeClass("isActive").empty()}var c=this.$el.find(".js-ProductBuy");this.prid=c.data("product-id");this.offerId=c.data("offer-id");this.catalogId=c.data("catalog-id");var d=$("<div></div>");this.price=c.data("price");this.$el.find(".thumbnail-action").addClass("isActive").html('<div class="thumbnail-btn thumbnail-btnClose js-VisualProductHideOption"><i class="icon icon_i_037_cross_03"></i></div><div class=\'thumbnail-actionContent\'></div>');this.$el.find(".thumbnail-actionContent").append(d);var g=Number(this.price.toString().replace(/,/g,"."));this.wishlistView=new a.Views.ProductWishListView({baseTemplate:this.wishlistBaseTemplate,template:this.wishlistTemplate,prid:this.prid,catalogId:this.catalogId,offerId:this.offerId,price:g,el:d})},});a.Views.ProductThumbnailView=b}(Fnac);;void function(b){var a={};var c=Backbone.View.extend({initialize:function(){if(!_.isEmpty(a)){return a}this.$currentThumb=false;this.productThumbnailAction=new b.Models.ProductThumbnailAction();this.listenTo(b.App,"thumbnailAction:show",this.showActions);this.listenTo(b.App,"thumbnailAction:hide",this.hideActions);this.listenTo(this.productThumbnailAction,"change",this.render);a=this},showActions:function(d){this.setParams(d);b.App.trigger("loader:showIn",{currentThumb:this.$currentThumb});this.render(this.params)},hideActions:function(){$(".js-ThumbnailOption").removeClass("isActive").empty()},setParams:function(d){this.$currentThumb=d.currentThumb;this.prid=this.$currentThumb.find(".js-ProductBuy").attr("data-prid");this.catalogId=this.$currentThumb.find(".js-ProductBuy").attr("data-catalog-id");this.isNumerical=this.$currentThumb.find(".js-ProductBuy").attr("data-isnumerical");if(!this.isNumerical){this.isNumerical=false}this.bannerThumbnailNumber=this.$currentThumb.find(".js-ProductBuy").attr("data-bannerthumbnailnumber");this.bannerType=this.$currentThumb.find(".js-ProductBuy").attr("data-bannertype");this.categoryName=this.$currentThumb.find(".js-ProductBuy").attr("data-categoryname");this.pageName=this.$currentThumb.find(".js-ProductBuy").attr("data-pagename");this.pathid=this.$currentThumb.find(".js-ProductBuy").attr("data-pathid");this.isfilteredoffer=this.$currentThumb.find(".js-ProductBuy").attr("data-isfilteredoffer");this.customerId=this.$currentThumb.find(".js-ProductBuy").attr("data-customerid");this.params={prid:this.prid,catalog:this.catalogId,is_numerical:this.isNumerical,banner_thumbnail_number:this.bannerThumbnailNumber,banner_type:this.bannerType,category_name:this.categoryName,page_name:this.pageName,path_id:this.pathid,isfilteredoffer:this.isfilteredoffer,callingUrl:window.location.href,customerId:this.customerId,}},initProductRetreatPopin:function(){var d=this;b.App.trigger("withdrawalStorePopin:init",{pageType:"article",sender:this.$currentThumb,favoriteStoreUpdateSuccess:function(){d.initProductRetreatPopin()}})},render:function(){var d=this.productThumbnailAction.get("html");if(d){this.$currentThumb.find(".js-ThumbnailOption").append(d).addClass("isActive");b.App.trigger("loader:hideIn",{currentThumb:this.$currentThumb});this.initProductRetreatPopin();this.productThumbnailAction.set({prid:null,catalog:null,banner_thumbnail_number:null,banner_type:null,category_name:null,page_name:null,path_id:null,html:null},{silent:true})}else{this.productThumbnailAction.fetch({data:$.param(this.params)})}}});b.Views.ProductThumbnailActionView=c}(Fnac);;void function(b){var a=Backbone.View.extend({initialize:function(){this.nodeID=this.$el.attr("data-id");this.model=new b.Models.FlashSales({nodeID:this.nodeID});this.page=1;this.html=null;this.listenTo(this.model,"change",this.checkHtml)},events:{"click .js-FlashSales-more":"loadMore"},loadMore:function(){this.page+=1;this.render()},checkHtml:function(){if(this.model.get("html")){this.render()}},render:function(){if(this.model.get("html")){this.$(".js-FlashSales-content").append(this.model.get("html"));this.model.clear().set(this.model.defaults);b.App.trigger("lazyimage:render")}else{if(this.model.get("html")==""){this.$(".js-FlashSales-more").addClass("flashSales-more--disabled")}else{this.model.fetch({nodeID:this.nodeID,page:this.page})}}}});b.Views.FlashSalesView=a}(Fnac);;(function(b,a,d){var c=a.View.extend({initialize:function(){this.destroyed=false;_.bindAll(this,"destroyHasSucceeded","destroyHasFailed")},events:{"click .js-NavigationHistory-destroy":"destroy"},destroyHasSucceeded:function(){this.destroyed=true;this.render()},destroyHasFailed:function(){},destroy:function(){b.Models.NavigationHistory.destroy().fail(this.destroyHasFailed).done(this.destroyHasSucceeded)},render:function(){if(this.destroyed){this.$el.remove()}}});b.Views.NavigationHistoryView=c})(Fnac,Backbone,window);;(function(){var a=Backbone.View.extend({initialize:function(){},});Fnac.Views.StoreSelectorView=a})();;(function(c,b,a){var d=b.View.extend({initialize:function(){this.ucalias=this.$el.attr("data-strateasync-ucalias");this.params=this.$el.attr("data-strateasync-params");this.html=null;this.noContent=false;a.bindAll(this,"onSuccess","onError");this.render()},initializeEntries:function(){var e=this.$el.find(".js-ProductThumbnail");if(e.length){a.forEach(e,function(i){new c.Views.ProductThumbnailView({el:i})})}var f=this.$(".js-Carousel");if(f.length){new c.Views.CarouselView({el:f});c.Views.CarouselView.onViewportUpdate()}var g=this.$(".js-NavigationHistory");if(g.length){new c.Views.NavigationHistoryView({el:g})}var h=this.$(".js-ProductBuy");if(h.length){a.forEach(h,function(i){new c.Views.ProductBuyView({el:i})})}},onSuccess:function(e){this.html=$.trim(e);if(!this.html){this.noContent=true}this.render()},onError:function(f){},fetch:function(){var e={url:[c.config.pathname,"/ControlRenderer/",this.ucalias].join(""),method:"POST",data:this.params};$.ajax(e).then(this.onSuccess,this.onError)},render:function(){if($.trim(this.$el.html())||this.noContent){return this.$el}if(this.html){this.$el.html(this.html);this.initializeEntries()}else{this.fetch()}return this.$el}});c.Views.StrateAsyncView=d})(Fnac,Backbone,_,$);;(function(c,b,a){var d=b.View.extend({initialize:function(){this.$gender=this.$el.find(".js-GenderSelect");this.$price=this.$el.find(".js-priceSelect-combo").find("select");this.$currentProfil=this.$el.find(".js-currentProfilSelect");this.$initialProfil=this.$el.find(".js-profileSelect-combo.isActive");this.$form=this.$el.find("form");this.currentGenderValue=this.$gender.children(":selected").attr("value");this.currentPriceValue=this.$price.children(":selected").attr("value");this.formAction=this.$form.attr("action");this.currentProfileValue="";this.showProfileCombo();a.bindAll(this,"updateCurrentGenderValue","updateCurrentProfileValue","updateCurrentPriceValue","showProfileCombo","hideProfileCombo");this.$el.find("select.js-PriceSelect").comboToList({onChange:this.updateCurrentPriceValue});this.$el.find("select.js-ProfileSelect").comboToList({onChange:this.updateCurrentProfileValue});this.$el.find("select.js-GenderSelect").comboToList({onChange:this.updateCurrentGenderValue})},events:{"click .js-GenderSelect-combo li":"updateCurrentGenderValue","submit .js-StrateMacView-form":"submitForm"},submitForm:function(){var e="page=1;filters="+this.currentProfileValue+","+this.currentPriceValue+";args=";url="_stateValue="+encodeURIComponent(e);this.$form.attr("action",this.formAction+"#"+url)},updateCurrentPriceValue:function(e){this.currentPriceValue=e},updateCurrentProfileValue:function(e){this.currentProfileValue=e},updateCurrentGenderValue:function(e){this.currentGenderValue=e;this.hideProfileCombo();this.showProfileCombo()},showProfileCombo:function(){this.$el.find(".js-profileSelect-combo#bloc_"+this.currentGenderValue).css("display","inline-block").addClass("isActive");this.currentProfileValue=this.$el.find(".js-profileSelect-combo#bloc_"+this.currentGenderValue).find("select").children(":selected").attr("value")},hideProfileCombo:function(){this.$el.find(".js-profileSelect-combo").removeClass("isActive").css("display","none")},});c.Views.StrateMacView=d})(Fnac,Backbone,_,$);;void function(a){var b=Backbone.View.extend({initialize:function(){var d=this.$el,e=this.$(".js-postDescTrimHeight-target"),c=this.$(".js-postDescTrimHeight-container");this.$target=e;this.$container=c;this.containsListAndParagraph=(e.find("ul").length>0)&&(e.find("div").length>0);this.getSize();this.render();$(window).on("resize.PostDescTrimHeight",_.debounce(_.bind(this.onResize,this),300))},onResize:function(){this.getSize();this.render()},getSize:function(){var d=this.$el,g=this.$target,j=Math.floor(g.offset().top),h=Math.floor(g.outerHeight()),c=parseInt(this.$container.css("padding-bottom"),10),l=this.containsListAndParagraph?parseInt(g.find("ul").css("margin-bottom"),10):0,e=d.outerHeight(),f=Math.floor(d.offset().top),i=parseInt(g.css("line-height"),10),k,m;k=e-(j-f+c)-5;m=Math.floor(k/i);this.goodHeight=(m*i)-l},render:function(){if(this.$targetHeight<this.goodHeight){return}this.$target.height(this.goodHeight)}});a.Views.PostDescTrimHeightView=b}(Fnac);;void function(b){var a=Backbone.View.extend({events:{"click .js-cupView-activate":"onClickItem"},onClickItem:function(c){c.preventDefault();var d=$.ajax({type:"GET",url:b.config.pathname+"/api/cup/rest/v2/url",contentType:"application/json",beforeSend:function(f){f.setRequestHeader("Authorization","Basic 23A17F49D34DE16BC85AB395F");var e=[b.config.pathname,"/Nav/Images/loading-button.svg"].join("");$(".js-cupView-activate").html('<img src="'+e+'" /> &nbsp; '+$(".js-cupView-activate").data("wait"));$(".js-cupView-activate").addClass("f-button--disabled")},success:function(e){window.open(e.CupUrl,"_self");$(".js-cupView-activate").removeClass("f-button--disabled");$(".js-cupView-activate").html($(".js-cupView-activate").data("label"))},error:function(e){$(".js-cupView-activate").html("ERROR");$(".js-cupView-activate").removeClass("f-button--disabled")}})},});b.Views.CupView=a}(Fnac);;(function(a){var b=Backbone.View.extend({initialize:function(){this.closeStoresListIsVisible=false;this.$address=$(".js-StoreFinder-addressInput");this.$btClear=$(".js-StoreFinder-btClear");this.$mapInfos=$(".js-StoreFinder-mapInfos");this.storeMarkers=[];this.storeCards=[];this.storeDistances=[];this.defaultZoom=6;this.mapElement=$(".js-StoreFinder-map")[0];this.storeFinderElement=document.getElementsByClassName("js-store-finder")[0];this.mapLatitude=this.mapElement.getAttribute("data-latitude");this.mapLongitude=this.mapElement.getAttribute("data-longitude");this.mapZoom=Number(this.mapElement.getAttribute("data-zoom"))||this.defaultZoom;this.sideList=".js-StoreFinder-shopList ul.opened";a.Services.mapService.on("load:desktop",function(){this.render()}.bind(this));a.Services.mapService.load("desktop")},render:function(){this.mapCenterPosition=new Microsoft.Maps.Location(this.mapLatitude,this.mapLongitude);this.map=a.Services.mapService.create(this.mapElement);this.map.setView({zoom:this.mapZoom,center:this.mapCenterPosition});this.generateStoreCards();this.displayStoresOnMap();var c=this.$address.val();if(c!==""){this.launchSearch(c);this.$btClear.removeClass("hide")}else{this.showShopsCount(fnacStoreData.Store.length)}},toggleFindMeButton:function(){},getAddressWithPosition:function(c){},setMapDefaultParameters:function(){if(this.map){this.map.setView({zoom:this.defaultZoom,center:this.mapCenter})}},degreeToRad:function(c){return c*Math.PI/180},recalculateDistance:function(d){this.storeDistances=[];fnacStoreData.Store.forEach(function(g){var h=this.strToPoint(g.coord);var e=this.distHaversine(d,h);var f=Math.round(e*1000)/1000;this.storeDistances.push({store:g,value:f})},this);var c=_.filter(this.storeDistances,function(e){return e.value<150});return _.sortBy(c,function(e){return e.value})},displayCloseStores:function(e){this.closeStoresListIsVisible=true;var d=$(".js-StoreFinder-allStores");var c=$(".js-StoreFinder-closeStores");c.html("");e.forEach(function(i){var h=$(this.sideList+" li[data-eag-id="+i.store.EAGId+"]");if(h){h.removeClass("hide");var f=$(h.closest("li").prop("outerHTML"));var g=f.find(".js-StoreFinder-shopDistance");g.text(this.kmToString(i.value));c.append(f)}},this);d.removeClass("opened").addClass("hide");c.removeClass("hide").addClass("opened")},kmToString:function(c){if(c<1){return(1000-(c*1000)).toFixed(2).toString()+" m"}else{return c.toFixed(2).toString().replace(".",",")+" km"}},launchSearch:function(d){var e=this;if(d==null||d===""){return}if(this.selectStore){this.clearSelection()}var c=a.Utils.getCountryCode();a.Services.mapService.geocode(d,{},"nav_store_locator").then(function(g){var f=new Microsoft.Maps.Location(g.Latitude,g.Longitude);e.map.setView({center:f,zoom:12});var h=e.recalculateDistance(f);e.displayCloseStores(h);e.showShopsCount(h.length)})},addSearchPositionOnMap:function(c){if(this.searchPositionMarker){this.map.entities.remove(this.searchPositionMarker);this.searchPositionMarker=null}this.searchPositionMarker=this.createMarker(c)},showShopsCount:function(c){$(".js-StoreFinder-shopCount > .value").html(c);$(".StoreFinder-shopCount > .plural").css("display",c>1?"inline":"none");$(".StoreFinder-shopCount > .singular").css("display",c<2?"inline":"none")},strToPoint:function(c){if(c){var f=c.indexOf(",");var d=c.substring(1,f);var e=c.substring(f+1,c.length-1);return new Microsoft.Maps.Location(d,e)}return null},displayStoresOnMap:function(){var c=this;fnacStoreData.Store.forEach(function(f){var h=f.coord;if(h){var g=this.strToPoint(h);var e=a.Services.mapService.icon({type:"shop",organization:"fnac"});var d=this.createMarker(g,e,f.EAGId);Microsoft.Maps.Events.addHandler(d,"click",function(i){c.selectStore(Number(f.EAGId),i.target.entity.id)});this.storeMarkers.push(d)}},this)},showCardInfo:function(d){var c=_.find(this.storeCards,function(e){return Number(e.id)===d});if(c){$(".StoreFinder-mapInfos").removeClass("zone").addClass("filled").html(c.html)}},displayStoreMarkerAndCardOnMap:function(d,e,f){if(e!==""){var c=this.strToPoint(e);this.map.setView({zoom:15,});this.mapCenter=c;this.map.setView({zoom:15,});this.mapCenter=c;if(f){this.showCardInfo(f)}this.refreshCenterPosition();if(this.selectedMarker){this.selectedMarker.setOptions({icon:a.Services.mapService.icon({type:"shop",organization:d})})}this.selectedMarker=_.find(this.storeMarkers,function(g){return(g.eagId==f)?g:null});if(this.selectedMarker){this.selectedMarker.setOptions({icon:a.Services.mapService.icon({type:"shop",organization:d,selected:true})})}}},setSideStoreScrollPositionToViewThisItem:function(d){var c=d.parents(".js-StoreFinder-shopList");var f=d.position();var e=d.outerHeight();if(f.top+e>c.height()){c.scrollTop(c.scrollTop()+f.top+e-e)}else{if(f.top<0){c.scrollTop(c.scrollTop()+f.top)}}},selectStore:function(g){var c;if(this.closeStoresListIsVisible===true){c=this.$('.js-StoreFinder-closeStores li[data-eag-id="'+g+'"]');if(!c.length){this.$address.val("");this.clearSelection();this.selectStore(g);this.showShopsCount($(".js-StoreFinder-allStores li:not(.hide)").length);return}}else{c=this.$('.js-StoreFinder-allStores li[data-eag-id="'+g+'"]')}var e=c.data("point");var d=c.data("organization");if(e==null||index==null){return}var f="shop--selected";$("."+f).removeClass(f);c.addClass(f);this.displayStoreMarkerAndCardOnMap(d,e,g);this.setSideStoreScrollPositionToViewThisItem(c)},clearSearch:function(){this.$address.val("");this.clearSelection();this.mapCenter=this.mapCenterPosition;this.setMapDefaultParameters();this.$btClear.addClass("hide")},clearSelection:function(){$(".js-StoreFinder-shopList").scrollTop(0);$(".shop--selected").removeClass("shop--selected");$(".js-StoreFinder-allStores").removeClass("hide").addClass("opened");$(".js-StoreFinder-closeStores").addClass("hide").removeClass("opened");$(".js-StoreFinder-shopList > li.selected").removeClass("selected");$(".js-StoreFinder-mapInfos").addClass("zone").removeClass("filled").html("");this.$el.find(".js-StoreFinder-stores").removeClass("hide");if(this.searchPositionMarker){this.map.entities.remove(this.searchPositionMarker);this.searchPositionMarker=null}if(this.selectedMarker){this.selectedMarker.setOptions({icon:a.Services.mapService.icons.fnac});this.selectedMarker=null}this.closeStoresListIsVisible=false},manageKeyUp:function(d,c){if(d===""){this.clearSelection();this.mapCenter=this.mapCenterPosition;this.setMapDefaultParameters();this.$btClear.addClass("hide")}else{if(this.$btClear.hasClass("hide")){this.$btClear.removeClass("hide")}}switch(c){case a.Utils.keyCodes.ENTER:this.launchSearch(d);break;default:if(this.closeStoresListIsVisible===false){this.filterSideStoreList(d)}break}this.showShopsCount($(".js-StoreFinder-allStores li:not(.hide)").length)},filterSideStoreList:function(d){var c=$(this.sideList+" li.selected");$(this.sideList+" li").each(function(){var e=$(this);var f=e.text().toLowerCase();var g=e.data("zipcode").toString();if(f.indexOf(d)<0&&g.indexOf(d)!==0){e.addClass("hide")}else{e.removeClass("hide")}});if(c.hasClass("hide")){c.removeClass("selected")}},createMarker:function(e,d,c){var f=new Microsoft.Maps.Pushpin(e,{icon:a.Services.mapService.icon("fnac"),anchor:new Microsoft.Maps.Point(13,40)});f.eagId=c;this.map.entities.push(f);return f},generateHtmlTimetables:function(e){var d="";if(e.Timetables!=null){var c=false;for(var g=0;g<e.Timetables.length;g++){var f=e.Timetables[g];if(!c){d=d.concat('<div class="store_standard_openings">'+this.$mapInfos.data("label-open-std")+"</div>");c=true}d=d.concat('<div><span class="store_dayofweek">'+f.DayOfWeek+'</span><span class="store_openingtime">'+f.OpeningPeriods+"</span></div>")}}return d},generateHtmlExceptionnalTimetables:function(g){var f="";if(g.ExceptionnalTimetables!=null){var d=false;var e=false;for(var h=0;h<g.ExceptionnalTimetables.length;h++){var c=g.ExceptionnalTimetables[h];if(c.IsOpened){if(!e){f=f.concat('<div class="store_special_openings">'+this.$mapInfos.data("label-open-spe")+"</div>");e=true}}else{if(!d){f=f.concat('<div class="store_special_closings">'+this.$mapInfos.data("label-close-spe")+"</div>");d=true}}f=f.concat('<div class="store_special_time">'+c.Day+(c.Openings!=null?"<br>"+c.Openings:"")+(c.Comments!=null?"<br>"+c.Comments:"")+"</div>")}}return f},generateStoreCards:function(){fnacStoreData.Store.forEach(function(e){var c='<i class="close icon icon_i_037_cross_03"></i><div class="zone map_card arrow_box"><div class="store_name"><strong>FNAC '+e.Name+"</strong></div>";if(e.Url!==""){var d=this.$mapInfos.data("label-all-infos");c=c.concat('<div class="card_button"><a href="'+e.Url+'">'+d+"</a></div>")}c=c.concat('<div class="store_infos"><div class="store_address"><div>'+e.AddressLine+"</div><div>"+e.ZipCode+" "+e.CityName+'</div></div><div class="store_coord">');if(e.Phone!=null&&e.Phone!==""){c=c.concat("<div>"+e.Phone+"</div>")}c=c.concat("</div>");c=c.concat(this.generateHtmlTimetables(e));c=c.concat(this.generateHtmlExceptionnalTimetables(e));this.storeCards.push({id:e.EAGId,html:c})},this)},distHaversine:function(g,h){var j=6371;var e=this.degreeToRad(h.latitude-g.latitude);var f=this.degreeToRad(h.longitude-g.longitude);var c=Math.sin(e/2)*Math.sin(e/2)+Math.cos(this.degreeToRad(g.latitude))*Math.cos(this.degreeToRad(h.latitude))*Math.sin(f/2)*Math.sin(f/2);var i=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));var d=j*i;return d},setCenterWithCoordinates:function(c,d){this.mapCenter=new Microsoft.Maps.Location(c,d);this.refreshCenterPosition()},refreshCenterPosition:function(){if(this.map&&this.mapCenter){this.map.setView({center:this.mapCenter})}},updateUserStore:function(d){var c={storeId:d};return $.ajax({url:a.config.pathname+"/api/v1/nav/user/store",type:"POST",dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"},data:c,error:function(e){a.App.trigger("flashmessage:show")}})},events:{"click .js-StoreFinder-chooseStoreButton":"onChooseFavoriteStoreClicked","click .js-StoreFinder-shopList li":"onSearchPanelClicked","click .js-StoreFinder-mapInfos .close":"onCloseStoreCardButtonClicked","keyup .js-StoreFinder-addressInput":"onAddressKeyUp","click .js-StoreFinder-searchSubmit":"onSearchButtonClicked","click .js-StoreFinder-btClear":"onClearButtonClicked"},onChooseFavoriteStoreClicked:function(g){var h=this;g.preventDefault();if(g.currentTarget){var c=$(g.currentTarget);if(c.length){var f=c.parents("li");if(f.length){var d=$(f[0]);var i=d.data("eag-id");this.updateUserStore(i).success(function(l){var k=h.$el.find(".icon_i_119_Heart_Full");if(k.length){k.removeClass("icon_i_119_Heart_Full").addClass("icon_i_110_Heart_Empty")}var e=c.find(".icon_i_110_Heart_Empty");if(e.length){e.removeClass("icon_i_110_Heart_Empty");e.addClass("icon_i_119_Heart_Full")}var j=$(".js-HeaderTabStore");if(j.length){j.html(l.headerHtml)}})}}}},onSearchPanelClicked:function(c){var d=$(c.currentTarget).index()+1;if(c!=null){var e=Number(c.currentTarget.getAttribute("data-eag-id"));if(e){this.selectStore(e)}}},onCloseStoreCardButtonClicked:function(c){if(c){c.preventDefault();this.$mapInfos.removeClass("filled").addClass("zone")}},onAddressKeyUp:function(c){var d=$(c.currentTarget).val();if(d){d=$.trim(d.toLowerCase())}this.manageKeyUp(d,c.keyCode)},onSearchButtonClicked:function(c){if(c){c.preventDefault();this.launchSearch(this.$address.val())}},onClearButtonClicked:function(c){if(c!=null){c.preventDefault();this.clearSearch();this.showShopsCount(fnacStoreData.Store.length)}}});a.Views.StoreFinderView=b})(Fnac);;(function(a){var b=Backbone.View.extend({initialize:function(d){var c=$(".Article-item");if(c.length){_.bind(this._initWithdrawalStorePopinLinks,this);this._initWithdrawalStorePopinLinks()}_.bindAll(this,"createWishlistDrop");this.listenTo(a.App,"searchResultView:initPopin",this._initWithdrawalStorePopinLinks);this.listenTo(a.App,"wishlist:closePopin",this.closeWishlistPopin)},events:{"click .addItemFromSearch":"createWishlistDrop"},createWishlistDrop:function(g){g.preventDefault();if(this.wishlistDrop){this.wishlistDrop.close();this.wishlistDrop.remove();var c=$(".drop");if(c.length){c.remove()}}var f={target:g.currentTarget,content:'<div class="drop-view"><div></div></div>',classes:"drop-theme-arrows",position:"right top",openOn:"click"};this.wishlistDrop=new Drop(f);this.wishlistDrop.open();var d=$(g.currentTarget);var j=Number(d.data("price").toString().replace(/,/g,"."));var k=d.data("prid");var i=j;var h=d.data("offerid");var e=d.data("ref");this.wishlistDropOpened(k,i,h,e);this.wishlistDrop.on("close",this.wishlistDropClosed)},createWishlistPopin:function(){var c=0;$(".addItemFromSearch").magnificPopup({midClick:true,items:{src:'<div class="wishlist-popup-content"></div>',type:"inline"},callbacks:{open:_.bind(function(e){var d=$.magnificPopup.instance.st.el;var f=Number(d.data("price").toString().replace(/,/g,"."));this.productWishlistView=new a.Views.ProductWishListView({catalogId:d.data("ref"),price:f,offerId:d.data("offerid"),prid:d.data("prid"),baseTemplate:$("#wishlistThumbnailBaseTemplate").html(),template:$("#wishlistThumbnailTemplate").html(),el:$(".wishlist-popup-content"),displayCloseIcon:false})},this)}})},closeWishlistPopin:function(){if(this.wishlistDrop){this.wishlistDrop.close()}},wishlistDropOpened:function(g,f,e,d){var c=$(".drop-view div");if(!c.length){$(".drop-view").append("<div></div>");c=$(".drop-view div")}this.productWishlistView=new a.Views.ProductWishListView({catalogId:d,price:f,offerId:e,prid:g,baseTemplate:$("#wishlistThumbnailBaseTemplate").html(),template:$("#wishlistThumbnailTemplate").html(),el:c})},wishlistDropClosed:function(){if(this.productWishlistView){this.productWishlistView.remove()}},_initWithdrawalStorePopinLinks:function(){var e=this;var c=$(".js-ProductRetreat-popup");if(c.length){var d=$.map(c,function(g){var f=$(g);if(f.data("articleId")&&f.data("catalogId")){return{prid:f.data("articleId").toString(),catalog:f.data("catalogId").toString()}}});a.App.trigger("withdrawalStorePopin:init",{articles:d,favoriteStoreUpdateSuccess:function(f){e.availabilities=f.availabilities;if(e.availabilities.length){e.render();e._initWithdrawalStorePopinLinks()}}})}},render:function(){if(this.availabilities.length){this.availabilities.forEach(function(e){var d=this.$el.find(".js-ProductRetreat-popup[data-article-id='"+e.prid+"']");var c=$(d.parents("li")[0]);c.html(e.html)},this)}}});a.Views.SearchResultView=b})(Fnac);;(function(a,b){var c=Backbone.View.extend({loading:false,initialize:function(d){this.wishlistsName=d.wishlistsName;this.model=d.model;this.title=d.title;this.templateName=d.templateName;this.$wishlistPopinTitle=this.$el.find(".js-popinTitle");this.$popinContent=this.$el.find(".js-popinContent");_.bindAll(this,"validateWishlistRenaming","validateWishlistDeleting");this.render()},render:function(){if(this.$el&&this.model){this.$wishlistPopinTitle.text(this.title);this.$popinContent.empty();$.magnificPopup.open({items:{src:this.$el,type:"inline"}});var d=this.template(this.templateName,this.model);this.$popinContent.html(d)}},template:function(e,d){return b.render(e,d.toJSON())},closePopin:function(){$.magnificPopup.close()},events:{"click .js-validateRenameWishlist":"validateWishlistRenaming","click .js-removeWishlistCancelButton":"closePopin","click .js-DeleteWishlist":"validateWishlistDeleting","click .js-Popin-close":"closePopin"},validateWishlistDeleting:function(d){d.preventDefault();var e=this.model.get("id");this.model.destroy();this.closePopin();a.App.trigger("wishlist:deleted",e)},validateWishlistRenaming:function(f){f.preventDefault();var d=this.$el.find("#id-text-whilist-rename-name");if(d.length){var g=d.val();var h=this.model.collection.models.map(function(i){return i.attributes.name});this.model.set("wishlistsName",h);this.model.set("name",g);var e=this.model.validate(this.model.attributes);if(e&&e!==""){d.addClass("input--error");return}this.model.rename({success:_.bind(function(){this.closePopin();a.App.trigger("wishlist:renamed",g)},this),error:_.bind(function(i){this.closePopin();a.App.trigger("flashmessage:show")},this)})}}});a.Views.WishlistAccountPopinView=c})(Fnac,Mustache);;(function(b,c,a){b.Views.WishlistArticleView=a.View.extend({initialize:function(d){this.wishlistArticleTemplate=d.template;this.model=d.model;var e=this.template();this.$el.html(e);_.bindAll(this,"removeWishlistArticle")},template:function(){return c.render(this.wishlistArticleTemplate,this.model.attributes)},events:{"click .js-removeWishlistArticle":"removeWishlistArticle"},removeWishlistArticle:function(d){b.App.trigger("wishlist:removeArticle",this.model.toJSON());this.remove()}})})(Fnac,Mustache,Backbone);;(function(b,c,a){b.Views.WishlistAccountView=a.View.extend({borderErrorClass:"input--error",wishlistTemplates:{create:$("#create-wishlist-popin-template").html(),rename:$("#rename-wishlist-popin-template").html(),remove:$("#remove-wishlist-popin-template").html(),share:$("#share-wishlist-popin-template").html()},initialize:function(f){for(var h in this.wishlistTemplates){if(h){c.parse(h)}}this.$emptyContainer=this.$el.find(".js-emptyCarousel");this.$container=this.$el.find(".js-Carousel-container");this.$createInput=this.$el.find(".ma-WishList-createInput");var e=[];var d=this.$el.find(".js-WishList-combo option");if(d.length){$.each(d,function(j,k){e.push(new b.Models.Wishlist({id:k.value,name:k.text,initialName:k.text}))})}this.wishlists=new b.Models.WishlistCollection(e);this.wishlistComboBox=this.initWishlistsComboBox();var g=d.first().val();this.selectedWishlist=this.wishlists.get(g);this.$popinTranslations=$("#popin-translations");this.$wishlistPopin=this.$el.find(".js-wishlistPopin");_.bindAll(this,"deleteSelectedOption","renameSelectedOption","changeWishlistSelection","removeArticle");this.listenTo(b.App,"wishlist:deleted",this.deleteSelectedOption);this.listenTo(b.App,"wishlist:renamed",this.renameSelectedOption);this.listenTo(b.App,"wishlist:removeArticle",this.removeArticle);var i=this.wishlists.first();if(i){this.changeWishlistSelection(i)}},events:{"click .js-openPopinForRenameWishlistButton":"openWishlistRenamePopin","click .js-openPopinForDeleteWishlistButton":"openWishlistDeletePopin","click .js-OpenShareWishlist":"openWishlistSharePopin","click .js-CreateNewWishlist":"createWishlist"},initWishlistsComboBox:function(){var d=document.querySelector("select.js-WishList-combo");if(Select&&d){this.combobox=new Select({el:d,className:"select-theme-chosen"});this.combobox.on("change",this.wishlistSelectionChange,this)}return d},renderAddToBasketButton:function(){if(this.selectedWishlist&&this.selectedWishlist.articles){var d=$(".js-ProductBuy");if(this.selectedWishlist.articles.length===0){d.addClass("hide")}else{d.removeClass("hide")}}},render:function(d){if(this.selectedWishlist){if(!this.wishlistArticleTemplate){this.wishlistArticleTemplate=$("#wishlist-article-template").html();c.parse(this.wishlistArticleTemplate)}if(this.$container.length&&this.selectedWishlist.articles.models.length){this.$container.empty();this.$emptyContainer.addClass("hide");this.$container.removeClass("hide");if(this.articlesViews&&this.articlesViews.length){this.articlesViews.forEach(function(e){e.remove()})}this.articlesViews=[];this.selectedWishlist.articles.models.forEach(function(f){var e=$('<div class="Carousel-item js-Carousel-item"></div>');this.$container.append(e);var g=new b.Views.WishlistArticleView({model:f,el:e,template:this.wishlistArticleTemplate});this.articlesViews.push(g)},this);this.updatePrids();b.App.trigger("carouselView:reset",true)}else{this.$emptyContainer.removeClass("hide");this.$container.addClass("hide")}this.renderAddToBasketButton()}},createWishlist:function(d){var g=this.wishlists.models.map(function(h){return h.attributes.name});var f=this.$el.find("#id-text-whilist-create-name").val();var e=new b.Models.Wishlist({name:f,wishlistsName:g});this.wishlists.add(e);e.once("invalid",_.bind(function(i,h){if(h==="ERROR_WISHLIST_NAME"){this.$createInput.addClass(this.borderErrorClass)}},this));e.save({},{success:_.bind(function(h,i){location.reload()},this),})},wishlistSelectionChange:function(d){var e=this.wishlists.get(d.value);this.changeWishlistSelection(e)},changeWishlistSelection:function(d){if(this.selectedWishlist){this.stopListening(this.selectedWishlist)}this.selectedWishlist=d;if(this.selectedWishlist){var e=this.selectedWishlist.get("id");this.selectedWishlist.clear({silent:true});this.selectedWishlist.set({id:e},{silent:true});this.listenTo(this.selectedWishlist,"change",this.render);this.selectedWishlist.fetch()}},openWishlistRenamePopin:function(d){d.preventDefault();if(this.wishlistPopin){this.wishlistPopin.undelegateEvents()}this.wishlistPopin=new b.Views.WishlistAccountPopinView({el:this.$wishlistPopin,model:this.selectedWishlist,title:this.$popinTranslations.data("rename"),templateName:this.wishlistTemplates.rename})},deleteSelectedOption:function(e){var d=this.$el.find(".js-WishList-combo option:selected");d.remove();if(!this.wishlists.length){this.$el.find("#block-home-wishlist-HeaderFilter").addClass("hide");this.$el.find(".js-Carousel").addClass("hide");this.$el.find(".js-emptyCarousel").removeClass("hide")}var d=this.$el.find(".js-WishList-combo option:selected");var f=this.wishlists.get(d.val());this.changeWishlistSelection(f)},renameSelectedOption:function(e){var d=this.$el.find(".js-WishList-combo option:selected");d.text(e)},openWishlistDeletePopin:function(d){d.preventDefault();if(this.wishlistPopin){this.wishlistPopin.undelegateEvents()}this.wishlistPopin=new b.Views.WishlistAccountPopinView({el:this.$wishlistPopin,model:this.selectedWishlist,title:this.$popinTranslations.data("remove"),templateName:this.wishlistTemplates.remove})},openWishlistSharePopin:function(d){if(this.wishlistPopin){this.wishlistPopin.undelegateEvents()}this.wishlistPopin=new b.Views.WishlistAccountPopinView({el:this.$wishlistPopin,model:this.selectedWishlist,title:this.$popinTranslations.data("share"),templateName:this.wishlistTemplates.share})},updatePrids:function(){var e=_.map(this.selectedWishlist.articles.models,function(g){if(g.attributes.offer!=="00000000-0000-0000-0000-000000000000"){return g.attributes.prid+"|"+g.attributes.offer}else{return g.attributes.prid}});var d=this.$el.find(".js-ProductBuy-add");if(d.length){var f=e.join(";");d.attr("data-pack-product-ids",f)}},removeArticle:function(e){var f=this.wishlists.get(e.wishlistId);if(f){var d=this.selectedWishlist.articles.get(e.id);this.selectedWishlist.removeArticle(e.prid,e.offerId,e.catalog,e.price,{success:_.bind(function(){this.selectedWishlist.articles.remove(d);this.updatePrids();b.App.trigger("carouselView:reset",true);this.renderAddToBasketButton();if(this.selectedWishlist.articles.models.length){this.$emptyContainer.addClass("hide");this.$container.removeClass("hide")}else{this.$emptyContainer.removeClass("hide");this.$container.addClass("hide")}},this)})}}})})(Fnac,Mustache,Backbone);;(function(a,b){a.Views.MasterView=Backbone.View.extend({initialize:function(){this.CNIL_COOKIE_NAME="cnil";this.CNIL_LOCALSTORAGE_NAME="fc::htmlBarcnil";localStorage&&localStorage.removeItem(this.CNIL_LOCALSTORAGE_NAME);this._createWithdrawalStorePopupView();_.bindAll(this,"afterCnilbarClose","detectScroll");a.Utils.checkCookies();this.lastScrollTop=0;$(window).bind("touchmove",this.detectScroll);new a.Views.NavView({el:this.$el});this.resize();this.initSearchInput();this.initFilterToggle();var c=parseFloat(a.Utils.androidVersion());if(a.Utils.isAndroidBrowser()&&c>=4){$(".AndroidMessage").addClass("isActive")}this.listenTo(a.App,"geoloc:update",this.updateNearestStore)},events:{"click .js-toggleFilters":"toggleFilters","click .js-Cnilbar-close":"afterCnilbarClose",},initSearchInput:function(){if(Modernizr.touch){var c=jQuery("body");$(document).on("focus","input.js-HeaderSearch-input",function(){c.addClass("fixfixed")}).on("blur","input.js-HeaderSearch-input",function(){c.removeClass("fixfixed")})}},resize:function(){var e;var f=false;var c=200;$(window).resize(function(){$("body").addClass("isResizing");e=new Date();if(f===false){f=true;setTimeout(d,c)}});function d(){if(new Date()-e<c){setTimeout(d,c)}else{f=false;$("body").removeClass("isResizing")}}},initFilterToggle:function(){$(".Filters-content").each(function(){$(this).children(".Filters-choice").each(function(c){if(c<=7){$(this).addClass("isActive")}})})},toggleFilters:function(f){f.preventDefault();var h="isActive",g=".Filters-content",c=$(f.currentTarget),d=c.prev(g);d.toggleClass(h);c.toggleClass(h);d.scrollTop(0)},detectScroll:function(){var c=$(window).scrollTop();if(c>this.lastScrollTop){if(c>100&&c>=this.lastScrollTop+20){if(!$(".js-Header-search").hasClass("isHidden-tablet")){$(".js-Header-search").addClass("isHidden-tablet")}}}else{if(c<=this.lastScrollTop-20){if($(".js-Header-search").hasClass("isHidden-tablet")){$(".js-Header-search").removeClass("isHidden-tablet")}}}this.lastScrollTop=c},_createWithdrawalStorePopupView:function(){new a.Views.WithdrawalStorePopupView({el:$("body")});new a.Views.TeradataPopupView({el:$("body")})},updateNearestStore:function(e){if(a.Services.CommonDataService){var d={coordinates:e.pos,page:"other",prid:"",catalog:""};var c=$(".js-ProductView");if(c.length){d.page="product";d.prid=c.data("prid");d.catalog=c.data("catalog")||"1"}a.Services.CommonDataService.setNearStoresInformations(d).success(_.bind(function(f){this._setNearStoresInformationsSuccess(f);e.success()},this))}},afterCnilbarClose:function(c){c.preventDefault();this.$(".js-Cnilbar").fadeOut();var d=new Date();d.setMonth(d.getMonth()+3);Cookies.set(this.CNIL_COOKIE_NAME,"1",{domain:a.config.cookiesHostname,expires:d,path:a.config.cookiesPath});if(s_gi){var f=s_gi("fnaccomprod");f.linkTrackVars="events";f.linkTrackEvents="event88";f.events="event88";f.tl(this,"o","Fermeture bandeau CNIL")}},_setNearStoresInformationsSuccess:function(e){var c=$(".js-HeaderTabStore");if(c.length){c.html(e.data.content.store.html)}var d=$(".js-ProductRetreat");if(d.length){d.replaceWith(e.data.content.buyboxstore.html)}}})})(window.Fnac);;(function(b,a){b.Views.NavView=a.View.extend({initialize:function(){this.$main=$(".Main");this.$header=$(".js-Header");this.$sidebar=$(".js-Sidebar");this.$slidenav=$(".SlideNav");this.$slidenavToggler=$(".js-SlideNav-toggler");this.$submenuToggler=$(".js-submenu-toggler");this.isMenuLoaded=false;this.isSlideNavFixed=false;this.isSlideNavOpen=false;this.isSideBarOpen=false;this.position=null;_.bindAll(this,"detect_scroll");$(window).scroll(this.detect_scroll);this.updateSidebarPosition()},events:{"click .js-SlideNav-toggler":"slideNavToggle","click .js-Main-exitSlideNav":"slideNavToggle","click .js-submenu-toggler":"sidebarToggle","click .js-Main-exitSideBar":"sidebarToggle","click .js-category-toggler":"categoryToggle",},updateSidebarPosition:function(){if(this.$sidebar.length){this.isSlideNavFixed=true}},detect_scroll:function(){if($("html").hasClass("no-touch")){var c=$("body");$(".Sidebar-nano").nanoScroller({scrollTop:c.scrollTop()})}},checkIfMegamenuExist:function(){if(this.isMenuLoaded){this.showSlideNav()}else{this.$slidenavToggler.addClass("isLoading");this.getMegaMenu()}},getMegaMenu:function(){var c={data:{environment:{url:"",query:""},update:{request:{type:"GetMegaMenu",value:null}}}};$.ajax({url:[b.config.pathname,"/api/header/v1/GetMegaMenu"].join(""),type:"POST",dataType:"json",data:JSON.stringify(c),success:function(d){if(d.update.response.actions[0]==="global.data.content.megamenu.html"){this.initMegaMenu(d.data.content.megamenu.html)}else{}}.bind(this)})},initMegaMenu:function(f){this.isMenuLoaded=true;var e=$(".SlideNav-loadWrapper");if(e.length){e.html(f);var c=$(".js-CategoryNav");if(c.length&&b.Views.CategoryNavView){new b.Views.CategoryNavView({el:c})}var d=$(".js-moreContentNav");if(d.length){new b.Views.SidebarMoreView({el:d})}$(".nano").nanoScroller({preventPageScrolling:true});this.showSlideNav();this.$slidenavToggler.removeClass("isLoading")}},sidebarToggle:function(){if(this.isSideBarOpen){this.isSideBarOpen=false;this.hideSideBar()}else{this.showSidebar();this.isSideBarOpen=true}},hideSideBar:function(){$(".Main-exitMenu").removeClass("isActive");this.$sidebar.removeClass("isActive");this.$header.removeClass("isActive--inverse");this.$main.removeClass("isActive--inverse")},showSidebar:function(){$(".js-Main-exitSideBar").addClass("isActive");this.$sidebar.addClass("isActive");this.$header.addClass("isActive--inverse");this.$main.addClass("isActive--inverse");$(".js-Main-exitSideBar").addClass("isActive")},slideNavToggle:function(c){c.preventDefault();if(this.isSlideNavOpen){this.isSlideNavOpen=false;this.hideSlideNav()}else{this.checkIfMegamenuExist();this.isSlideNavOpen=true}},hideSlideNav:function(){$(".Main-exitMenu").removeClass("isActive");this.$slidenav.removeClass("isActive");this.$header.removeClass("isActive");this.$main.removeClass("isActive");this.$slidenavToggler.removeClass("isActive isFixed");this.$sidebar.removeClass("isFixed");b.App.trigger("categorynav:removepanel")},showSlideNav:function(){$(".js-Main-exitSlideNav").addClass("isActive");this.$slidenav.addClass("isActive");this.$header.addClass("isActive");this.$main.addClass("isActive");this.$slidenavToggler.addClass("isActive isFixed");this.$sidebar.addClass("isFixed");b.App.trigger("header-tab:close");$(".js-Main-exitSlideNav").addClass("isActive")},categoryToggle:function(d){d.preventDefault();d.stopImmediatePropagation();$(".nano").nanoScroller();var e=$(d.currentTarget).parent().hasClass("isClose");var c=$(d.currentTarget).parent();if(e){c.removeClass("isClose")}else{c.addClass("isClose")}}})})(Fnac,Backbone);;(function(a,b){var c=Backbone.View.extend({initialize:function(){_.bindAll(this,"attachGemCallback");this.$el.one("click",this.attachGemCallback)},updateHistory:function(d){var e=d.data.environment.url;if(b.state===undefined){return false}if(b.state===null||e!==b.state.url){b.pushState({url:e},null,e)}return false},attachGemCallback:function(){window.gemSearchResult.callback=this.updateHistory}});a.Views.SearchFiltersView=c})(window.Fnac,window.history);;(function(c,b){var a=$("<div class='tooltipFnacPlus-container'><a class='tooltipFnacPlus-link' href='http://www.fnac.com/choisir-carte' title='En savoir plus'><img src='http://static.fnac-static.com/multimedia/fnacdirect/publi/popin-fnacplus.jpg' /></a></div>");c.Views.SearchProductFnacPlusView=b.View.extend({initialize:function(){this.isLoaded=false;this.isActive=false;this.initContent()},events:{"mouseover .js-searchFnacPlus-show":"showContent","mouseover .js-searchFnacPlus-container":"showContent","mouseout .js-searchFnacPlus-container":"removeContent"},initContent:function(){this.$fnacPlusContainer=this.$(".js-searchFnacPlus-container");this.$fnacPlusContainer.append(a);this.isLoaded=true},showContent:function(){if(!this.IsLoaded){this.initContent()}if(!this.isActive){this.$fnacPlusContainer.addClass("is-active");this.isActive=true}},removeContent:function(){this.$fnacPlusContainer.removeClass("is-active");this.isActive=false}})}(window.Fnac,window.Backbone));;void function(c){var e={ABOVE:"PubliSticky--above",BELOW:"PubliSticky--below",FIXED:"PubliSticky--fixed",FIXEDMORE:"PubliSticky--fixedMore"},b=$(".js-PubliSticky"),a=b.length,f=[];var d=Backbone.View.extend({initialize:function(){f.push(this);if(a>1&&f.length===a){setTimeout(function(){_.each(f,function(g){if(g.stickyNavAction==="switch"){g.$navItems[0].click()}})},0)}this.initBase();this.initView();this.getSize();this.getPositions();this.setState();if(a===1){this.render()}this.$el.on("updateState",_.bind(this.onUpdateState,this));$(window).on("resize.PubliStickyHeader",_.debounce(_.bind(this.onResize,this),300)).on("scroll.PubliStickyHeader",_.throttle(_.bind(this.onScroll,this),200))},initBase:function(){var g=this.$el,h,i,j=g.find(".js-PubliSticky").length>0?true:false,k=g.attr("data-sticky-level")||0,l=g.attr("data-sticky-action")||"scroll",m=g.attr("data-sticky-position")||"top";if(!j){i=g.find(".js-PubliStickyNav");h=g.find(".js-PubliSticky-item")}else{i=g.find(".js-PubliStickyNav").filter(function(){return $(this).parents(".js-PubliSticky").eq(0).attr("data-sticky-level")===k});h=g.find(".js-PubliSticky-item").filter(function(){return $(this).closest(".js-PubliSticky").attr("data-sticky-level")===k})}this.$items=h;this.$nav=i;this.$navItems=i.find(".js-PubliSticky-anchor");this.navClasses=i.attr("class");this.nbItems=h.length;this.hasSubSticky=j;this.stickyLevel=parseInt(k,10);this.stickyNavAction=l;this.stickyNavPosition=m},initView:function(){var g=this.$el,h=this.$navItems,k=this.stickyLevel,m=[],i=null,j={cid:null,type:null,$el:null,exist:false,state:null,navHeight:null,currentItem:{$el:null,isVisible:false,exist:false}},l={isHidden:false,$el:null};if(k>0){i=g.parents(".js-PubliSticky").filter(function(){return parseInt(this.getAttribute("data-sticky-level"),10)===(k-1)});j.exist=true;j.$el=i;j.type=i.attr("data-sticky-action")||"scroll"}_.each(h,function(o){var n=o.getAttribute("data-href")||o.getAttribute("href");m.push({id:n,topPosition:null,height:null})});this.targets=m;this.parentSticky=j;if(j.type==="switch"){l.$el=this.$el.closest(".js-PubliSticky-item");j.currentItem.$el=this.$el.closest(".js-PubliSticky-item");j.currentItem.exist=true}this.switchElementFromParent=l;this.state=null;this.navIndex=null},events:{"click .js-PubliSticky-anchor":"goToAnchor"},onResize:function(){this.getSize();this.getPositions();this.setState();this.render()},onScroll:function(){var g=this.parentSticky.currentItem;if(g.exist&&!g.isVisible){return}this.setNavState();if(this.stickyNavAction==="scroll"){this.setAnchorState(this.navIndex)}this.render()},onUpdateState:function(h,g){if(h.target!==h.delegateTarget){return}this.parentSticky.state=g.state},getSize:function(){this.getHeaderSize();this.getElementSize()},getHeaderSize:function(){var j=this.parentSticky,g=this.$nav.outerHeight(),h=this.stickyNavPosition==="top"?g:0,i=0;if(j.exist){i=j.$el.children(".js-PubliStickyNav").eq(0).outerHeight();h+=i}this.headerHeight=$(".js-Header").eq(0).height();this.navHeight=h;this.$navHeight=g;this.fullHeaderHeight=(this.headerHeight+h);this.parentSticky.navHeight=i},getElementSize:function(){var g=this.$el,j=this.navHeight,i=this.headerHeight,l=this.targets,h=Math.floor(g.outerHeight()),m=$(window).height(),k=this.stickyNavAction;_.each(l,function(o){var n=$(o.id);o.height=n.outerHeight();if(k==="switch"){h=Math.max(h,o.height)}});this.windowHeight=m;this.isOkForSticky=j<(m-i);this.$elHeight=h},getPositions:function(){this.getElementPositions();this.getTargetsPositions()},getElementPositions:function(){var g=this.$el,j=this.$nav,l=this.navHeight,k=this.headerHeight,n=this.windowHeight,m=this.parentSticky,i=Math.floor(g.offset().top),h;h=(i+this.$elHeight)-(l+k);if(m.exist&&m.state!=="FIXED"){i-=l}if(this.stickyNavPosition==="aside"){h-=(Math.floor(n/2)-j.outerHeight())}this.$elTop=i-k;this.$elFixedTop=i-(l+k);this.$elEnd=h;if($(".TopBar").length>0){this.headerHeight+=$(".TopBar").height();this.$elFixedTop-=$(".TopBar").height()}},getTargetsPositions:function(){var h=this.stickyNavAction,g=this.$elFixedTop,i=this.targets;_.each(i,function(l,j){var k=(j>0)?i[j-1]:{topPosition:g,height:0},m;if(h!=="switch"){m=$(l.id).attr("data-sticky-targetPos")||k.topPosition+k.height}else{m=$(l.id).attr("data-sticky-targetPos")||g}l.topPosition=m})},setState:function(){this.setNavState();this.setAnchorState(this.navIndex)},setNavState:function(){var h=null,k=this.parentSticky.currentItem,j=false,l=c.Utils.getYOffset(),g=this.$elFixedTop,i=g;if(this.isOkForSticky){if(k.exist&&!k.$el.hasClass("isSwitchVisible")){h="ABOVE";j=true}else{if(l<i){h="ABOVE"}else{if($(".TopBar ").length>0){h="FIXEDMORE"}else{h=((l-this.navHeight)<this.$elEnd)?"FIXED":"BELOW"}}}}else{h="ABOVE"}if(this.hasSubSticky){this.$el.find(".js-PubliSticky").triggerHandler("updateState",{state:h,height:this.navHeight})}if(this.state===h){return}this.state=h;this.switchElementFromParent.isHidden=j},setAnchorState:function(g){var i=c.Utils.getYOffset(),h=this.nbItems-1;_.each(this.targets,function(m,k){var l=k<h?this.targets[k+1].topPosition:false,j=this.$("a.js-PubliSticky-anchor[href='"+m.id+"']");if(!_.isNull(g)){if(k===g){j.addClass("isActive")}else{j.removeClass("isActive")}}else{if(((i>=m.topPosition&&k<h)&&(i<l))||((i>=m.topPosition)&&!l)){j.addClass("isActive")}else{j.removeClass("isActive")}}},this)},goToAnchor:function(h){h.preventDefault();var g=$(h.currentTarget),i,j;if(!g.closest(".js-PubliSticky").is($(h.delegateTarget))){return}i=g.attr("href");j=_.indexOf(this.targets,_.findWhere(this.targets,{id:i}));this[this.stickyNavAction+"ToAnchor"]({hash:i,index:j})},switchToAnchor:function(h){var j=this.targets[0].topPosition,i=this.state,g=$(h.hash);this.navIndex=h.index;this.setAnchorState(h.index);this.$items.removeClass("isSwitchVisible");g.addClass("isSwitchVisible");this.updateSwitchedViews(g);if(i==="ABOVE"||_.isNull(i)){return}$("body, html").stop().animate({scrollTop:j},{duration:0})},scrollToAnchor:function(i){var h=i.index,g=this.fullHeaderHeight,j;j=(h>=0)?this.targets[h].topPosition:$(i.hash).offset().top-g;$("body, html").stop().animate({scrollTop:j},600,"swing")},updateSwitchedViews:function(g){var h=this;_.each(f,function(i){var j=i.parentSticky.currentItem;if(j.exist){if(j.$el.is(g)){i.parentSticky.currentItem.isVisible=true;i.$el.trigger("updateState",{state:h.state,height:h.navHeight});i.getPositions()}else{i.parentSticky.currentItem.isVisible=false}i.setState();i.render()}})},render:function(){this.$nav.removeClass().prop("className",this.navClasses+" "+e[this.state])}});c.Views.PubliStickyNav=d}(Fnac);;void function(b){var a={trigger:{on:"PubliAccordion-trigger--on",off:"PubliAccordion-trigger--off"},target:{on:"PubliAccordion-target--on",off:"PubliAccordion-target--off"}};var c=Backbone.View.extend({initialize:function(){var d=this.$(".js-PubliAccordion-item"),f=d.find(".js-PubliAccordion-trigger"),e=d.find(".js-PubliAccordion-target"),g={items:[],targets:[],triggers:[]},j,h=0;this.nbItems=d.length;j=d.length;this.$items=d;this.$triggers=f;this.$targets=e;for(h=0;h<j;h+=1){g.items[h]=d.eq(h).attr("class");g.targets[h]=e.eq(h).attr("class");g.triggers[h]=f.eq(h).attr("class")}this.classNames=g;this.initRender()},events:{"click .js-PubliAccordion-trigger":"getIndex"},getIndex:function(f){var d=$(f.target),g=this.$triggers.index(d);this.render(g)},initRender:function(){this.$targets.removeClass(a.target.on).addClass(a.target.off);this.$triggers.removeClass(a.trigger.on).addClass(a.trigger.off).data("accordion_itemState","OFF");this.$items.removeClass(a.target.on).addClass(a.target.off)},render:function(g){var e=this.$targets.eq(g),f=this.$triggers.eq(g),d=this.$items.eq(g),h=(this.$triggers.eq(g).data("accordion_itemState")==="OFF"?true:false);this.initRender();if(h){f.removeClass(a.trigger.off).addClass(a.trigger.on).data("accordion_itemState","ON");e.removeClass(a.target.off).addClass(a.target.on);d.removeClass(a.target.off).addClass(a.target.on)}else{f.data("accordion_itemState","OFF")}}});b.Views.PubliAccordion=c}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){var c=this.$(".js-PubliFlipCard-item"),d=this.$(".js-PubliFlipCard-trigger"),e=this.$el.data("flipcard-item-prefix")||"PubliFlipCard-item",f=this.$el.data("flipcard-trigger-prefix")||"PubliFlipCard-trigger";this.$cards=c;this.$triggers=d;this.itemFlipClass=e+"--flip";this.triggerFlipClass=f+"--flip";this.initRender(true)},events:{"click .js-PubliFlipCard-trigger":"flipFace"},flipFace:function(d){d.preventDefault();var c=$(d.target),f=this.$triggers.index(c);this.render(f)},initRender:function(c){var d=this;_.each(d.$triggers,function(g,f){var e=$(g);if(c){e.data("flipCard_itemState","OFF")}e.removeClass(this.triggerFlipClass)})},render:function(e){var c=this.$cards.eq(e),d=this.$triggers.eq(e),f=(d.data("flipCard_itemState")==="OFF"?true:false);if(f){c.addClass(this.itemFlipClass);d.data("flipCard_itemState","ON").addClass(this.triggerFlipClass)}else{c.removeClass(this.itemFlipClass);d.data("flipCard_itemState","OFF").removeClass(this.triggerFlipClass)}}});a.Views.PubliFlipCard=b}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){var e=$(".js-Header").eq(0).height();var d=$(".js-PubliStickyNav");if(d.size()){e+=d.eq(0).height()}this.headerHeight=e;var c=this.$el;var g=c.data("parallax-speed")||0.6;var f=c.data("parallax-perspective")||1;this.speed=g;this.perspective=f;this.getSizes();$(window).on("scroll.PubliParallax",_.bind(this.onScroll,this)).on("resize.PubliParallax",_.bind(this.getSizes,this))},getSizes:function(){var c=this.$el;var f=Math.floor(c.offset().top);var e=c.height();var i=this.perspective;var g=this.headerHeight;var h=i!=1?Math.ceil(e*i):e;var j=f-((h-e)/2)-g;c.css("background-position","");var d=c.css("background-position").split(" ");this.cssBgPos={x:parseInt(d[0],10),y:parseInt(d[1],10),};this.startPos=j;this.elHeight=e;this.onScroll()},onScroll:function(){var f=a.Utils.getYOffset();var e=this.startPos;var d=(f>=e)?this.cssBgPos.y+((f-e)*this.speed):this.cssBgPos.y;var c=this.cssBgPos.x+"px "+d+"px";this.render(c)},render:function(c){this.$el.css({"background-position":c})}});a.Views.PubliParallax=b}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){this.headerHeight=$(".js-Header").eq(0).height();this.visualCount=this.$(".js-PubliVisuals-item").length;this.visualIndex=0;this.$visualView=this.$(".js-PubliVisuals-view");this.$visualImages=this.$(".js-PubliVisuals-image");this.$visualVideo=null;var c=this.$(".js-PubliVisuals-item");var d=0;_.each(c,function(g,h){var e,f;if(g.getAttribute("data-type")==="video"){if(d===0){f=$("<div class='PubliVisuals-videoContainer' style='position: absolute;left: -99999999999px;' />");e=$("<iframe src='' class='PubliVisuals-video' frameborder='0' allowfullscreen />");f.append(e);this.$visualView.append(f);this.$visualVideo=f;d+=1}if(d>0){return}}},this);this.render()},events:{"mouseover  .js-PubliVisuals-item":"switchPreview","click     .js-PubliVisuals-previous":"previous","click     .js-PubliVisuals-next":"next"},switchPreview:function(e){var c=$(e.target);var d=c.is(".js-PubliVisuals-item")?c:c.parents(".js-PubliVisuals-item");this.visualIndex=d.index();this.loadPreview()},loadPreview:function(){var d=$(".js-PubliVisuals-thumbnails .js-PubliVisuals-item").eq(this.visualIndex),c=_.isNull(this.$visualVideo)?false:this.$visualVideo.children("iframe"),e=d.data("src");if(d.data("type")==="video"){this.$visualImages.hide();c.attr("src",e);this.$visualVideo.removeAttr("style")}else{if(!c){this.$visualImages.attr("src",e)}else{c.removeAttr("src");this.$visualVideo.css({position:"absolute",left:"-99999999999999999px"});this.$visualImages.attr("src",e).show()}}this.$(".PubliVisuals-item--active").removeClass("PubliVisuals-item--active");d.addClass("PubliVisuals-item--active")},previous:function(){this.visualIndex=((this.visualIndex===0)?this.visualCount:this.visualIndex)-1;this.loadPreview()},next:function(){this.visualIndex=(this.visualIndex===(this.visualCount-1))?0:this.visualIndex+1;this.loadPreview()},render:function(){this.$(".js-PubliVisuals-item").first().addClass("PubliVisuals-item--active");this.loadPreview()}});a.Views.PubliVisualsView=b}(Fnac);;void function(a){var b=Backbone.View.extend({initialize:function(){var d=this.$el.attr("href"),c=this.$el;this.$target=$(d);this.$sticky=$(this.$el.attr("data-stickyElement"))||false;this.motion=this.$el.attr("data-motion")||"swing";this.getPosition();$(window).on("resize.PubliScrollToWithSticky",_.debounce(_.bind(this.onResize,this),300));this.$el.on("click.PubliScrollToWithSticky",_.bind(this.goTo,this))},onResize:function(){this.getPosition()},getPosition:function(){var d=this.$sticky&&this.$sticky.hasClass("PubliSticky--fixed"),c=this.$target["0"].offsetTop;this.targetTopPosition=c;if(!d){this.targetTopPosition-=this.$sticky.outerHeight()}},goTo:function(c){c.preventDefault();$("body, html").stop().animate({scrollTop:this.targetTopPosition},600,this.motion)}});a.Views.PubliScrollToAnchorView=b}(Fnac);;void function(a){var b=Backbone.View.extend({el:".js-ProductVisuals",initialize:function(){this.headerHeight=$(".js-Header").eq(0).height();this.visualCount=this.$(".js-ProductVisuals-item").length;this.visualIndex=0;this.visualThumbnailWidth=60;this.visualVisibleThumbnailCount=Math.floor(this.$(".js-ProductVisualsThumbnails-list").width()/this.visualThumbnailWidth);this.$visualImagePreview=this.$(".js-ProductVisuals-imagePreview");this.$visualBox=this.$(".js-ProductVisuals-box");this.$visualBoxImage=this.$(".js-ProductVisualsBox-image");this.listenTo(a.App,"product-visual:changeTempImage",this.changeWithTempImage);this.render()},events:{"mouseover .js-ProductVisuals-item":"switchPreview","click     .js-ProductVisuals-item, .js-ProductVisuals-zoom":"selectItem","click     .js-ProductVisuals-previous":"previous","click     .js-ProductVisuals-next":"next","click     .js-ProductVisuals-zoom":"toggleBox","click     .js-ProductVisualsBox-close":"toggleBox"},changeWithTempImage:function(c){this.$visualImagePreview.attr("src",c)},switchPreview:function(e){var c=$(e.target);var d=c.is(".js-ProductVisuals-item")?c:c.parents(".js-ProductVisuals-item");if(d.data("type")==="video"){return}this.visualIndex=d.index();this.loadPreview()},loadPreview:function(){var d=$(".js-ProductVisuals-thumbnails .js-ProductVisuals-item").eq(this.visualIndex);var c=$(".js-ProductVisualsBox-thumbnails .js-ProductVisuals-item").eq(this.visualIndex);this.$visualImagePreview.attr("src",d.data("src"));this.$visualBoxImage.attr("src",d.data("src-zoom"));this.$(".ProductVisuals-item--active").removeClass("ProductVisuals-item--active");d.addClass("ProductVisuals-item--active");c.addClass("ProductVisuals-item--active")},previous:function(){this.visualIndex=((this.visualIndex===0)?this.visualCount:this.visualIndex)-1;if($(".js-ProductVisuals-thumbnails .js-ProductVisuals-item").eq(this.visualIndex).data("type")==="video"){this.previous()}this.loadPreview()},next:function(){this.visualIndex=(this.visualIndex===(this.visualCount-1))?0:this.visualIndex+1;if($(".js-ProductVisuals-thumbnails .js-ProductVisuals-item").eq(this.visualIndex).data("type")==="video"){this.next()}this.loadPreview()},selectItem:function(e){e.preventDefault();var c=$(e.target);var d=c.is(".js-ProductVisuals-item")?c:c.parents(".js-ProductVisuals-item");switch(d.data("type")){case"image":if(!d.parents("div").first().hasClass("js-ProductVisualsBox-thumbnails")){this.toggleBox()}break;case"video":this.scrollToVideo();break}},scrollToVideo:function(){if(!$("#strate-video-player").length){return}$("html, body").stop().animate({scrollTop:$("#strate-video-player").offset().top-(this.headerHeight-1)},600,"swing")},toggleBox:function(){this.$visualBox.toggle()},render:function(){this.$(".js-ProductVisuals-item").first().addClass("ProductVisuals-item--active");this.$(".js-ProductVisualsBox-thumbnails").html(this.$(".js-ProductVisuals-thumbnails").html()).find('[data-type="video"]').remove();this.$(".js-ProductVisualsBox-image").attr("src",$(".js-ProductVisuals-thumbnails .js-ProductVisuals-item").eq(this.visualIndex).data("src-zoom"))}});a.Views.ProductVisualsView=b}(Fnac);;(function(a){var b=Backbone.View.extend({initialize:function(){this.baseWidth=this.$el.width();this.baseHeight=Math.min(Math.round(9*this.baseWidth/16),360);this.bufferTimer=0;this.controlsHeight=70;this.height=0;this.isDraggingProgressBar=false;this.isFirstTime=true;this.isFullScreen=false;this.isMuted=false;this.isPlaying=false;this.isNoTouch=$("html").hasClass("no-touch");this.playlistIsVisible=false;this.progressBarWidth=0;this.source="Fnac";this.title=null;this.videoCount=this.$(".js-VideoPlayerPlaylist-item").length;this.videoId=this.cid+"-video";this.videoIndex=-1;this.videoThumbnail=null;this.videoUrl=0;this.videoUrlAdvertising=0;this.volume=0.5;this.volumeBarWidth=0;this.width=this.baseWidth;this.youTubePattern=/.*(youtu\.be|youtube\.com).*/i;this.youTubeTimer=0;this.$progressBar=this.$(".js-VideoPlayerControls-progressBar");this.$progressBarPlayed=this.$(".js-VideoPlayerControls-progressBarPlayed");this.$volumeBar=this.$(".js-VideoPlayerControls-volumeBar");this.$selectedItem=null;this.$video=null;_.bindAll(this,"hideControls","onKeyUp","onPlayerReady","onVideoEnded","onProgressMouseUp","onProgressTouchStart","onProgressTouchMove","onProgressTouchEnd","onVolumeMouseUp","onYouTubeVideoReady","onYouTubeVideoStateChanged","playAt","playerReset","render","renderError","resize","setProgressBar","getOffsetX","setVolume","showControls","togglePlay","updateProgressBar");this.preRender();this.loadVideo()},events:{"click     .js-VideoPlayerPlaylist-item":"loadVideo","click     .js-VideoPlayerPlaylist-toggle":"togglePlaylist","click     .js-VideoPlayer-glass":"togglePlay","dblclick  .js-VideoPlayer-glass":"toggleFullScreen","click     .js-VideoPlayerControls-next":"playNext","click     .js-VideoPlayerControls-previous":"playPrevious","mousedown .js-VideoPlayerControls-progressBar":"onProgressMouseDown","touchstart .js-VideoPlayerControls-progressBar":"onProgressTouchStart","click     .js-VideoPlayerControls-toggleFullScreen":"toggleFullScreen","click     .js-VideoPlayerControls-toggleMute":"toggleMute","click     .js-VideoPlayerControls-togglePlay":"togglePlay","mousedown .js-VideoPlayerControls-volumeBar":"onVolumeMouseDown","touchstart .js-VideoPlayerControls-volumeBar":"onVolumeTouchStart"},loadVideo:function(c,d){if(c){this.$selectedItem=this.$(c.currentTarget)}else{if(d){this.$selectedItem=this.$('.js-VideoPlayerPlaylist-item[data-video-index="'+d+'"]')}else{this.$selectedItem=this.$(".js-VideoPlayerPlaylist-item").first()}}if(!d&&this.$selectedItem.data("video-index")==this.videoIndex){return}if(this.playlistIsVisible){this.togglePlaylist()}if(this.isPlaying){this.togglePlay()}if(!this.isFirstTime){if(this.source==="YouTube"){window.clearInterval(this.youTubeTimer);this.player.destroy()}else{this.$("object").length?this.player.remove():$(".js-VideoPlayer-videoContainer").empty()}}this.height=this.width*this.$selectedItem.data("video-0-height")/this.$selectedItem.data("video-0-width");this.title=this.$selectedItem.find(".js-VideoPlayerPlaylist-itemTitle").text();this.videoIndex=this.$selectedItem.data("videoIndex");this.videoUrl=this.$selectedItem.data("video-0-url");this.$(".js-VideoPlayer-poster").css("background-image","url("+this.$selectedItem.data("videoThumbnail")+")");if(this.youTubePattern.test(this.videoUrl)){this.source="YouTube";this.$(".js-VideoPlayer-videoContainer").html('<div id="'+this.videoId+'"></div>');this.loadYouTubeVideo()}else{this.source="Fnac";this.loadPlayerHtml();this.$video=this.$("video");this.loadPlayer()}},onVideoEnded:function(c){if(this.$selectedItem.data("video-"+this.$selectedItem.data("video-index")+"-advertising-url")){if(this.videoUrlAdvertising==0){this.videoUrlAdvertising=this.$selectedItem.data("video-"+this.$selectedItem.data("video-index")+"-advertising-url");this.player.setSrc(this.videoUrlAdvertising);this.player.load();this.player.play();this.togglePlay(true)}else{this.videoUrlAdvertising=0;this.player.setSrc(this.videoUrl);this.player.load();this.player.play()}}},loadPlayerHtml:function(){var e='<video id="'+this.videoId+'">';var c=0,d=this.$selectedItem.data("video-count");for(var c=0;c<d;c++){e+='<source type="'+this.$selectedItem.data("video-"+c+"-mime-type")+'" src="'+this.$selectedItem.data("video-"+c+"-url")+'">'}e+="</video>";this.$(".js-VideoPlayer-videoContainer").html(e)},loadPlayer:function(){this.player=new MediaElement(this.videoId,{defaultVideoHeight:this.height,defaultVideoWidth:this.width,enablePluginSmoothing:true,flashName:a.config.mediaelementSwfUrl,pluginHeight:this.height,pluginPath:"",pluginWidth:this.width,plugins:["flash"],timerRate:250,success:this.onPlayerReady,error:this.renderError})},onPlayerReady:function(d,c){this.$mediaElement=$(d);this.$video=this.$("object").length?this.$("object"):$(c);this.$mediaElement.on("ended",function(f){this.onVideoEnded(f);this.togglePlay(f)}.bind(this));this.$mediaElement.one("loadedmetadata",this.render);this.$mediaElement.on("progress timeupdate",this.updateProgressBar);$(document).on("keyup",this.onKeyUp);if(this.$("object").length){this.togglePlay();window.setTimeout(this.playerReset,1000)}d.setVolume(this.volume)},onKeyUp:function(c){if(this.isFullScreen&&c.keyCode===27){this.isFullScreen=false;this.$el.removeClass("VideoPlayer--fullscreen");this.$(".js-VideoPlayerControls-toggleFullScreen").removeClass("fullscreen--active");this.resize()}},playerReset:function(){this.togglePlay();this.player.setCurrentTime(0)},loadYouTubeVideo:function(){if(window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady();return}window.onYouTubeIframeAPIReady=_.bind(function(){this.player=new YT.Player(this.videoId,{height:this.baseHeight,width:this.baseWidth,videoId:a.Utils.extractIdFromYouTubeUrl(this.videoUrl),playerVars:{autoplay:0,controls:0,modestbranding:0,rel:0,showinfo:0,wmode:"transparent"},events:{onReady:this.onYouTubeVideoReady,onError:function(d){console.error(d)},onStateChange:this.onYouTubeVideoStateChanged}})},this);var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";$("body").append(c)},onYouTubeVideoReady:function(){this.$video=this.$("iframe");this.player.duration=this.player.getDuration();this.player.setVolume(this.volume*100);this.youTubeTimer=window.setInterval(this.updateProgressBar,250);this.render()},onYouTubeVideoStateChanged:function(c){switch(c.data){case YT.PlayerState.ENDED:this.togglePlay(false);break;case YT.PlayerState.PLAYING:this.$(".js-VideoPlayerControls-togglePlay").addClass("play--active");break;case YT.PlayerState.PAUSED:this.$(".js-VideoPlayerControls-togglePlay").removeClass("play--active");break}},showControls:function(){this.$(".js-VideoPlayer-header, .js-VideoPlayer-controls").stop().fadeIn();if(this.videoCount>1){this.$(".js-VideoPlayer-playlist").stop().fadeIn()}},hideControls:function(){this.$(".js-VideoPlayer-header, .js-VideoPlayer-controls").stop().fadeOut();if(this.videoCount>1){this.$(".js-VideoPlayer-playlist").stop().fadeOut()}},togglePlaylist:function(){this.$(".js-VideoPlayerPlaylist-list").toggleClass("VideoPlayerPlaylist-list--active");this.playlistIsVisible=!this.playlistIsVisible},togglePlay:function(){switch(this.source){case"Fnac":this.isPlaying?this.player.pause():this.player.play();break;case"YouTube":this.isPlaying?this.player.pauseVideo():this.player.playVideo();break}this.$(".js-VideoPlayerControls-togglePlay").toggleClass("play--active");this.$(".js-VideoPlayer-glass").toggleClass("VideoPlayer-glass--paused");this.isPlaying=!this.isPlaying;if(this.$(".js-VideoPlayer-poster").length){this.$(".js-VideoPlayer-poster").remove()}},playAt:function(c){var d=parseInt(this.player.duration*this.getOffsetX(c)/this.progressBarWidth);switch(this.source){case"Fnac":this.player.setCurrentTime(d);break;case"YouTube":this.player.seekTo(d,true);break}},playPrevious:function(){this.videoIndex=(this.videoIndex===1)?this.videoIndex=this.videoCount:this.videoIndex-1;this.loadVideo(false,this.videoIndex)},playNext:function(){this.videoIndex=(this.videoIndex===this.videoCount)?1:this.videoIndex+1;this.loadVideo(false,this.videoIndex)},toggleMute:function(){switch(this.source){case"Fnac":this.isMuted?this.player.setMuted(false):this.player.setMuted(true);break;case"YouTube":this.isMuted?this.player.unMute():this.player.mute();break}this.$(".js-VideoPlayerControls-toggleMute").toggleClass("mute--active");this.$(".js-VideoPlayerControls-volumeBarFill").toggleClass("VideoPlayerControls-volumeBarFill--muted");this.isMuted=!this.isMuted},onVolumeMouseDown:function(c){this.setVolume(c);this.$volumeBar.on("mousemove",this.setVolume);this.$volumeBar.one("mouseup mouseleave",this.onVolumeMouseUp)},onVolumeMouseUp:function(c){this.$volumeBar.off("mousemove")},setVolume:function(c){var d=this.getOffsetX(c)/this.volumeBarWidth;if(this.isMuted){this.toggleMute()}switch(this.source){case"Fnac":this.player.setVolume(d);break;case"YouTube":this.player.setVolume(d*100);break}this.volume=d;this.$(".js-VideoPlayerControls-volumeBarFill").width(this.volumeBarWidth*d)},toggleFullScreen:function(){this.isFullScreen?this.exitFullScreen():this.enterFullScreen()},windowIsFullScreen:function(){return(!window.screenTop&&!window.screenY)},enterFullScreen:function(){if(this.isFullScreen){return}this.isFullScreen=true;if(this.el.requestFullscreen){this.el.requestFullscreen()}else{if(this.el.msRequestFullscreen){this.el.msRequestFullscreen()}else{if(this.el.mozRequestFullScreen){this.el.mozRequestFullScreen()}else{if(this.el.webkitRequestFullscreen){this.el.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(!this.windowIsFullScreen()){try{var d=new ActiveXObject("Wscript.shell");d.SendKeys("{F11}")}catch(c){console.error(c.message)}}if(this.$("object").length){this.height=$(window).height()-this.controlsHeight;this.width=$(window).width();this.player.setVideoSize(this.width,this.height)}}}}}this.$el.addClass("VideoPlayer--fullscreen");this.$(".js-VideoPlayerControls-toggleFullScreen").addClass("fullscreen--active");this.resize()},exitFullScreen:function(){if(!this.isFullScreen){return}this.isFullScreen=false;if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(this.windowIsFullScreen()){try{var d=new ActiveXObject("Wscript.shell");d.SendKeys("{F11}")}catch(c){console.error(c.message)}}if(this.$("object").length){this.height=this.baseHeight;this.width=this.baseWidth;this.player.setVideoSize(this.width,this.height)}}}}}this.$el.removeClass("VideoPlayer--fullscreen");this.$(".js-VideoPlayerControls-toggleFullScreen").removeClass("fullscreen--active");this.resize()},onProgressMouseDown:function(c){this.isDraggingProgressBar=true;this.setProgressBar(c);this.$progressBar.on("mousemove",this.setProgressBar);this.$progressBar.one("mouseup mouseleave",this.onProgressMouseUp)},onProgressMouseUp:function(c){this.isDraggingProgressBar=false;this.$progressBar.off("mousemove");this.playAt(c)},setProgressBar:function(c){var d=this.getOffsetX(c)/this.progressBarWidth;this.$progressBarPlayed.width(this.progressBarWidth*d)},onProgressTouchStart:function(c){this.isDraggingProgressBar=true;this.setProgressBar(c);this.$progressBar.on("touchmove",this.onProgressTouchMove);this.$progressBar.on("touchend",this.onProgressTouchEnd)},onProgressTouchMove:function(c){var d=c.originalEvent.touches[0];if(d.clientX<=$(c.currentTarget).offset().left||d.clientX>=$(c.currentTarget).offset().left+$(c.currentTarget).outerWidth()){this.onProgressTouchEnd(c)}else{this.setProgressBar(c)}},onProgressTouchEnd:function(c){this.isDraggingProgressBar=false;this.$progressBar.off("touchmove");this.playAt(c)},getOffsetX:function(c){if(c.offsetX){return c.offsetX}var d=c.target.getBoundingClientRect();return c.originalEvent.changedTouches[0].clientX-d.left},updateProgressBar:function(e){var d;switch(this.source){case"Fnac":var c=e.target.buffered;d=c.length?(c.end(c.length-1)/e.target.duration):0;break;case"YouTube":d=this.player.getVideoLoadedFraction?this.player.getVideoLoadedFraction():0;this.player.currentTime=this.player.getCurrentTime?this.player.getCurrentTime():0;break}this.$(".js-VideoPlayerControls-currentTime").text(a.Utils.humanizeTimestamp(this.player.currentTime));this.$(".js-VideoPlayerControls-progressBarLoaded").width(this.progressBarWidth*d);if(!this.isDraggingProgressBar){this.$progressBarPlayed.width(this.progressBarWidth*this.player.currentTime/this.player.duration)}},preRender:function(){this.$el.css("height",this.baseHeight)},render:function(){if(this.isFirstTime&&this.videoCount>1){this.$el.addClass("VideoPlayer--withPlaylist")}this.$(".js-VideoPlayer-title").text(this.title);this.$progressBarPlayed.removeClass("style");this.$(".js-VideoPlayerControls-duration").text(a.Utils.humanizeTimestamp(this.player.duration));this.$(".VideoPlayerPlaylist-item--active").removeClass("VideoPlayerPlaylist-item--active");this.$selectedItem.addClass("VideoPlayerPlaylist-item--active");if(!this.isFirstTime){this.togglePlay(true)}this.resize()},renderError:function(){this.$el.removeAttr("style").addClass("VideoPlayer--hasError").html("La vidéo n'a pas pu être chargée.")},resize:function(){this.baseWidth=this.$el.width();this.baseHeight=Math.round(9*this.baseWidth/16);this.height=this.baseHeight;this.width=this.baseWidth;this.$el.removeAttr("style");this.$video.removeAttr("style");if(!this.isFullScreen){this.$video.css({height:this.height+"px"});$("body").removeClass("no-scroll")}else{this.$el.css({height:"100%",width:window.innerWidth+"px"});this.$video.css({width:window.innerWidth+"px"});$("body").addClass("no-scroll")}this.progressBarWidth=this.$(".js-VideoPlayerControls-progressBar").width();this.volumeBarWidth=this.$(".js-VideoPlayerControls-volumeBar").width();this.$mediaElement.trigger("timeupdate");if(this.isFirstTime){this.$(".js-VideoPlayer-controls").removeClass("invisible");if(this.isNoTouch){this.$el.hover(this.showControls,this.hideControls);this.hideControls()}else{this.showControls()}$(window).resize(this.resize);this.isFirstTime=false}}});a.Views.VideoPlayerView=b})(window.Fnac);;$(document).on("click",".strateTestExpert-item .article-desc",function(){window.location=$(this).closest(".strateTestExpert-item").find(".article-title a").prop("href")});$(document).on("click",".postEvent",function(){window.location=$(this).find(".tilePostEvent").prop("href")});$(document).on("click",".Brand-media",function(){window.location=$(this).closest(".Brand").find(".seeAll-bt").prop("href")});$(document).on("click",".Need-helpitem",function(){window.location=$(this).find("a").prop("href")});;$(function(){$(".js-open-form").click(function(){$(".addRate a").trigger("click")})});;function RetreatStoreManager(){var f=this;var h="#";var i=".";var e="hide";var g="selected";var a={"fr-FR":"France","fr-BE":"Belgique","nl-BE":"Belgique","es-ES":"Espagne","pt-PT":"Portugal"};var j=function(p,o,n,m,l,k){$.ajax({url:p,type:o,data:n,beforeSend:k}).done(m).fail(l)};var b={Container:".liStore",Info:".divStoreInfo .storeName",Detail:".divStoreDetail",PictoSave:".aPictoSaveStore",Favori:".Favori",MyInpuText:".myInputText"};var d=function(m){var k=$(".ResultRetreatStorePopin li").size()-1;var l=s_gi(s_account);l.linkTrackVars="events,eVar26,eVar27,eVar28";l.linkTrackEvents="event5";l.events="event5";l.eVar28="Recherche manuelle";l.eVar26=m;l.eVar27=""+k;l.tl(this,"o","Recherche store Locator")};var c=function(k,n,l,p,m,r,q){var o=$(k);o.each(function(){var u=$(this).find(n);var t=$(this).find(l);var v=$(this).find(p);var s=$(this).find(".closeStoreDetail");if(v.is(m)==false){$(this).hover(function(){v.removeClass(e)},function(){v.addClass(e)})}u.click(function(w){var x=$(w.target);if(!x.hasClass("aPictoSaveStore")&&!x.hasClass("ArticleOrder")){$(l).each(function(){if($(this).prop("id")!=t.prop("id")){$(this).addClass(e);$(this).parent().removeClass(q)}});t.toggleClass(r);u.parent().toggleClass(q)}});s.click(function(){t.toggleClass(e)});v.click(function(){if(v.is(m)==false){var x=$(this).data("storeid");var w=f.Fields.hidPrid.val();f.Handler.SaveFavoriStore(x,w)}})})};this.Fields={divRetreatStorePopin:{},divHeaderRetreatStorePopin:{},ulResultRetreatStorePopin:{},txtCityOrZipCode:{},txtZipCode:{},btnSearchStore:{},hidGoogleAPIEnable:{},hidSearchStoreUrl:{},hidSaveStoreUrl:{},hidPrid:{},spanZipCodeValidator:{},spanInputValueValidator:{},btnClearInput:{},chkOnShlef:{},chkIsRetreatOneHour:{},hidPostalCodeRegEx:{},hidCountry:{}};this.Latitude=null;this.Longitude=null;this.MapsLoaded=false;this.Handler={LoadMapsScript:function(k){var l=$("#MapUrl").val()+"SearchCallback";var m=document.createElement("script");m.type="text/javascript";m.src=l;document.body.appendChild(m)},SearchStore:function(l){var n=String(f.Fields.hidGoogleAPIEnable.val()).toLocaleLowerCase()=="true";var s=f.Fields.txtCityOrZipCode.length>0?f.Fields.txtCityOrZipCode.val().trim():f.Fields.txtZipCode.val().trim();var k=$(l.currentTarget).attr("id");var r=f.Fields.hidSearchStoreUrl.val();var p=parseInt(f.Fields.hidPrid.val());f.Fields.spanZipCodeValidator.hide();f.Fields.spanInputValueValidator.hide();if(s===""){if(k!="chkOnShlef"&&k!="chkIsRetreatOneHour"){f.Fields.spanInputValueValidator.show()}return}var q={InputValue:s,Latitude:0,Longitude:0,Prid:parseInt(f.Fields.hidPrid.val()),OnShlef:Boolean(f.Fields.chkOnShlef.is(":checked")),IsRetreatOneHour:Boolean(f.Fields.chkIsRetreatOneHour.is(":checked"))};var o=String(f.Fields.hidPostalCodeRegEx.val());if(n){try{if(f.MapsLoaded==false){f.Handler.LoadMapsScript()}else{f.ProcessSearchStore()}}catch(m){j(r,"POST",q,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}}else{j(r,"POST",q,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}},SaveFavoriStore:function(o,l){var n=f.Fields.hidSaveStoreUrl.val();var k=f.Fields.txtCityOrZipCode.length>0?f.Fields.txtCityOrZipCode.val():f.Fields.txtZipCode.val();var m={StoreId:o,Prid:l,InputValue:k,Latitude:f.Latitude,Longitude:f.Longitude,OnShlef:Boolean(f.Fields.chkOnShlef.is(":checked")),IsRetreatOneHour:Boolean(f.Fields.chkIsRetreatOneHour.is(":checked"))};j(n,"POST",m,f.CallBack.SaveStoreCallbackSuccess,f.CallBack.SaveStoreCallbackError,null)},ClearInput:function(){f.Fields.txtCityOrZipCode.val("");f.Fields.txtZipCode.val("");$(this).addClass(e)},SetShowClearButtonTxtZipCode:function(){if($(this).val()==""){f.Fields.btnClearInput.addClass(e)}else{f.Fields.btnClearInput.removeClass(e)}},SetShowClearButtonTxtCityOrZipCode:function(){if($(this).val()==""){f.Fields.btnClearInput.addClass(e)}else{f.Fields.btnClearInput.removeClass(e)}},SendFormWithEnter:function(l){l=l||window.event||{};var k=l.charCode||l.keyCode||l.which;if(k===13){f.Fields.btnSearchStore.click()}}};this.CallBack={SearchCallbackSuccess:function(k){f.Fields.ulResultRetreatStorePopin.html(k);c(b.Container,b.Info,b.Detail,b.PictoSave,b.Favori,e,g);try{var m=f.Fields.txtCityOrZipCode.length>0?f.Fields.txtCityOrZipCode.val():f.Fields.txtZipCode.val();d(m)}catch(l){}},SearchCallbackError:function(k){},SaveStoreCallbackSuccess:function(k){f.Fields.ulResultRetreatStorePopin.html(k);c(b.Container,b.Info,b.Detail,b.PictoSave,b.Favori,e,g)},SaveStoreCallbackError:function(k){}};this.Initialize=function(){for(var k in f.Fields){f.Fields[k]=$(h+k)}c(b.Container,b.Info,b.Detail,b.PictoSave,b.Favori,e,g);f.Fields.btnSearchStore.click(f.Handler.SearchStore);f.Fields.btnClearInput.click(f.Handler.ClearInput);f.Fields.chkOnShlef.change(f.Handler.SearchStore);f.Fields.chkIsRetreatOneHour.change(f.Handler.SearchStore);f.Fields.txtCityOrZipCode.keyup(f.Handler.SetShowClearButtonTxtCityOrZipCode);f.Fields.txtZipCode.keyup(f.Handler.SetShowClearButtonTxtZipCode);$(b.MyInpuText,f.Fields.divRetreatStorePopin).keypress(f.Handler.SendFormWithEnter)};this.ProcessSearchStore=function(){try{f.MapsLoaded=true;var q=f.Fields.txtCityOrZipCode.length>0?f.Fields.txtCityOrZipCode.val().trim():f.Fields.txtZipCode.val().trim();var n=String(f.Fields.hidPostalCodeRegEx.val());var p=f.Fields.hidSearchStoreUrl.val();var o={InputValue:q,Latitude:0,Longitude:0,Prid:parseInt(f.Fields.hidPrid.val()),OnShlef:Boolean(f.Fields.chkOnShlef.is(":checked")),IsRetreatOneHour:Boolean(f.Fields.chkIsRetreatOneHour.is(":checked"))};var l=new google.maps.Geocoder();if(l&&!String(q).trim().match(n)){var m={address:q+","+a[f.Fields.hidCountry.val()]};l.geocode(m,function(r,s){if(s==google.maps.GeocoderStatus.OK){o.Latitude=r[0].geometry.location.lat().toString().substr(0,12);o.Longitude=r[0].geometry.location.lng().toString().substr(0,12);f.Latitude=o.Latitude;f.Longitude=o.Longitude;j(p,"POST",o,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}else{if(s==google.maps.GeocoderStatus.ZERO_RESULTS&&q.match(n)){o.InputValue=q}else{o.InputValue=""}j(p,"POST",o,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}})}else{if(String(q).trim().match(n)){o.InputValue=q}j(p,"POST",o,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}}catch(k){j(p,"POST",o,f.CallBack.SearchCallbackSuccess,f.CallBack.SearchCallbackError,null)}}}function SearchCallback(){rs.ProcessSearchStore()};;void function(){$("input, textarea").placeholder();var e=function(){$(".Block-seoTitle .icon_i_059_arrow_bottom_01").each(function(){$(this).closest(".Block-seo").addClass("Toggle").find(".Block-seoList").slideUp()});$(".Block-seoTitle").click(function(){if($(this).parent().hasClass("Toggle")){$(this).toggleClass("up").parent().find(".Block-seoList").slideToggle()}})};var a=$(".js-popupVideo");if(a.length){a.magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",overflowY:"hidden",fixedContentPos:true,removalDelay:160,preloader:false})}var c=function(o,g,k,l,n){n--;if(n==-1){l--;n=59;if(l==-1){k--;l=59;if(k==-1){g--;k=24}}}o.find(".days").text(g);o.find(".hours").text(k);o.find(".minutes").text(l);o.find(".seconds").text(n)};var f=function(){$(".countdown").each(function(){countTarget=$(this);d=parseInt(countTarget.find(".days").text());h=parseInt(countTarget.find(".hours").text());m=parseInt(countTarget.find(".minutes").text());s=parseInt(countTarget.find(".seconds").text());if(!(d==0&&h==0&&m==0&&s==0)){c(countTarget,d,h,m,s)}})};var b=function(r,q){if(r.prop("type")==q){return r}try{return r.prop("type",q)}catch(k){var n=$("<div>").append(r.clone()).html();var o=/type=(\")?([^\"\s]+)(\")?/;var p=$(n.match(o)==null?n.replace(">",' type="'+q+'">'):n.replace(o,'type="'+q+'"'));p.data("type",r.data("type"));var l=r.data("events");var g=function(t){return function(){for(i in t){var u=t[i];for(j in u){p.bind(i,u[j].handler)}}}}(l);r.replaceWith(p);setTimeout(g,10);return p}};$(".view-pass").on("click",function(){if($(this).prev("input").attr("type")=="password"){b($(this).prev("input"),"text")}else{b($(this).prev("input"),"password")}return false});$(document).on("click",'.To-anchor a[href^="#"]',function(){var g=$(this).attr("href");var k=$(g).offset().top-parseInt($(".Main").eq(0).css("margin-top"));$("body,html").stop().animate({scrollTop:k-100},600,"swing");event.preventDefault()});$(function(){e();if($(".countdown").size()){setInterval(function(){f()},1000)}$(".f-selectBox select").comboToList({onChange:function(k){g(k,this);if($(this).data("status")=="available"){window.location.href=$(this).data("url")}},});$(".eventList select").comboToList({onChange:function(k){g(k,this)}});$(".best-sells select").comboToList({onChange:function(k){g(k,this)}});$(".js-mac--kids select").each(function(){var k=$(this).data("engine-id");$(this).comboToList({hiddenInputName:"Profil_"+k})});function g(o,k){var k,p,l,n;n=$(k).closest(".strate");p=$("option:selected",k);l=$("option",k).index(p);$(".seeAll-group a",n).each(function(){})}$(".seeAll-group").each(function(){if($(this).children("a").length==1){$(this).children("a").addClass("isVisible")}});$(".tabList, .comboList, .js-tabsList").each(function(){var p=this;var n=$(p).closest(".strate, .js-strateTabs ");var o=n.find(".switch");var k=$(".seeAll-group");var l=$(this).parent().find(".seeAll-group");$(".seeAll-group").each(function(){$(this).find("a:first-child").addClass("isVisible")});$(".switch > div",n).each(function(q){if(q>0){$(this).addClass("hide")}});if(!$("li",p).hasClass("selected")){$("li:eq(0)",p).addClass("selected").addClass("firstload")}$("li",p).each(function(){$(this).on("click touchstart",function(){i=$(this).index();$(l).find("a:visible").removeClass("isVisible");$(l).find("a").eq(i).addClass("isVisible");var q=$("> div",o).eq(i);if(q.hasClass("asyncplaceholder")){var r=q.data("key");var t={url:Fnac.config.pathname+"/api/v1/fragments/fragment/"+r,type:"get",};$.ajax(t).done(function(u,v,w){q.html(u.Html);q.removeClass("asyncplaceholder")})}$("> div:visible",o).addClass("hide");q.removeClass("hide");$("li.selected",p).removeClass("selected");$("li.firstload",p).removeClass("firstload");$(this).addClass("selected");Fnac.App.trigger("lazyimage:render")})})});if($("#arboPT").length>0){$(".menu-button").click(function(){$(this).toggleClass("js-close");$(this).next(".menu-content").toggleClass("js-close")})}if($("#arboPE").length>0){$("dl > dt").click(function(){$(this).toggleClass("js-close");$(this).next("div").toggleClass("js-close")})}if($("ul.affine").length>0){$("ul.affine > li").each(function(k){if(k>5){$(this).addClass("js-close").addClass("js-closable");$(".lienPlus").removeClass("disable")}else{$(this).closest(".lienPlus").addClass("disable")}});$(".lienPlus").click(function(){$("ul.affine li").removeClass("js-close");$(this).toggleClass("disable");$(this).siblings().toggleClass("disable")});$(".lienMoin").click(function(){$(this).toggleClass("disable");$(this).siblings().toggleClass("disable");$("ul.affine li.js-closable").addClass("js-close")})}$(".Field-input").change(function(){if($(this).val().trim()!=""){$(".Field .btSubmit").addClass("btSubmit-send")}});$(".Field-input").focus(function(){$(this).closest("fieldset").addClass("Field-focus")});$(".Field-input").blur(function(){if($(this).val()==""){$(".btSubmit").removeClass("btSubmit-send")}$(this).closest("fieldset").removeAttr("class")});$(".Field-input").keypress(function(){$(".Field .btSubmit").addClass("btSubmit-send")});$(".Field-input").keyup(function(){if($(this).val().trim()==""){$(".Field .btSubmit").removeClass("btSubmit-send")}})})}();;(function(d){var a={data:{content:{thumbnail:{html:""},store:{url:"",html:""}}}};var c={global:{data:{content:{thumbnail:{html:function(){$(".thumbnail-action.isActive").html(a.data.content.thumbnail.html);$productBuy=$(".thumbnail-action.isActive").find(".js-ProductBuy");if($productBuy.size()){new Fnac.Views.ProductBuyView({el:$productBuy})}var e=$(".js-Tooltip");if(e.size()){$(".js-Tooltip").tooltip({viewport:{selector:"body",padding:4}})}}},store:{url:function(){d.location=a.data.content.store.url},html:function(){if(a.data.content.store.html){$(".js-StoreContainer").html(a.data.content.store.html)}}}}}}};var b=function(){$(document).on("click",".js-ChangeToFavoriteStore",function(f){var g=$(this).data("isidentified").toLowerCase();if(g=="true"){c.send("SetGeolocStoreToFavoriteStore",null,{goUp:false,noHistory:true})}else{var h=$(this).data("loginurl");d.location=h}});if(Fnac.Utils.getQueryParameter("geotofavstore")=="1"){c.send("SetGeolocStoreToFavoriteStore",null,{goUp:false,noHistory:true})}};new Gem("Commons",{global:a,methods:c,init:b,api_url:"api/common/v1"})})(window);;AppCore.ready(function(){var a=1;AppCore.register("searchAutocomplete",function(){return{urlAutocomplete:"",init:function(){AppCore.$("#category").change(function(){$("#Fnac_Search").flushCache()});if(Fnac.Utils.getQueryParameter("autocomplab")=="1"){this.groups=null;this.urlAutocomplete=this.urlAutocomplete.replace("client","isNewVersion");a=1}var c=true;var b=(function(d){return function(e){if(c){if(e=="a"||e=="A"){if(d._groups!=null){d.groups=d._groups;d._groups=null;d.urlAutocomplete=d.urlAutocomplete.replace("isNewVersion","client");a=0}}else{if(e=="b"||e=="B"){if(d.groups!=null){d._groups=d.groups;d.groups=null;d.urlAutocomplete=d.urlAutocomplete.replace("client","isNewVersion");a=1}}}}AppCore.$("#Fnac_Search").on("abTest",function(g,f){$(this).unautocomplete();b(f)});(function(){AppCore.$("#Fnac_Search").autocomplete(this.urlAutocomplete,{width:"100%",selectFirst:false,autoExpand:Fnac.Utils.getQueryParameter("autoexpandac")=="1"?true:false,closeOnBlur:Fnac.Utils.getQueryParameter("autoexpandac")=="1"?false:true,max:10,groups:this.groups,resultsClass:this.groups?"a-c_results a-c_groupresults":void 0,scroll:this.groups?false:true,scrollHeight:this.groups?null:200,cacheLength:0,delay:250,dataType:"jsonp",highlight:function(g,f){return g.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+f.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","i"),"<strong>$1</strong>")},extraParams:{text:function(){return $("#Fnac_Search").val()},category:function(){var g=new RegExp("!1$");var f=$(".realSelect").val().replace(g,"");return f},encoding:"UTF-8"},parse:function(h){Fnac.App.trigger("header-tab:close");$(".a-c_results").removeClass("modeBillet");Fnac.App.trigger("header-tab:close");if($(".fake-box a span").html()==="Tous&nbsp;produits"||$(".fake-box span").html()==="Musique"){h.m=[];$(".a-c_results").addClass("modeBillet")}else{if($(".fake-box a span").html()==="Livre"){h.bil=[]}else{if($(".fake-box a span").html()==="Billetterie"){h["m","p","s"]=[]}else{if(h.bil&&h.bil.length>0){var k=0;if(h.s.length>0){k+=h.s.length+1}if(h.m.length>0){k+=h.m.length+1}var n=Math.floor((10-k)>>1);if(n>=1){h.bil=h.bil.slice(0,n)}else{h.bil=[]}}}}}c=false;if(this.groups){var j=this.groups;var l=[];var i=null;$.map(h,function(p,q){$.each(j,function(s,r){if(r.type==q){i=r.items=[];i.push({type:"title",data:{sentence:r.name},value:r.name,result:r.name})}});$.each(p,function(s,t){t.sentence=t.t;if(t.c!=null&&t.c>=0){t.sentence+="<span> - "+$("#category  option[value='"+t.c+"!1']").text()+"</span>"}var v=$("<span/>").html(t.u?t.u:t.t).text();if(t.type==="manifestation"||t.type==="artiste"){var v=$("<span/>").html(t.u?t.u+"?utm_campaign=billetterie&utm_medium=autocompletion&utm_source=recherche.fnac.com":t.t).text()}if(t.u&&a==1){var u=$("#Fnac_Search").val();var r=$("#category option:selected").text();v+=(t.u.indexOf("#")>=0?"&":"#")+"st="+encodeURIComponent(u)+"&ct="+encodeURIComponent(r)+"&t="+(i[0].value=="Produits"?"p":"c")}(i?i:l).push({type:t.u?"url":"sentence",data:t,result:v,value:t.t})})});if(i){$.map(j,function(p){if(p.items){l=l.concat(p.items)}})}return l}else{var f={sentence:"<div class='txt_c'><strong>+ de critères de recherche</strong></div>"};var m=new RegExp("!1$");var g=$("#category").val().replace(m,"");var o=new Array("2","3","4","5","6","8","1");if($.inArray(g,o)!=-1){if(h.length==10&&h.length>0){h[h.length-1]=f}else{h.push(f)}}return $.map(h,function(r){if(r.sentence=="<div class='txt_c'><strong>+ de critères de recherche</strong></div>"){return{data:r,value:"",result:""}}else{r.sentenceWithoutCategory=r.sentence;if(r.c!=null&&r.c!="-1"){var p=$("#category  option[value='"+r.c+"!1']");var q=p.text();r.sentence=r.sentence+"<span> dans "+q+"</span>"}return{data:r,value:r.sentenceWithoutCategory,result:r.sentenceWithoutCategory}}})}},formatItem:function(g){var f="";g=(g.result)?g.result:g;if(!g.nsl&&!g.nb&&!g.vsl&&!g.type){if(g.i||g.st){f='<div class="a-c_product">'+(g.i?'<div class="a-c_product-img"><img src="'+g.i+'"></div>':"")+'<div class="a-c_infos"><div class="a-c_title">'+g.sentence+'</div><div class="subtitle">'+(g.st?g.st:"")+"</div></div></div>"}else{if(g.t&&!g.nb){f='<div class="a-c_list">'+g.sentence+'<i class="icon"></i></div>'}else{if(g.sentence){f=g.sentence}}}}else{if(g.type==="manifestation"){f='<div class="a-c_product a-c_billet">';f+=(g.i?'<div class="a-c_product-img-billet"><img src="'+g.i+'"></div>':"");f+='<div class="a-c_infos">';f+='<div class="a-c_title">'+g.sentence+"</div>";if(g.edate||g.sdate){f+=(!g.edate?"<span> Le "+g.sdate+"</span>":"<span> Du "+g.sdate+" Au "+g.edate+"</span>")}f+='<div class="a-c_subtitle">'+g.st+"</div>";f+='<span class="icon"></span>';f+="</div>";f+="</div>"}else{if(g.nb>0){f='<div class="a-c_product">';f+='<div class="a-c_product-img-billet"><img src="http://static.fnac-static.com/multimedia/fnacdirect/Img/defaultArtisteM.PNG" ></div>';f+='<div class="a-c_infos">';f+='<div class="a-c_title">'+g.t+"</div>";f+=(g.nb<2?'<span>Voir la manifestation</span><span class="icon"></span>':"<span>Voir les "+g.nb+' dates</span><span class="icon"></span>');f+="</div>";f+="</div>";f+=(g.vsl?"<div>"+g.vsl+"</div>":"")}}}return f},onclick:function(){var h=$("#Fnac_Search").val();var f=$("#category option:selected").text();var g=$(this).parents("ul")[0].className;switch(g){case"a-c_col_0":$("#QuickSearchFormSa").length&&$("#QuickSearchFormSa").val(1);break;case"a-c_col_1":break;case"a-c_col_2":break;default:$("#QuickSearchFormSa").length&&$("#QuickSearchFormSa").val(1)}}})}).call(d)}})(this);b(this.defaultAB);AppCore.$("#Fnac_Search").result(function(f,e,g){if(e){if(e.sentence=="<div class='txt_c'><strong>+ de critères de recherche</strong></div>"){var h=new RegExp("!1$");var d=$("#category").val().replace(h,"");if(d=="1"){d="2"}location.href=$("#advancedSearchUrl").val()+"?stype="+d}else{if(e.c&&e.c!="-1"){$("#category").val(e.c+"!1")}AppCore.$("#QuickSearchForm").submit()}}});$("body").on("click","div.js-ticket",function(d){d.preventDefault();var h="http://www.fnacspectacles.com/recherche/rechercheRapide.do?search=";var f=$("#Fnac_Search").val();console.log("searchFnac: "+f);var g="&utm_campaign=billetterie&utm_medium=autocompletion&utm_source=recherche.fnac.com";window.location.href=encodeURI(h+f+g)});AppCore.$("#QuickSearchForm").submit(function(){var e=$("#Fnac_Search").val();var d=/"*/g;$("#Fnac_Search").val(e.replace(d,""));if(e==""){return false}if($(".pipeSearchWidth .text").val()==""){return false}})}}})});;if(!$(".js-SearchResult").length){var global={data:{environment:{url:null,title:null,meta_title:null,nb_results_number:null,nb_results_text:null,current_page_number:null,current_page_text:null,last_page_number:null,query:{text:null,id:null,type:null,disabled_keywords:null,search_debug:null,categories:null,first_time:true,versionArbo:null,filters:null,nb_element_per_page:null,page_index:null,sort_option:null,sort_direction:null,score_limit:null,new_facet:null,double_facet:null,facet_information:null,multibuy_data:{opc_code1:null,opc_code2:null}}},context:{nb_per_page:{content:null,value:null},view_mode:{current:null,is_multibuy:false},favorite_shop:null,omniture:{html:null},pager_bottom:null,filters:{price:{min:null,max:null,current:{min:null,max:null}},content:null}},navigation:{breadcrumb:null,linked_searches:null},content:{body:{html:null,mode:null,lazy:null},comparer:{html:null},multibuy:{html:null,message:null},histonav:{html:null},users_advices:null}},update:{request:{type:null,value:null},response:{statut:null,actions:null}}};global.data.environment.prid=parseInt(Fnac.Utils.productPRID());global.data.environment.id=parseInt(Fnac.Utils.productID());global.data.environment.url=Fnac.Utils.productURL();global.data.environment.query={};global.data.content.reviewresume={};global.data.content.reviews={};global.data.content.alertprice={};global.data.environment.catalog=parseInt(Fnac.Utils.productCatalog())}(function(p){o();$("body").on("click",".js-priceInput-submit",function(q){q.preventDefault();var s=$(".js-InputMinPrice").val();var r=$(".js-InputMaxPrice").val();if(s==""||s<0){s=0}if(r==""){r=global.data.context.filters.price.max}if(parseInt(s)>parseInt(r)){s=0;r=global.data.context.filters.price.max}value=[s,"|",r].join("");h.send("filter/updatefilterprice",value);o()});$("body").on("click",".js-priceInput-all",function(q){q.preventDefault();message="filter/updatefilterprice";value=[0,"|",global.data.context.filters.price.max].join("");h.send("filter/updatefilterprice",value);$(".js-priceInput-all").addClass("hide")});$("body").on("focus",".js-InputMinPrice, .js-InputMaxPrice",function(q){if($(this).val()=="0"){$(this).val("")}});function o(){if($(".js-InputMinPrice").val()<=1&&$(".js-InputMaxPrice").val()==global.data.context.filters.price.max){$(".js-priceInput-all").addClass("hide");$(".js-InputMaxPrice").val("")}if(global.data.context.filters.price.current.min===0){$(".js-InputMinPrice").val("0")}if(global.data.context.filters.price.current.max===null||global.data.context.filters.price.current.max===undefined){$(".js-InputMaxPrice").val("")}}Math.trunc=Math.trunc||function(q){return q-q%1};var d={data:{context:{view_mode:{is_multibuy:false},filters:{price:{}}}}};var h={global:{data:{environment:{current_page_text:function(){$("span[data-refresh-nbpage]",".Pager").text(global.data.environment.current_page_text)},current_page_number:function(){var s,q,r;r=global.data.environment;q=r.current_page_number;s=r.last_page_number;$(".prevLevel1")[(q<=1?"add":"remove")+"Class"]("hide");$(".nextLevel1")[(q>=s?"add":"remove")+"Class"]("hide")},nb_results_number:function(){$(".js-SearchResult h1 span").first().text(global.data.environment.nb_results_number>10000?"":"("+global.data.environment.nb_results_number+")")},nb_results_text:function(){$(".resultPosition").html(global.data.environment.nb_results_text);if(global.data.environment.nb_results_number<=10000){$(".infoInlineLayer.moreThan10000").css("margin-top","-52px")}else{$(".infoInlineLayer.moreThan10000").css("margin-top",0);h.autohide()}},title:function(){$(".js-SearchResult h1 i").text(global.data.environment.title)},meta_title:function(){document.title=global.data.environment.meta_title},url:function(){p.location=global.data.environment.url}},context:{pager_bottom:function(){$(".js-resultSearchBottom").html(global.data.context.pager_bottom);$(".js-resultSearchBottom .articlePerPage").comboToList({onChange:function(r){options={goUp:$(this).parents(".bottom").length>0&&global.data.environment.current_page_number==1?false:true};h.send("tools/updatenbperpage",$(this).data("value"),options);var q=(!$(this).parents(".top-toolbar").hasClass("bottom"))?$(".top-toolbar.bottom .Item-onPage .fake-box"):$(".top-toolbar:not(.bottom) .Item-onPage .fake-box");$("span",q).text($(this).text());$("li.hovered",q).removeClass("hovered");$("li",q).eq($(this).index()).addClass("hovered")},arrowClass:"icon icon_i_058_arrow_bottom_02"})},nb_per_page:function(){$(".articlePerPage").html(global.data.context.nb_per_page.content);if(arguments[0]){var q=$(arguments[0].combo).val();$(".fake-box li[value='"+q+"']",".top-toolbar:not(.bottom) .Item-onPage").trigger("click")}$(".Article-itemVisual").on("click",function(){p.location=$(this).parent().find(".Article-desc a.js-minifa-title").first().attr("href")});Fnac.App.trigger("lazyimage:render")},filters:{content:function(){$("#col_gauche").html(global.data.context.filters.content);$(".Article-itemVisual").on("click",function(){p.location=$(this).parent().find(".Article-desc a.js-minifa-title").first().attr("href")});Fnac.App.trigger("lazyimage:render");$(".Filters-content").each(function(){$(this).children(".Filters-choice").each(function(x){if(x<=7){$(this).addClass("isActive")}})});if($("ul.affine").length>0){$("ul.affine > li").each(function(x){if(x>5){$(this).addClass("js-close").addClass("js-closable");$(".lienPlus").removeClass("disable")}else{$(".lienPlus").addClass("disable")}});$(".lienPlus").click(function(){$("ul.affine li").removeClass("js-close");$(this).toggleClass("disable");$(".lienMoin").toggleClass("disable")});$(".lienMoin").click(function(){$(this).toggleClass("disable");$(".lienPlus").toggleClass("disable");$("ul.affine li.js-closable").addClass("js-close")})}h.initFilters();var w=$(".recall.filters");var u=$(".Filters",w).empty();var t=0;var q=u,r=null;var s=null;var v=false;$(".active[data-filter], .active [data-filter]","#col_gauche").each(function(){v=true;t+=1;r=$(document.createElement("li"));var z=$(this).parents().siblings("span.label");if(z.text()!==s){q=$(document.createElement("ul"));q.attr("class","group");r.attr("class","label");r.append(z.clone());u.append(q);s=z.text()}var x=null;var y=$(this).children("img");if(y.length==0){x=$(this).clone();$("span",x).remove()}else{x=$(document.createElement("a"));x.attr("class","active");x.attr("data-filter",$(this).attr("data-filter"));x.text(" "+y.attr("alt"))}x.append('&nbsp;&nbsp;<span class="img i_remove"></span>');r.append(x);q.append(r)})},price:function(){if(c.instances.priceRangeSelector!=null){c.instances.priceRangeSelector.dispose()}c.instances.priceRangeSelector=new c.RangeSelector(global.data.context.filters.price)}},view_mode:function(){$(".Article-itemVisual").on("click",function(){p.location=$(this).parent().find(".Article-desc a.js-minifa-title").first().attr("href")});var q=global.data.context.view_mode.current;$(".switchListMosaic a").removeClass("active");$("."+q+"Button").addClass("active");var r=$(".js-ProductThumbnail");if(r.size()){_.forEach(r,function(s){new Fnac.Views.ProductThumbnailView({el:s})})}h.initFilters();setTimeout(h.closeFilters,50)},omniture:{html:function(){$(".dataListOmniture").html(global.data.context.omniture.html)}}},navigation:{breadcrumb:function(){$("#cheminfer").html(global.data.navigation.breadcrumb)}},content:{body:function(){var t;var q=(typeof global.data.environment.query.categories!=="undefined"&&global.data.environment.query.categories.length>0)?true:false;var r=(typeof global.data.environment.query.filters!=="undefined"&&global.data.environment.query.filters.length>0)?true:false;var s=(typeof global.data.environment.query.sort_option!=="undefined"&&global.data.environment.query.sort_option>0)?true:false;if(global.data.content.body.mode!=="Partial"||(typeof(t=global.data.content.body.lazy)!=="undefined"&&t!==null&&t.length>0)){$(".articleMozaic, .articleList").parent().html(global.data.content.body.html)}else{$(".articleMozaic, .articleList").append(global.data.content.body.html)}$(".Article-itemVisual").on("click",function(){p.location=$(this).parent().find(".Article-desc a.js-minifa-title").first().attr("href")});Fnac.App.trigger("lazyimage:render");var u=$(".js-ProductBuy").not("[data-productbuyview]");if(u.length){_.forEach(u,function(w){new Fnac.Views.ProductBuyView({el:w})})}var v=$(".js-ProductThumbnail");if(v.size()&&$("body").hasClass("search")){_.forEach(v,function(w){new Fnac.Views.ProductThumbnailView({el:w})})}},comparer:function(){},histonav:function(){if(global.data.content.histonav.html!=null){$(".js-lastSeenItemsPlaceholder").html(global.data.content.histonav.html);c.HistoNav.startEvents();var q=$(".js-NavigationHistory");if(q.length){_.forEach(q,function(t){new Fnac.Views.NavigationHistoryView({el:t})})}var r=$(".strateHistory .js-ProductBuy").not("[data-productbuyview]");if(r.length){_.forEach(r,function(t){new Fnac.Views.ProductBuyView({el:t})})}var s=$(".strateHistory .js-ProductThumbnail");if(s.size()&&$("body").hasClass("search")){_.forEach(s,function(t){new Fnac.Views.ProductThumbnailView({el:t})})}}},multibuy:{html:function(){if(global.data.content.multibuy.html!=null){$(".multibuyGauge").parent().html(global.data.content.multibuy.html)}},message:function(){}}}}},initFilters:function(){if(!$("html").hasClass("touch")){$(".Filters .Filters-label:not(:first)").find(".Filter-label--icon").addClass("icon_i_108_plus");$(".Filters .Filters-label").addClass("Filters-label--open").find(".Filter-label--icon").addClass("icon_i_109__minus")}h.addEventFilters();o()},closeFilters:function(){if($("html").hasClass("touch")&&typeof($(".Suggest")[0])==="undefined"){$(".filters").prev().addClass("filterTitle closed");$(".filters").prev().append("<i class='icon icon_i_108_plus'></i>");$(".Filters").addClass("hide");$(".filterTitle").on("click",function(){if($(this).hasClass("closed")){$(this).find(".icon").removeClass("icon_i_108_plus").addClass("icon_i_109__minus");$(this).removeClass("closed");$(".Filters").removeClass("hide")}else{$(this).find(".icon").removeClass("icon_i_109__minus").addClass("icon_i_108_plus");$(this).addClass("closed");$(".Filters").addClass("hide")}})}},addEventFilters:function(){var r=function(){var s=$(this);s.next(".js-FiltersContainer").toggle();if(s.hasClass("Filters-label--open")){s.find(".Filter-label--icon").removeClass("icon_i_109__minus").addClass("icon_i_108_plus")}else{s.find(".Filter-label--icon").removeClass("icon_i_108_plus").addClass("icon_i_109__minus")}s.toggleClass("Filters-label--open").toggleClass("Filters-label--close")};var q=$(".Filters");q.on("click",".Filters-label",r)},linkPopins:function(){$().popinManager({selector:".logToAddToSelection",targetContent:"PopinLogToAddToSelection",modeView:"layer",eventStart:"mouseenter",customPosition:true,relativePosition:{left:-201,top:-82}});$().popinManager({selector:".addSelectLink",targetContent:"PopinAddToSelection",modeView:"layer",eventStart:"mouseenter",customPosition:true,relativePosition:{left:-111,top:-48}});$().popinManager({selector:"#search_menu_sky_ad .open_sky_infos",targetContent:"ad_header_sky_popin",modeView:"layer",eventStart:"mouseenter",customPosition:true,relativePosition:{left:59,top:-30}});$().popinManager({selector:"#search_menu_megabanner_ad .open_megabanner_infos",targetContent:"ad_header_megabanner_popin",modeView:"layer",eventStart:"mouseenter",customPosition:true,relativePosition:{left:-405,top:-203}});$().popinManager({selector:"#search_menu_google_ad .open_google_infos",targetContent:"ad_header_google_popin",modeView:"layer",eventStart:"mouseenter",customPosition:true,relativePosition:{left:-405,top:-248}});$().popinManager({selector:"#openPopinMultibuyAlert",targetContent:"PopinMultibuyAlert",modeView:"layer",eventStart:"click",autoclose:true,customPosition:true,relativePosition:{left:18,top:-39}})},autohide:function(){var q=10;if($(".infoInlineLayer.moreThan10000").length>0){}},emptyLightbox:function(){if($(".lightbox div").size()){$(".lightbox").empty()}}};var c={RangeSelector:(function(){function q(I){var N=this.sliders={min:null,max:null};var G="#col_gauche",D="f-js-SliderMinSelector",y="f-js-SliderMaxSelector",A="sliderMinDisplay",v="sliderMaxDisplay",K="sliderSelected",L=20,t=40,H=$(".Filters-content.price"),C=$("."+D,H),x=$("."+y,H),z=$("."+A,H),u=$("."+v,H),J=$("."+K,H);var s=$(".js-InputMinPrice");var r=$(".js-InputMaxPrice");if(C.length==0){return}var B=minX=c.defaults.RangeSelector.minX,w=maxX=c.defaults.RangeSelector.maxX,Q=I.min,P=I.max,R=(P-Q)/(maxX-minX-L);var F=function(U){J.css({left:B+L/2,width:w-B});var T=Q+R*B;s.val(Math.trunc(T));var W=Fnac.Utils.formatMoneyWithCurrentCurrency(T);z.html(W);var S=Q+R*(w-L);r.val(Math.trunc(S));var V=Fnac.Utils.formatMoneyWithCurrentCurrency(S);u.html(V);O()};var E=function(S){message="filter/updatefilterprice";value=[s.val(),"|",r.val()].join("");h.send(message,value)};var O=function(){var U=C.offset().left+(L+t)/2;var T=x.offset().left+(L/2)-(t/2);var S=U-T;if(S>0){z.css("left",Math.floor(-(S/2)-(t/2)+(L/2)));u.css("left",Math.ceil((S/2)-(t/2)+(L/2)))}else{z.css("left","");u.css("left","")}};var M=(function(){function S(Y,U,V,X,T){var ac=0;this.cssParent=U;this.cssSlider=V;var Z=function(ad){var ae=ad;if(ad.type.substr(0,5)=="touch"){ae=ad.originalEvent.touches[0]||ad.originalEvent.changedTouches[0]}return ae.pageX};var aa=function(ad){if(ad.rightClick){return}ad.preventDefault();ad.stopPropagation();ac=Z(ad);$(document).on("mousemove touchmove",W);$(document).on("mouseup touchend",ab)};var W=function(ae){ae.preventDefault();var af=parseInt(Y.css("left"));var ad=Z(ae)-ac;ac=Z(ae);var ag=af+ad;if(ag<minX){ag=minX}if(ag>maxX){ag=maxX}if(Y.hasClass(y)&&ag<B+L){ag=B+L}if(Y.hasClass(D)&&ag>w-L){ag=w-L}if(Y.hasClass(D)){B=ag}if(Y.hasClass(y)){w=ag}Y.css("left",ag);X(Y)};var ab=function(ad){$(document).off("mousemove touchmove");$(document).off("mouseup touchend");$(U).off("mousedown touchstart","."+V,aa);T(Y)};$(U).on("mousedown touchstart","."+V,aa)}S.prototype.dispose=function(){$(this.cssParent).off("mousedown touchstart","."+this.cssSlider)};return S})();current=I.current;if(current!=null&&current.min!=null){B=(current.min-Q)/R;C.css("left",B)}if(current!=null&&current.max!=null){w=(current.max-Q)/R+L;x.css("left",w)}J.css({left:B+L/2,width:w-B});O();N.min=new M(C,G,D,F,E);N.max=new M(x,G,y,F,E)}q.prototype.dispose=function(){if(this.sliders.min!=null){this.sliders.min.dispose()}if(this.sliders.max!=null){this.sliders.max.dispose()}};return q})(),AutoComplete:function(q){$(q.delegate).on("keyup",q.panel+" "+q.input,function(r){var t=$.trim($(this).val().toLowerCase());if(q.validate!=null){var u=$(q.item+".selected",q.panel);if(u.length>0){var w=u.html().toLowerCase();var v=u.data("noaccent");if(v!=null){v=v.toLowerCase()}else{v=""}if(t===""||w.indexOf(t)<0&&v.indexOf(t)<0){u.removeClass("selected");$(q.validate,q.panel).addClass("hide")}}}$(q.item,$(this).parents(q.panel)).each(function(){var y=q.text?$(q.text,$(this)):$(this);var z=y.text().toLowerCase();var x=$(this).data("noaccent");if(x!=null){x=x.toLowerCase()}else{x=""}if(z.indexOf(t)<0&&x.indexOf(t)<0){$(this).addClass("hide")}else{$(this).removeClass("hide")}});if(q.validate!=null){$(q.validate,q.panel).val()}var s=r.keyCode?r.keyCode:r.which;if(s===13){document.activeElement.blur();$("input").blur()}});if(q.validate!=null){$(q.delegate).on("click",q.panel+" "+q.item,function(){$(q.input,q.panel).val($(this).text());$(q.item+".selected",q.panel).removeClass("selected");$(q.validate,q.panel).removeClass("hide");$(this).addClass("selected")})}},Omniture:{lastFilterUsed:0,trackAction:function(q,t,r){switch(q.toLowerCase()){case"tools/updatenbperpage":trackActionUpdateNbPerPage(t);break;case"tools/updatecurrentpage":trackActionUpdateCurrentPage(t);break;case"tools/updateviewmode":trackActionUpdateViewmode(t);break;case"multibuy/addproductmultibuy":trackActionAddProductMultibuy(t);break;case"filter/updatefiltervalue":trackActionfilter(c.Omniture.lastFilterUsed);break;case"filter/updatecategory":trackActionUpdateCategory();break;case"filter/updatefilterprice":trackActionfilterPrice();break;case"addtobasket":trackActionAddToBuyBox(t,r);break;case"tools/updatesortingorder":var s=$(".fakeBox span",".combotrimoteur:first").text();trackActionSortingOrder(s);break}}},Comparator:{startEvents:function(){$("body").on("click",".addToCompareTool span",{span:1,obj:this},this.addToCompareTool);$("body").on("click",".addToCompareTool label",{span:0,obj:this},this.addToCompareTool);$("body").on("click","a.addToCompareTool",{span:0,obj:this},this.addToCompareTool);$("body").on("click",".comparerGauge .remove-item",{obj:this},this.deleteArticleToCompareTool);$("body").on("click",".Comparator .Comparator-btnRemove",{obj:this},this.deleteAllArticleToCompareTool);$(".Comparator-btnCompare").click(this.desactivateComparatorButton)},addToCompareTool:function(r){var z,B,t,C,A,y,u,s,q,x;x=r.data.obj;u=x.checkNbOfProductInComparator();s=$(".Comparator");if(s.hasClass("hide")){s.removeClass("hide")}if(r.data.span){z=$(this).next().data("prid");B=$(this).next().data("type-article")}else{z=$(this).prev().data("prid");B=$(this).prev().data("type-article")}if(!x.controlIfPridExist(z)){x.deleteArticleToCompareTool.call(this,r,'.comparerGauge [data-prid="'+z+'"]');return false}if(u<4){if(r.data.span){$(this).addClass("active")}else{$(this).prev().prev().addClass("active icon icon_i_102_check_03");$(this).addClass("active")}if(!$("ul",s).size()){$(".Comparator-content",s).append("<ul class='clearfix'></ul>")}if(B!==$("li",s).children().data("type-article")&&u>0){q=confirm("Si vous souhaitez ajouter cet article, votre comparateur sera automatiquement vidé.");if(!q){if(r.data.span){$(this).removeClass("active")}else{$(this).removeClass("active")}$(this).prev().prev().removeClass("active")}$("li",s).each(function(){x.removeSpecificCheckComparator($(this).children().data("prid"))});$("li",s).remove();u=x.checkNbOfProductInComparator()}$(".itemosaic[data-prid='FnacDirect"+z+"'] .addToCompareTool > span").eq(0).addClass("active");if($(".Comparator-content ul").size()==0){$(".Comparator-content").append('<ul class="clearfix" ></ul>');$(s).removeClass("hide")}var v=4;if($("li",s).size()<v){var w=parseInt(4-$("li",s).size());for(i=0;i<w;i++){$(".Comparator-content ul").append("<li class='comparator-thumbnail--empty'><span>ajouter un produit</span></li>")}}t=$(this).parents("li");C=$(".Article-itemVisual",t).html();y=$(".userPrice",t).html()!=null?$(".userPrice",t).html():"";A=$(".Article-desc",t).html();if(!A){A=$(".description",t).children().html()}$("li:eq("+u+")",s).html("").removeClass("comparator-thumbnail--empty").append("<div data-type-article="+B+" data-prid="+z+" class='article-comparator'><div class='Comparator-itemTop'><a href='#' class='remove-item'><i class='icon icon_i_037_cross_03'></i></a>"+C+"</div><div class='Comparator-itemBottom'>"+A+"<div class='bigPricerFA'><strong class='userPrice'>"+y+"</strong></div></div></div>");$("li:eq("+u+")",s).find("a:not(.visual-mini, .remove-item)").addClass("title-mini");$("li:eq("+u+")",s).find(".visual-mini").parent().removeClass("hide");$("li:eq("+u+")",s).find(".nbMV").remove();x.controlActivateCompareBtn();x.checkContentTextComparator();h.send("comparer/addproductcomparer",z,{noLayer:true,noHistory:true})}else{alert("Votre comparateur est déjà plein. Supprimez au moins 1 article de votre comparateur pour pouvoir rajouter ce nouvel article.")}},deleteArticleToCompareTool:function(r,v){r.preventDefault();var u,s,t;u=$(this).parents("[data-prid]").data("prid");if(u==null){u=$(this).parent().children("[data-prid]").data("prid")}u=u.toString().replace("FnacDirect","");t=r.data.obj;var q=function(){if(v!=null){return $(v)}else{return $(this)}}.call(this);q.parents("li").remove();$(".Comparator-content ul").append("<li class='comparator-thumbnail--empty'><span>ajouter un produit</span></li>");t.removeSpecificCheckComparator(u);t.controlActivateCompareBtn();t.checkContentTextComparator();
h.send("comparer/removeproductcomparer",u,{noLayer:true,noHistory:true});if(!t.checkNbOfProductInComparator()){$(".Comparator").addClass("hide")}},deleteAllArticleToCompareTool:function(q){q.preventDefault();var r=q.data.obj;$(".Comparator").addClass("hide");$("li",".comparerGauge").remove();r.removeAllCheckComparator();h.send("comparer/removeallcomparer",null,{noLayer:true,noHistory:true})},removeAllCheckComparator:function(){$(".addToCompareTool").each(function(){if($(this).children().hasClass("active")){$(this).children().removeClass("active")}})},addSelectedCheckComparator:function(q){$(".comparerGauge li [data-prid]").each(function(){var r=$(this).data("prid");if($(".articleList").size()){$("li",".articleList").filter(function(){return $(this).find(".addToCompareTool").children().next().data("prid")==r}).find(".addToCompareTool").children().addClass("active")}else{$("#content_FnacDirect"+r).find(".addToCompareTool").children().removeClass("active");$(".itemosaic[data-prid='FnacDirect"+r+"'] .addToCompareTool > span").eq(0).addClass("active")}})},removeSpecificCheckComparator:function(q){if($(".articleList").size()){$("li",".articleList").filter(function(){return $(this).find(".addToCompareTool").children().next().data("prid")==q}).find(".addToCompareTool").children().removeClass("active")}else{$("#content_FnacDirect"+q).find(".addToCompareTool").children().removeClass("active");$(".itemosaic[data-prid='FnacDirect"+q+"'] .addToCompareTool > span").eq(0).removeClass("active")}},controlActivateCompareBtn:function(){if(this.checkNbOfProductInComparator()>1){$(".Comparator-btnCompare").removeClass("inactive")}else{$(".Comparator-btnCompare").addClass("inactive")}$(".Comparator-btn").click(function(q){q.preventDefault();if($(this).hasClass("inactive")){return false}else{p.location.href=$(this).attr("href")}})},checkNbOfProductInComparator:function(){return $("li:has(div)",".comparerGauge").size()},checkContentTextComparator:function(){var q,r;q=this.checkNbOfProductInComparator();r=$("p",".right-block");if(q<2&&$("p",".right-block").eq(0).hasClass("hide")){r.eq(0).removeClass("hide");r.eq(1).addClass("hide");r.eq(2).addClass("hide")}if(q>1&&q<4){r.eq(0).addClass("hide");r.eq(1).removeClass("hide");r.eq(2).addClass("hide");if(q==3){r.eq(1).children("span").text("1 article")}else{r.eq(1).children("span").text("2 articles")}}if(q>3){r.eq(0).addClass("hide");r.eq(1).addClass("hide");r.eq(2).removeClass("hide")}},controlIfPridExist:function(q){var s=true;$("li",".comparerGauge").each(function(){if($(this).children().data("prid")==q){s=false}});return s},decodeLink:function(){$(".Comparator .Comparator-btnCompare").each(function(q,r){Fnac.Utils.decodeLink(r)})},desactivateComparatorButton:function(q){if($(this).hasClass("inactive")){q.preventDefault()}},init:function(){this.startEvents();this.checkContentTextComparator()}},HistoNav:{startEvents:function(){$(".delete_histo").click(function(q){q.preventDefault();h.send("lastseenitems/removealllastseenitems",0,{noLayer:true,noHistory:true});$(".last-seen-item").remove()})}},Multibuy:{startEvents:function(){$("body").on("click",".addToMultiBuy",this.addToMultiBuy);$("body").on("click",".removeFromMultibuy",this.removeFromMultibuy);$("body").on("mouseenter touchstart mouseleave",".multibuyGauge .front",this.toggleInfosPanel);$("body").on("mouseleave touchstart",".multibuyGauge .back",this.closeInfosPanel)},toggleInfosPanel:function(r){var q=$(this).siblings(".back");q.data("show",true);var s=function(){if(q.data("show")!==true){return}q.data("show",false);var t=function(u){var v=q.offset();if(v&&((u.pageX<v.left||u.pageX>v.left+q.outerWidth()||u.pageY<v.top||u.pageY>v.top+q.outerHeight()))){return false}return v?true:false};if(r.type=="mouseleave"&&(t(r)||q.css("display")=="none")){return}if(q.css("display")=="none"){q.stop().css("display","block").fadeIn(150)}else{c.Multibuy.closeInfosPanel.apply(q,arguments)}};if(r.type=="mouseleave"){s()}else{setTimeout(s,400)}},closeInfosPanel:function(){var q=$(this);if(q.data("show")===true){q.data("show",false);return}q.stop().fadeOut(150)},addToMultiBuy:function(r){var q=function(s,t){if(s.update.response.actions.indexOf("global.data.content.multibuy.message")>=0){t.goUp=false;$("#PopinMultibuyAlert").html(global.data.content.multibuy.message);$("#openPopinMultibuyAlert").detach().appendTo(r.currentTarget);$("#openPopinMultibuyAlert").trigger("click")}};h.send("Multibuy/AddProductMultibuy",$(this).data("prid")+"|"+$(this).data("catalog"),{noHistory:true,checkAlert:q});return false},removeFromMultibuy:function(){h.send("Multibuy/RemoveProductMultibuy",$(this).parent().data("prid"),{noLayer:true,noHistory:true,goUp:false})},init:function(){this.startEvents()}},updateWidthBottomPager:function(){var q;q=0;$(".bottom-toolbar:eq(0) li").each(function(r){q+=$(this).outerWidth(true)});$("ul.bottom-toolbar").width(q+20)},GoogleAd:{verify:function(){if($("#search_menu_google_ad").height()>30){$("#search_menu_google_ad .googleAd").removeClass("unverified").addClass("verified")}else{if(c.GoogleAd.verified_count++<5){setTimeout(c.GoogleAd.verify,500)}}},verified_count:0},GoogleAd:{verify:function(){if($("#search_menu_google_ad").height()>30){$("#search_menu_google_ad .googleAd").removeClass("unverified").addClass("verified")}else{if(c.GoogleAd.verified_count++<5){setTimeout(c.GoogleAd.verify,500)}}},verified_count:0},instances:{priceRangeSelector:null}};var e=function(){h.initFilters();c.AutoComplete({delegate:"body",panel:"#PopinShop",input:".input input",item:"li",validate:".buttons input"});$(".buttons input","#PopinShop").on("click",function(s){if($(".js-openPopInShop").data("source")=="home-myaccount"){return}s.preventDefault();if($(".js-SearchResult").length){h.send("filter/updatefavoriteshop",$("#PopinShop li.selected").data("value"),{goUp:false})}else{h.send("filter/updatefavoriteshop",$("#PopinShop li.selected").data("value"),{goUp:false});p.location.reload()}});if($(".js-SearchResult").length){global.data.content.body.html=$(".articleMozaic, .articleList").parent().html();global.data.context.filters.content=$("#col_gauche").html();global.data.environment.nb_results_text=$(".resultPosition").html();global.data.context.pager_bottom=$(".Pager.bottom-toolbar").parent().html();global.data.context.nb_per_page.content=$(".articlePerPage").html();global.data.navigation.breadcrumb=$("#cheminfer").html();global.data.environment.current_page_text=$("span[data-refresh-nbpage]",".Pager").text()}else{return}if($(".js-lastSeenItemsPlaceholder").length){h.send("lastseenitems/getlastseenitemshtml",null,{noLayer:true,noHistory:true,parallel:true})}if(global.data.context.view_mode.is_multibuy==true){h.send("multibuy/gethtml",null,{noLayer:true,noHistory:true,parallel:true})}$(document).on("click",".Pager .actionFirst",(function(s){s.preventDefault();h.send("tools/updatecurrentpage",1)}));$(".js-SearchResult").on("click",".Pager .actionPrev",(function(s){s.preventDefault();h.send("tools/updatecurrentpage",global.data.environment.current_page_number-1)}));$(".js-SearchResult").on("click",".Pager .actionNext",(function(s){s.preventDefault();h.send("tools/updatecurrentpage",global.data.environment.current_page_number+1)}));$(".js-SearchResult").on("click",".Pager .actionLast",(function(s){s.preventDefault();h.send("tools/updatecurrentpage",global.data.environment.last_page_number)}));$(".js-SearchResult").on("click",".itemPage a",function(s){s.preventDefault();h.send("tools/updatecurrentpage",$(this).data("action-current_page_number"))});$(".listButton",".switchListMosaic").click(function(s){s.preventDefault();if(!$(".listButton").hasClass("active")){$(".switchListMosaic a").removeClass("active");$(".listButton").addClass("active");h.send("tools/updateviewmode","list")}});$(".mosaicButton",".switchListMosaic").click(function(s){s.preventDefault();if(!$(".mosaicButton").hasClass("active")){$(".switchListMosaic a").removeClass("active");$(".mosaicButton").addClass("active");h.send("tools/updateviewmode","mosaic");new Fnac.Views.ProductThumbnailActionView()}});$("#page_2cols").on("click",".addSelectLink",function(s){s.preventDefault();var t;if($(this).data("reference")){$(this).children().addClass("i_star_full").removeClass("i_star");t=$(this).data("position");h.send("tools/addtoselection",$(this).data("reference"),{noLayer:true,noHistory:true,position:t})}});$("#page_2cols").on("click",".logToAddToSelection",function(s){s.preventDefault()});$("body").on("click",".top-toolbar-seo--toggler",function(s){s.preventDefault();if($(this).hasClass("active")){$(this).removeClass("active");$(".top-toolbar-seo--links").removeClass("active")}else{$(this).addClass("active");$(".top-toolbar-seo--links").addClass("active")}});$(".articlePerPage").comboToList({onChange:function(t){options={goUp:$(this).parents(".bottom").length>0&&global.data.environment.current_page_number==1?false:true};h.send("tools/updatenbperpage",$(this).data("value"),options);var s=(!$(this).parents(".top-toolbar").hasClass("bottom"))?$(".top-toolbar.bottom .Item-onPage .fake-box"):$(".top-toolbar:not(.bottom) .Item-onPage .fake-box");$("span",s).text($(this).text());$("li.hovered",s).removeClass("hovered");$("li",s).eq($(this).index()).addClass("hovered")},arrowClass:"icon icon_i_058_arrow_bottom_02"});$("select",".combotrimoteur").change(function(s){if(s.target!==this){return false}s.preventDefault();var t,u;t=$("select",".top-toolbar:eq(1)").val();u=$("select",".top-toolbar:eq(2)").val();if(t==$(this).val()){$(".top-toolbar:eq(2) option[value="+t+"]",".js-SearchResult").prop("selected","selected").trigger("change")}else{if(u==$(this).val()){$(".top-toolbar:eq(1) option[value="+u+"]",".js-SearchResult").prop("selected","selected").trigger("change")}}s.stopPropagation();return false});$("#col_gauche").on("click","[data-filter]",function(u){u.preventDefault();var s=$(this).parent("li");s.toggleClass("active");s.find(".check").trigger("click");var A=$(this).data("filter");c.Omniture.lastFilterUsed=$(this).text().trim();if(u.altKey){try{var B=[];var x=A.split(",");var w=parseInt($(this).parents(".content").attr("id").split("_")[1]);var t=[];var C=global.data.environment.query.filters;for(var y=0;y<C.length;y++){var v=C[y];t.push(v.SelectedValue)}for(var y=0;y<x.length;y++){var v=x[y].split("!");var D=v[0],z=parseInt(v[1]);if((z!==w)||($.inArray(D,t)<0)){B.push(D+"!"+z)}}A=B.join(",")}catch(u){}}h.send("filter/updatefiltervalue",A)});$("#col_gauche").on("click","[data-category]",function(s){s.preventDefault();h.send("filter/updatecategory",$(this).data("category"))});$("#cheminfer").on("click","[data-category]",function(s){s.preventDefault();h.send("filter/updatecategory",$(this).data("category"))});$("body").on("click",".addToBasket",function(){var t,s;t=$(this).data("prid");stock=$(this).data("stock");s=$(this).data("position");action="addToBasket";c.Omniture.trackAction(action,t+"$"+stock,s)});c.AutoComplete({delegate:"#col_gauche",panel:".Filters-content",input:"input",item:".Filters-choice",text:".Filters-choiceTxt",validate:null});var r=$(".f-js-SliderMinSelector");var q=$(".f-js-SliderMaxSelector");c.defaults={Spinner:{options:{lines:11,length:0,width:11,radius:23,corners:0,rotate:0,trail:28,speed:1,direction:1}}};if(r.length){c.defaults.RangeSelector={minX:parseInt(r.css("left").split("px")[0]),maxX:q.css("left").split("px")[0]}}c.instances.priceRangeSelector=new c.RangeSelector(global.data.context.filters.price);c.Comparator.init();c.Multibuy.init();h.linkPopins();$(".goUp").on("click",function(){$("html,body").animate({scrollTop:0},"slow");return false});if($(".js-SearchResult").size()){$(document).scroll(function(){var s;s=$(".goUp").position();if(s.top>=($(p).height()+100)){if(parseInt($(".goUp").css("bottom"))===-50){$(".goUp").animate({bottom:"0"},150)}}else{$(".goUp").animate({bottom:"-50px"},500)}})}h.autohide();c.updateWidthBottomPager();c.HistoNav.startEvents();c.GoogleAd.verify();h.closeFilters()};var f=function(q){return(q!=="global.data.content.comparer")&&(q.indexOf("global.data.content.multibuy")!==0)};var k=function(){d.data.context.view_mode=global.data.context.view_mode;d.data.context.filters.price=global.data.context.filters.price};var l=function(q){global.data.context.view_mode.is_multibuy=q.data.context.view_mode.is_multibuy};var j=function(r,q){if(q.indexOf("global.data.content.body")>=0||q.indexOf("global.data.context.filters.content")>=0){h.linkPopins()}if(q.length>0&&r.type!=="tools/getpridcontent"){h.emptyLightbox()}c.updateWidthBottomPager()};var n=function(r,s,q){if(r==="tools/updateviewmode"){Fnac.App.trigger("searchResultView:initPopin")}c.Omniture.trackAction(r,s,q.position)};var m=function(){if($(".js-SearchResult").size()&&global.data.content.body.lazy){h.send("tools/getpridcontent",JSON.stringify(global.data.content.body.lazy),{noLayer:true,noHistory:true})}};p.gemSearchResult=new Gem("SearchResult",{exchange:d,methods:h,components:c,init:e,instateaction:f,onbeforesend:k,onbeforeupdate:l,onafterupdate:j,onsendsuccess:n,onlazyload:m,api_url:Fnac.config.pathname+"/searchapi/"});var b=$(".js-SearchResult");if(b.length){new Fnac.Views.SearchFiltersView({el:$("body")});var a=b.find(".js-MarketingMedia a");var g=a.attr("href");a.attr("href",[g,"?omnbannersearch=5"].join(""))}})(window);$(function(){$(".Article-itemVisual").on("click",function(){window.location=$(this).parent().find(".Article-desc a.js-minifa-title").first().attr("href")})});;(function(a,g,c,f){var e="listLightbox",b={delay:150,delayOnScroll:450,lightBoxClassName:"lightbox",targetEventBinding:"",lagTop:30,lagLeft:30,addCallback:function(){}};function d(h,i){this.element=h;this.options=a.extend({},b,i);this._defaults=b;this._name=e;this.targetLightBox="."+this.options.lightBoxClassName;this.init();this.tabContent=new Array();this.cache=[]}d.prototype={init:function(){var j,m,h;j=this;m=null;h={screenX:-1,screenY:-1};var l=function(n){n.preventDefault();n.stopImmediatePropagation();return false};this.generateBox();var k=function(s,p){var q,w,u,v,t;var n=a(j.targetLightBox);j.addDataPosition(s);t=parseFloat("0.96");u=s.data("position-left")-j.options.lagLeft;v=s.data("position-top")-j.options.lagTop;j.getLightbox(s);targetInBox=a(".boxing:not(.hide)",n);check=targetInBox.data("already-exist");if(!check){a(".moreInfos",targetInBox).removeClass("hide")}var r=function(x){if(n==null){return l(x)}var y=n.offset();if(y&&((x.pageX<y.left||x.pageX>y.left+n.outerWidth()||x.pageY<y.top||x.pageY>y.top+n.outerHeight()))){return o(x)}return l(x)};var o=function(x){n.css("display","none");n.off();clearTimeout(m);m=null;a("a",s.element).each(function(){if(s.data("title")!=""){s.attr("title",s.data("title"))}});a("body").off("mousemove",r);if(j.options.onClose){j.options.onClose(n)}n=null;return l(x)};a("body").on("mousemove",r);q=n.height();w=n.width();n.css({position:"absolute",left:(u+(w*(1-t)/2))+"px",top:(v+(q*(1-t)/2))+"px",display:"block",width:w*t,height:q*t,opacity:parseFloat("0.5")});$innerBox=n.children(".boxing:not(.hide)");padding=parseInt(n.css("padding-top"));q=$innerBox.outerHeight();hParent=a("#page_2cols").position().top;hWin=a(g).height();wWin=a(g).width();stDoc=a(c).scrollTop();slDoc=a(c).scrollLeft();if(v-stDoc+q+hParent>hWin){v=stDoc+hWin-q-hParent-padding*2.5}if(v-stDoc+hParent<0){v=stDoc-hParent+padding*0.5}if(u-slDoc+w+0>wWin){u=slDoc+wWin-w-padding*2.5}n.css({left:(u+(w*(1-t)/2))+"px",top:(v+(q*(1-t)/2))+"px",height:q*t}).animate({left:u+"px",top:v+"px",width:w,height:q,opacity:1},200,"easeOutExpo");n.on("mouseleave",function(x){r(x)});return l(p)};var i=function(n){var o=n;if(n.type.substr(0,5)=="touch"){o=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0]}return{x:o.pageX,y:o.pageY}};a(this.element).on("touchstart",this.options.targetEventBinding,function(n){j.touchstart=i(n);return true});a(this.element).on("touchend",this.options.targetEventBinding,function(n){var p=i(n);if(Math.abs(p.x-j.touchstart.x)<20&&Math.abs(p.y-j.touchstart.y)<20){var o=a(this);setTimeout(function(){k(o,n)},100)}a(this).one("click",function(q){return l(q)});return l(n)});a(this.element).on("mouseenter",this.options.targetEventBinding,function(o){a("body").off("mousemove");var r=j.options.delay;if(Math.abs(o.screenX-h.screenX)<10&&Math.abs(o.screenY===h.screenY)<10){r=j.options.delayOnScroll}h.screenX=o.screenX;h.screenY=o.screenY;if(m!=null){clearTimeout(m)}var p,n,q;p=a(this);a("a",this.element).each(function(){p.data("title",p.attr("title"));p.attr("title","")});m=setTimeout(function(){k(p,o)},r);return l(o)}).on("mouseleave",function(n){clearTimeout(m);return l(n)})},addDataPosition:function(h){var i;i=a(h).position();a(h).data("position-left",i.left).data("position-top",i.top)},getLightbox:function(l){var m,k,j,i;m=a(l).data("prid");$nodes=a(l).clone();a(".bigVisual.moreInfos.hide",$nodes).removeClass("hide");a(".smallVisuals.moreInfos",$nodes).addClass("hidden");j=a("#content_"+m,this.targetLightBox).size();a(".boxing",this.targetLightBox).each(function(){if(!a(this).hasClass("hide")){a(this).addClass("hide")}});if(!j){var h=a(c.createElement("div"));h.attr("id","content_"+m);h.attr("class","boxing");h.append($nodes);a(this.targetLightBox).append(h);this.options.addCallback(a("#content_"+m,this.targetLightBox))}else{a("#content_"+m,this.targetLightBox).removeClass("hide").data("already-exist",m)}},generateBox:function(h){if(a("#generate_lightbox_container").size()===0){a("#page_2cols").append('<div id="generate_lightbox_container" class="'+this.options.lightBoxClassName+'"></div>');a(this.targetLightBox).css("display","none")}}};a.fn[e]=function(h){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new d(this,h))}})};jQuery.extend(jQuery.easing,{easeOutExpo:function(l,k,h,i,j){return(k==j)?h+i:i*(-Math.pow(2,-10*k/j)+1)+h},easeOutBack:function(m,l,h,i,j,k){if(k==f){k=1.70158}return i*((l=l/j-1)*l*((k+1)*l+k)+1)+h},easeOutElastic:function(o,n,i,j,k){var m=parseFloat("1.70158");var l=0;var h=j;if(n==0){return i}if((n/=k)==1){return i+j}if(!l){l=k*0.3}if(h<Math.abs(j)){h=j;var m=l/4}else{var m=l/(2*Math.PI)*Math.asin(j/h)}return h*Math.pow(2,-10*n)*Math.sin((n*k-m)*(2*Math.PI)/l)+j+i}})})(jQuery,window,document);;(function(n){if(!$(".js-ProductView").size()){return}var m=10;var a={data:{context:{},content:{offer:{oref:"",html:""}}}};var l={Rating:"",Title:"",Comment:"",Location:"",NickName:""};var c=function(){var o=$(".js-Carousel");_.forEach(o,function(p){new Fnac.Views.CarouselView({el:p})});Fnac.Views.CarouselView.onViewportUpdate();$(".tabList, .comboList").each(function(){var t=this;var r=$(t).closest(".strate");var s=r.find(".switch");var p=$(".seeAll-group");var q=$(this).parent().find(".seeAll-group");$(".seeAll-group").each(function(){$(this).find("a:first-child").addClass("isVisible")});$(".switch > div",r).each(function(u){if(u>0){$(this).addClass("hide")}});if(!$("li",t).hasClass("selected")){$("li:eq(0)",t).addClass("selected")}$("li",t).each(function(){$(this).on("click touchstart",function(){i=$(this).index();$(q).find("a:visible").removeClass("isVisible");$(q).find("a").eq(i).addClass("isVisible");var u=$("> div",s).eq(i);if(u.hasClass("asyncplaceholder")){var v=u.data("key");var w={url:Fnac.config.pathname+"/api/v1/fragments/fragment/"+v,type:"get",};$.ajax(w).done(function(x,y,z){u.html(x.Html);u.removeClass("asyncplaceholder")})}$("> div:visible",s).addClass("hide");u.removeClass("hide");$("li.selected",t).removeClass("selected");$(this).addClass("selected");Fnac.App.trigger("lazyimage:render")})})})};var e={global:{data:{environment:{test:function(){alert(global.data.environment.test)},title:function(){$("#col_centre h1 i").text(global.data.environment.title)},meta_title:function(){document.title=global.data.environment.meta_title},url:function(){n.location=global.data.environment.url}},context:{},content:{layers:{html:function(){return true}},comparer:{html:function(){$("#compareToolbarContent").html(global.data.content.comparer.html)}},availabilityalerting:{Message:function(){alert(global.data.content.availabilityalerting.Message)}},alertprice:{html:function(){$("#alertingToolbarContent").html(global.data.content.alertprice.html)}},biletel:{html:{}},reviews:{html:function(){$("#reviewsList").html(global.data.content.reviews.html)},errors:function(){var o="";var p=global.data.content.reviews.errors;for(var q in p){if(p.hasOwnProperty(q)){o+=p[q]+"<br>"}}$(".js-ProductReviewForm-error").html(o)},htmlform:function(){$(".js-ProductReviewForm-error").html(global.data.content.reviews.htmlform)},nbfeedbackpositive:function(){$("#nbFeedbackPositive_"+global.data.content.reviews.commentid).html(global.data.content.reviews.nbfeedbackpositive).parent().addClass("isActive")},nbfeedbacknegative:function(){$("#nbFeedbackNegative_"+global.data.content.reviews.commentid).html(global.data.content.reviews.nbfeedbacknegative).parent().addClass("isActive")},feedbackmessage:function(){$("#feedbackMessage").html(global.data.content.reviews.feedbackmessage).addClass("isActive")}},reviewresume:{html:function(){$("#popinReviewFAContainer").html(global.data.content.reviewresume.html)}},shippingpopin:{html:function(){$.magnificPopup.open({items:{src:global.data.content.shippingpopin.html,type:"inline"},preloader:true,closeBtnInside:true})}}}}}};var b=function(){var r=null;var t=null;var o="selected";var q={GetFnacOffer:global.data.content.fnacoffer,GetListBrandOffers:global.data.content.listbrandoffers,GetOccasOffers:global.data.content.listoccazoffers};var s=$(".tool-bar");var p=s.data("prid")+"|"+s.data("catalog");$(".tool-bar .share #sendMailButton").click(function(v){v.stopPropagation();v.preventDefault();var u={username:$("#UserName").val(),email1:$("#FriendEmail1").val(),name1:$("#FriendName1").val(),email2:$("#FriendEmail2").val(),name2:$("#FriendName2").val(),email3:$("#FriendEmail3").val(),name3:$("#FriendName3").val(),email4:$("#FriendEmail4").val(),name4:$("#FriendName4").val()};e.send("SendEmail",u,{valueLocation:"data.content.email"});$("body").trigger("close")});if($("#comparatorSameArticle").length>0){$().popinManager({ajaxMode:true,selector:".tool-content .add-Compare",targetContent:"#comparatorSameArticle"})}$($("#comparatorSameArticle").length>0?"#comparatorSameArticle .tool-btn.confirm":".tool-bar .compare .add-Compare").click(function(u){e.send("AddProductComparer",p,{noHistory:true,popin:$("#compareToolbarContent")})});$(".tool-bar .compare .comp").click(function(){e.send("GetComparerHtml",p)});$(".tool-bar .confirmAlert").click(function(u){u.stopPropagation();e.send("CreateAlertPrice",p)});$("#reviewsList").on("click",".feedback",(function(u){e.send("SendReviewsFeedback",$(this).data("commentid")+"|"+$(this).data("feedback"))}));$(".js-review-versus").on("click",".feedback",(function(u){e.send("SendReviewsFeedback",$(this).data("commentid")+"|"+$(this).data("feedback"))}));$("#customerReviews").on("submit","#customerReviewsForm",(function(u){u.preventDefault();l.Rating=$("#txtStars").val();l.Title=$("#txtTitle").val();l.Comment=$("#areaComment").val();l.Location=$("#txtLocation").val();l.NickName=$("#txtNickName").val();e.send("PublishReviewForm",JSON.stringify(l))}));$(".js-f-ShowReviewPopin, #popinReviewFAContainer").hover(function(){if($("#popinReviewFAContainer .FA-popinReviewFAContainer").html().length){$("#popinReviewFAContainer").addClass("active")}else{$("#popinReviewFAContainer").addClass("active");e.send("GetReviewResume",null,{popin:$(".FA-popinReviewFAContainer")})}},function(){$("#popinReviewFAContainer").removeClass("active")});if(Fnac.Utils.getQueryParameter("avaialert")=="1"){sendAvailabilityAlert()}};var d=function(o){};var h=function(o){};var f=function(p,o){};var k=function(p,q,o){};var j=function(){};var g=function(){a.data.environment.catalog=global.data.environment.catalog;a.data.environment.prid=global.data.environment.prid;a.data.environment.id=global.data.environment.id;a.data.content.listbrandoffers=global.data.content.listbrandoffers;a.data.content.listoccazoffers=global.data.content.listoccazoffers};new Gem("FA",{exchange:a,methods:e,components:{},init:b,instateaction:d,onbeforesend:g,onbeforeupdate:h,onafterupdate:f,onsendsuccess:k,onlazyload:j,api_url:Fnac.config.pathname+"/api/product/v1",sendDefaults:{goUp:false}})})(window);$(document).on("mousedown",".see-Compare",function(a){a.stopPropagation();window.location=$(this).attr("href")});$(document).on("ready",function(){switch(location.hash){case"#fnac":$("#Header .ProductSellers-tabList li").eq(0).children().click();break;case"#brandoffers":$("#Header .ProductSellers-tabList li").eq(1).children().click();break;case"#usedOffers":$("#Header .ProductSellers-tabList li").eq(2).children().click();break;default:break}});;$(function(){var F;var h=$(".ma-Main");if(h.length){new Fnac.Views.Account.OrdersList({el:h,$popinTemplate:$("#deliveryAddressMapPopinTemplate")})}var D=$(".js-LaboChart");_.forEach(D,function(ae){new Fnac.Views.LaboChartView({el:ae})});var E=$(".js-LaboGrid");if(E.length){new Fnac.Views.LaboGridView({el:E})}var f=$(".LaboComparativeTable");if(f.length){new Fnac.Views.LaboComparativeTable({el:f})}var g=$(".js-LaboGlossary");if(g.length){new Fnac.Views.LaboGlossaryView({el:g})}$(document).on("click",".js-LaboHeroNav",function(){var ae=$(this).attr("data-labo-tab");$(".LaboTab").removeClass("LaboTab--active");$(".js-LaboHeroNav").removeClass("LaboHero-nav--active");$(this).addClass("LaboHero-nav--active");$(".LaboTab[data-labo-tab="+ae+"]").addClass("LaboTab--active")});var b=$("body");if(b.length&&Fnac.Views.MasterView){F=new Fnac.Views.MasterView({el:b})}var o=$(".js-SearchResult");if(o.length){new Fnac.Views.SearchResultView({el:o})}var a=$(".js-bestSales");if(a.length){new Fnac.Views.BestSalesView({el:a})}var V=$(".js-Sidebar");if(V.length){$(".Sidebar-nano").nanoScroller({preventPageScrolling:true,iOSNativeScrolling:true})}var v=$(".js-CategoryNav");if(v.length){new Fnac.Views.CategoryNavView({el:v})}var R=$(".js-scrollTop");if(R.length){new Fnac.Views.ScrollTopView({el:R})}var Q=$(".js-scrollPasteToolbar");if(Q.length){new Fnac.Views.scrollPasteToolbar({el:Q})}var T=$(".js-SearchSideAdvertising");if(T.length){new Fnac.Views.SearchSideAdvertising({el:T})}var T=$(".js-SearchSideAdvertising");if(T.length){new Fnac.Views.SearchSideAdvertising({el:T})}var Z=$(".js-StrateMacView");if(Z.length){_.forEach(Z,function(ae){new Fnac.Views.StrateMacView({el:ae})})}var J=$(".js-productSummaryTrimHeight");if(J.length){_.forEach(J,function(ae){new Fnac.Views.ProductSummaryTrimHeight({el:ae})})}var I=$(".js-ProductBuy").not("[data-productbuyview]");if(I.length){_.forEach(I,function(ae){new Fnac.Views.ProductBuyView({el:ae})})}var e=$(".js-HopScore");if(e.length){var y=new Fnac.Views.EnvScoreView({el:e})}if(Fnac.Services.lazyImage){Fnac.Services.lazyImage.init()}if(Fnac.Services.linkDecoder){Fnac.Services.linkDecoder.init()}var C=$(".js-hl-service");if(C.length){Fnac.Services.hooklogicService.load()}var c=$(".js-CartCount");if(c.length){new Fnac.Views.CartCountView({el:c})}if($(".js-ProductVisuals").length&&$(".js-ProductVisuals .js-ProductVisuals-item").first().data("src").indexOf("noscan")===-1){new Fnac.Views.ProductVisualsView()}else{$(".js-ProductVisuals .js-ProductVisuals-zoom").remove()}var q=$(".js-VideoPlayer");if($(".js-VideoPlayer").length){_.forEach(q,function(ae){new Fnac.Views.VideoPlayerView({el:ae})})}var W=$(".js-StoreFinderView");if(W.length){new Fnac.Views.StoreFinderView({el:W})}var m=$(".js-ProductThumbnail");if(m.length){var r=$("#wishlistThumbnailBaseTemplate").html();var s=$("#wishlistThumbnailTemplate").html();_.forEach(m,function(ae){new Fnac.Views.ProductThumbnailView({el:ae,wishlistBaseTemplate:r,wishlistTemplate:s})})}new Fnac.Views.ProductThumbnailActionView();var l=$(".js-ProductView");if(l.length){new Fnac.Views.ProductMasterView({el:l})}var p=$(".js-ProductStimulusChrono");if(p.length){new Fnac.Views.TwoHoursDeliveryPromiseButtonView({el:p})}var U=$(".js-moreContentNav");if(U.length){new Fnac.Views.SidebarMoreView({el:U})}if(!$(".js-Overlay").length){$("body").append("<div class='Overlay js-Overlay'><div class='Spinner Spinner--centered'></div></div>")}new Fnac.Views.OverlayView({el:$(".js-Overlay")});new Fnac.Views.LoaderView();var d=$(".js-headerSearchView");if(d.length){new Fnac.Views.HeaderTabsView({el:$(".js-HeaderTab-content"),headerBtnContainer:d})}var B=$(".js-headerSearchView");if(B.length){new Fnac.Views.HeaderSearchView({el:B})}var u=$(".js-Carousel");if(u.length){_.forEach(u,function(ae){new Fnac.Views.CarouselView({el:ae})})}var ac=$(".js-Tooltip");if(ac.length){$(".js-Tooltip").tooltip({viewport:{selector:"body",padding:4}})}var H=$(".js-Popover");if(H.length){$(".js-Popover").popover()}var w=$(".js-removeThisElement");if(w.length){$(".js-removeThisElement").on("click",function(){$(this).remove()})}var j=$(".js-PopupInline");if(j.length){$(".js-PopupInline").magnificPopup({type:"inline",midClick:true})}var k=$(".js-PopupVOD");if(k.length){var ad;$(".js-PopupVOD").magnificPopup({type:"inline",midClick:true,callbacks:{open:_.bind(function(){if(!this.videoPlayer){this.videoPlayer=new Fnac.Views.VideoPlayerView({el:$("#PopinTrailer .js-VideoPlayerVOD")})}else{this.videoPlayer.delegateEvents()}this.videoPlayer.togglePlay()},this),close:_.bind(function(){if(this.videoPlayer.isPlaying){this.videoPlayer.togglePlay()}this.videoPlayer.undelegateEvents()},this)}})}var i=$(".js-PopupAjaxLegacy");if(i.length){$(".js-PopupAjaxLegacy").magnificPopup({type:"ajax",tError:"<a href='%url%'>La page</a> n'a pas pu être chargée, veuillez réessayer ultérieurement.",callbacks:{parseAjax:function(ae){ae.data="<div class='Popup Popup--large Popup--noPadding'>"+ae.data+"</div>"},ajaxContentAdded:function(){this.content.find(".close").on("click",$.magnificPopup.close)}}})}var ab=$(".js-TabbedList");if(ab.length){_.forEach(ab,function(ae){new Fnac.Views.TabbedListView({el:ae})})}var aa=$(".js-TabbedListAnchor");if(aa.length){_.forEach(aa,function(ae){new Fnac.Views.TabbedListAnchorView({el:ae})})}var A=$(".js-FlashSales");if(A.length){_.forEach(A,function(ae){new Fnac.Views.FlashSalesView({el:ae})})}var t=$(".js-AudioPlayer");if(t.length){_.forEach(t,function(ae){new Fnac.Views.AudioPlayerView({el:ae})})}var G=$(".js-NavigationHistory");if(G.length){_.forEach(G,function(ae){new Fnac.Views.NavigationHistoryView({el:ae})})}var x=$(".js-cupView");if(x.length){_.forEach(x,function(ae){new Fnac.Views.CupView({el:ae})})}var z=$(".js-FlashMessage");if(z){_.forEach(z,function(ae){new Fnac.Views.FlashMessageView({el:ae})})}if(Fnac.Utils.isAndroidBrowser()){$("select.form-control").removeClass("form-control").addClass("form-control-androidBrowser")}Fnac.Views.PopupOneClickView.init();$.fn.isBefore=function(ae){return this.nextAll(ae).length!==0};$(".js-ProductBuyBoxAdh").each(function(){if($(this).isBefore(".js-ProductBuyBoxStd")&&$(this).find(".js-ProductBuy-adherentCheckable").length){$(".js-ProductBuy-fnacplusCheckable").prop("checked",true)}});var n=$(".js-HeaderSearch-input");if(n.length&&n.val().length>0){$(".js-HeaderSearch-inputClear").addClass("on")}var S=$(".js-searchFnacPlus");if(S.length){_.each(S,function(ae){new Fnac.Views.SearchProductFnacPlusView({el:ae})})}var S=$(".js-searchFnacPlus");if(S.length){_.each(S,function(ae){new Fnac.Views.SearchProductFnacPlusView({el:ae})})}var O=$(".js-PubliSticky");if(O.length){_.forEach(O,function(ae){new Fnac.Views.PubliStickyNav({el:ae})})}var K=$(".js-PubliAccordion");if(K.length){_.forEach(K,function(ae){new Fnac.Views.PubliAccordion({el:ae})})}var L=$(".js-PubliFlipCard");if(L.length){_.forEach(L,function(ae){new Fnac.Views.PubliFlipCard({el:ae})})}var M=$(".js-publiParallax");if(M.length){_.forEach(M,function(ae){new Fnac.Views.PubliParallax({el:ae})})}var P=$(".js-PubliVisuals");if(P.length){_.forEach(P,function(ae){new Fnac.Views.PubliVisualsView({el:ae})})}var N=$(".js-PubliScrollToAnchor");if(N.length){_.forEach(N,function(ae){new Fnac.Views.PubliScrollToAnchorView({el:ae})})}var X=$(".js-StoreSelector");if(X.length){new Fnac.Views.StoreSelectorView({el:X})}var Y=$(".js-StrateAsync");if(Y.length){_.forEach(Y,function(ae){new Fnac.Views.StrateAsyncView({el:ae})})}$(document).on("click",".js-TwitterHelp",function(){var ae="http://twitter.com/share?text=@FnacVousAide&url=/";window.open(ae,"FnacTwitterHelp","width=500, height=255")});if($("#communautaire").length===0){FastClick.attach(document.body)}$(document).on("click",".tab-header .help",Fnac.Services.omnitureTracker.trackActionHelp);$(document).on("click","#contactExpert",Fnac.Services.omnitureTracker.trackActionContactExpert);$(document).on("click",".tab-header .account",Fnac.Services.omnitureTracker.trackActionMyAccount);$(document).on("click",".tab-header .about",Fnac.Services.omnitureTracker.trackActionStore);$(document).on("click",".tab-header .cart",Fnac.Services.omnitureTracker.trackActionBasket);$(document).on("click",".promo-itemLink",Fnac.Services.omnitureTracker.trackActionPushMarketing);if($(".js-select").length){new Select({el:$(".js-select")[0],className:"select-theme-chosen"})}});;$(function(){$(document).ready(function(j){if(window.location.hash=="#customerReviewsForm"){$(".js-ProductReview-showForm").click();$("html,body").scrollTop($("#customerReviews").offset().top)}});var i=$(".js-ProductToolbar");if(i.length){this.productToolbarView=new Fnac.Views.ProductToolbarView({el:i})}var e=$(".js-ProductReview");if(e.length){this.productReviewView=new Fnac.Views.ProductReviewView({el:e})}var c=$(".js-ProductLaboAnchor");if(c.size()!==0){new Fnac.Views.ProductLaboAnchorView({el:c})}var h=$(".js-ProductSellers-tabList");if(h.size()!==0){new Fnac.Views.ProductTabsView({el:h})}var g=$(".js-ProductSticky");if(g.size()!==0){new Fnac.Views.ProductStickyView({el:g})}var d=$(".js-Offer-List");_.forEach(d,function(j){if($(j).children().size()!=0){new Fnac.Views.ProductOfferListView({el:j})}});var f=$(".js-ProductShippingPopup");if(f.length){_.forEach(f,function(j){new Fnac.Views.ProductShippingPopupView({el:j})})}var a=$(".js-ProductAdhCardPopup");if(a.length){_.forEach(a,function(j){new Fnac.Views.ProductAdhCardPopupView({el:j})})}var b=$(".js-ProductBuyBox");if(b.length){_.forEach(b,function(j){new Fnac.Views.ProductBuyBoxView({el:j})})}});;$(function(){var j;var p=$(".js-PartialAsync");if(p.size()){_.forEach(p,function(q){new Fnac.Views.PartialAsyncView({el:q})})}if(!$(".js-Overlay").length){$("body").append("<div class='Overlay js-Overlay'><div class='Spinner Spinner--centered'></div></div>")}if(Fnac.Views.OverlayView){new Fnac.Views.OverlayView({el:$(".js-Overlay")})}if(Fnac.Views.NavView){new Fnac.Views.NavView({el:$("body")})}var a=$(".js-accountWishlist");if(a.length){new Fnac.Views.WishlistAccountView({el:a})}var g=$(".js-Expand");if(g.size()){_.forEach(g,function(q){new Fnac.Views.ExpandView({el:q})})}var e=$(".js-Accordion");if(e.size()){_.forEach(e,function(q){new Fnac.Views.AccordionView({el:q})})}var k=$(".js-NewslettersFilters");if(k.size()){new Fnac.Views.NewslettersFilters({el:k})}var l=$(".js-NewslettersPreferences");if(l.size()){_.forEach(l,function(q){new Fnac.Views.NewslettersPreferences({el:q})})}var i=$(".js-login-registration");if(i.size()){_.forEach(i,function(q){new Fnac.Views.Login({el:q})})}var o=$(".js-OrderStatusPopup");if(o.size()){_.forEach(o,function(q){new Fnac.Views.OrderStatusPopupView({el:q})})}var n=$(".js-Order");if(n.length){_.forEach(n,function(q){new Fnac.Views.OrderView({el:q})})}var d=$(".js-PopupInline");if(d.length){d.magnificPopup({type:"inline",midClick:true})}var b=$(".js-PopupCreditPopup");if(b.length){var f=new Fnac.Views.CreditDetailView({el:b})}var m=Fnac.Utils.getQueryParameter("OrderId");if(m){var h=$(".Header").height();var c=$(".ma-Order[data-order-id="+m+"]");if(c.length){$("body").animate({scrollTop:c.offset().top-h},"slow")}}$(".js-MaRegulRadioWrap input").each(function(){var q=$(this).attr("id");$(this).next().attr("for",q)});$(".js-OrderFilter-dateRange").comboToList({onChange:function(){var r=$(this).attr("data-value");var s=$(".js-OrderFilter-orderType").attr("data-value");var q=$("#formSearchOrderId");q.submit()}});$(".js-OrderFilter-orderType").comboToList({onChange:function(){var r=$(".js-OrderFilter-dateRange").attr("data-value");var s=$(this).attr("data-value");var q=$("#formSearchOrderId");q.submit()}})});$(document).on("click",".js-IncidentFormBtn",function(a){a.preventDefault();$form=$(".js-IncidentFormAjax").eq(0);$target=$("#incidentContent");$target.empty().append('<div class="Spinner Spinner--centered"></div>');$.ajax({type:$form.attr("method"),url:$form.attr("action"),data:$form.serialize(),success:function(e){$target.html(e);var c=$(".js-IncidentToggleQty");if(c.length){var f,g=c.length;for(f=0;f<g;f++){var b=c.eq(f);var d=b.parent();d.append(d.children("input[type=hidden]"))}}},error:function(){$target.html("Une erreur est survenue, merci de bien vouloir réessayer plus tard.")}})});var LoginToggleNode=$(".js-login-toggle");if(LoginToggleNode.size()){new Fnac.Views.LoginToggle({el:LoginToggleNode})}var switchNode=$(".js-Interest-SmsSwitch");if(switchNode.size()){new Fnac.Views.InterestView({el:switchNode})}var $cardPopin=$(".js-CardPopin");if($cardPopin.length){$cardPopin.magnificPopup({closeOnContentClick:true,fixedContentPos:true,mainClass:"ma-CardPopin",overflowY:"hidden",type:"inline",callbacks:{open:function(){$("html").addClass("ma-CardPopin-orientation")},close:function(){$("html").removeClass("ma-CardPopin-orientation")}}})}$(document).on("change",".js-IncidentToggleQty",function(){var a=$(this).parent().next(".form-inline");a.toggleClass("invisible");if(a.children().prop("disabled")){a.children().prop("disabled","");$("option[value=1]",a.children()).prop("selected","selected")}else{a.children().prop("disabled","disabled")}});$(document).on("click",".js-FlipCard",function(){var a=$(this).data("flipcard");$(this).parent().find("."+a).toggleClass(a+"--flip");$(this).find(".js-FlipCard-icon").toggleClass("hidden")});;(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

(function (root, factory) {
  if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object' && module.exports) {
    module.exports = factory(root.$);
  } else {
    root.Fnac.Service.StaticViews = factory(root.$);
  }
})(window, function ($) {
  return {
    get: function get(url, params) {
      return $.ajax(url, params);
    }
  };
});

},{}],2:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

// Keep cool, this is just a UMD pattern. 
// We need it to load this module with CommonJS (node).
(function (root, factory) {
  if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object' && module.exports) {
    var _ = typeof _ != 'undefined' ? _ : require('../../vendors/underscore.js');
    var accounting = typeof accounting != 'undefined' ? accounting : require('../../vendors/accounting-0.4.2.js');
    module.exports = factory(accounting, _);
  } else {
    root.Fnac.Utils.formatMoneyWithCurrentCurrency = factory(root.accounting, root._);
  }
})(typeof window != "undefined" ? window : null, function (accounting, _) {

  /**
   * Tableau de configuration par défaut des différents formattage de devises
   */
  var CountriesCurrencyFormats = {
    'fr-FR': {
      symbol: '€',
      format: '%v %s',
      decimalSeparator: ',',
      thousandSeparator: ' ',
      decimal: 0
    },

    'fr-CH': {
      symbol: 'CHF',
      format: '',
      decimalSeparator: '.',
      thousandSeparator: '\'',
      decimal: 0
    },

    'es-ES': {
      symbol: '€',
      format: '%v%s',
      decimalSeparator: ',',
      thousandSeparator: '.',
      decimal: 0
    },

    'pt-PT': {
      symbol: '€',
      format: '%v%s',
      decimalSeparator: ',',
      thousandSeparator: '.',
      decimal: 0
    }

  };

  var defaultCurrencyFormat = CountriesCurrencyFormats['fr-FR'];

  /**
   * Permet de convertir un nombre décimal en chaine de charactère correctement formattée 
   * en fonction de la devise du pays choisi. 
   * Si aucun cultureCode n'est précisé on prend la langue courrante
   */
  return function (nb, args) {

    var cultureCode = !args || !args.cultureCode ? $('html').attr('lang') : args.cultureCode;
    var currencyFormat = CountriesCurrencyFormats[cultureCode] || defaultCurrencyFormat;

    args = _.defaults(args, {
      decimal: currencyFormat.decimal,
      cultureCode: cultureCode,
      format: currencyFormat.format,
      decimalSeparator: currencyFormat.decimalSeparator,
      thousandSeparator: currencyFormat.thousandSeparator,
      symbol: currencyFormat.symbol
    });

    // Note: Ici on pourrait ajouter la version intl qui formatte trés bien les devises.
    // Seulement ce n'est pas compatible < IE11. Il faudrait donc intégrer un build Modernizr 
    // avec Internationalization API. Seulement ce n'est pas possible car notre version de Modernizr est < 3.
    // CF: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat

    var formattedNumber = accounting.formatMoney(nb, args.symbol, args.decimal, args.thousandSeparator, args.decimalSeparator, args.format);

    if (args.cultureCode === 'fr-CH') {
      var re = /^[1-9]\d*(\.\d+)?$/;
      if (re.test(formattedNumber)) {
        var regexResult = formattedNumber.match(re);
        formattedNumber = regexResult[0] + ".-";
      }
    }

    return formattedNumber;
  };
});

},{"../../vendors/accounting-0.4.2.js":9,"../../vendors/underscore.js":10}],3:[function(require,module,exports){
'use strict';

var _ExpendableGridView = require('../nav/views/ExpendableGridView');

var _ExpendableGridView2 = _interopRequireDefault(_ExpendableGridView);

var _BestReviewView = require('../nav/views/BestReviewView');

var _BestReviewView2 = _interopRequireDefault(_BestReviewView);

var _ProductHeaderContainerView = require('../nav/views/ProductHeaderContainerView');

var _ProductHeaderContainerView2 = _interopRequireDefault(_ProductHeaderContainerView);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var $commentsPage = $('.js-commentsPage');
if ($commentsPage.length) {
  new _ExpendableGridView2.default({ el: $commentsPage });
}

var $reviewNode = $('.js-bestReview');
if ($reviewNode.length) {
  _.forEach($reviewNode, function (node) {
    new _BestReviewView2.default({ el: node });
  });
}

var modelVariant = document.getElementsByClassName('js-modelvariant');
if (modelVariant != null && typeof modelVariant != 'undefined') {
  new _ProductHeaderContainerView2.default({ el: modelVariant });
}

},{"../nav/views/BestReviewView":4,"../nav/views/ExpendableGridView":5,"../nav/views/ProductHeaderContainerView":7}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _apiService = require('../../common/services/apiService.js');

var _apiService2 = _interopRequireDefault(_apiService);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BestReviewView = function (_Backbone$View) {
  _inherits(BestReviewView, _Backbone$View);

  function BestReviewView() {
    _classCallCheck(this, BestReviewView);

    return _possibleConstructorReturn(this, (BestReviewView.__proto__ || Object.getPrototypeOf(BestReviewView)).apply(this, arguments));
  }

  _createClass(BestReviewView, [{
    key: 'initialize',


    /**
     * Initialize backbone view: cache objects, calculate elements and add listeners
     */
    value: function initialize() {
      this.key = "helpful-review";
      this.$showReviewLayer = this.$(".js-bestReview-show");
      this.$bestReviewContainer = this.$(".js-bestReview-container");
      this.setParams();
      this.IsLoaded = false;
    }
  }, {
    key: 'setParams',
    value: function setParams() {
      this.params = {
        data: {
          key: this.key,
          prid: this.$showReviewLayer.data("prid"),
          id: this.$showReviewLayer.data("id"),
          Catalog: this.$showReviewLayer.data('catalog')
        }
      };
    }
  }, {
    key: 'removeContent',
    value: function removeContent() {
      this.$bestReviewContainer.removeClass("isActive");
    }
  }, {
    key: 'showContent',
    value: function showContent() {
      if (!this.IsLoaded) {
        this.getInitialContent();
      }
      this.$bestReviewContainer.addClass("isActive");
    }
  }, {
    key: 'getInitialContent',
    value: function getInitialContent() {
      var _this2 = this;

      this.IsLoaded = true;
      var url = Fnac.config.pathname + '/api/v1/nav/static';
      _apiService2.default.get(url, this.params).then(function (html) {
        _this2.$bestReviewContainer.html(html);
        _this2.initGraph();
      });
    }
  }, {
    key: 'initGraph',
    value: function initGraph() {
      var $chartView = this.$bestReviewContainer.find('.js-ChartView');
      if ($chartView.length) {
        new Fnac.Views.ChartView({ el: $chartView });
      }
    }
  }, {
    key: 'events',


    /**
    * Initialize backbone events
    */
    get: function get() {
      return {
        'mouseover .js-bestReview-show': 'showContent',
        'mouseover .js-bestReview-container': 'showContent',
        'mouseout .js-bestReview-container': 'removeContent'
      };
    }
  }]);

  return BestReviewView;
}(Backbone.View);

;

exports.default = BestReviewView;

},{"../../common/services/apiService.js":1}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ExpendableGridView = function (_Backbone$View) {
  _inherits(ExpendableGridView, _Backbone$View);

  function ExpendableGridView() {
    _classCallCheck(this, ExpendableGridView);

    return _possibleConstructorReturn(this, (ExpendableGridView.__proto__ || Object.getPrototypeOf(ExpendableGridView)).apply(this, arguments));
  }

  _createClass(ExpendableGridView, [{
    key: 'initialize',


    /**
     * Initialize backbone view: cache objects, calculate elements and add listeners
     */
    value: function initialize(options) {
      this.isActiveClassName = options.isActiveClassName || 'isActive';
      this.gridClassName = options.gridClassName || 'js-expandable-grid';
      this.gridItemClassName = options.gridItemClassName || 'js-expandable-gridItem';

      this.containerBlock = {
        isVisible: false,
        $item: null,
        rowIndex: -1
      };

      this.$selectedItem = null;
      this.$lastSelectedItem = null;

      this.initializeJQueryReusableObjects();
      this.calculateNbElementOnRow();
      this.addListeners();
    }

    /**
     * It stores reuse jquery objects in memory.
     */

  }, {
    key: 'initializeJQueryReusableObjects',
    value: function initializeJQueryReusableObjects() {
      this.$grid = $('.' + this.gridClassName);
      this.$gridItems = this.$grid.find('.' + this.gridItemClassName);
      this.$firstGridItem = $(this.$gridItems[0]);
    }

    /**
     * Calculate the number of elements that can appear on one row
     */

  }, {
    key: 'calculateNbElementOnRow',
    value: function calculateNbElementOnRow() {
      if (this.$grid.length && this.$firstGridItem.length) {
        var gridWidth = this.$grid.width();
        var itemWidth = this.$firstGridItem.width();
        if (itemWidth > 0) {
          var nbElements = Number(gridWidth / itemWidth);
          var nbElementsTroncated = Math.floor(nbElements);
          this.nbElementsByRow = nbElementsTroncated;
        }
      }
    }

    /**
     * Delete backbone view
     */

  }, {
    key: 'remove',
    value: function remove() {
      this.removeListeners();
      Backbone.View.prototype.remove.apply(this, arguments);
    }
  }, {
    key: 'addListeners',
    value: function addListeners() {
      var _this2 = this;

      this.$el.on('click', '.' + this.gridItemClassName, function (e) {
        _this2.selectGridItem(e);
      });
      $(window).on('resize', function (e) {
        _this2.calculateNbElementOnRow();
      });
    }
  }, {
    key: 'removeListeners',
    value: function removeListeners() {
      this.$el.off('click .' + this.gridItemClassName, this.selectGridItem);
      $(window).off('resize', this.resizeComponents);
    }
  }, {
    key: 'selectGridItem',
    value: function selectGridItem(e) {
      // Simply check that the original target of the event isn't a href link
      if (!$(e.target).is('a')) {
        e.preventDefault();
        this.$lastSelectedItem = this.$selectedItem;
        this.$selectedItem = $(e.currentTarget);
        this.render();
      }
    }
  }, {
    key: 'render',
    value: function render() {
      if (typeof this.$selectedItem != 'undefined' && this.$selectedItem !== null) {

        if (this.$lastSelectedItem !== null && this.$lastSelectedItem.length) {
          this.$lastSelectedItem.removeClass(this.isActiveClassName);
        }
        this.$selectedItem.addClass(this.isActiveClassName);

        // Delete previous container block if the new selected grid item is not in the same row
        if (this.containerBlock !== null && this.containerBlock.rowIndex !== -1 && this.containerBlock.rowIndex !== this.selectedItemRowIndex) {
          this.removeVisibleContainerBlock();
        }

        this.renderContainerBlock();
      }
    }
  }, {
    key: 'renderContainerBlock',
    value: function renderContainerBlock() {
      var lastSelectedItemIndex = this.$lastSelectedItem === null ? -1 : this.$gridItems.index(this.$lastSelectedItem);
      var lastSelectedItemRowIndex = Math.floor(lastSelectedItemIndex / this.nbElementsByRow) + 1;

      if (this.selectedItemRowIndex !== lastSelectedItemRowIndex) {
        this.createExpendableContainerBlock();
        this.scrollToExpendableContainerBlock();
        this.displayContainerBlock();
      } else {
        this.refreshExpendableContentBlock();
        this.scrollToExpendableContainerBlock();
        if (!this.containerBlock.isVisible) {
          this.displayContainerBlock();
        }
      }

      if (lastSelectedItemIndex === this.selectedItemIndex) {
        if (!this.containerBlock.isVisible) {
          this.displayContainerBlock();
        } else {
          this.hideContainerBlock();
        }
      }
    }
  }, {
    key: 'scrollToExpendableContainerBlock',
    value: function scrollToExpendableContainerBlock() {
      if (this.containerBlock !== null && typeof this.containerBlock.$item != 'undefined' && this.containerBlock.$item !== null) {
        var scrollTop = this.$selectedItem.offset().top - 80;
        $('body').animate({ scrollTop: scrollTop }, 35);
      }
    }

    /**
     * Delete the html of previously selected element
     */

  }, {
    key: 'removeVisibleContainerBlock',
    value: function removeVisibleContainerBlock() {
      if (this.containerBlock.$item !== null && this.containerBlock.$item.length) {
        this.containerBlock.$item.remove();
      }
    }

    /**
     * Create and insert html of current item.
     * It calculate row index and last item index
     */

  }, {
    key: 'createExpendableContainerBlock',
    value: function createExpendableContainerBlock() {

      var lastRowItemIndex = Number(this.selectedItemRowIndex * this.nbElementsByRow) - 1;
      if (this.$gridItems.length < lastRowItemIndex + 1) {
        lastRowItemIndex = this.$gridItems.length - 1;
      }

      var $lastRowItem = $(this.$gridItems[lastRowItemIndex]);

      var expendableContentBlock = '<div class="f-expandable-content js-expandableContent"></div>';
      var $expendableContentBlock = $(expendableContentBlock);

      var $expendableInitialContent = this.$selectedItem.find('.js-expandable-initialContent');
      if ($expendableInitialContent.length) {
        $expendableContentBlock.html($expendableInitialContent.html());
      }

      $expendableContentBlock.insertAfter($lastRowItem);

      this.containerBlock = {
        $item: this.$('.js-expandableContent'),
        rowIndex: this.selectedItemRowIndex
      };
    }
  }, {
    key: 'refreshExpendableContentBlock',
    value: function refreshExpendableContentBlock() {
      var $expendableInitialContent = this.$selectedItem.find('.js-expandable-initialContent');
      var content = !$expendableInitialContent.length ? '' : $expendableInitialContent.html();
      this.containerBlock.$item.html(content);
    }

    /**
     * Display container block after 25 milliseconds (because otherwise animations will have no effects)
     */

  }, {
    key: 'displayContainerBlock',
    value: function displayContainerBlock() {
      var _this3 = this;

      setTimeout(function () {
        _this3.containerBlock.$item.addClass(_this3.isActiveClassName);
        _this3.containerBlock.isVisible = true;
      }, 25);
    }
  }, {
    key: 'hideContainerBlock',
    value: function hideContainerBlock() {
      this.containerBlock.$item.removeClass(this.isActiveClassName);
      this.$selectedItem.removeClass(this.isActiveClassName);
      this.containerBlock.isVisible = false;
    }
  }, {
    key: 'events',


    /**
     * Add backbone events here
     */
    get: function get() {
      return {};
    }
  }, {
    key: 'selectedItemIndex',
    get: function get() {
      if (!this.$selectedItem.length || !this.$gridItems.length) {
        throw 'No item selected';
      }
      return this.$gridItems.index(this.$selectedItem);
    }
  }, {
    key: 'selectedItemRowIndex',
    get: function get() {
      return Math.floor(this.selectedItemIndex / this.nbElementsByRow) + 1;
    }
  }]);

  return ExpendableGridView;
}(Backbone.View);

;

exports.default = ExpendableGridView;

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.OffersGridView = exports.LoadProductOffersAction = exports.InitialPageIndex = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _MoneyFormatter = require('../../common/utils/MoneyFormatter');

var _MoneyFormatter2 = _interopRequireDefault(_MoneyFormatter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LoadProductOffersAction = 'loadProductOffers';
var NbMaxOffersByPage = 10;
var InitialPageIndex = 1;

var OffersGridView = function (_Backbone$View) {
    _inherits(OffersGridView, _Backbone$View);

    function OffersGridView() {
        _classCallCheck(this, OffersGridView);

        return _possibleConstructorReturn(this, (OffersGridView.__proto__ || Object.getPrototypeOf(OffersGridView)).apply(this, arguments));
    }

    _createClass(OffersGridView, [{
        key: 'initialize',
        value: function initialize(options) {
            this.model = options.model;
            this.setFilters({
                sort: this.model.OffersOrders[0].OffersOrderEnum,
                status: options.status,
                paging: {
                    current: InitialPageIndex
                }
            });
            this.render();
        }
    }, {
        key: 'setFilters',
        value: function setFilters(filters) {
            this.filters = deepAssign({}, this.filters, filters);
            this.calculatePaging(this.filters.paging.current);
        }
    }, {
        key: 'onOffersPreviousPageClicked',
        value: function onOffersPreviousPageClicked(e) {
            e.preventDefault();
            this.filters.paging.current = this.filters.paging.current - 1 < InitialPageIndex ? InitialPageIndex : this.filters.paging.current - 1;
            this.calculatePaging(this.filters.paging.current);
            this.reloadOffersList();
        }
    }, {
        key: 'onOffersNextPageClicked',
        value: function onOffersNextPageClicked(e) {
            e.preventDefault();
            this.filters.paging.current = this.filters.paging.current + 1 > this.filters.paging.total ? this.paging.total : this.filters.paging.current + 1;
            this.calculatePaging(this.filters.paging.current);
            this.reloadOffersList();
        }
    }, {
        key: 'calculatePaging',
        value: function calculatePaging(current) {
            var tmpNbPage = this.model.Offers.length / NbMaxOffersByPage;
            var nbPage = tmpNbPage % 1 != 0 ? Math.trunc(tmpNbPage) + 1 : tmpNbPage;
            this.filters.paging = {
                current: current,
                total: nbPage,
                activatePreviousButton: current - 1 > 0,
                activateNextButton: current + 1 <= nbPage
            };
        }
    }, {
        key: 'reloadOffersList',
        value: function reloadOffersList() {
            var options = {
                pageIndex: this.filters.paging.current,
                sort: this.filters.sort,
                status: this.filters.status
            };
            this.trigger(LoadProductOffersAction, options);
        }
    }, {
        key: 'onOffersOrderChanged',
        value: function onOffersOrderChanged(e) {
            this.filters.sort = Number(e.target.value);
            this.reloadOffersList();
        }
    }, {
        key: 'onOfferLinkClicked',
        value: function onOfferLinkClicked(e) {
            e.preventDefault();
            var $currentTarget = $(e.currentTarget);
            if ($currentTarget.length && typeof $currentTarget.data('link') != 'undefined') {
                Fnac.App.trigger('overlay:show');
                document.location.href = $currentTarget.data('link');
            }
        }
    }, {
        key: 'template',
        value: function template() {
            var _this2 = this;

            var model = Object.assign(this.model, {
                translations: Fnac.Translations.offers
            });

            model.OffersOrders = model.OffersOrders.map(function (o) {
                o.selected = o.OffersOrderEnum === _this2.filters.sort;
                return o;
            });

            model.Offers = model.Offers.map(function (o) {
                o.FormattedPrice = (0, _MoneyFormatter2.default)(o.Price, { decimal: 2 });
                return o;
            });

            model.paging = this.filters.paging;
            var partials = { OfferRaw: Fnac.Templates.Mustache.OfferRaw };
            return Fnac.Templates.Mustache.Offers.render(model, partials);
        }
    }, {
        key: 'render',
        value: function render() {
            var rendered = this.template();
            this.$el.html(rendered);
        }
    }, {
        key: 'events',
        get: function get() {
            return {
                'click .js-OfferLink': 'onOfferLinkClicked',
                'change .js-OffersOrder': 'onOffersOrderChanged',
                'click .js-OffersPreviousPage': 'onOffersPreviousPageClicked',
                'click .js-OffersNextPage': 'onOffersNextPageClicked'
            };
        }
    }]);

    return OffersGridView;
}(Backbone.View);

exports.InitialPageIndex = InitialPageIndex;
exports.LoadProductOffersAction = LoadProductOffersAction;
exports.OffersGridView = OffersGridView;

},{"../../common/utils/MoneyFormatter":2}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hideClassName = exports.ProductStatus = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _apiService = require('../../common/services/apiService');

var _apiService2 = _interopRequireDefault(_apiService);

var _VariantBoxView = require('./VariantBoxView');

var _VariantBoxView2 = _interopRequireDefault(_VariantBoxView);

var _OffersGridView = require('./OffersGridView');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _getProductOffersURL = function _getProductOffersURL(productId, catalogId) {
  var filtersOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  var url = Fnac.config.pathname + '/api/v1/nav/product/brandOffers/' + productId + '?articleRef=' + catalogId;
  if (typeof filtersOptions.pageIndex != 'undefined') {
    url += '&pageIndex=' + filtersOptions.pageIndex;
  }
  if (typeof filtersOptions.sort != 'undefined') {
    url += '&sortOrder=' + filtersOptions.sort;
  }
  if (typeof filtersOptions.status != 'undefined') {
    url += '&productStatus=' + filtersOptions.status;
  }
  return url;
};

var ProductStatus = exports.ProductStatus = {
  New: 1,
  Used: 2
};

var hideClassName = exports.hideClassName = 'hide';

var ProductHeaderContainerView = function (_Backbone$View) {
  _inherits(ProductHeaderContainerView, _Backbone$View);

  function ProductHeaderContainerView() {
    _classCallCheck(this, ProductHeaderContainerView);

    return _possibleConstructorReturn(this, (ProductHeaderContainerView.__proto__ || Object.getPrototypeOf(ProductHeaderContainerView)).apply(this, arguments));
  }

  _createClass(ProductHeaderContainerView, [{
    key: 'initialize',
    value: function initialize(options) {
      var _this2 = this;

      this.elements = {
        offersGridView: null,
        $tabList: this.$('.js-ProductSellers-tabList')
      };

      this.renderOptions = {
        activateScroll: false,
        displayOffersList: false
      };

      this.productId = this.$el.data('product-id');
      this.catalogId = this.$el.data('catalog-id');

      // Instantiate multiple views for all variant criterias
      this.variantViews = [];
      var $variantSections = this.$('.js-variantBox-section');
      $.each($variantSections, function (index, $variant) {
        _this2.variantViews.push(new _VariantBoxView2.default({ el: $variant }));
      });
    }
  }, {
    key: 'onOffersBackClicked',
    value: function onOffersBackClicked(e) {
      e.preventDefault();
      this.renderOptions.displayOffersList = false;
      this.elements.offersGridView.setFilters({ paging: { current: _OffersGridView.InitialPageIndex } });
      this.render();
    }
  }, {
    key: 'getProductOffers',
    value: function getProductOffers(productId, catalogReference) {
      var _this3 = this;

      var filtersOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      Fnac.App.trigger('overlay:show');
      var url = _getProductOffersURL(productId, catalogReference, filtersOptions);
      _apiService2.default.get(url).then(function (res) {
        Fnac.App.trigger('overlay:hide');
        _this3.offersModel = res;
        _this3.renderOptions = Object.assign({}, _this3.renderOptions, { displayOffersList: true });
        _this3.render();
      }).fail(function (err) {
        Fnac.App.trigger('flashmessage:show');
      });
    }
  }, {
    key: 'onMoreOffersClicked',
    value: function onMoreOffersClicked(e) {
      e.preventDefault();
      this.renderOptions.activateScroll = true;
      this.selectedStatus = ProductStatus.New;
      this.getProductOffers(this.productId, this.catalogId, {
        status: this.selectedStatus
      });
    }
  }, {
    key: 'onMoreUsedOffersClicked',
    value: function onMoreUsedOffersClicked(e) {
      e.preventDefault();
      this.renderOptions.activateScroll = true;
      this.selectedStatus = ProductStatus.Used;
      this.getProductOffers(this.productId, this.catalogId, {
        status: this.selectedStatus
      });
    }
  }, {
    key: 'changeFiltersToProductOffersList',
    value: function changeFiltersToProductOffersList(filters) {
      this.currentFilters = Object.assign({}, this.currentFilters, filters);
      this.getProductOffers(this.productId, this.catalogId, this.currentFilters);
    }
  }, {
    key: 'createOffersGridView',
    value: function createOffersGridView($el) {
      this.elements.offersGridView = new _OffersGridView.OffersGridView({ el: $el, status: this.selectedStatus, model: this.offersModel });
      this.listenTo(this.elements.offersGridView, _OffersGridView.LoadProductOffersAction, this.changeFiltersToProductOffersList);
    }
  }, {
    key: 'render',
    value: function render() {
      if (this.elements != null && this.elements.offersGridView === null) {
        var $offersContainer = this.$('.js-ModelVariant--OffersList');
        this.createOffersGridView($offersContainer);
      } else {
        this.elements.offersGridView.model = this.offersModel;
        this.elements.offersGridView.setFilters({ status: this.selectedStatus });
        this.elements.offersGridView.render();
      }

      if (this.renderOptions.displayOffersList) {
        this.elements.$tabList.addClass(hideClassName);
        this.elements.offersGridView.$el.removeClass(hideClassName);
        this.checkScrollTo(this.elements.offersGridView.$el.offset().top - 200);
      } else {
        this.elements.offersGridView.$el.addClass(hideClassName);
        this.elements.$tabList.removeClass(hideClassName);
        this.checkScrollTo(this.elements.$tabList.offset().top - 200);
      }
    }
  }, {
    key: 'checkScrollTo',
    value: function checkScrollTo(offset) {
      if (this.renderOptions.activateScroll === true) {
        this.renderOptions.activateScroll = false;
        $('html, body').animate({ scrollTop: offset });
      }
    }
  }, {
    key: 'events',
    get: function get() {
      return {
        'click .js-moreOffers': 'onMoreOffersClicked',
        'click .js-moreUsedOffers': 'onMoreUsedOffersClicked',
        'click .js-offersBack': 'onOffersBackClicked'
      };
    }
  }]);

  return ProductHeaderContainerView;
}(Backbone.View);

exports.default = ProductHeaderContainerView;

},{"../../common/services/apiService":1,"./OffersGridView":6,"./VariantBoxView":8}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VariantBoxView = function (_Backbone$View) {
  _inherits(VariantBoxView, _Backbone$View);

  function VariantBoxView() {
    _classCallCheck(this, VariantBoxView);

    return _possibleConstructorReturn(this, (VariantBoxView.__proto__ || Object.getPrototypeOf(VariantBoxView)).apply(this, arguments));
  }

  _createClass(VariantBoxView, [{
    key: 'initialize',
    value: function initialize(options) {
      this.isHiddenClassName = 'isHidden';
      this.renderOptions = {
        selectedVariant: {},
        nbHiddenVariants: 0,
        $itemsToDisplay: null
      };
      this.calculateVariantRows();
      $(window).on("resize", this.calculateVariantRows.bind(this));
    }
  }, {
    key: 'onSeeMoreVariantButtonClicked',
    value: function onSeeMoreVariantButtonClicked(e) {
      e.preventDefault();
      // const $crossClose = $(".js-seeMoreVariant").find(".f-variantBox-item--moreItems span .icon") ;
      //
      // const MAX_DISPLAY_ROWS = 2;
      //
      // const containerWidth = this.$el.outerWidth();
      // const $items = this.$el.find('.js-variantListItem');
      // const itemWidth = $items.outerWidth(true);
      // var nbItemsByRow = Math.trunc((containerWidth / itemWidth));
      // let nbRow = $items.length / nbItemsByRow;
      // nbRow = nbRow % 1 != 0 ? Math.trunc(nbRow) + 1 : nbRow;
      //
      // const lastItemIndexToShow = nbRow > MAX_DISPLAY_ROWS ? ((nbItemsByRow * MAX_DISPLAY_ROWS) - 1) : $items.length;
      //
      // if ( $crossClose.length ) {
      //   this.renderOptions.$itemsToDisplay = $items.slice(0, lastItemIndexToShow);
      //   this.renderOptions.nbHiddenVariants = nbRow > MAX_DISPLAY_ROWS ? $items.length - (lastItemIndexToShow + 1) + 1 : 0;
      //   this.render();
      //
      // } else {
      this.renderOptions.$itemsToDisplay = this.$el.find('.js-variantListItem');
      this.render();
      // }
    }
  }, {
    key: 'onVariantBoxItemMouseEntered',
    value: function onVariantBoxItemMouseEntered(e) {
      e.preventDefault();
      var $currentTarget = $(e.currentTarget);
      if ($currentTarget.length) {
        var variantValue = $currentTarget.data('variantvalue');
        this.renderOptions.selectedVariant = Object.assign({}, this.renderOptions.selectedVariant, {
          label: variantValue
        });

        var $variantImage = $currentTarget.find('.js-variantBox-pictureMainHover');
        if ($variantImage.length) {
          var imgsrc = $variantImage.data('mainimagehover');
          Fnac.App.trigger('product-visual:changeTempImage', imgsrc);
        }
        this.render();
      }
    }
  }, {
    key: 'onVariantListMouseLeaved',
    value: function onVariantListMouseLeaved(e) {
      var productMainImage = $(".js-ProductVisuals-imagePreview").data('urlimage');
      Fnac.App.trigger('product-visual:changeTempImage', productMainImage);
    }
  }, {
    key: 'onVariantBoxItemMouseLeaved',
    value: function onVariantBoxItemMouseLeaved(e) {
      e.preventDefault();
      this.renderOptions.selectedVariant.label = this.$('.js-variantBox-section').data('selectedvalue');

      var $currentTarget = $(e.currentTarget);
      var variantValue = $currentTarget.parent().parent().parent().data('selectedvalue');
      this.renderOptions.selectedVariant = Object.assign({}, this.renderOptions.selectedVariant, {
        label: variantValue
      });

      this.render();
    }

    /**
     * Calculate number of items to show when page is ready
     * (show on 2 lines on tablet/desktop & 1 line mobile)
     */

  }, {
    key: 'calculateVariantRows',
    value: function calculateVariantRows() {

      var MAX_DISPLAY_ROWS = 2;

      var containerWidth = this.$el.outerWidth();
      var $items = this.$el.find('.js-variantListItem');
      var itemWidth = $items.outerWidth(true);
      var nbItemsByRow = Math.trunc(containerWidth / itemWidth);

      var nbRow = $items.length / nbItemsByRow;
      nbRow = nbRow % 1 != 0 ? Math.trunc(nbRow) + 1 : nbRow;

      var lastItemIndexToShow = nbRow > MAX_DISPLAY_ROWS ? nbItemsByRow * MAX_DISPLAY_ROWS - 1 : $items.length;
      this.renderOptions.$itemsToDisplay = $items.slice(0, lastItemIndexToShow);
      this.renderOptions.nbHiddenVariants = nbRow > MAX_DISPLAY_ROWS ? $items.length - (lastItemIndexToShow + 1) + 1 : 0;

      this.render();
    }
  }, {
    key: 'createMoreVariantsButton',
    value: function createMoreVariantsButton() {
      var className = 'js-seeMoreVariant';
      var $seeMoreVariantButton = this.$el.find('.' + className);
      var moreVariantsButton = Fnac.Templates.Mustache.MoreVariantsButton.render({ NbItemsToShow: this.renderOptions.nbHiddenVariants });
      if (!$seeMoreVariantButton.length) {
        this.$('.js-variantList').append(moreVariantsButton);
      } else {
        this.$('.' + className).replaceWith(moreVariantsButton);
      }
      return this.$('.' + className);
    }
  }, {
    key: 'render',
    value: function render() {
      if (this.renderOptions.selectedVariant.label) {
        var $variantLabel = this.$('.js-variantBox-valueHover');
        if ($variantLabel.length) {
          $variantLabel.text(this.renderOptions.selectedVariant.label);
        }
      }

      if (this.renderOptions.$itemsToDisplay != null) {

        this.$el.find('.js-variantListItem').addClass(this.isHiddenClassName);
        this.renderOptions.$itemsToDisplay.removeClass(this.isHiddenClassName);

        var $seeMoreVariantButton = this.createMoreVariantsButton();
        if (this.renderOptions.nbHiddenVariants > 0) {
          $seeMoreVariantButton.removeClass(this.isHiddenClassName);
          console.log("calcul");
        } else {
          $seeMoreVariantButton.addClass(this.isHiddenClassName);
          // $seeMoreVariantButton.find(".f-variantBox-item--moreItems span").html("<i class='icon icon_i_037_cross_03'></i>");
        }
        this.renderOptions.$itemsToDisplay = null;
        this.renderOptions.nbHiddenVariants = 0;
      }
    }
  }, {
    key: 'remove',
    value: function remove() {
      $(window).off("resize", this.calculateVariantRows);
      Backbone.View.prototype.remove.apply(this, arguments);
    }
  }, {
    key: 'events',
    get: function get() {
      return {
        'mouseenter .js-variantBox-itemValue': 'onVariantBoxItemMouseEntered',
        'mouseleave .js-variantBox-itemValue': 'onVariantBoxItemMouseLeaved',
        'mouseleave .js-variantList': 'onVariantListMouseLeaved',
        'click .js-seeMoreVariant': 'onSeeMoreVariantButtonClicked'
      };
    }
  }]);

  return VariantBoxView;
}(Backbone.View);

exports.default = VariantBoxView;

},{}],9:[function(require,module,exports){
"use strict";

/*!
* accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
*/
(function (p, z) {
  function q(a) {
    return !!("" === a || a && a.charCodeAt && a.substr);
  }function m(a) {
    return u ? u(a) : "[object Array]" === v.call(a);
  }function r(a) {
    return "[object Object]" === v.call(a);
  }function s(a, b) {
    var d,
        a = a || {},
        b = b || {};for (d in b) {
      b.hasOwnProperty(d) && null == a[d] && (a[d] = b[d]);
    }return a;
  }function j(a, b, d) {
    var c = [],
        e,
        h;if (!a) return c;if (w && a.map === w) return a.map(b, d);for (e = 0, h = a.length; e < h; e++) {
      c[e] = b.call(d, a[e], e, a);
    }return c;
  }function n(a, b) {
    a = Math.round(Math.abs(a));return isNaN(a) ? b : a;
  }function x(a) {
    var b = c.settings.currency.format;"function" === typeof a && (a = a());return q(a) && a.match("%v") ? { pos: a, neg: a.replace("-", "").replace("%v", "-%v"), zero: a } : !a || !a.pos || !a.pos.match("%v") ? !q(b) ? b : c.settings.currency.format = { pos: b, neg: b.replace("%v", "-%v"), zero: b } : a;
  }var c = { version: "0.4.1", settings: { currency: { symbol: "$", format: "%s%v", decimal: ".", thousand: ",", precision: 2, grouping: 3 }, number: { precision: 0, grouping: 3, thousand: ",", decimal: "." } } },
      w = Array.prototype.map,
      u = Array.isArray,
      v = Object.prototype.toString,
      o = c.unformat = c.parse = function (a, b) {
    if (m(a)) return j(a, function (a) {
      return o(a, b);
    });a = a || 0;if ("number" === typeof a) return a;var b = b || ".",
        c = RegExp("[^0-9-" + b + "]", ["g"]),
        c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(b, "."));return !isNaN(c) ? c : 0;
  },
      y = c.toFixed = function (a, b) {
    var b = n(b, c.settings.number.precision),
        d = Math.pow(10, b);return (Math.round(c.unformat(a) * d) / d).toFixed(b);
  },
      t = c.formatNumber = c.format = function (a, b, d, i) {
    if (m(a)) return j(a, function (a) {
      return t(a, b, d, i);
    });var a = o(a),
        e = s(r(b) ? b : { precision: b, thousand: d, decimal: i }, c.settings.number),
        h = n(e.precision),
        f = 0 > a ? "-" : "",
        g = parseInt(y(Math.abs(a || 0), h), 10) + "",
        l = 3 < g.length ? g.length % 3 : 0;return f + (l ? g.substr(0, l) + e.thousand : "") + g.substr(l).replace(/(\d{3})(?=\d)/g, "$1" + e.thousand) + (h ? e.decimal + y(Math.abs(a), h).split(".")[1] : "");
  },
      A = c.formatMoney = function (a, b, d, i, e, h) {
    if (m(a)) return j(a, function (a) {
      return A(a, b, d, i, e, h);
    });var a = o(a),
        f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency),
        g = x(f.format);return (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal));
  };c.formatColumn = function (a, b, d, i, e, h) {
    if (!a) return [];var f = s(r(b) ? b : { symbol: b, precision: d, thousand: i, decimal: e, format: h }, c.settings.currency),
        g = x(f.format),
        l = g.pos.indexOf("%s") < g.pos.indexOf("%v") ? !0 : !1,
        k = 0,
        a = j(a, function (a) {
      if (m(a)) return c.formatColumn(a, f);a = o(a);a = (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal));if (a.length > k) k = a.length;return a;
    });return j(a, function (a) {
      return q(a) && a.length < k ? l ? a.replace(f.symbol, f.symbol + Array(k - a.length + 1).join(" ")) : Array(k - a.length + 1).join(" ") + a : a;
    });
  };if ("undefined" !== typeof exports) {
    if ("undefined" !== typeof module && module.exports) exports = module.exports = c;exports.accounting = c;
  } else "function" === typeof define && define.amd ? define([], function () {
    return c;
  }) : (c.noConflict = function (a) {
    return function () {
      p.accounting = a;c.noConflict = z;return c;
    };
  }(p.accounting), p.accounting = c);
})(undefined);

},{}],10:[function(require,module,exports){
(function (global){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

(function () {

  // Baseline setup
  // --------------

  // Establish the root object, `window` (`self`) in the browser, `global`
  // on the server, or `this` in some virtual machines. We use `self`
  // instead of `window` for `WebWorker` support.
  var root = (typeof self === 'undefined' ? 'undefined' : _typeof(self)) == 'object' && self.self === self && self || (typeof global === 'undefined' ? 'undefined' : _typeof(global)) == 'object' && global.global === global && global || this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype,
      ObjProto = Object.prototype;
  var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;

  // Create quick reference variables for speed access to core prototypes.
  var push = ArrayProto.push,
      slice = ArrayProto.slice,
      toString = ObjProto.toString,
      hasOwnProperty = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var nativeIsArray = Array.isArray,
      nativeKeys = Object.keys,
      nativeCreate = Object.create;

  // Naked function reference for surrogate-prototype-swapping.
  var Ctor = function Ctor() {};

  // Create a safe reference to the Underscore object for use below.
  var _ = function _(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for their old module API. If we're in
  // the browser, add `_` as a global object.
  // (`nodeType` is checked to ensure that `module`
  // and `exports` are not HTML elements.)
  if (typeof exports != 'undefined' && !exports.nodeType) {
    if (typeof module != 'undefined' && !module.nodeType && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root._ = _;
  }

  // Current version.
  _.VERSION = '1.8.3';

  // Internal function that returns an efficient (for current engines) version
  // of the passed-in callback, to be repeatedly applied in other Underscore
  // functions.
  var optimizeCb = function optimizeCb(func, context, argCount) {
    if (context === void 0) return func;
    switch (argCount == null ? 3 : argCount) {
      case 1:
        return function (value) {
          return func.call(context, value);
        };
      // The 2-parameter case has been omitted only because no current consumers
      // made use of it.
      case 3:
        return function (value, index, collection) {
          return func.call(context, value, index, collection);
        };
      case 4:
        return function (accumulator, value, index, collection) {
          return func.call(context, accumulator, value, index, collection);
        };
    }
    return function () {
      return func.apply(context, arguments);
    };
  };

  var builtinIteratee;

  // An internal function to generate callbacks that can be applied to each
  // element in a collection, returning the desired result — either `identity`,
  // an arbitrary callback, a property matcher, or a property accessor.
  var cb = function cb(value, context, argCount) {
    if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);
    if (value == null) return _.identity;
    if (_.isFunction(value)) return optimizeCb(value, context, argCount);
    if (_.isObject(value)) return _.matcher(value);
    return _.property(value);
  };

  // External wrapper for our callback generator. Users may customize
  // `_.iteratee` if they want additional predicate/iteratee shorthand styles.
  // This abstraction hides the internal-only argCount argument.
  _.iteratee = builtinIteratee = function builtinIteratee(value, context) {
    return cb(value, context, Infinity);
  };

  // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)
  // This accumulates the arguments passed into an array, after a given index.
  var restArgs = function restArgs(func, startIndex) {
    startIndex = startIndex == null ? func.length - 1 : +startIndex;
    return function () {
      var length = Math.max(arguments.length - startIndex, 0);
      var rest = Array(length);
      for (var index = 0; index < length; index++) {
        rest[index] = arguments[index + startIndex];
      }
      switch (startIndex) {
        case 0:
          return func.call(this, rest);
        case 1:
          return func.call(this, arguments[0], rest);
        case 2:
          return func.call(this, arguments[0], arguments[1], rest);
      }
      var args = Array(startIndex + 1);
      for (index = 0; index < startIndex; index++) {
        args[index] = arguments[index];
      }
      args[startIndex] = rest;
      return func.apply(this, args);
    };
  };

  // An internal function for creating a new object that inherits from another.
  var baseCreate = function baseCreate(prototype) {
    if (!_.isObject(prototype)) return {};
    if (nativeCreate) return nativeCreate(prototype);
    Ctor.prototype = prototype;
    var result = new Ctor();
    Ctor.prototype = null;
    return result;
  };

  var property = function property(key) {
    return function (obj) {
      return obj == null ? void 0 : obj[key];
    };
  };

  // Helper for collection methods to determine whether a collection
  // should be iterated as an array or as an object.
  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
  var getLength = property('length');
  var isArrayLike = function isArrayLike(collection) {
    var length = getLength(collection);
    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
  };

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles raw objects in addition to array-likes. Treats all
  // sparse array-likes as if they were dense.
  _.each = _.forEach = function (obj, iteratee, context) {
    iteratee = optimizeCb(iteratee, context);
    var i, length;
    if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
        iteratee(obj[i], i, obj);
      }
    } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
        iteratee(obj[keys[i]], keys[i], obj);
      }
    }
    return obj;
  };

  // Return the results of applying the iteratee to each element.
  _.map = _.collect = function (obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length,
        results = Array(length);
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      results[index] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Create a reducing function iterating left or right.
  var createReduce = function createReduce(dir) {
    // Wrap code that reassigns argument variables in a separate function than
    // the one that accesses `arguments.length` to avoid a perf hit. (#1991)
    var reducer = function reducer(obj, iteratee, memo, initial) {
      var keys = !isArrayLike(obj) && _.keys(obj),
          length = (keys || obj).length,
          index = dir > 0 ? 0 : length - 1;
      if (!initial) {
        memo = obj[keys ? keys[index] : index];
        index += dir;
      }
      for (; index >= 0 && index < length; index += dir) {
        var currentKey = keys ? keys[index] : index;
        memo = iteratee(memo, obj[currentKey], currentKey, obj);
      }
      return memo;
    };

    return function (obj, iteratee, memo, context) {
      var initial = arguments.length >= 3;
      return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);
    };
  };

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`.
  _.reduce = _.foldl = _.inject = createReduce(1);

  // The right-associative version of reduce, also known as `foldr`.
  _.reduceRight = _.foldr = createReduce(-1);

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function (obj, predicate, context) {
    var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;
    var key = keyFinder(obj, predicate, context);
    if (key !== void 0 && key !== -1) return obj[key];
  };

  // Return all the elements that pass a truth test.
  // Aliased as `select`.
  _.filter = _.select = function (obj, predicate, context) {
    var results = [];
    predicate = cb(predicate, context);
    _.each(obj, function (value, index, list) {
      if (predicate(value, index, list)) results.push(value);
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function (obj, predicate, context) {
    return _.filter(obj, _.negate(cb(predicate)), context);
  };

  // Determine whether all of the elements match a truth test.
  // Aliased as `all`.
  _.every = _.all = function (obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (!predicate(obj[currentKey], currentKey, obj)) return false;
    }
    return true;
  };

  // Determine if at least one element in the object matches a truth test.
  // Aliased as `any`.
  _.some = _.any = function (obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (predicate(obj[currentKey], currentKey, obj)) return true;
    }
    return false;
  };

  // Determine if the array or object contains a given item (using `===`).
  // Aliased as `includes` and `include`.
  _.contains = _.includes = _.include = function (obj, item, fromIndex, guard) {
    if (!isArrayLike(obj)) obj = _.values(obj);
    if (typeof fromIndex != 'number' || guard) fromIndex = 0;
    return _.indexOf(obj, item, fromIndex) >= 0;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = restArgs(function (obj, method, args) {
    var isFunc = _.isFunction(method);
    return _.map(obj, function (value) {
      var func = isFunc ? method : value[method];
      return func == null ? func : func.apply(value, args);
    });
  });

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function (obj, key) {
    return _.map(obj, _.property(key));
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // containing specific `key:value` pairs.
  _.where = function (obj, attrs) {
    return _.filter(obj, _.matcher(attrs));
  };

  // Convenience version of a common use case of `find`: getting the first object
  // containing specific `key:value` pairs.
  _.findWhere = function (obj, attrs) {
    return _.find(obj, _.matcher(attrs));
  };

  // Return the maximum element (or element-based computation).
  _.max = function (obj, iteratee, context) {
    var result = -Infinity,
        lastComputed = -Infinity,
        value,
        computed;
    if (iteratee == null || typeof iteratee == 'number' && _typeof(obj[0]) != 'object' && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value != null && value > result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function (v, index, list) {
        computed = iteratee(v, index, list);
        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
          result = v;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Return the minimum element (or element-based computation).
  _.min = function (obj, iteratee, context) {
    var result = Infinity,
        lastComputed = Infinity,
        value,
        computed;
    if (iteratee == null || typeof iteratee == 'number' && _typeof(obj[0]) != 'object' && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value != null && value < result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function (v, index, list) {
        computed = iteratee(v, index, list);
        if (computed < lastComputed || computed === Infinity && result === Infinity) {
          result = v;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Shuffle a collection.
  _.shuffle = function (obj) {
    return _.sample(obj, Infinity);
  };

  // Sample **n** random values from a collection using the modern version of the
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
  // If **n** is not specified, returns a single random element.
  // The internal `guard` argument allows it to work with `map`.
  _.sample = function (obj, n, guard) {
    if (n == null || guard) {
      if (!isArrayLike(obj)) obj = _.values(obj);
      return obj[_.random(obj.length - 1)];
    }
    var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);
    var length = getLength(sample);
    n = Math.max(Math.min(n, length), 0);
    var last = length - 1;
    for (var index = 0; index < n; index++) {
      var rand = _.random(index, last);
      var temp = sample[index];
      sample[index] = sample[rand];
      sample[rand] = temp;
    }
    return sample.slice(0, n);
  };

  // Sort the object's values by a criterion produced by an iteratee.
  _.sortBy = function (obj, iteratee, context) {
    var index = 0;
    iteratee = cb(iteratee, context);
    return _.pluck(_.map(obj, function (value, key, list) {
      return {
        value: value,
        index: index++,
        criteria: iteratee(value, key, list)
      };
    }).sort(function (left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index - right.index;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function group(behavior, partition) {
    return function (obj, iteratee, context) {
      var result = partition ? [[], []] : {};
      iteratee = cb(iteratee, context);
      _.each(obj, function (value, index) {
        var key = iteratee(value, index, obj);
        behavior(result, value, key);
      });
      return result;
    };
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = group(function (result, value, key) {
    if (_.has(result, key)) result[key].push(value);else result[key] = [value];
  });

  // Indexes the object's values by a criterion, similar to `groupBy`, but for
  // when you know that your index values will be unique.
  _.indexBy = group(function (result, value, key) {
    result[key] = value;
  });

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = group(function (result, value, key) {
    if (_.has(result, key)) result[key]++;else result[key] = 1;
  });

  var reStrSymbol = /[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;
  // Safely create a real, live array from anything iterable.
  _.toArray = function (obj) {
    if (!obj) return [];
    if (_.isArray(obj)) return slice.call(obj);
    if (_.isString(obj)) {
      // Keep surrogate pair characters together
      return obj.match(reStrSymbol);
    }
    if (isArrayLike(obj)) return _.map(obj, _.identity);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function (obj) {
    if (obj == null) return 0;
    return isArrayLike(obj) ? obj.length : _.keys(obj).length;
  };

  // Split a collection into two arrays: one whose elements all satisfy the given
  // predicate, and one whose elements all do not satisfy the predicate.
  _.partition = group(function (result, value, pass) {
    result[pass ? 0 : 1].push(value);
  }, true);

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function (array, n, guard) {
    if (array == null || array.length < 1) return void 0;
    if (n == null || guard) return array[0];
    return _.initial(array, array.length - n);
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N.
  _.initial = function (array, n, guard) {
    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array.
  _.last = function (array, n, guard) {
    if (array == null || array.length < 1) return void 0;
    if (n == null || guard) return array[array.length - 1];
    return _.rest(array, Math.max(0, array.length - n));
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array.
  _.rest = _.tail = _.drop = function (array, n, guard) {
    return slice.call(array, n == null || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function (array) {
    return _.filter(array, Boolean);
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function flatten(input, shallow, strict, output) {
    output = output || [];
    var idx = output.length;
    for (var i = 0, length = getLength(input); i < length; i++) {
      var value = input[i];
      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
        // Flatten current level of array or arguments object.
        if (shallow) {
          var j = 0,
              len = value.length;
          while (j < len) {
            output[idx++] = value[j++];
          }
        } else {
          flatten(value, shallow, strict, output);
          idx = output.length;
        }
      } else if (!strict) {
        output[idx++] = value;
      }
    }
    return output;
  };

  // Flatten out an array, either recursively (by default), or just one level.
  _.flatten = function (array, shallow) {
    return flatten(array, shallow, false);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = restArgs(function (array, otherArrays) {
    return _.difference(array, otherArrays);
  });

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function (array, isSorted, iteratee, context) {
    if (!_.isBoolean(isSorted)) {
      context = iteratee;
      iteratee = isSorted;
      isSorted = false;
    }
    if (iteratee != null) iteratee = cb(iteratee, context);
    var result = [];
    var seen = [];
    for (var i = 0, length = getLength(array); i < length; i++) {
      var value = array[i],
          computed = iteratee ? iteratee(value, i, array) : value;
      if (isSorted) {
        if (!i || seen !== computed) result.push(value);
        seen = computed;
      } else if (iteratee) {
        if (!_.contains(seen, computed)) {
          seen.push(computed);
          result.push(value);
        }
      } else if (!_.contains(result, value)) {
        result.push(value);
      }
    }
    return result;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = restArgs(function (arrays) {
    return _.uniq(flatten(arrays, true, true));
  });

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function (array) {
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = getLength(array); i < length; i++) {
      var item = array[i];
      if (_.contains(result, item)) continue;
      var j;
      for (j = 1; j < argsLength; j++) {
        if (!_.contains(arguments[j], item)) break;
      }
      if (j === argsLength) result.push(item);
    }
    return result;
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = restArgs(function (array, rest) {
    rest = flatten(rest, true, true);
    return _.filter(array, function (value) {
      return !_.contains(rest, value);
    });
  });

  // Complement of _.zip. Unzip accepts an array of arrays and groups
  // each array's elements on shared indices.
  _.unzip = function (array) {
    var length = array && _.max(array, getLength).length || 0;
    var result = Array(length);

    for (var index = 0; index < length; index++) {
      result[index] = _.pluck(array, index);
    }
    return result;
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = restArgs(_.unzip);

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function (list, values) {
    var result = {};
    for (var i = 0, length = getLength(list); i < length; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // Generator function to create the findIndex and findLastIndex functions.
  var createPredicateIndexFinder = function createPredicateIndexFinder(dir) {
    return function (array, predicate, context) {
      predicate = cb(predicate, context);
      var length = getLength(array);
      var index = dir > 0 ? 0 : length - 1;
      for (; index >= 0 && index < length; index += dir) {
        if (predicate(array[index], index, array)) return index;
      }
      return -1;
    };
  };

  // Returns the first index on an array-like that passes a predicate test.
  _.findIndex = createPredicateIndexFinder(1);
  _.findLastIndex = createPredicateIndexFinder(-1);

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function (array, obj, iteratee, context) {
    iteratee = cb(iteratee, context, 1);
    var value = iteratee(obj);
    var low = 0,
        high = getLength(array);
    while (low < high) {
      var mid = Math.floor((low + high) / 2);
      if (iteratee(array[mid]) < value) low = mid + 1;else high = mid;
    }
    return low;
  };

  // Generator function to create the indexOf and lastIndexOf functions.
  var createIndexFinder = function createIndexFinder(dir, predicateFind, sortedIndex) {
    return function (array, item, idx) {
      var i = 0,
          length = getLength(array);
      if (typeof idx == 'number') {
        if (dir > 0) {
          i = idx >= 0 ? idx : Math.max(idx + length, i);
        } else {
          length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
        }
      } else if (sortedIndex && idx && length) {
        idx = sortedIndex(array, item);
        return array[idx] === item ? idx : -1;
      }
      if (item !== item) {
        idx = predicateFind(slice.call(array, i, length), _.isNaN);
        return idx >= 0 ? idx + i : -1;
      }
      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
        if (array[idx] === item) return idx;
      }
      return -1;
    };
  };

  // Return the position of the first occurrence of an item in an array,
  // or -1 if the item is not included in the array.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function (start, stop, step) {
    if (stop == null) {
      stop = start || 0;
      start = 0;
    }
    if (!step) {
      step = stop < start ? -1 : 1;
    }

    var length = Math.max(Math.ceil((stop - start) / step), 0);
    var range = Array(length);

    for (var idx = 0; idx < length; idx++, start += step) {
      range[idx] = start;
    }

    return range;
  };

  // Split an **array** into several arrays containing **count** or less elements
  // of initial array.
  _.chunk = function (array, count) {
    if (count == null || count < 1) return [];

    var result = [];
    var i = 0,
        length = array.length;
    while (i < length) {
      result.push(slice.call(array, i, i += count));
    }
    return result;
  };

  // Function (ahem) Functions
  // ------------------

  // Determines whether to execute a function as a constructor
  // or a normal function with the provided arguments.
  var executeBound = function executeBound(sourceFunc, boundFunc, context, callingContext, args) {
    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
    var self = baseCreate(sourceFunc.prototype);
    var result = sourceFunc.apply(self, args);
    if (_.isObject(result)) return result;
    return self;
  };

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
  // available.
  _.bind = restArgs(function (func, context, args) {
    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
    var bound = restArgs(function (callArgs) {
      return executeBound(func, bound, context, this, args.concat(callArgs));
    });
    return bound;
  });

  // Partially apply a function by creating a version that has had some of its
  // arguments pre-filled, without changing its dynamic `this` context. _ acts
  // as a placeholder by default, allowing any combination of arguments to be
  // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.
  _.partial = restArgs(function (func, boundArgs) {
    var placeholder = _.partial.placeholder;
    var bound = function bound() {
      var position = 0,
          length = boundArgs.length;
      var args = Array(length);
      for (var i = 0; i < length; i++) {
        args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];
      }
      while (position < arguments.length) {
        args.push(arguments[position++]);
      }return executeBound(func, bound, this, this, args);
    };
    return bound;
  });

  _.partial.placeholder = _;

  // Bind a number of an object's methods to that object. Remaining arguments
  // are the method names to be bound. Useful for ensuring that all callbacks
  // defined on an object belong to it.
  _.bindAll = restArgs(function (obj, keys) {
    keys = flatten(keys, false, false);
    var index = keys.length;
    if (index < 1) throw new Error('bindAll must be passed function names');
    while (index--) {
      var key = keys[index];
      obj[key] = _.bind(obj[key], obj);
    }
  });

  // Memoize an expensive function by storing its results.
  _.memoize = function (func, hasher) {
    var memoize = function memoize(key) {
      var cache = memoize.cache;
      var address = '' + (hasher ? hasher.apply(this, arguments) : key);
      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
      return cache[address];
    };
    memoize.cache = {};
    return memoize;
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = restArgs(function (func, wait, args) {
    return setTimeout(function () {
      return func.apply(null, args);
    }, wait);
  });

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = _.partial(_.delay, _, 1);

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time. Normally, the throttled function will run
  // as much as it can, without ever going more than once per `wait` duration;
  // but if you'd like to disable the execution on the leading edge, pass
  // `{leading: false}`. To disable execution on the trailing edge, ditto.
  _.throttle = function (func, wait, options) {
    var timeout, context, args, result;
    var previous = 0;
    if (!options) options = {};

    var later = function later() {
      previous = options.leading === false ? 0 : _.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };

    var throttled = function throttled() {
      var now = _.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };

    throttled.cancel = function () {
      clearTimeout(timeout);
      previous = 0;
      timeout = context = args = null;
    };

    return throttled;
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function (func, wait, immediate) {
    var timeout, result;

    var later = function later(context, args) {
      timeout = null;
      if (args) result = func.apply(context, args);
    };

    var debounced = restArgs(function (args) {
      if (timeout) clearTimeout(timeout);
      if (immediate) {
        var callNow = !timeout;
        timeout = setTimeout(later, wait);
        if (callNow) result = func.apply(this, args);
      } else {
        timeout = _.delay(later, wait, this, args);
      }

      return result;
    });

    debounced.cancel = function () {
      clearTimeout(timeout);
      timeout = null;
    };

    return debounced;
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function (func, wrapper) {
    return _.partial(wrapper, func);
  };

  // Returns a negated version of the passed-in predicate.
  _.negate = function (predicate) {
    return function () {
      return !predicate.apply(this, arguments);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function () {
    var args = arguments;
    var start = args.length - 1;
    return function () {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) {
        result = args[i].call(this, result);
      }return result;
    };
  };

  // Returns a function that will only be executed on and after the Nth call.
  _.after = function (times, func) {
    return function () {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Returns a function that will only be executed up to (but not including) the Nth call.
  _.before = function (times, func) {
    var memo;
    return function () {
      if (--times > 0) {
        memo = func.apply(this, arguments);
      }
      if (times <= 1) func = null;
      return memo;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = _.partial(_.before, 2);

  _.restArgs = restArgs;

  // Object Functions
  // ----------------

  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
  var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');
  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

  var collectNonEnumProps = function collectNonEnumProps(obj, keys) {
    var nonEnumIdx = nonEnumerableProps.length;
    var constructor = obj.constructor;
    var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;

    // Constructor is a special case.
    var prop = 'constructor';
    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

    while (nonEnumIdx--) {
      prop = nonEnumerableProps[nonEnumIdx];
      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
        keys.push(prop);
      }
    }
  };

  // Retrieve the names of an object's own properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`.
  _.keys = function (obj) {
    if (!_.isObject(obj)) return [];
    if (nativeKeys) return nativeKeys(obj);
    var keys = [];
    for (var key in obj) {
      if (_.has(obj, key)) keys.push(key);
    } // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve all the property names of an object.
  _.allKeys = function (obj) {
    if (!_.isObject(obj)) return [];
    var keys = [];
    for (var key in obj) {
      keys.push(key);
    } // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function (obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var values = Array(length);
    for (var i = 0; i < length; i++) {
      values[i] = obj[keys[i]];
    }
    return values;
  };

  // Returns the results of applying the iteratee to each element of the object.
  // In contrast to _.map it returns an object.
  _.mapObject = function (obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = _.keys(obj),
        length = keys.length,
        results = {};
    for (var index = 0; index < length; index++) {
      var currentKey = keys[index];
      results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function (obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var pairs = Array(length);
    for (var i = 0; i < length; i++) {
      pairs[i] = [keys[i], obj[keys[i]]];
    }
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function (obj) {
    var result = {};
    var keys = _.keys(obj);
    for (var i = 0, length = keys.length; i < length; i++) {
      result[obj[keys[i]]] = keys[i];
    }
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`.
  _.functions = _.methods = function (obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // An internal function for creating assigner functions.
  var createAssigner = function createAssigner(keysFunc, defaults) {
    return function (obj) {
      var length = arguments.length;
      if (defaults) obj = Object(obj);
      if (length < 2 || obj == null) return obj;
      for (var index = 1; index < length; index++) {
        var source = arguments[index],
            keys = keysFunc(source),
            l = keys.length;
        for (var i = 0; i < l; i++) {
          var key = keys[i];
          if (!defaults || obj[key] === void 0) obj[key] = source[key];
        }
      }
      return obj;
    };
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = createAssigner(_.allKeys);

  // Assigns a given object with all the own properties in the passed-in object(s).
  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
  _.extendOwn = _.assign = createAssigner(_.keys);

  // Returns the first key on an object that passes a predicate test.
  _.findKey = function (obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = _.keys(obj),
        key;
    for (var i = 0, length = keys.length; i < length; i++) {
      key = keys[i];
      if (predicate(obj[key], key, obj)) return key;
    }
  };

  // Internal pick helper function to determine if `obj` has key `key`.
  var keyInObj = function keyInObj(value, key, obj) {
    return key in obj;
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = restArgs(function (obj, keys) {
    var result = {},
        iteratee = keys[0];
    if (obj == null) return result;
    if (_.isFunction(iteratee)) {
      if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);
      keys = _.allKeys(obj);
    } else {
      iteratee = keyInObj;
      keys = flatten(keys, false, false);
      obj = Object(obj);
    }
    for (var i = 0, length = keys.length; i < length; i++) {
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
    }
    return result;
  });

  // Return a copy of the object without the blacklisted properties.
  _.omit = restArgs(function (obj, keys) {
    var iteratee = keys[0],
        context;
    if (_.isFunction(iteratee)) {
      iteratee = _.negate(iteratee);
      if (keys.length > 1) context = keys[1];
    } else {
      keys = _.map(flatten(keys, false, false), String);
      iteratee = function iteratee(value, key) {
        return !_.contains(keys, key);
      };
    }
    return _.pick(obj, iteratee, context);
  });

  // Fill in a given object with default properties.
  _.defaults = createAssigner(_.allKeys, true);

  // Creates an object that inherits from the given prototype object.
  // If additional properties are provided then they will be added to the
  // created object.
  _.create = function (prototype, props) {
    var result = baseCreate(prototype);
    if (props) _.extendOwn(result, props);
    return result;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function (obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function (obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Returns whether an object has a given set of `key:value` pairs.
  _.isMatch = function (object, attrs) {
    var keys = _.keys(attrs),
        length = keys.length;
    if (object == null) return !length;
    var obj = Object(object);
    for (var i = 0; i < length; i++) {
      var key = keys[i];
      if (attrs[key] !== obj[key] || !(key in obj)) return false;
    }
    return true;
  };

  // Internal recursive comparison function for `isEqual`.
  var eq, deepEq;
  eq = function eq(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
    if (a === b) return a !== 0 || 1 / a === 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // `NaN`s are equivalent, but non-reflexive.
    if (a !== a) return b !== b;
    // Exhaust primitive checks
    var type = typeof a === 'undefined' ? 'undefined' : _typeof(a);
    if (type !== 'function' && type !== 'object' && (typeof b === 'undefined' ? 'undefined' : _typeof(b)) != 'object') return false;
    return deepEq(a, b, aStack, bStack);
  };

  // Internal recursive comparison function for `isEqual`.
  deepEq = function deepEq(a, b, aStack, bStack) {
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className !== toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, regular expressions, dates, and booleans are compared by value.
      case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return '' + a === '' + b;
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive.
        // Object(NaN) is equivalent to NaN.
        if (+a !== +a) return +b !== +b;
        // An `egal` comparison is performed for other numeric values.
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a === +b;
      case '[object Symbol]':
        return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);
    }

    var areArrays = className === '[object Array]';
    if (!areArrays) {
      if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) != 'object' || (typeof b === 'undefined' ? 'undefined' : _typeof(b)) != 'object') return false;

      // Objects with different constructors are not equivalent, but `Object`s or `Array`s
      // from different frames are.
      var aCtor = a.constructor,
          bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor && _.isFunction(bCtor) && bCtor instanceof bCtor) && 'constructor' in a && 'constructor' in b) {
        return false;
      }
    }
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

    // Initializing stack of traversed objects.
    // It's done here since we only need them for objects and arrays comparison.
    aStack = aStack || [];
    bStack = bStack || [];
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] === a) return bStack[length] === b;
    }

    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);

    // Recursively compare objects and arrays.
    if (areArrays) {
      // Compare array lengths to determine if a deep comparison is necessary.
      length = a.length;
      if (length !== b.length) return false;
      // Deep compare the contents, ignoring non-numeric properties.
      while (length--) {
        if (!eq(a[length], b[length], aStack, bStack)) return false;
      }
    } else {
      // Deep compare objects.
      var keys = _.keys(a),
          key;
      length = keys.length;
      // Ensure that both objects contain the same number of properties before comparing deep equality.
      if (_.keys(b).length !== length) return false;
      while (length--) {
        // Deep compare each member
        key = keys[length];
        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return true;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function (a, b) {
    return eq(a, b);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function (obj) {
    if (obj == null) return true;
    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
    return _.keys(obj).length === 0;
  };

  // Is a given value a DOM element?
  _.isElement = function (obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function (obj) {
    return toString.call(obj) === '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function (obj) {
    var type = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);
    return type === 'function' || type === 'object' && !!obj;
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.
  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function (name) {
    _['is' + name] = function (obj) {
      return toString.call(obj) === '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE < 9), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function (obj) {
      return _.has(obj, 'callee');
    };
  }

  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
  // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).
  var nodelist = root.document && root.document.childNodes;
  if (typeof /./ != 'function' && (typeof Int8Array === 'undefined' ? 'undefined' : _typeof(Int8Array)) != 'object' && typeof nodelist != 'function') {
    _.isFunction = function (obj) {
      return typeof obj == 'function' || false;
    };
  }

  // Is a given object a finite number?
  _.isFinite = function (obj) {
    return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));
  };

  // Is the given value `NaN`?
  _.isNaN = function (obj) {
    return _.isNumber(obj) && isNaN(obj);
  };

  // Is a given value a boolean?
  _.isBoolean = function (obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function (obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function (obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function (obj, key) {
    return obj != null && hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function () {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iteratees.
  _.identity = function (value) {
    return value;
  };

  // Predicate-generating functions. Often useful outside of Underscore.
  _.constant = function (value) {
    return function () {
      return value;
    };
  };

  _.noop = function () {};

  _.property = property;

  // Generates a function for a given object that returns a given property.
  _.propertyOf = function (obj) {
    return obj == null ? function () {} : function (key) {
      return obj[key];
    };
  };

  // Returns a predicate for checking whether an object has a given set of
  // `key:value` pairs.
  _.matcher = _.matches = function (attrs) {
    attrs = _.extendOwn({}, attrs);
    return function (obj) {
      return _.isMatch(obj, attrs);
    };
  };

  // Run a function **n** times.
  _.times = function (n, iteratee, context) {
    var accum = Array(Math.max(0, n));
    iteratee = optimizeCb(iteratee, context, 1);
    for (var i = 0; i < n; i++) {
      accum[i] = iteratee(i);
    }return accum;
  };

  // Return a random integer between min and max (inclusive).
  _.random = function (min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + Math.floor(Math.random() * (max - min + 1));
  };

  // A (possibly faster) way to get the current timestamp as an integer.
  _.now = Date.now || function () {
    return new Date().getTime();
  };

  // List of HTML entities for escaping.
  var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '`': '&#x60;'
  };
  var unescapeMap = _.invert(escapeMap);

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  var createEscaper = function createEscaper(map) {
    var escaper = function escaper(match) {
      return map[match];
    };
    // Regexes for identifying a key that needs to be escaped.
    var source = '(?:' + _.keys(map).join('|') + ')';
    var testRegexp = RegExp(source);
    var replaceRegexp = RegExp(source, 'g');
    return function (string) {
      string = string == null ? '' : '' + string;
      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
    };
  };
  _.escape = createEscaper(escapeMap);
  _.unescape = createEscaper(unescapeMap);

  // If the value of the named `property` is a function then invoke it with the
  // `object` as context; otherwise, return it.
  _.result = function (object, prop, fallback) {
    var value = object == null ? void 0 : object[prop];
    if (value === void 0) {
      value = fallback;
    }
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function (prefix) {
    var id = ++idCounter + '';
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate: /<%([\s\S]+?)%>/g,
    interpolate: /<%=([\s\S]+?)%>/g,
    escape: /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'": "'",
    '\\': '\\',
    '\r': 'r',
    '\n': 'n',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escapeRegExp = /\\|'|\r|\n|\u2028|\u2029/g;

  var escapeChar = function escapeChar(match) {
    return '\\' + escapes[match];
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  // NB: `oldSettings` only exists for backwards compatibility.
  _.template = function (text, settings, oldSettings) {
    if (!settings && oldSettings) settings = oldSettings;
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = RegExp([(settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);
      index = offset + match.length;

      if (escape) {
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
      } else if (interpolate) {
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
      } else if (evaluate) {
        source += "';\n" + evaluate + "\n__p+='";
      }

      // Adobe VMs need the match returned to produce the correct offset.
      return match;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," + "print=function(){__p+=__j.call(arguments,'');};\n" + source + 'return __p;\n';

    var render;
    try {
      render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    var template = function template(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled source as a convenience for precompilation.
    var argument = settings.variable || 'obj';
    template.source = 'function(' + argument + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function. Start chaining a wrapped Underscore object.
  _.chain = function (obj) {
    var instance = _(obj);
    instance._chain = true;
    return instance;
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var chainResult = function chainResult(instance, obj) {
    return instance._chain ? _(obj).chain() : obj;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function (obj) {
    _.each(_.functions(obj), function (name) {
      var func = _[name] = obj[name];
      _.prototype[name] = function () {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return chainResult(this, func.apply(_, args));
      };
    });
    return _;
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (name) {
    var method = ArrayProto[name];
    _.prototype[name] = function () {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
      return chainResult(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  _.each(['concat', 'join', 'slice'], function (name) {
    var method = ArrayProto[name];
    _.prototype[name] = function () {
      return chainResult(this, method.apply(this._wrapped, arguments));
    };
  });

  // Extracts the result from a wrapped and chained object.
  _.prototype.value = function () {
    return this._wrapped;
  };

  // Provide unwrapping proxy for some methods used in engine operations
  // such as arithmetic and JSON stringification.
  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

  _.prototype.toString = function () {
    return String(this._wrapped);
  };

  // AMD registration happens at the end for compatibility with AMD loaders
  // that may not enforce next-turn semantics on modules. Even though general
  // practice for AMD registration is to be anonymous, underscore registers
  // as a named module because, like jQuery, it is a base library that is
  // popular enough to be bundled in a third party lib, but not be part of
  // an AMD load request. Those cases could generate an error when an
  // anonymous define() is called outside of a loader request.
  if (typeof define == 'function' && define.amd) {
    define('underscore', [], function () {
      return _;
    });
  }
})();

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[3]);
;